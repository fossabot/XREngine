(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7114],{48710:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(68625),a=t(26395),i=t(87400),o=t(27878),l=t(10101),c=t(31451),s=t(37530),u=t(91394),d=t(42543),m=t(81879),p=t(97724),f=t(78806),g=t(68236),Z=t(23868),E=o.forwardRef((function(e,n){var t=e.action,a=e.classes,c=e.className,s=e.message,u=e.role,d=void 0===u?"alert":u,m=(0,r.Z)(e,["action","classes","className","message","role"]);return o.createElement(g.Z,(0,i.Z)({role:d,square:!0,elevation:6,className:(0,l.Z)(a.root,c),ref:n},m),o.createElement("div",{className:a.message},s),t?o.createElement("div",{className:a.action},t):null)})),v=(0,c.Z)((function(e){var n="light"===e.palette.type?.8:.98,t=(0,Z._4)(e.palette.background.default,n);return{root:(0,i.Z)({},e.typography.body2,(0,a.Z)({color:e.palette.getContrastText(t),backgroundColor:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(E),b=o.forwardRef((function(e,n){var t=e.action,a=e.anchorOrigin,c=(a=void 0===a?{vertical:"bottom",horizontal:"center"}:a).vertical,g=a.horizontal,Z=e.autoHideDuration,E=void 0===Z?null:Z,b=e.children,h=e.classes,x=e.className,w=e.ClickAwayListenerProps,k=e.ContentProps,y=e.disableWindowBlurListener,C=void 0!==y&&y,N=e.message,I=e.onClose,L=e.onEnter,T=e.onEntered,P=e.onEntering,R=e.onExit,S=e.onExited,D=e.onExiting,O=e.onMouseEnter,B=e.onMouseLeave,M=e.open,_=e.resumeHideDuration,j=e.TransitionComponent,z=void 0===j?f.Z:j,H=e.transitionDuration,A=void 0===H?{enter:s.x9.enteringScreen,exit:s.x9.leavingScreen}:H,W=e.TransitionProps,G=(0,r.Z)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),U=o.useRef(),q=o.useState(!0),$=q[0],X=q[1],F=(0,d.Z)((function(){I&&I.apply(void 0,arguments)})),J=(0,d.Z)((function(e){I&&null!=e&&(clearTimeout(U.current),U.current=setTimeout((function(){F(null,"timeout")}),e))}));o.useEffect((function(){return M&&J(E),function(){clearTimeout(U.current)}}),[M,E,J]);var K=function(){clearTimeout(U.current)},Q=o.useCallback((function(){null!=E&&J(null!=_?_:.5*E)}),[E,_,J]);return o.useEffect((function(){if(!C&&M)return window.addEventListener("focus",Q),window.addEventListener("blur",K),function(){window.removeEventListener("focus",Q),window.removeEventListener("blur",K)}}),[C,Q,M]),!M&&$?null:o.createElement(u.Z,(0,i.Z)({onClickAway:function(e){I&&I(e,"clickaway")}},w),o.createElement("div",(0,i.Z)({className:(0,l.Z)(h.root,h["anchorOrigin".concat((0,m.Z)(c)).concat((0,m.Z)(g))],x),onMouseEnter:function(e){O&&O(e),K()},onMouseLeave:function(e){B&&B(e),Q()},ref:n},G),o.createElement(z,(0,i.Z)({appear:!0,in:M,onEnter:(0,p.Z)((function(){X(!1)}),L),onEntered:T,onEntering:P,onExit:R,onExited:(0,p.Z)((function(){X(!0)}),S),onExiting:D,timeout:A,direction:"top"===c?"down":"up"},W),b||o.createElement(v,(0,i.Z)({message:N,action:t},k)))))})),h=(0,c.Z)((function(e){var n={top:8},t={bottom:8},r={justifyContent:"flex-end"},o={justifyContent:"flex-start"},l={top:24},c={bottom:24},s={right:24},u={left:24},d={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:(0,i.Z)({},n,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({},l,d))),anchorOriginBottomCenter:(0,i.Z)({},t,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({},c,d))),anchorOriginTopRight:(0,i.Z)({},n,r,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({left:"auto"},l,s))),anchorOriginBottomRight:(0,i.Z)({},t,r,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({left:"auto"},c,s))),anchorOriginTopLeft:(0,i.Z)({},n,o,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({right:"auto"},l,u))),anchorOriginBottomLeft:(0,i.Z)({},t,o,(0,a.Z)({},e.breakpoints.up("sm"),(0,i.Z)({right:"auto"},c,u)))}}),{flip:!1,name:"MuiSnackbar"})(b)},17114:function(e,n,t){"use strict";var r=t(15194),a=t(48533),i=t.n(a),o=t(58700),l=t(64414),c=t(27878),s=t(14571),u=t(50191),d=t(67577),m=t.n(d),p=t(18751),f=t(78920),g=t(19740),Z=t(85134),E=t(3841),v=t(64432),b=t(27674),h=t(52299),x=t(37541),w=t(646),k=t(95866),y=t(90858),C=t.n(y),N=t(25700),I=t(33859),L=t(92384),T=t(23568),P=t(48710),R=t(4276);function S(e){return c.createElement(R.Z,Object.assign({elevation:6,variant:"filled"},e))}var D=(0,t(14270).Z)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));n.Z=(0,T.withRouter)((0,s.$j)((function(e){return{appState:(0,N.p_)(e),authState:(0,I._)(e),adminState:(0,u.e)(e)}}),(function(e){return{}}))((function(e){var n,t=e.router,a=e.open,s=e.handleClose,u=e.instance,d=(D(),c.useState(!1)),y=(0,l.Z)(d,2),N=y[0],I=y[1],T=c.useState(""),R=(0,l.Z)(T,2),O=R[0],B=R[1],M=(0,c.useRef)(),_=(0,c.useState)([]),j=_[0],z=_[1],H=function(){var e=(0,o.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(null===u||void 0===u?void 0:u.id)||""===(null===u||void 0===u?void 0:u.id)||M.current!==u.id){e.next=6;break}return e.next=3,L.L.service("user").find({query:{$limit:1e3,instanceId:u.id}});case 3:n=e.sent,z(n.data),0===n.total?setTimeout((function(){s()}),5e3):setTimeout((function(){H()}),2e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){M.current=null===u||void 0===u?void 0:u.id,H()}),[u]);var A=[{id:"id",numeric:!1,disablePadding:!0,label:"ID"},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"instanceId",numeric:!1,disablePadding:!1,label:"Instance ID"},{id:"userRole",numeric:!1,disablePadding:!1,label:"User Role"},{id:"partyId",numeric:!1,disablePadding:!1,label:"Party ID"}],W=function(){var e=(0,o.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.L.service("location").get(u.locationId);case 3:n=e.sent,r="/location/".concat(n.slugifiedName,"?instanceId=").concat(u.id),t.push(r),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error redirecting to instance:"),console.log(e.t0),B("Error redirecting to instannce!......"+e.t0.message),I(!0);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function G(e){var n=e.order,t=e.orderBy;return c.createElement(p.Z,{className:m().thead},c.createElement(f.Z,{className:m().trow},A.map((function(e){return c.createElement(g.Z,{className:m().tcell,key:e.id,align:"right",padding:e.disablePadding?"none":"default",sortDirection:t===e.id&&n},c.createElement(Z.Z,{active:t===e.id,direction:t===e.id?n:"asc"},e.label))}))))}return c.createElement("div",null,c.createElement(E.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:m().modal,open:a,onClose:s,closeAfterTransition:!0,BackdropComponent:v.Z,BackdropProps:{timeout:500}},c.createElement(b.Z,{in:e.open},c.createElement("div",{className:C()((n={},(0,r.Z)(n,m().paper,!0),(0,r.Z)(n,m()["modal-content"],!0),n))},c.createElement("div",{className:m().instanceUsersHeader},c.createElement("div",null,"Users on instance ",u.id),c.createElement(h.Z,{variant:"contained",color:"primary",onClick:W},"Go to Instance")),c.createElement(x.Z,null,c.createElement(w.Z,{"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},c.createElement(G,{object:"users",order:"asc",orderBy:"name",rowCount:(null===j||void 0===j?void 0:j.length)||0}),c.createElement(k.Z,{className:m().thead},null!=j&&j.map((function(e,n){return c.createElement(f.Z,{className:m().trow,style:{color:"black !important"},tabIndex:-1,key:e.id},c.createElement(g.Z,{className:m().tcell,component:"th",id:e.id.toString(),align:"right",scope:"row",padding:"none"},e.id),c.createElement(g.Z,{className:m().tcell,align:"right"},e.name),c.createElement(g.Z,{className:m().tcell,align:"right"},e.instanceId),c.createElement(g.Z,{className:m().tcell,align:"right"},e.userRole),c.createElement(g.Z,{className:m().tcell,align:"right"},e.partyId))})))))))),c.createElement(P.Z,{open:N,autoHideDuration:6e3,onClose:function(){return I(!1)},anchorOrigin:{vertical:"top",horizontal:"right"}},c.createElement(S,{onClose:function(){return I(!1)},severity:"error"},O)))})))}}]);