(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1127],{21250:function(e,t,r){"use strict";r.d(t,{y:function(){return S}});var n=r(49182),a=r(39337),i=r(94780),o=r(13987),s=r(29569),c=r(89306),u=r(483),d=r(88203),l=r(16090),p=r(93228),f=r(77301),h=r(83052),m=r(95812),v=r(82552),g=r(38936);function y(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var a=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var _="undefined"!==typeof navigator&&/chrome/i.test(navigator.userAgent);function x(e){var t=new Audio;return t.setAttribute("autoplay","autoplay"),t.setAttribute("playsinline","playsinline"),t.srcObject=e,t.volume=0,t}var S=function(e){(0,o.Z)(r,e);var t=w(r);function r(e){var a;return(0,n.Z)(this,r),(a=t.call(this,e)).characterAudioStream=new Map,r.instance=(0,i.Z)(a),u.D4.useAudioSystem=!0,a}return(0,a.Z)(r,[{key:"execute",value:function(){var e,t,r,n,a,i=this,o=y(this.queryResults.audio.added);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=(0,l.Ei)(s,g.t);null!=c&&(c.value=new u.VY(u.D4.audioListener))}}catch(Q){o.e(Q)}finally{o.f()}var d,m=y(this.queryResults.audio.removed);try{for(m.s();!(d=m.n()).done;){var b=d.value,w=(0,l.Xr)(b,g.t,!0);null!=(null===w||void 0===w?void 0:w.value)&&w.value.disconnect()}}catch(Q){m.e(Q)}finally{m.f()}var S,k=y(this.queryResults.character_audio.changed);try{for(k.s();!(S=k.n()).done;){var R=S.value,C=(0,l.Xr)(R,f.H);C&&function(){var t=C.ownerId;null==(null===(e=h.p.instance)||void 0===e?void 0:e.consumers.find((function(e){return e.appData.peerId===t&&"cam-audio"===e.appData.mediaTag})))&&null!=i.characterAudioStream.get(R)&&i.characterAudioStream.delete(R)}()}}catch(Q){k.e(Q)}finally{k.f()}var P,T=y(this.queryResults.character_audio.all);try{for(T.s();!(P=T.n()).done;){var E=P.value;if(!(0,l.tu)(E,p.$)){var D=(0,l.Xr)(E,f.H),I=void 0;if(null!=D&&function(){var e=D.ownerId;I=null===(t=h.p.instance)||void 0===t?void 0:t.consumers.find((function(t){return t.appData.peerId===e&&"cam-audio"===t.appData.mediaTag}))}(),(!this.characterAudioStream.has(E)||null==I||I.id!==this.characterAudioStream.get(E).id)&&I){var M=I.track;this.characterAudioStream.set(E,M);var O=(0,l.Xr)(E,g.t),L=new MediaStream([M.clone()]);_&&x(L);var Z=O.value.context.createMediaStreamSource(L);"suspended"===O.value.context.state&&O.value.context.resume(),O.value.setNodeSource(Z)}}}}catch(Q){T.e(Q)}finally{T.f()}var j,A=y(this.queryResults.character_audio.removed);try{for(A.s();!(j=A.n()).done;){var N=j.value;this.characterAudioStream.delete(N)}}catch(Q){A.e(Q)}finally{A.f()}var F,B=y(this.queryResults.positional_audio.added);try{for(B.s();!(F=B.n()).done;){var z=F.value,U=(0,l.Xr)(z,g.t);null!=U&&u.D4.scene.add(U.value)}}catch(Q){B.e(Q)}finally{B.f()}var H,V=y(this.queryResults.positional_audio.changed);try{for(V.s();!(H=V.n()).done;){var W=H.value,q=(0,l.Xr)(W,g.t),G=(0,l.Xr)(W,v.U);null!=q&&(null===(r=q.value)||void 0===r||r.position.copy(G.position),null===(n=q.value)||void 0===n||n.rotation.setFromQuaternion(G.rotation))}}catch(Q){V.e(Q)}finally{V.f()}var $,Y=y(this.queryResults.positional_audio.removed);try{for(Y.s();!($=Y.n()).done;){var K=$.value,X=(0,l.Xr)(K,g.t,!0);null!=X&&u.D4.scene.remove(X.value)}}catch(Q){Y.e(Q)}finally{Y.f()}}},{key:"suspend",value:function(){var e,t,r,n=y(this.queryResults.character_audio.all);try{for(n.s();!(r=n.n()).done;){var a=r.value;null===(t=null===(e=(0,l.Xr)(a,g.t).value)||void 0===e?void 0:e.context)||void 0===t||t.suspend()}}catch(i){n.e(i)}finally{n.f()}}},{key:"resume",value:function(){var e,t,r,n=y(this.queryResults.character_audio.all);try{for(n.s();!(r=n.n()).done;){var a=r.value;null===(t=null===(e=(0,l.Xr)(a,g.t).value)||void 0===e?void 0:e.context)||void 0===t||t.resume()}}catch(i){n.e(i)}finally{n.f()}}}]),r}(d.x);S.instance=null,S.queries={positional_audio:{components:[g.t,v.U],listen:{added:!0,changed:!0,removed:!0}},character_audio:{components:[g.t,m.rl],listen:{added:!0,changed:!0,removed:!0}},audio:{components:[g.t],listen:{added:!0,removed:!0}}}},46365:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var n="undefined"!==typeof window&&"undefined"!==typeof window.performance?performance.now.bind(performance):Date.now.bind(Date)},91433:function(e,t,r){"use strict";r.d(t,{j2:function(){return l},ht:function(){return p},RC:function(){return h}});var n=r(15194),a=r(46365),i=r(483),o=(r(88203),r(16090)),s=r(51462),c=r(17356);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e){i.D4.options=d(d({},i.D4.options),e),i.D4.lastTime=(0,a.z)()/1e3}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.V.Free;i.D4.tick++,e||(t=(0,a.z)()/1e3,e=t-i.D4.lastTime,i.D4.lastTime=t),i.D4.enabled&&(i.D4.systemsToExecute.forEach((function(n){return(0,s.Cr)(n,e,t,r)})),f())}function f(){if(i.D4.deferredRemovalEnabled){for(var e=i.D4.entitiesToRemove,t=i.D4.entitiesWithComponentsToRemove,r=0;r<e.length;r++){var n=e[r],a=i.D4.entities.indexOf(n);i.D4.entities.splice(a,1),i.D4.entityMap.delete(String(n.id)),n._pool.release(n)}e.length=0;for(var o=0;o<t.length;o++)for(var s=t[o];s.componentTypesToRemove.length>0;){var c=s.componentTypesToRemove.pop(),u=s.componentsToRemove[c._typeId];delete s.componentsToRemove[c._typeId],u.dispose(),i.D4.numComponents[u._typeId]--}i.D4.entitiesWithComponentsToRemove.length=0}}function h(){var e;i.D4.engineTimerTimeout&&clearTimeout(i.D4.engineTimerTimeout),null===(e=i.D4.engineTimer)||void 0===e||e.stop(),function(){if(i.D4.entities.forEach((function(e){(0,o.PF)(e,!1)})),p(.001),(0,o.yb)(),p(.001),i.D4.entities.length)throw console.log("Engine.entities.length",i.D4.entities.length),new Error("Engine.entities cleanup not complete");i.D4.tick=0,i.D4.entities.length=0,i.D4.entitiesToRemove.length=0,i.D4.entitiesWithComponentsToRemove.length=0,i.D4.nextEntityId=0,i.D4.components.length=0,i.D4.nextComponentId=0,i.D4.systems.forEach((function(e){e.dispose()})),i.D4.systems.length=0,i.D4.systemsToExecute.length=0,i.D4.queries.length=0,i.D4.eventDispatcher.reset(),i.D4.scene&&(i.D4.scene=null),i.D4.camera=null,i.D4.renderer&&(i.D4.renderer.dispose(),i.D4.renderer=null)}()}},86916:function(e,t,r){"use strict";r.d(t,{IG:function(){return le},cJ:function(){return pe}});var n=r(48533),a=r.n(n),i=r(15194),o=r(58700),s=r(35231),c=r.n(s),u=r(36595),d=r(33236),l=r(60235),p=r(21769),f=r(99814),h=r(3780),m=r(483),v=r(91433),g=r(51462),y=r(17356),b=r(44590),w=r(50760),_=r(41912),x=r(83052),S=r(49182),k=r(13987),R=r(29569),C=r(89306),P=r(77094),T=r(97762),E=r(88203),D=r(16090),I=r(7331),M=r(5450),O=r(5418),L=r(12665),Z=r(86693),j=r(95812),A=r(61467),N=r(77301),F=r(86433),B=r(33221);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,C.Z)(e);if(t){var a=(0,C.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,R.Z)(this,r)}}(function(e){(0,k.Z)(r,e);var t=U(r);function r(e){var n;(0,S.Z)(this,r),(n=t.call(this,e)).updateType=y.V.Fixed,n.execute=function(e){var t,r,a;A.Z.tick++,A.Z.instance.worldState={tick:A.Z.tick,time:0,transforms:[],inputs:[],states:[],clientsConnected:A.Z.instance.clientsConnected,clientsDisconnected:A.Z.instance.clientsDisconnected,createObjects:A.Z.instance.createObjects,editObjects:A.Z.instance.editObjects,destroyObjects:A.Z.instance.destroyObjects},A.Z.instance.clientsConnected=[],A.Z.instance.clientsDisconnected=[],A.Z.instance.createObjects=[],A.Z.instance.editObjects=[],A.Z.instance.destroyObjects=[];for(var o=function(){var r=A.Z.instance.incomingMessageQueue.pop(),a=F.DA.fromBuffer(r);if(void 0===A.Z.instance.networkObjects[a.networkId])return console.error("Network object not found for networkId",a.networkId),{v:void 0};var i=(0,D.Ei)(A.Z.instance.networkObjects[a.networkId].component.entity,j.rl);i&&i.viewVector.set(a.viewVector.x,a.viewVector.y,a.viewVector.z),function(e){var t=A.Z.instance.networkObjects[e.networkId].component.entity;if((0,D.tu)(t,L.I)){var r=(0,D.Xr)(t,L.I),n=A.Z.instance.networkObjects[r.networkCarId].component.entity;if((0,D.tu)(n,Z.t)){for(var a=0;a<e.buttons.length;a++)if(8==e.buttons[a].input)for(var i=(0,D.Ei)(n,Z.t),o=0;o<i.seatPlane.length;o++)i[i.seatPlane[o]]==e.networkId&&(i.wantsExit=[null,null],i.wantsExit[o]=e.networkId);(0,D.Xr)(n,Z.t).passenger==e.networkId&&(e.buttons=e.buttons.filter((function(e){return 8==e.input})))}}}(a),a.switchInputs&&console.warn("switchInputs: "+a.switchInputs),a.switchInputs&&function(e){var t=null;t=(0,D.tu)(A.Z.instance.networkObjects[e.networkId].component.entity,L.I)?e.networkId:e.switchInputs;var r=(0,D.Ei)(A.Z.instance.networkObjects[t].component.entity,I.I);r.data.clear();for(var n=0;n<e.buttons.length;n++)r.data.set(e.buttons[n].input,{type:O.n.BUTTON,value:e.buttons[n].value,lifecycleState:T.q.ENDED});for(var a=0;a<e.axes1d.length;a++)r.data.set(e.axes1d[a].input,{type:O.n.ONEDIM,value:e.axes1d[a].value,lifecycleState:T.q.ENDED});for(var i=0;i<e.axes2d.length;i++)r.data.set(e.axes2d[i].input,{type:O.n.TWODIM,value:e.axes2d[i].value,lifecycleState:T.q.ENDED});for(var o=0;o<e.axes6DOF.length;o++)r.data.set(e.axes6DOF[o].input,{type:O.n.SIXDOF,value:{x:e.axes6DOF[o].x,y:e.axes6DOF[o].y,z:e.axes6DOF[o].z,qX:e.axes6DOF[o].qX,qY:e.axes6DOF[o].qY,qZ:e.axes6DOF[o].qZ,qW:e.axes6DOF[o].qW},lifecycleState:T.q.CONTINUED}),console.log("*************** SETTING 6DOF FOR ",e.axes6DOF[o].input)}(a),(0,D.Ei)(A.Z.instance.networkObjects[a.networkId].component.entity,N.H).snapShotTime=a.snapShotTime,a.networkId=function(e){return(0,D.tu)(A.Z.instance.networkObjects[e.networkId].component.entity,L.I)?(0,D.Xr)(A.Z.instance.networkObjects[e.networkId].component.entity,L.I).networkCarId:e.networkId}(a);var o=(0,D.Ei)(A.Z.instance.networkObjects[a.networkId].component.entity,I.I);if(!o)return{v:void 0};o.data.clear();for(var s=0;s<a.buttons.length;s++)o.data.set(a.buttons[s].input,{type:O.n.BUTTON,value:a.buttons[s].value,lifecycleState:a.buttons[s].lifecycleState});for(var c=0;c<a.axes1d.length;c++)o.data.set(a.axes1d[c].input,{type:O.n.ONEDIM,value:a.axes1d[c].value,lifecycleState:a.axes1d[c].lifecycleState});for(var u=0;u<a.axes2d.length;u++)o.data.set(a.axes2d[u].input,{type:O.n.TWODIM,value:a.axes2d[u].value,lifecycleState:a.axes2d[u].lifecycleState});for(var d=0;d<a.axes6DOF.length;d++)o.data.set(a.axes6DOF[d].input,{type:O.n.SIXDOF,value:{x:a.axes6DOF[d].x,y:a.axes6DOF[d].y,z:a.axes6DOF[d].z,qX:a.axes6DOF[d].qX,qY:a.axes6DOF[d].qY,qZ:a.axes6DOF[d].qZ,qW:a.axes6DOF[d].qW},lifecycleState:T.q.CONTINUED}),console.log("********* SETTING 6DOF INPUT IN SERVER INCOMING SYSTEM");null===(t=n.queryResults.networkObjectsWithInput.all)||void 0===t||t.forEach((function(t){var r;!function(e,t,r){var n=(0,D.Ei)(e,I.I);n.data.forEach((function(t,a){var i,o,s,c,u,d;if(t.type===O.n.BUTTON)n.schema.inputButtonBehaviors[a]&&(t.value===P.E.ON?t.lifecycleState===T.q.STARTED?null===(i=n.schema.inputButtonBehaviors[a].started)||void 0===i||i.forEach((function(t){t.behavior(e,t.args,r)})):t.lifecycleState===T.q.CONTINUED&&(null===(o=n.schema.inputButtonBehaviors[a].continued)||void 0===o||o.forEach((function(t){return t.behavior(e,t.args,r)}))):null===(s=n.schema.inputButtonBehaviors[a].ended)||void 0===s||s.forEach((function(t){return t.behavior(e,t.args,r)})));else if(n.schema.inputAxisBehaviors[a])switch(t.lifecycleState){case T.q.STARTED:null===(c=n.schema.inputAxisBehaviors[a].started)||void 0===c||c.forEach((function(t){return t.behavior(e,t.args,r)}));break;case T.q.CHANGED:null===(u=n.schema.inputAxisBehaviors[a].changed)||void 0===u||u.forEach((function(t){t.behavior(e,t.args,r)}));break;case T.q.UNCHANGED:null===(d=n.schema.inputAxisBehaviors[a].unchanged)||void 0===d||d.forEach((function(t){return t.behavior(e,t.args,r)}));break;case T.q.ENDED:console.warn("Patch fix, need to handle properly: ",T.q.ENDED);break;default:console.error("Unexpected lifecycleState",t.lifecycleState,T.q[t.lifecycleState])}}))}(t,0,e);var n=(0,D.Ei)(t,I.I),a=(null===(r=n.data.get(M.Q.WALK))||void 0===r?void 0:r.value)===P.E.ON;i.moveSpeed=a?j.W:j.CT,n.data.forEach((function(e,t){e.type===O.n.BUTTON&&e.lifecycleState===T.q.ENDED&&n.data.delete(t)}))}))};A.Z.instance.incomingMessageQueue.getBufferLength()>0;){var s=o();if("object"===typeof s)return s.v}null===(r=n.queryResults.networkObjectsWithInput.added)||void 0===r||r.forEach((function(e){var t;if(n._inputComponent=(0,D.Xr)(e,I.I),void 0===n._inputComponent)return console.warn("Tried to execute on a newly added input component, but it was undefined");null===(t=n._inputComponent.schema.onAdded)||void 0===t||t.forEach((function(t){t.behavior(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.args))}))})),null===(a=n.queryResults.networkObjectsWithInput.removed)||void 0===a||a.forEach((function(e){var t,r,a;n._inputComponent=(0,D.Xr)(e,I.I),null===(a=null===(r=null===(t=n._inputComponent)||void 0===t?void 0:t.schema)||void 0===r?void 0:r.onRemoved)||void 0===a||a.forEach((function(t){t.behavior(e,t.args)}))}))};var a=e.schema,o=e.app;return A.Z.instance.schema=a,A.Z.instance.transport=new a.transport(o),n.isServer=A.Z.instance.transport.isServer,void 0===B.env.SERVER_MODE||"realtime"!==B.env.SERVER_MODE&&"local"!==B.env.SERVER_MODE||(A.Z.instance.transport.initialize(),A.Z.instance.isInitialized=!0),n}return r}(E.x)).queries={networkObjectsWithInput:{components:[N.H,I.I],listen:{added:!0,removed:!0}}};var H=r(82552),V=r(64922);function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,C.Z)(e);if(t){var a=(0,C.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,R.Z)(this,r)}}(function(e){(0,k.Z)(r,e);var t=W(r);function r(e){var n;return(0,S.Z)(this,r),(n=t.call(this,e)).updateType=y.V.Fixed,n.execute=function(e){var t;if(null===(t=n.queryResults.networkTransforms.all)||void 0===t||t.forEach((function(e){var t=(0,D.Xr)(e,H.U),r=(0,D.Xr)(e,N.H),n=0;void 0!=r.snapShotTime&&(n=r.snapShotTime),A.Z.instance.worldState.transforms.push({networkId:r.networkId,snapShotTime:n,x:t.position.x,y:t.position.y,z:t.position.z,qX:t.rotation.x,qY:t.rotation.y,qZ:t.rotation.z,qW:t.rotation.w})})),A.Z.instance.worldState.clientsConnected.length||A.Z.instance.worldState.clientsDisconnected.length||A.Z.instance.worldState.createObjects.length||A.Z.instance.worldState.editObjects.length||A.Z.instance.worldState.destroyObjects.length){var r=V.C.toBuffer(A.Z.instance.worldState,"Reliable");A.Z.instance.transport.sendReliableData(r)}var a=V.C.toBuffer(A.Z.instance.worldState,"Unreliable");try{A.Z.instance.transport.sendData(a)}catch(i){console.warn("Couldn't send data: ",i)}},n}return r}(E.x)).queries={networkTransforms:{components:[N.H,H.U]}};var q=r(16254),G=r(94223),$=r(44978),Y=r(83244),K=function(){if(!$.n2&&!$.UG){var e=document.createElement("canvas");return document.body.appendChild(e),(0,Y.g)(e),e}},X=r(83697),Q=r(74861),J=r(74745),ee=r(50097),te=r(81537),re=r(5969),ne=r(98847),ae=r(46428),ie=r(34452),oe=r(6290),se=r(52194),ce=r(76207);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}u.Kj0.prototype.raycast=d.uL,u.u9r.prototype.computeBoundsTree=d.Xy,"undefined"!==typeof window&&(window.iOS=!window.MSStream&&/iPad|iPhone|iPod/.test(navigator.userAgent),window.safariWebBrowser=!window.MSStream&&/Safari/.test(navigator.userAgent));var le={input:{schema:te.M},networking:{schema:ne.ZS},state:{schema:re.s}},pe=function(){var e=(0,o.Z)(a().mark((function e(){var t,n,i,o,s,d,S,k,R=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.length>0&&void 0!==R[0]?R[0]:le,i=c().defaultsDeep({},t,le),o=i.renderer.canvas||K(),e.next=5,null===(n=navigator.xr)||void 0===n?void 0:n.isSessionSupported("immersive-vr");case 5:if(m.D4.xrSupported=e.sent,!(s=!m.D4.xrSupported&&"transferControlToOffscreen"in o)){e.next=17;break}return e.next=10,(0,ce.ez)(new Worker(new URL(r.p+r.u(5747),r.b)),i.renderer.canvas||K(),{});case 10:d=e.sent,ie.NL.instance=new ie.cD(d),m.D4.viewportElement=i.renderer.canvas,S=function e(t){ie.NL.instance.dispatchEvent({type:_.T.EVENTS.INITIALIZE,userId:A.Z.instance.userId}),ie.NL.instance.removeEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD,e)},ie.NL.instance.addEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD,S),e.next=20;break;case 17:ie.NL.instance=new ie.NL,m.D4.scene=new u.xsS,(0,ie.On)();case 20:(0,ie.rj)(),(0,v.j2)(),k={schema:i.networking.schema,app:i.networking.app},(0,g.$6)(_.T,de(de({},k),{},{priority:-1})),(0,g.$6)(x.p),(0,g.$6)(oe.d,{useWebXR:m.D4.xrSupported}),s||((0,g.$6)(l.Z),(0,g.$6)(G.F),(0,g.$6)(ee.z),(0,g.$6)(J.w,{priority:899}),(0,g.$6)(ae.W,{priority:900}),m.D4.camera=new u.cPb(60,window.innerWidth/window.innerHeight,.3,750),m.D4.scene.add(m.D4.camera),(0,g.$6)(X.x),(0,g.$6)(b.V,{useWebXR:m.D4.xrSupported}),(0,g.$6)(w.Pf),(0,g.$6)(q.p),(0,g.$6)(h.n),(0,g.$6)(p.D),(0,g.$6)(Q.eq,{priority:1001,canvas:o}),(0,g.$6)(se.T,{offscreen:s}),m.D4.viewportElement=m.D4.renderer.domElement,m.D4.renderer.xr.enabled=m.D4.xrSupported),m.D4.engineTimerTimeout=setTimeout((function(){m.D4.engineTimer=(0,f.B7)({networkUpdate:function(e,t){return(0,v.ht)(e,t,y.V.Network)},fixedUpdate:function(e,t){return(0,v.ht)(e,t,y.V.Fixed)},update:function(e,t){return(0,v.ht)(e,t,y.V.Free)}},m.D4.physicsFrameRate,m.D4.networkFramerate).start()}),1e3);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},92226:function(e,t,r){"use strict";r.d(t,{FJ:function(){return j},$6:function(){return G},ju:function(){return K},d_:function(){return W},Nj:function(){return Y},VZ:function(){return H},$p:function(){return V}});var n=r(48533),a=r.n(n),i=r(58700),o=r(83052),s=r(16090),c=r(7331),u=r(45744),d=r(5418),l=r(64414),p=r(15194),f=r(63290),h=r(77866);function m(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=Symbol("Comlink.proxy"),y=Symbol("Comlink.endpoint"),b=Symbol("Comlink.releaseProxy"),w=Symbol("Comlink.thrown"),_=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},x=new Map([["proxy",{canHandle:function(e){return _(e)&&e[g]},serialize:function(e){var t=new MessageChannel,r=t.port1,n=t.port2;return S(e,r),[n,[n]]},deserialize:function(e){return e.start(),R(e)}}],["throw",{canHandle:function(e){return _(e)&&w in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function r(n){if(n&&n.data){var a,i=Object.assign({path:[]},n.data),o=i.id,s=i.type,c=i.path,u=(n.data.argumentList||[]).map(O);try{var d=c.slice(0,-1).reduce((function(e,t){return e[t]}),e),m=c.reduce((function(e,t){return e[t]}),e);switch(s){case 0:a=m;break;case 1:d[c.slice(-1)[0]]=O(n.data.value),a=!0;break;case 2:a=m.apply(d,u);break;case 3:var v;a=I((0,f.Z)(m,(0,h.Z)(u)));break;case 4:var g=new MessageChannel,y=g.port1,b=g.port2;S(e,b),a=D(y,[y]);break;case 5:a=void 0}}catch(v){a=(0,p.Z)({value:v},w,0)}Promise.resolve(a).catch((function(e){return(0,p.Z)({value:e},w,0)})).then((function(e){var n=M(e),a=(0,l.Z)(n,2),i=a[0],c=a[1];t.postMessage(Object.assign(Object.assign({},i),{id:o}),c),5===s&&(t.removeEventListener("message",r),k(t))}))}})),t.start&&t.start()}function k(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function R(e,t){return P(e,[],t)}function C(e){if(e)throw new Error("Proxy has been released and is not useable")}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=!1,a=new Proxy(r,{get:function(r,i){if(C(n),i===b)return function(){return L(e,{type:5,path:t.map((function(e){return e.toString()}))}).then((function(){k(e),n=!0}))};if("then"===i){if(0===t.length)return{then:function(){return a}};var o=L(e,{type:0,path:t.map((function(e){return e.toString()}))}).then(O);return o.then.bind(o)}return P(e,[].concat((0,h.Z)(t),[i]))},set:function(r,a,i){C(n);var o=M(i),s=(0,l.Z)(o,2),c=s[0],u=s[1];return L(e,{type:1,path:[].concat((0,h.Z)(t),[a]).map((function(e){return e.toString()})),value:c},u).then(O)},apply:function(r,a,i){C(n);var o=t[t.length-1];if(o===y)return L(e,{type:4}).then(O);if("bind"===o)return P(e,t.slice(0,-1));var s=T(i),c=(0,l.Z)(s,2),u=c[0],d=c[1];return L(e,{type:2,path:t.map((function(e){return e.toString()})),argumentList:u},d).then(O)},construct:function(r,a){C(n);var i=T(a),o=(0,l.Z)(i,2),s=o[0],c=o[1];return L(e,{type:3,path:t.map((function(e){return e.toString()})),argumentList:s},c).then(O)}});return a}function T(e){var t,r=e.map(M);return[r.map((function(e){return e[0]})),(t=r.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var E=new WeakMap;function D(e,t){return E.set(e,t),e}function I(e){return Object.assign(e,(0,p.Z)({},g,!0))}function M(e){var t,r=m(x);try{for(r.s();!(t=r.n()).done;){var n=(0,l.Z)(t.value,2),a=n[0],i=n[1];if(i.canHandle(e)){var o=i.serialize(e),s=(0,l.Z)(o,2);return[{type:3,name:a,value:s[0]},s[1]]}}}catch(c){r.e(c)}finally{r.f()}return[{type:0,value:e},E.get(e)||[]]}function O(e){switch(e.type){case 3:return x.get(e.name).deserialize(e.value);case 0:return e.value}}function L(e,t,r){return new Promise((function(n){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(r){r.data&&r.data.id&&r.data.id===a&&(e.removeEventListener("message",t),n(r.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),r)}))}var Z=r(34452),j={FACE_INPUT:"WEBCAM_INPUT_EVENTS_FACE_INPUT",LIP_INPUT:"WEBCAM_INPUT_EVENTS_LIP_INPUT"},A=[],N=!1,F=null,B=null,z=null,U=null,H=function(){A.forEach((function(e){clearInterval(e)}))},V=function(){N=!1,null===F||void 0===F||F.close(),F=null},W=function(){var e=(0,i.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((z=document.createElement("video")).srcObject=o.p.instance.mediaStream,B){e.next=6;break}return B=R(new Worker(new URL(r.p+r.u(2391),r.b))),e.next=6,B.initialise();case 6:z.addEventListener("loadeddata",(0,i.Z)(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.create(z.videoWidth,z.videoHeight);case 2:U=new OffscreenCanvas(z.videoWidth,z.videoHeight),t=U.getContext("2d"),r=setInterval((0,i.Z)(a().mark((function e(){var r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.drawImage(z,0,0,z.videoWidth,z.videoHeight),r=t.getImageData(0,0,z.videoWidth,z.videoHeight),n=r.data.buffer,e.next=5,B.detect(D(n,[n]));case 5:(i=e.sent)&&Z.NL.instance.dispatchEvent({type:j.FACE_INPUT,detection:i});case 7:case"end":return e.stop()}}),e)}))),100),A.push(r);case 6:case"end":return e.stop()}}),e)})))),z.muted=!0,z.play();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q={angry:u.fw.Angry,disgusted:u.fw.Disgusted,fearful:u.fw.Fearful,happy:u.fw.Happy,neutral:u.fw.Neutral,sad:u.fw.Sad,surprised:u.fw.Surprised};function G(e,t){return $.apply(this,arguments)}function $(){return($=(0,i.Z)(a().mark((function e(t,r){var n,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r||void 0===r.expressions){e.next=12;break}n=(0,s.Ei)(t,c.I),e.t0=a().keys(r.expressions);case 3:if((e.t1=e.t0()).done){e.next=12;break}if(i=e.t1.value,o=q[i],u=n.schema.inputMap.get(o)){e.next=9;break}return e.abrupt("continue",3);case 9:n.data.set(u,{type:d.n.ONEDIM,value:r.expressions[i]<.1?0:r.expressions[i]}),e.next=3;break;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){N=!0;var e=[0,400,560,2400,4800],t=[0,500,700,3e3,6e3];F=new AudioContext;for(var r,n,a=1024,i=[],s=[],c=0;c<e.length;c++)s[c]=Math.round(2048/44100*e[c]),console.log("IndicesFrequencyMale[",c,"]",s[c]);for(var u=0;u<t.length;u++)i[u]=Math.round(2048/44100*t[u]),console.log("IndicesFrequencyMale[",u,"]",s[u]);var d=F.createAnalyser();d.smoothingTimeConstant=.5,d.fftSize=a,F.createMediaStreamSource(o.p.instance.mediaStream).connect(d);var l=F.createScriptProcessor(2048,1,1);d.connect(l),l.connect(F.destination),l.onaudioprocess=function(){if(N){n=new Float32Array(d.frequencyBinCount),d.getFloatFrequencyData(n),d.getFloatTimeDomainData(n),function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]*e[r];return t/=e.length,t=Math.sqrt(t)}(n),r=function(e){for(var t=.5,r=new Float32Array(e.length),n=0;n<e.length;n++)r[n]=t+(e[n]+20)/140;return r}(n);for(var a=new Float32Array(e.length),o=new Float32Array(t.length),c=0;c<e.length-1;c++){for(var u=s[c];u<=s[c+1];u++)r[u]>0&&(a[c]+=r[u]);a[c]/=s[c+1]-s[c]}for(var l=0;l<t.length-1;l++){for(var p=s[l];p<=s[l+1];p++)r[p]>0&&(o[l]+=r[p]);a[l]/=s[l+1]-s[l],o[l]=o[l]/(i[l+1]-i[l])}var f=Math.max(o[1],a[1])>.2?1-2*Math.max(a[2],o[2]):5*(1-2*Math.max(a[2],o[2]))*Math.max(a[1],o[1]),h=3*Math.max(a[3],o[3]),m=.8*(Math.max(a[1],o[1])-Math.max(a[3],o[3]));Z.NL.instance.dispatchEvent({type:j.LIP_INPUT,pucker:f,widen:h,open:m})}}},K=function(e,t,r,n){var a=(0,s.Ei)(e,c.I);t>.2?a.data.set(q.pucker,{type:d.n.ONEDIM,value:t}):a.data.has(q.pucker)&&a.data.delete(q.pucker),r>.2?a.data.set(q.widen,{type:d.n.ONEDIM,value:r}):a.data.has(q.widen)&&a.data.delete(q.widen),n>.2?a.data.set(q.open,{type:d.n.ONEDIM,value:n}):a.data.has(q.open)&&a.data.delete(q.open)}},97196:function(e,t,r){"use strict";r.d(t,{h:function(){return k}});var n=r(48533),a=r.n(n),i=r(11742),o=r(58700),s=r(49182),c=r(39337),u=r(83052),d=r(61467),l=r(90038),p=r(46192),f=r(64824),h=r(50931),m=r(98592),v=r.n(m),g=r(86887),y=r(94849),b=r(81652),w=r(34452),_=r(26508).Buffer,x=(0,h.default)().publicRuntimeConfig.gameserver,S=f.AS,k=function(){function e(){(0,s.Z)(this,e),this.isServer=!1,this.leaving=!1,this.lastPollSyncData={},this.pollingTickRate=1e3,this.pollingTimeout=4e3,this.instanceSocket={},this.channelSocket={},this.pollPending=!1,this.videoEnabled=!1}return(0,c.Z)(e,[{key:"sendReliableData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===t?this.instanceSocket.emit(l.u.ReliableMessage.toString(),e):this.channelSocket.emit(l.u.ReliableMessage.toString(),e)}},{key:"handleKick",value:function(e){console.log("Handling kick: ",e)}},{key:"toBuffer",value:function(e){for(var t=_.alloc(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t}},{key:"sendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!0===t?this.instanceDataProducer&&!0!==this.instanceDataProducer.closed&&"open"===this.instanceDataProducer.readyState&&this.instanceDataProducer.send(this.toBuffer(e)):this.channelDataProducer&&!0!==this.channelDataProducer.closed&&"open"===this.channelDataProducer.readyState&&this.channelDataProducer.send(this.toBuffer(e))}},{key:"promisedRequest",value:function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){return e.emit(t,r,n)}))}}},{key:"initialize",value:function(){var e=(0,o.Z)(a().mark((function e(){var t,r,n,s,c,f,h,m,_,k,R,C,P=this,T=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=T.length>0&&void 0!==T[0]?T[0]:"https://127.0.0.1",r=T.length>1&&void 0!==T[1]?T[1]:3030,n=T.length>2?T[2]:void 0,s=T.length>3?T[3]:void 0,c=this,f=g.Z.getState().get("auth").get("authUser").accessToken,h=g.Z.getState().get("auth").get("user"),m=!0===n?this.instanceSocket:this.channelSocket,d.Z.instance.userId=h.id,d.Z.instance.accessToken=f,this.mediasoupDevice=new S,m&&m.close&&m.close(),s.startVideo,_=s.videoEnabled,k=s.channelType,R=s.isHarmonyPage,C=(0,i.Z)(s,["startVideo","videoEnabled","channelType","isHarmonyPage"]),this.channelType=k,this.channelId=s.channelId,this.videoEnabled=null!==_&&void 0!==_&&_,null==C.locationId&&delete C.locationId,null==C.sceneId&&delete C.sceneId,null==C.channelId&&delete C.channelId,(m=v()("".concat(x,"/realtime"),{path:"/socket.io/".concat(t,"/").concat(r.toString()),query:C})).instance=!0===n,!0===n?this.instanceSocket=m:this.channelSocket=m,!0===n?d.Z.instance.instanceSocketId=m.id:d.Z.instance.channelSocketId=m.id,!0===n?this.instanceRequest=this.promisedRequest(m):this.channelRequest=this.promisedRequest(m),m.on("connect",(0,o.Z)(a().mark((function e(){var t,r,i,s,f,h,v,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0===m.instance?P.instanceRequest:P.channelRequest,r={userId:d.Z.instance.userId,accessToken:d.Z.instance.accessToken},e.next=4,t(l.u.Authorization.toString(),r);case 4:if(i=e.sent,i.success){e.next=8;break}return e.abrupt("return",console.error("Unable to connect with credentials"));case 8:return e.prev=8,e.t0=Promise,e.next=12,t(l.u.ConnectToWorld.toString());case 12:return e.t1=e.sent,e.t2=new Promise((function(e,t){setTimeout((function(){return t(new Error("Connect timed out"))}),1e4)})),e.t3=[e.t1,e.t2],e.next=17,e.t0.race.call(e.t0,e.t3);case 17:s=e.sent,e.next=25;break;case 20:return e.prev=20,e.t4=e.catch(8),console.log(e.t4),w.NL.instance.dispatchEvent({type:w.NL.EVENTS.CONNECT_TO_WORLD_TIMEOUT,instance:!0===n}),e.abrupt("return");case 25:if(console.log("ConnectToWorldResponse:"),console.log(s),h=(f=s).worldState,v=f.routerRtpCapabilities,w.NL.instance.dispatchEvent({type:w.NL.EVENTS.CONNECT_TO_WORLD}),g=setInterval((function(){m.emit(l.u.Heartbeat.toString())}),1e3),(0,p.C)(h),!0===P.mediasoupDevice.loaded){e.next=34;break}return e.next=34,P.mediasoupDevice.load({routerRtpCapabilities:v});case 34:if(m.on(l.u.ReliableMessage.toString(),(function(e){var t;null===(t=d.Z.instance)||void 0===t||t.incomingMessageQueue.add(e)})),window.addEventListener("unload",(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.emit(l.u.LeaveWorld.toString());case 1:case"end":return e.stop()}}),e)})))),m.on("disconnect",(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0!==m.instance&&!0!==R&&(c.channelType="instance",c.channelId=""),e.next=3,(0,b.rj)({endConsumers:!0});case 3:return e.next=5,(0,b.Zu)(!0===m.instance);case 5:clearInterval(g);case 6:case"end":return e.stop()}}),e)})))),m.on(l.u.Kick.toString(),(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearInterval(g),e.next=3,(0,b.rj)({endConsumers:!0});case 3:return e.next=5,(0,b.Zu)(!0===m.instance);case 5:m.close(),console.log("Client has been kicked from the world");case 7:case"end":return e.stop()}}),e)})))),m.on(l.u.WebRTCConsumeData.toString(),function(){var e=(0,o.Z)(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.instanceRecvTransport.consumeData(t);case 2:(n=e.sent).binaryType="arraybuffer",null===(r=d.Z.instance)||void 0===r||r.dataConsumers.set(t.dataProducerId,n),n.on("message",(function(e){var t;try{null===(t=d.Z.instance)||void 0===t||t.incomingMessageQueue.add(e)}catch(r){console.warn("Error handling data from consumer:"),console.warn(r)}})),n.on("close",(function(){var e;n.close(),null===(e=d.Z.instance)||void 0===e||e.dataConsumers.delete(t.dataProducerId)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m.on(l.u.WebRTCCreateProducer.toString(),function(){var e=(0,o.Z)(a().mark((function e(t,r,n,i,o){var s,d,l,p,f,h,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=[null===(d=null===(s=u.p.instance)||void 0===s?void 0:s.camVideoProducer)||void 0===d?void 0:d.id,null===(p=null===(l=u.p.instance)||void 0===l?void 0:l.camAudioProducer)||void 0===p?void 0:p.id],!(null!=n&&i===c.channelType&&m.indexOf(n)<0&&null==(null===(h=null===(f=u.p.instance)||void 0===f?void 0:f.consumers)||void 0===h?void 0:h.find((function(e){var n,a;return(null===(n=null===e||void 0===e?void 0:e.appData)||void 0===n?void 0:n.peerId)===t&&(null===(a=null===e||void 0===e?void 0:e.appData)||void 0===a?void 0:a.mediaTag)===r}))))){e.next=4;break}return e.next=4,(0,b.zm)(t,r,i,o);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()),m.on(l.u.WebRTCCloseConsumer.toString(),function(){var e=(0,o.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.p.instance&&(u.p.instance.consumers=null===(r=u.p.instance)||void 0===r?void 0:r.consumers.filter((function(e){return e.id!==t}))),(0,y.cR)();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!0!==m.instance){e.next=48;break}return console.log("Initializing instance transports"),console.log(m),e.next=46,Promise.all([(0,b.C5)("instance"),(0,b.bs)("instance")]);case 46:return e.next=48,(0,b.Ep)(!0===m.instance?"instance":P.channelId);case 48:case"end":return e.stop()}}),e,null,[[8,20]])}))));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},83244:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var n=function(e){e.style.zIndex="0",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.webkitUserSelect="none",e.style.userSelect="none",e.ondragstart=function(e){return e.preventDefault(),!1}}},57054:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var n=r(87400),a=r(69075),i=r(61620),o=r(31499),s=r(86483);var c=r(42380),u=r(68625),d=r(27878),l=(r(75313),r(10101)),p=r(96840),f=r(31451),h=r(37530),m=r(22078),v=r(19858),g=r(93467),y=d.forwardRef((function(e,t){var r=e.children,a=e.classes,i=e.className,o=e.collapsedHeight,s=void 0===o?"0px":o,f=e.component,y=void 0===f?"div":f,b=e.disableStrictModeCompat,w=void 0!==b&&b,_=e.in,x=e.onEnter,S=e.onEntered,k=e.onEntering,R=e.onExit,C=e.onExited,P=e.onExiting,T=e.style,E=e.timeout,D=void 0===E?h.x9.standard:E,I=e.TransitionComponent,M=void 0===I?p.ZP:I,O=(0,u.Z)(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),L=(0,v.Z)(),Z=d.useRef(),j=d.useRef(null),A=d.useRef(),N="number"===typeof s?"".concat(s,"px"):s;d.useEffect((function(){return function(){clearTimeout(Z.current)}}),[]);var F=L.unstable_strictMode&&!w,B=d.useRef(null),z=(0,g.Z)(t,F?B:void 0),U=function(e){return function(t,r){if(e){var n=F?[B.current,t]:[t,r],a=(0,c.Z)(n,2),i=a[0],o=a[1];void 0===o?e(i):e(i,o)}}},H=U((function(e,t){e.style.height=N,x&&x(e,t)})),V=U((function(e,t){var r=j.current?j.current.clientHeight:0,n=(0,m.C)({style:T,timeout:D},{mode:"enter"}).duration;if("auto"===D){var a=L.transitions.getAutoHeightDuration(r);e.style.transitionDuration="".concat(a,"ms"),A.current=a}else e.style.transitionDuration="string"===typeof n?n:"".concat(n,"ms");e.style.height="".concat(r,"px"),k&&k(e,t)})),W=U((function(e,t){e.style.height="auto",S&&S(e,t)})),q=U((function(e){var t=j.current?j.current.clientHeight:0;e.style.height="".concat(t,"px"),R&&R(e)})),G=U(C),$=U((function(e){var t=j.current?j.current.clientHeight:0,r=(0,m.C)({style:T,timeout:D},{mode:"exit"}).duration;if("auto"===D){var n=L.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),A.current=n}else e.style.transitionDuration="string"===typeof r?r:"".concat(r,"ms");e.style.height=N,P&&P(e)}));return d.createElement(M,(0,n.Z)({in:_,onEnter:H,onEntered:W,onEntering:V,onExit:q,onExited:G,onExiting:$,addEndListener:function(e,t){var r=F?e:t;"auto"===D&&(Z.current=setTimeout(r,A.current||0))},nodeRef:F?B:void 0,timeout:"auto"===D?null:D},O),(function(e,t){return d.createElement(y,(0,n.Z)({className:(0,l.Z)(a.container,i,{entered:a.entered,exited:!_&&"0px"===N&&a.hidden}[e]),style:(0,n.Z)({minHeight:N},T),ref:z},t),d.createElement("div",{className:a.wrapper,ref:j},d.createElement("div",{className:a.wrapperInner},r)))}))}));y.muiSupportAuto=!0;var b=(0,f.Z)((function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}}),{name:"MuiCollapse"})(y),w=r(68236),_=r(894),x=r(39051),S=d.forwardRef((function(e,t){var r,p=e.children,f=e.classes,h=e.className,m=e.defaultExpanded,v=void 0!==m&&m,g=e.disabled,y=void 0!==g&&g,S=e.expanded,k=e.onChange,R=e.square,C=void 0!==R&&R,P=e.TransitionComponent,T=void 0===P?b:P,E=e.TransitionProps,D=(0,u.Z)(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),I=(0,x.Z)({controlled:S,default:v,name:"Accordion",state:"expanded"}),M=(0,c.Z)(I,2),O=M[0],L=M[1],Z=d.useCallback((function(e){L(!O),k&&k(e,!O)}),[O,k,L]),j=d.Children.toArray(p),A=(r=j,(0,a.Z)(r)||(0,i.Z)(r)||(0,o.Z)(r)||(0,s.Z)()),N=A[0],F=A.slice(1),B=d.useMemo((function(){return{expanded:O,disabled:y,toggle:Z}}),[O,y,Z]);return d.createElement(w.Z,(0,n.Z)({className:(0,l.Z)(f.root,h,O&&f.expanded,y&&f.disabled,!C&&f.rounded),ref:t,square:C},D),d.createElement(_.Z.Provider,{value:B},N),d.createElement(T,(0,n.Z)({in:O,timeout:"auto"},E),d.createElement("div",{"aria-labelledby":N.props.id,id:N.props["aria-controls"],role:"region"},F)))})),k=(0,f.Z)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],t),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}}),{name:"MuiAccordion"})(S)},894:function(e,t,r){"use strict";var n=r(27878).createContext({});t.Z=n},4859:function(e,t,r){"use strict";var n=r(87400),a=r(68625),i=r(27878),o=r(10101),s=r(31451),c=i.forwardRef((function(e,t){var r=e.classes,s=e.className,c=(0,a.Z)(e,["classes","className"]);return i.createElement("div",(0,n.Z)({className:(0,o.Z)(r.root,s),ref:t},c))}));t.Z=(0,s.Z)((function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}}),{name:"MuiAccordionDetails"})(c)},23751:function(e,t,r){"use strict";var n=r(87400),a=r(68625),i=r(27878),o=r(10101),s=r(6930),c=r(49348),u=r(31451),d=r(894),l=i.forwardRef((function(e,t){var r=e.children,u=e.classes,l=e.className,p=e.expandIcon,f=e.IconButtonProps,h=e.onBlur,m=e.onClick,v=e.onFocusVisible,g=(0,a.Z)(e,["children","classes","className","expandIcon","IconButtonProps","onBlur","onClick","onFocusVisible"]),y=i.useState(!1),b=y[0],w=y[1],_=i.useContext(d.Z),x=_.disabled,S=void 0!==x&&x,k=_.expanded,R=_.toggle;return i.createElement(s.Z,(0,n.Z)({focusRipple:!1,disableRipple:!0,disabled:S,component:"div","aria-expanded":k,className:(0,o.Z)(u.root,l,S&&u.disabled,k&&u.expanded,b&&u.focused),onFocusVisible:function(e){w(!0),v&&v(e)},onBlur:function(e){w(!1),h&&h(e)},onClick:function(e){R&&R(e),m&&m(e)},ref:t},g),i.createElement("div",{className:(0,o.Z)(u.content,k&&u.expanded)},r),p&&i.createElement(c.Z,(0,n.Z)({className:(0,o.Z)(u.expandIcon,k&&u.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},f),p))}));t.Z=(0,u.Z)((function(e){var t={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:48,transition:e.transitions.create(["min-height","background-color"],t),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],t),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",t),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}}),{name:"MuiAccordionSummary"})(l)},93982:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(87400),a=r(68625),i=r(27878),o=r(10101),s=r(31451),c=(0,r(15853).Z)(i.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var u=i.forwardRef((function(e,t){var r=e.alt,s=e.children,u=e.classes,d=e.className,l=e.component,p=void 0===l?"div":l,f=e.imgProps,h=e.sizes,m=e.src,v=e.srcSet,g=e.variant,y=void 0===g?"circle":g,b=(0,a.Z)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),w=null,_=function(e){var t=e.src,r=e.srcSet,n=i.useState(!1),a=n[0],o=n[1];return i.useEffect((function(){if(t||r){o(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=r,n.onload=function(){e&&o("loaded")},n.onerror=function(){e&&o("error")},function(){e=!1}}}),[t,r]),a}({src:m,srcSet:v}),x=m||v,S=x&&"error"!==_;return w=S?i.createElement("img",(0,n.Z)({alt:r,src:m,srcSet:v,sizes:h,className:u.img},f)):null!=s?s:x&&r?r[0]:i.createElement(c,{className:u.fallback}),i.createElement(p,(0,n.Z)({className:(0,o.Z)(u.root,u.system,u[y],d,!S&&u.colorDefault),ref:t},b),w)})),d=(0,s.Z)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(u)},34335:function(e,t,r){"use strict";var n=r(68625),a=r(87400),i=r(27878),o=r(10101),s=r(31451),c=[0,1,2,3,4,5,6,7,8,9,10],u=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=parseFloat(e);return"".concat(r/t).concat(String(e).replace(String(r),"")||"px")}var l=i.forwardRef((function(e,t){var r=e.alignContent,s=void 0===r?"stretch":r,c=e.alignItems,u=void 0===c?"stretch":c,d=e.classes,l=e.className,p=e.component,f=void 0===p?"div":p,h=e.container,m=void 0!==h&&h,v=e.direction,g=void 0===v?"row":v,y=e.item,b=void 0!==y&&y,w=e.justify,_=void 0===w?"flex-start":w,x=e.lg,S=void 0!==x&&x,k=e.md,R=void 0!==k&&k,C=e.sm,P=void 0!==C&&C,T=e.spacing,E=void 0===T?0:T,D=e.wrap,I=void 0===D?"wrap":D,M=e.xl,O=void 0!==M&&M,L=e.xs,Z=void 0!==L&&L,j=e.zeroMinWidth,A=void 0!==j&&j,N=(0,n.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),F=(0,o.Z)(d.root,l,m&&[d.container,0!==E&&d["spacing-xs-".concat(String(E))]],b&&d.item,A&&d.zeroMinWidth,"row"!==g&&d["direction-xs-".concat(String(g))],"wrap"!==I&&d["wrap-xs-".concat(String(I))],"stretch"!==u&&d["align-items-xs-".concat(String(u))],"stretch"!==s&&d["align-content-xs-".concat(String(s))],"flex-start"!==_&&d["justify-xs-".concat(String(_))],!1!==Z&&d["grid-xs-".concat(String(Z))],!1!==P&&d["grid-sm-".concat(String(P))],!1!==R&&d["grid-md-".concat(String(R))],!1!==S&&d["grid-lg-".concat(String(S))],!1!==O&&d["grid-xl-".concat(String(O))]);return i.createElement(f,(0,a.Z)({className:F,ref:t},N))})),p=(0,s.Z)((function(e){return(0,a.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"},"justify-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var r={};return c.forEach((function(n){var a=e.spacing(n);0!==a&&(r["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(d(a,2)),width:"calc(100% + ".concat(d(a),")"),"& > $item":{padding:d(a,2)}})})),r}(e,"xs"),e.breakpoints.keys.reduce((function(t,r){return function(e,t,r){var n={};u.forEach((function(e){var t="grid-".concat(r,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===r?(0,a.Z)(e,n):e[t.breakpoints.up(r)]=n}(t,e,r),t}),{}))}),{name:"MuiGrid"})(l);t.Z=p},84724:function(e,t,r){"use strict";var n=r(87400),a=r(68625),i=r(27878),o=r(10101),s=r(31451),c=r(25677),u=i.forwardRef((function(e,t){var r=e.classes,s=e.className,u=(0,a.Z)(e,["classes","className"]),d=i.useContext(c.Z);return i.createElement("div",(0,n.Z)({className:(0,o.Z)(r.root,s,"flex-start"===d.alignItems&&r.alignItemsFlexStart),ref:t},u))}));t.Z=(0,s.Z)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(u)},71187:function(e,t,r){"use strict";r.d(t,{Z:function(){return _e}});var n=r(87400),a=r(68625),i=r(27878),o="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator,s=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(o&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}();var c=o&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then((function(){t=!1,e()})))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout((function(){t=!1,e()}),s))}};function u(e){return e&&"[object Function]"==={}.toString.call(e)}function d(e,t){if(1!==e.nodeType)return[];var r=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?r[t]:r}function l(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function p(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=d(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/(auto|scroll|overlay)/.test(r+a+n)?e:p(l(e))}function f(e){return e&&e.referenceNode?e.referenceNode:e}var h=o&&!(!window.MSInputMethodContext||!document.documentMode),m=o&&/MSIE 10/.test(navigator.userAgent);function v(e){return 11===e?h:10===e?m:h||m}function g(e){if(!e)return document.documentElement;for(var t=v(10)?document.body:null,r=e.offsetParent||null;r===t&&e.nextElementSibling;)r=(e=e.nextElementSibling).offsetParent;var n=r&&r.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===d(r,"position")?g(r):r:e?e.ownerDocument.documentElement:document.documentElement}function y(e){return null!==e.parentNode?y(e.parentNode):e}function b(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var r=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?e:t,a=r?t:e,i=document.createRange();i.setStart(n,0),i.setEnd(a,0);var o=i.commonAncestorContainer;if(e!==o&&t!==o||n.contains(a))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||g(e.firstElementChild)===e)}(o)?o:g(o);var s=y(e);return s.host?b(s.host,t):b(e,y(t).host)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",r="top"===t?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var a=e.ownerDocument.documentElement,i=e.ownerDocument.scrollingElement||a;return i[r]}return e[r]}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=w(t,"top"),a=w(t,"left"),i=r?-1:1;return e.top+=n*i,e.bottom+=n*i,e.left+=a*i,e.right+=a*i,e}function x(e,t){var r="x"===t?"Left":"Top",n="Left"===r?"Right":"Bottom";return parseFloat(e["border"+r+"Width"])+parseFloat(e["border"+n+"Width"])}function S(e,t,r,n){return Math.max(t["offset"+e],t["scroll"+e],r["client"+e],r["offset"+e],r["scroll"+e],v(10)?parseInt(r["offset"+e])+parseInt(n["margin"+("Height"===e?"Top":"Left")])+parseInt(n["margin"+("Height"===e?"Bottom":"Right")]):0)}function k(e){var t=e.body,r=e.documentElement,n=v(10)&&getComputedStyle(r);return{height:S("Height",t,r,n),width:S("Width",t,r,n)}}var R=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},C=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),P=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function E(e){return T({},e,{right:e.left+e.width,bottom:e.top+e.height})}function D(e){var t={};try{if(v(10)){t=e.getBoundingClientRect();var r=w(e,"top"),n=w(e,"left");t.top+=r,t.left+=n,t.bottom+=r,t.right+=n}else t=e.getBoundingClientRect()}catch(p){}var a={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===e.nodeName?k(e.ownerDocument):{},o=i.width||e.clientWidth||a.width,s=i.height||e.clientHeight||a.height,c=e.offsetWidth-o,u=e.offsetHeight-s;if(c||u){var l=d(e);c-=x(l,"x"),u-=x(l,"y"),a.width-=c,a.height-=u}return E(a)}function I(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=v(10),a="HTML"===t.nodeName,i=D(e),o=D(t),s=p(e),c=d(t),u=parseFloat(c.borderTopWidth),l=parseFloat(c.borderLeftWidth);r&&a&&(o.top=Math.max(o.top,0),o.left=Math.max(o.left,0));var f=E({top:i.top-o.top-u,left:i.left-o.left-l,width:i.width,height:i.height});if(f.marginTop=0,f.marginLeft=0,!n&&a){var h=parseFloat(c.marginTop),m=parseFloat(c.marginLeft);f.top-=u-h,f.bottom-=u-h,f.left-=l-m,f.right-=l-m,f.marginTop=h,f.marginLeft=m}return(n&&!r?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(f=_(f,t)),f}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.ownerDocument.documentElement,n=I(e,r),a=Math.max(r.clientWidth,window.innerWidth||0),i=Math.max(r.clientHeight,window.innerHeight||0),o=t?0:w(r),s=t?0:w(r,"left"),c={top:o-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:a,height:i};return E(c)}function O(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===d(e,"position"))return!0;var r=l(e);return!!r&&O(r)}function L(e){if(!e||!e.parentElement||v())return document.documentElement;for(var t=e.parentElement;t&&"none"===d(t,"transform");)t=t.parentElement;return t||document.documentElement}function Z(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},o=a?L(e):b(e,f(t));if("viewport"===n)i=M(o,a);else{var s=void 0;"scrollParent"===n?"BODY"===(s=p(l(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===n?e.ownerDocument.documentElement:n;var c=I(s,o,a);if("HTML"!==s.nodeName||O(o))i=c;else{var u=k(e.ownerDocument),d=u.height,h=u.width;i.top+=c.top-c.marginTop,i.bottom=d+c.top,i.left+=c.left-c.marginLeft,i.right=h+c.left}}var m="number"===typeof(r=r||0);return i.left+=m?r:r.left||0,i.top+=m?r:r.top||0,i.right-=m?r:r.right||0,i.bottom-=m?r:r.bottom||0,i}function j(e){return e.width*e.height}function A(e,t,r,n,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var o=Z(r,n,i,a),s={top:{width:o.width,height:t.top-o.top},right:{width:o.right-t.right,height:o.height},bottom:{width:o.width,height:o.bottom-t.bottom},left:{width:t.left-o.left,height:o.height}},c=Object.keys(s).map((function(e){return T({key:e},s[e],{area:j(s[e])})})).sort((function(e,t){return t.area-e.area})),u=c.filter((function(e){var t=e.width,n=e.height;return t>=r.clientWidth&&n>=r.clientHeight})),d=u.length>0?u[0].key:c[0].key,l=e.split("-")[1];return d+(l?"-"+l:"")}function N(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=n?L(t):b(t,f(r));return I(r,a,n)}function F(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),r=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),n=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+n,height:e.offsetHeight+r}}function B(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function z(e,t,r){r=r.split("-")[0];var n=F(e),a={width:n.width,height:n.height},i=-1!==["right","left"].indexOf(r),o=i?"top":"left",s=i?"left":"top",c=i?"height":"width",u=i?"width":"height";return a[o]=t[o]+t[c]/2-n[c]/2,a[s]=r===s?t[s]-n[u]:t[B(s)],a}function U(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function H(e,t,r){return(void 0===r?e:e.slice(0,function(e,t,r){if(Array.prototype.findIndex)return e.findIndex((function(e){return e[t]===r}));var n=U(e,(function(e){return e[t]===r}));return e.indexOf(n)}(e,"name",r))).forEach((function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=e.function||e.fn;e.enabled&&u(r)&&(t.offsets.popper=E(t.offsets.popper),t.offsets.reference=E(t.offsets.reference),t=r(t,e))})),t}function V(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=N(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=A(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=z(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=H(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function W(e,t){return e.some((function(e){var r=e.name;return e.enabled&&r===t}))}function q(e){for(var t=[!1,"ms","Webkit","Moz","O"],r=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var a=t[n],i=a?""+a+r:e;if("undefined"!==typeof document.body.style[i])return i}return null}function G(){return this.state.isDestroyed=!0,W(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[q("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function $(e){var t=e.ownerDocument;return t?t.defaultView:window}function Y(e,t,r,n){var a="BODY"===e.nodeName,i=a?e.ownerDocument.defaultView:e;i.addEventListener(t,r,{passive:!0}),a||Y(p(i.parentNode),t,r,n),n.push(i)}function K(e,t,r,n){r.updateBound=n,$(e).addEventListener("resize",r.updateBound,{passive:!0});var a=p(e);return Y(a,"scroll",r.updateBound,r.scrollParents),r.scrollElement=a,r.eventsEnabled=!0,r}function X(){this.state.eventsEnabled||(this.state=K(this.reference,this.options,this.state,this.scheduleUpdate))}function Q(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,$(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.updateBound)})),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function J(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function ee(e,t){Object.keys(t).forEach((function(r){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&J(t[r])&&(n="px"),e.style[r]=t[r]+n}))}var te=o&&/Firefox/i.test(navigator.userAgent);function re(e,t,r){var n=U(e,(function(e){return e.name===t})),a=!!n&&e.some((function(e){return e.name===r&&e.enabled&&e.order<n.order}));if(!a){var i="`"+t+"`",o="`"+r+"`";console.warn(o+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return a}var ne=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ae=ne.slice(3);function ie(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=ae.indexOf(e),n=ae.slice(r+1).concat(ae.slice(0,r));return t?n.reverse():n}var oe="flip",se="clockwise",ce="counterclockwise";function ue(e,t,r,n){var a=[0,0],i=-1!==["right","left"].indexOf(n),o=e.split(/(\+|\-)/).map((function(e){return e.trim()})),s=o.indexOf(U(o,(function(e){return-1!==e.search(/,|\s/)})));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,u=-1!==s?[o.slice(0,s).concat([o[s].split(c)[0]]),[o[s].split(c)[1]].concat(o.slice(s+1))]:[o];return(u=u.map((function(e,n){var a=(1===n?!i:i)?"height":"width",o=!1;return e.reduce((function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,o=!0,e):o?(e[e.length-1]+=t,o=!1,e):e.concat(t)}),[]).map((function(e){return function(e,t,r,n){var a=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+a[1],o=a[2];if(!i)return e;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=r;break;case"%":case"%r":default:s=n}return E(s)[t]/100*i}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i;return i}(e,a,t,r)}))}))).forEach((function(e,t){e.forEach((function(r,n){J(r)&&(a[t]+=r*("-"===e[n-1]?-1:1))}))})),a}var de={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,r=t.split("-")[0],n=t.split("-")[1];if(n){var a=e.offsets,i=a.reference,o=a.popper,s=-1!==["bottom","top"].indexOf(r),c=s?"left":"top",u=s?"width":"height",d={start:P({},c,i[c]),end:P({},c,i[c]+i[u]-o[u])};e.offsets.popper=T({},o,d[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var r=t.offset,n=e.placement,a=e.offsets,i=a.popper,o=a.reference,s=n.split("-")[0],c=void 0;return c=J(+r)?[+r,0]:ue(r,i,o,s),"left"===s?(i.top+=c[0],i.left-=c[1]):"right"===s?(i.top+=c[0],i.left+=c[1]):"top"===s?(i.left+=c[0],i.top-=c[1]):"bottom"===s&&(i.left+=c[0],i.top+=c[1]),e.popper=i,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var r=t.boundariesElement||g(e.instance.popper);e.instance.reference===r&&(r=g(r));var n=q("transform"),a=e.instance.popper.style,i=a.top,o=a.left,s=a[n];a.top="",a.left="",a[n]="";var c=Z(e.instance.popper,e.instance.reference,t.padding,r,e.positionFixed);a.top=i,a.left=o,a[n]=s,t.boundaries=c;var u=t.priority,d=e.offsets.popper,l={primary:function(e){var r=d[e];return d[e]<c[e]&&!t.escapeWithReference&&(r=Math.max(d[e],c[e])),P({},e,r)},secondary:function(e){var r="right"===e?"left":"top",n=d[r];return d[e]>c[e]&&!t.escapeWithReference&&(n=Math.min(d[r],c[e]-("right"===e?d.width:d.height))),P({},r,n)}};return u.forEach((function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";d=T({},d,l[t](e))})),e.offsets.popper=d,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,r=t.popper,n=t.reference,a=e.placement.split("-")[0],i=Math.floor,o=-1!==["top","bottom"].indexOf(a),s=o?"right":"bottom",c=o?"left":"top",u=o?"width":"height";return r[s]<i(n[c])&&(e.offsets.popper[c]=i(n[c])-r[u]),r[c]>i(n[s])&&(e.offsets.popper[c]=i(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var r;if(!re(e.instance.modifiers,"arrow","keepTogether"))return e;var n=t.element;if("string"===typeof n){if(!(n=e.instance.popper.querySelector(n)))return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var a=e.placement.split("-")[0],i=e.offsets,o=i.popper,s=i.reference,c=-1!==["left","right"].indexOf(a),u=c?"height":"width",l=c?"Top":"Left",p=l.toLowerCase(),f=c?"left":"top",h=c?"bottom":"right",m=F(n)[u];s[h]-m<o[p]&&(e.offsets.popper[p]-=o[p]-(s[h]-m)),s[p]+m>o[h]&&(e.offsets.popper[p]+=s[p]+m-o[h]),e.offsets.popper=E(e.offsets.popper);var v=s[p]+s[u]/2-m/2,g=d(e.instance.popper),y=parseFloat(g["margin"+l]),b=parseFloat(g["border"+l+"Width"]),w=v-e.offsets.popper[p]-y-b;return w=Math.max(Math.min(o[u]-m,w),0),e.arrowElement=n,e.offsets.arrow=(P(r={},p,Math.round(w)),P(r,f,""),r),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(W(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var r=Z(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],a=B(n),i=e.placement.split("-")[1]||"",o=[];switch(t.behavior){case oe:o=[n,a];break;case se:o=ie(n);break;case ce:o=ie(n,!0);break;default:o=t.behavior}return o.forEach((function(s,c){if(n!==s||o.length===c+1)return e;n=e.placement.split("-")[0],a=B(n);var u=e.offsets.popper,d=e.offsets.reference,l=Math.floor,p="left"===n&&l(u.right)>l(d.left)||"right"===n&&l(u.left)<l(d.right)||"top"===n&&l(u.bottom)>l(d.top)||"bottom"===n&&l(u.top)<l(d.bottom),f=l(u.left)<l(r.left),h=l(u.right)>l(r.right),m=l(u.top)<l(r.top),v=l(u.bottom)>l(r.bottom),g="left"===n&&f||"right"===n&&h||"top"===n&&m||"bottom"===n&&v,y=-1!==["top","bottom"].indexOf(n),b=!!t.flipVariations&&(y&&"start"===i&&f||y&&"end"===i&&h||!y&&"start"===i&&m||!y&&"end"===i&&v),w=!!t.flipVariationsByContent&&(y&&"start"===i&&h||y&&"end"===i&&f||!y&&"start"===i&&v||!y&&"end"===i&&m),_=b||w;(p||g||_)&&(e.flipped=!0,(p||g)&&(n=o[c+1]),_&&(i=function(e){return"end"===e?"start":"start"===e?"end":e}(i)),e.placement=n+(i?"-"+i:""),e.offsets.popper=T({},e.offsets.popper,z(e.instance.popper,e.offsets.reference,e.placement)),e=H(e.instance.modifiers,e,"flip"))})),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,r=t.split("-")[0],n=e.offsets,a=n.popper,i=n.reference,o=-1!==["left","right"].indexOf(r),s=-1===["top","left"].indexOf(r);return a[o?"left":"top"]=i[r]-(s?a[o?"width":"height"]:0),e.placement=B(t),e.offsets.popper=E(a),e}},hide:{order:800,enabled:!0,fn:function(e){if(!re(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,r=U(e.instance.modifiers,(function(e){return"preventOverflow"===e.name})).boundaries;if(t.bottom<r.top||t.left>r.right||t.top>r.bottom||t.right<r.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var r=t.x,n=t.y,a=e.offsets.popper,i=U(e.instance.modifiers,(function(e){return"applyStyle"===e.name})).gpuAcceleration;void 0!==i&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==i?i:t.gpuAcceleration,s=g(e.instance.popper),c=D(s),u={position:a.position},d=function(e,t){var r=e.offsets,n=r.popper,a=r.reference,i=Math.round,o=Math.floor,s=function(e){return e},c=i(a.width),u=i(n.width),d=-1!==["left","right"].indexOf(e.placement),l=-1!==e.placement.indexOf("-"),p=t?d||l||c%2===u%2?i:o:s,f=t?i:s;return{left:p(c%2===1&&u%2===1&&!l&&t?n.left-1:n.left),top:f(n.top),bottom:f(n.bottom),right:p(n.right)}}(e,window.devicePixelRatio<2||!te),l="bottom"===r?"top":"bottom",p="right"===n?"left":"right",f=q("transform"),h=void 0,m=void 0;if(m="bottom"===l?"HTML"===s.nodeName?-s.clientHeight+d.bottom:-c.height+d.bottom:d.top,h="right"===p?"HTML"===s.nodeName?-s.clientWidth+d.right:-c.width+d.right:d.left,o&&f)u[f]="translate3d("+h+"px, "+m+"px, 0)",u[l]=0,u[p]=0,u.willChange="transform";else{var v="bottom"===l?-1:1,y="right"===p?-1:1;u[l]=m*v,u[p]=h*y,u.willChange=l+", "+p}var b={"x-placement":e.placement};return e.attributes=T({},b,e.attributes),e.styles=T({},u,e.styles),e.arrowStyles=T({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,r;return ee(e.instance.popper,e.styles),t=e.instance.popper,r=e.attributes,Object.keys(r).forEach((function(e){!1!==r[e]?t.setAttribute(e,r[e]):t.removeAttribute(e)})),e.arrowElement&&Object.keys(e.arrowStyles).length&&ee(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,r,n,a){var i=N(a,t,e,r.positionFixed),o=A(r.placement,i,t,e,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return t.setAttribute("x-placement",o),ee(t,{position:r.positionFixed?"fixed":"absolute"}),r},gpuAcceleration:void 0}}},le=function(){function e(t,r){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};R(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=c(this.update.bind(this)),this.options=T({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(T({},e.Defaults.modifiers,a.modifiers)).forEach((function(t){n.options.modifiers[t]=T({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(e){return T({name:e},n.options.modifiers[e])})).sort((function(e,t){return e.order-t.order})),this.modifiers.forEach((function(e){e.enabled&&u(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)})),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return C(e,[{key:"update",value:function(){return V.call(this)}},{key:"destroy",value:function(){return G.call(this)}},{key:"enableEventListeners",value:function(){return X.call(this)}},{key:"disableEventListeners",value:function(){return Q.call(this)}}]),e}();le.Utils=("undefined"!==typeof window?window:r.g).PopperUtils,le.placements=ne,le.Defaults=de;var pe=le,fe=r(95827),he=r(45995),me=r(97724),ve=r(75949),ge=r(93467);function ye(e){return"function"===typeof e?e():e}var be="undefined"!==typeof window?i.useLayoutEffect:i.useEffect,we={},_e=i.forwardRef((function(e,t){var r=e.anchorEl,o=e.children,s=e.container,c=e.disablePortal,u=void 0!==c&&c,d=e.keepMounted,l=void 0!==d&&d,p=e.modifiers,f=e.open,h=e.placement,m=void 0===h?"bottom":h,v=e.popperOptions,g=void 0===v?we:v,y=e.popperRef,b=e.style,w=e.transition,_=void 0!==w&&w,x=(0,a.Z)(e,["anchorEl","children","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"]),S=i.useRef(null),k=(0,ge.Z)(S,t),R=i.useRef(null),C=(0,ge.Z)(R,y),P=i.useRef(C);be((function(){P.current=C}),[C]),i.useImperativeHandle(y,(function(){return R.current}),[]);var T=i.useState(!0),E=T[0],D=T[1],I=function(e,t){if("ltr"===(t&&t.direction||"ltr"))return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(m,(0,fe.Z)()),M=i.useState(I),O=M[0],L=M[1];i.useEffect((function(){R.current&&R.current.update()}));var Z=i.useCallback((function(){if(S.current&&r&&f){R.current&&(R.current.destroy(),P.current(null));var e=function(e){L(e.placement)},t=(ye(r),new pe(ye(r),S.current,(0,n.Z)({placement:I},g,{modifiers:(0,n.Z)({},u?{}:{preventOverflow:{boundariesElement:"window"}},p,g.modifiers),onCreate:(0,me.Z)(e,g.onCreate),onUpdate:(0,me.Z)(e,g.onUpdate)})));P.current(t)}}),[r,u,p,f,I,g]),j=i.useCallback((function(e){(0,ve.Z)(k,e),Z()}),[k,Z]),A=function(){R.current&&(R.current.destroy(),P.current(null))};if(i.useEffect((function(){return function(){A()}}),[]),i.useEffect((function(){f||_||A()}),[f,_]),!l&&!f&&(!_||E))return null;var N={placement:O};return _&&(N.TransitionProps={in:f,onEnter:function(){D(!1)},onExited:function(){D(!0),A()}}),i.createElement(he.Z,{disablePortal:u,container:s},i.createElement("div",(0,n.Z)({ref:j,role:"tooltip"},x,{style:(0,n.Z)({position:"fixed",top:0,left:0,display:f||!l||_?null:"none"},b)}),"function"===typeof o?o(N):o))}))},5401:function(e,t,r){"use strict";r.d(t,{Z:function(){return D}});var n=r(99537),a=r(42380),i=r(68625),o=r(87400),s=r(27878),c=r(10101),u=r(31451),d=r(19858),l=r(23868),p=r(79013),f=r(89222),h=r(42543),m=r(93467),v=r(81879),g=r(39051);var y=(0,u.Z)((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:(0,o.Z)({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,r=e.classes,n=e.className,a=e.open,i=e.value,o=e.valueLabelDisplay;return"off"===o?t:s.cloneElement(t,{className:(0,c.Z)(t.props.className,(a||"on"===o)&&r.open,r.thumb)},s.createElement("span",{className:(0,c.Z)(r.offset,n)},s.createElement("span",{className:r.circle},s.createElement("span",{className:r.label},i))))}));function b(e,t){return e-t}function w(e,t,r){return Math.min(Math.max(t,e),r)}function _(e,t){return e.reduce((function(e,r,n){var a=Math.abs(t-r);return null===e||a<e.distance||a===e.distance?{distance:a,index:n}:e}),null).index}function x(e,t){if(void 0!==t.current&&e.changedTouches){for(var r=0;r<e.changedTouches.length;r+=1){var n=e.changedTouches[r];if(n.identifier===t.current)return{x:n.clientX,y:n.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function S(e,t,r){return 100*(e-t)/(r-t)}function k(e,t,r){var n=Math.round((e-r)/t)*t+r;return Number(n.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),r=t[0].split(".")[1];return(r?r.length:0)+parseInt(t[1],10)}var n=e.toString().split(".")[1];return n?n.length:0}(t)))}function R(e){var t=e.values,r=e.source,n=e.newValue,a=e.index;if(t[a]===n)return r;var i=t.slice();return i[a]=n,i}function C(e){var t=e.sliderRef,r=e.activeIndex,n=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===r||t.current.querySelector('[role="slider"][data-index="'.concat(r,'"]')).focus(),n&&n(r)}var P={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},T=function(e){return e},E=s.forwardRef((function(e,t){var r=e["aria-label"],u=e["aria-labelledby"],l=e["aria-valuetext"],E=e.classes,D=e.className,I=e.color,M=void 0===I?"primary":I,O=e.component,L=void 0===O?"span":O,Z=e.defaultValue,j=e.disabled,A=void 0!==j&&j,N=e.getAriaLabel,F=e.getAriaValueText,B=e.marks,z=void 0!==B&&B,U=e.max,H=void 0===U?100:U,V=e.min,W=void 0===V?0:V,q=e.name,G=e.onChange,$=e.onChangeCommitted,Y=e.onMouseDown,K=e.orientation,X=void 0===K?"horizontal":K,Q=e.scale,J=void 0===Q?T:Q,ee=e.step,te=void 0===ee?1:ee,re=e.ThumbComponent,ne=void 0===re?"span":re,ae=e.track,ie=void 0===ae?"normal":ae,oe=e.value,se=e.ValueLabelComponent,ce=void 0===se?y:se,ue=e.valueLabelDisplay,de=void 0===ue?"off":ue,le=e.valueLabelFormat,pe=void 0===le?T:le,fe=(0,i.Z)(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),he=(0,d.Z)(),me=s.useRef(),ve=s.useState(-1),ge=ve[0],ye=ve[1],be=s.useState(-1),we=be[0],_e=be[1],xe=(0,g.Z)({controlled:oe,default:Z,name:"Slider"}),Se=(0,a.Z)(xe,2),ke=Se[0],Re=Se[1],Ce=Array.isArray(ke),Pe=Ce?ke.slice().sort(b):[ke];Pe=Pe.map((function(e){return w(e,W,H)}));var Te=!0===z&&null!==te?(0,n.Z)(Array(Math.floor((H-W)/te)+1)).map((function(e,t){return{value:W+te*t}})):z||[],Ee=(0,p.Z)(),De=Ee.isFocusVisible,Ie=Ee.onBlurVisible,Me=Ee.ref,Oe=s.useState(-1),Le=Oe[0],Ze=Oe[1],je=s.useRef(),Ae=(0,m.Z)(Me,je),Ne=(0,m.Z)(t,Ae),Fe=(0,h.Z)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));De(e)&&Ze(t),_e(t)})),Be=(0,h.Z)((function(){-1!==Le&&(Ze(-1),Ie()),_e(-1)})),ze=(0,h.Z)((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));_e(t)})),Ue=(0,h.Z)((function(){_e(-1)})),He="rtl"===he.direction,Ve=(0,h.Z)((function(e){var t,r=Number(e.currentTarget.getAttribute("data-index")),n=Pe[r],a=(H-W)/10,i=Te.map((function(e){return e.value})),o=i.indexOf(n),s=He?"ArrowLeft":"ArrowRight",c=He?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=W;break;case"End":t=H;break;case"PageUp":te&&(t=n+a);break;case"PageDown":te&&(t=n-a);break;case s:case"ArrowUp":t=te?n+te:i[o+1]||i[i.length-1];break;case c:case"ArrowDown":t=te?n-te:i[o-1]||i[0];break;default:return}if(e.preventDefault(),te&&(t=k(t,te,W)),t=w(t,W,H),Ce){var u=t;t=R({values:Pe,source:ke,newValue:t,index:r}).sort(b),C({sliderRef:je,activeIndex:t.indexOf(u)})}Re(t),Ze(r),G&&G(e,t),$&&$(e,t)})),We=s.useRef(),qe=X;He&&"vertical"!==X&&(qe+="-reverse");var Ge=function(e){var t,r,n=e.finger,a=e.move,i=void 0!==a&&a,o=e.values,s=e.source,c=je.current.getBoundingClientRect(),u=c.width,d=c.height,l=c.bottom,p=c.left;if(t=0===qe.indexOf("vertical")?(l-n.y)/d:(n.x-p)/u,-1!==qe.indexOf("-reverse")&&(t=1-t),r=function(e,t,r){return(r-t)*e+t}(t,W,H),te)r=k(r,te,W);else{var f=Te.map((function(e){return e.value}));r=f[_(f,r)]}r=w(r,W,H);var h=0;if(Ce){var m=r;h=(r=R({values:o,source:s,newValue:r,index:h=i?We.current:_(o,r)}).sort(b)).indexOf(m),We.current=h}return{newValue:r,activeIndex:h}},$e=(0,h.Z)((function(e){var t=x(e,me);if(t){var r=Ge({finger:t,move:!0,values:Pe,source:ke}),n=r.newValue,a=r.activeIndex;C({sliderRef:je,activeIndex:a,setActive:ye}),Re(n),G&&G(e,n)}})),Ye=(0,h.Z)((function(e){var t=x(e,me);if(t){var r=Ge({finger:t,values:Pe,source:ke}).newValue;ye(-1),"touchend"===e.type&&_e(-1),$&&$(e,r),me.current=void 0;var n=(0,f.Z)(je.current);n.removeEventListener("mousemove",$e),n.removeEventListener("mouseup",Ye),n.removeEventListener("touchmove",$e),n.removeEventListener("touchend",Ye)}})),Ke=(0,h.Z)((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(me.current=t.identifier);var r=x(e,me),n=Ge({finger:r,values:Pe,source:ke}),a=n.newValue,i=n.activeIndex;C({sliderRef:je,activeIndex:i,setActive:ye}),Re(a),G&&G(e,a);var o=(0,f.Z)(je.current);o.addEventListener("touchmove",$e),o.addEventListener("touchend",Ye)}));s.useEffect((function(){var e=je.current;e.addEventListener("touchstart",Ke);var t=(0,f.Z)(e);return function(){e.removeEventListener("touchstart",Ke),t.removeEventListener("mousemove",$e),t.removeEventListener("mouseup",Ye),t.removeEventListener("touchmove",$e),t.removeEventListener("touchend",Ye)}}),[Ye,$e,Ke]);var Xe=(0,h.Z)((function(e){Y&&Y(e),e.preventDefault();var t=x(e,me),r=Ge({finger:t,values:Pe,source:ke}),n=r.newValue,a=r.activeIndex;C({sliderRef:je,activeIndex:a,setActive:ye}),Re(n),G&&G(e,n);var i=(0,f.Z)(je.current);i.addEventListener("mousemove",$e),i.addEventListener("mouseup",Ye)})),Qe=S(Ce?Pe[0]:W,W,H),Je=S(Pe[Pe.length-1],W,H)-Qe,et=(0,o.Z)({},P[qe].offset(Qe),P[qe].leap(Je));return s.createElement(L,(0,o.Z)({ref:Ne,className:(0,c.Z)(E.root,E["color".concat((0,v.Z)(M))],D,A&&E.disabled,Te.length>0&&Te.some((function(e){return e.label}))&&E.marked,!1===ie&&E.trackFalse,"vertical"===X&&E.vertical,"inverted"===ie&&E.trackInverted),onMouseDown:Xe},fe),s.createElement("span",{className:E.rail}),s.createElement("span",{className:E.track,style:et}),s.createElement("input",{value:Pe.join(","),name:q,type:"hidden"}),Te.map((function(e,t){var r,n=S(e.value,W,H),a=P[qe].offset(n);return r=!1===ie?-1!==Pe.indexOf(e.value):"normal"===ie&&(Ce?e.value>=Pe[0]&&e.value<=Pe[Pe.length-1]:e.value<=Pe[0])||"inverted"===ie&&(Ce?e.value<=Pe[0]||e.value>=Pe[Pe.length-1]:e.value>=Pe[0]),s.createElement(s.Fragment,{key:e.value},s.createElement("span",{style:a,"data-index":t,className:(0,c.Z)(E.mark,r&&E.markActive)}),null!=e.label?s.createElement("span",{"aria-hidden":!0,"data-index":t,style:a,className:(0,c.Z)(E.markLabel,r&&E.markLabelActive)},e.label):null)})),Pe.map((function(e,t){var n=S(e,W,H),a=P[qe].offset(n);return s.createElement(ce,{key:t,valueLabelFormat:pe,valueLabelDisplay:de,className:E.valueLabel,value:"function"===typeof pe?pe(J(e),t):pe,index:t,open:we===t||ge===t||"on"===de,disabled:A},s.createElement(ne,{className:(0,c.Z)(E.thumb,E["thumbColor".concat((0,v.Z)(M))],ge===t&&E.active,A&&E.disabled,Le===t&&E.focusVisible),tabIndex:A?null:0,role:"slider",style:a,"data-index":t,"aria-label":N?N(t):r,"aria-labelledby":u,"aria-orientation":X,"aria-valuemax":J(H),"aria-valuemin":J(W),"aria-valuenow":J(e),"aria-valuetext":F?F(J(e),t):l,onKeyDown:Ve,onFocus:Fe,onBlur:Be,onMouseOver:ze,onMouseLeave:Ue}))})))})),D=(0,u.Z)((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?(0,l.$n)(e.palette.primary.main,.62):(0,l._j)(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,l.U1)(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,l.U1)(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat((0,l.U1)(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat((0,l.U1)(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:(0,o.Z)({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(E)},81273:function(e,t,r){"use strict";r.d(t,{Z:function(){return D}});var n=r(68625),a=r(87400),i=r(27878),o=r(9531),s=r(84538),c=r(3921),u=r(89222),d=r(42543),l=r(37530),p=r(19858),f=r(22078),h="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var m=function(e){var t=e.children,r=e.defer,n=void 0!==r&&r,a=e.fallback,o=void 0===a?null:a,s=i.useState(!1),c=s[0],u=s[1];return h((function(){n||u(!0)}),[n]),i.useEffect((function(){n&&u(!0)}),[n]),i.createElement(i.Fragment,null,c?t:o)},v=r(26395),g=r(10101),y=r(31451),b=r(81879),w=i.forwardRef((function(e,t){var r=e.anchor,o=e.classes,s=e.className,u=e.width,d=(0,n.Z)(e,["anchor","classes","className","width"]);return i.createElement("div",(0,a.Z)({className:(0,g.Z)(o.root,o["anchor".concat((0,b.Z)(r))],s),ref:t,style:(0,v.Z)({},(0,c.wE)(r)?"width":"height",u)},d))})),_=(0,y.Z)((function(e){return{root:{position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},anchorLeft:{right:"auto"},anchorRight:{left:"auto",right:0},anchorTop:{bottom:"auto",right:0},anchorBottom:{top:"auto",bottom:0,right:0}}}),{name:"PrivateSwipeArea"})(w),x=null;function S(e,t){return"right"===e?document.body.offsetWidth-t[0].pageX:t[0].pageX}function k(e,t){return"bottom"===e?window.innerHeight-t[0].clientY:t[0].clientY}function R(e,t){return e?t.clientWidth:t.clientHeight}function C(e,t,r,n){return Math.min(Math.max(r?t-e:n+t-e,0),n)}var P="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),T={enter:l.x9.enteringScreen,exit:l.x9.leavingScreen},E="undefined"!==typeof window?i.useLayoutEffect:i.useEffect,D=i.forwardRef((function(e,t){var r=(0,p.Z)(),l=(0,s.Z)({name:"MuiSwipeableDrawer",props:(0,a.Z)({},e),theme:r}),h=l.anchor,v=void 0===h?"left":h,g=l.disableBackdropTransition,y=void 0!==g&&g,b=l.disableDiscovery,w=void 0!==b&&b,D=l.disableSwipeToOpen,I=void 0===D?P:D,M=l.hideBackdrop,O=l.hysteresis,L=void 0===O?.52:O,Z=l.minFlingVelocity,j=void 0===Z?450:Z,A=l.ModalProps,N=(A=void 0===A?{}:A).BackdropProps,F=(0,n.Z)(A,["BackdropProps"]),B=l.onClose,z=l.onOpen,U=l.open,H=l.PaperProps,V=void 0===H?{}:H,W=l.SwipeAreaProps,q=l.swipeAreaWidth,G=void 0===q?20:q,$=l.transitionDuration,Y=void 0===$?T:$,K=l.variant,X=void 0===K?"temporary":K,Q=(0,n.Z)(l,["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"]),J=i.useState(!1),ee=J[0],te=J[1],re=i.useRef({isSwiping:null}),ne=i.useRef(),ae=i.useRef(),ie=i.useRef(),oe=i.useRef(!1),se=i.useRef();E((function(){se.current=null}),[U]);var ce=i.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?null:n,i=t.changeTransition,o=void 0===i||i,s=(0,c.ni)(r,v),u=-1!==["right","bottom"].indexOf(s)?1:-1,d=(0,c.wE)(v),l=d?"translate(".concat(u*e,"px, 0)"):"translate(0, ".concat(u*e,"px)"),p=ie.current.style;p.webkitTransform=l,p.transform=l;var h="";if(a&&(h=r.transitions.create("all",(0,f.C)({timeout:Y},{mode:a}))),o&&(p.webkitTransition=h,p.transition=h),!y&&!M){var m=ae.current.style;m.opacity=1-e/R(d,ie.current),o&&(m.webkitTransition=h,m.transition=h)}}),[v,y,M,r,Y]),ue=(0,d.Z)((function(e){if(oe.current)if(x=null,oe.current=!1,te(!1),re.current.isSwiping){re.current.isSwiping=null;var t,n=(0,c.ni)(r,v),a=(0,c.wE)(v);t=a?S(n,e.changedTouches):k(n,e.changedTouches);var i=a?re.current.startX:re.current.startY,o=R(a,ie.current),s=C(t,i,U,o),u=s/o;Math.abs(re.current.velocity)>j&&(se.current=1e3*Math.abs((o-s)/re.current.velocity)),U?re.current.velocity>j||u>L?B():ce(0,{mode:"exit"}):re.current.velocity<-j||1-u>L?z():ce(R(a,ie.current),{mode:"enter"})}else re.current.isSwiping=null})),de=(0,d.Z)((function(e){if(ie.current&&oe.current&&(null==x||x===re.current)){var t=(0,c.ni)(r,v),n=(0,c.wE)(v),a=S(t,e.touches),i=k(t,e.touches);if(U&&ie.current.contains(e.target)&&null==x){var o=function(e){var t=e.domTreeShapes,r=e.start,n=e.current,a=e.anchor,i={x:"scrollLeft",y:"scrollTop"},o={x:"scrollWidth",y:"scrollHeight"},s={x:"clientWidth",y:"clientHeight"};return t.some((function(e){var t=n>=r;"top"!==a&&"left"!==a||(t=!t);var c="left"===a||"right"===a?"x":"y",u=e[i[c]],d=u>0,l=u+e[s[c]]<e[o[c]];return t&&l||!t&&d?e:null}))}({domTreeShapes:function(e,t){for(var r=[];e&&e!==t;){var n=window.getComputedStyle(e);"absolute"===n.getPropertyValue("position")||"hidden"===n.getPropertyValue("overflow-x")?r=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&r.push(e),e=e.parentElement}return r}(e.target,ie.current),start:n?re.current.startX:re.current.startY,current:n?a:i,anchor:v});if(o)return void(x=o);x=re.current}if(null==re.current.isSwiping){var s=Math.abs(a-re.current.startX),u=Math.abs(i-re.current.startY);s>u&&e.cancelable&&e.preventDefault();var d=n?s>u&&s>3:u>s&&u>3;if(!0===d||(n?u>3:s>3)){if(re.current.isSwiping=d,!d)return void ue(e);re.current.startX=a,re.current.startY=i,w||U||(n?re.current.startX-=G:re.current.startY-=G)}}if(re.current.isSwiping){var l=R(n,ie.current),p=n?re.current.startX:re.current.startY;U&&!re.current.paperHit&&(p=Math.min(p,l));var f=C(n?a:i,p,U,l);if(U)if(re.current.paperHit)0===f&&(re.current.startX=a,re.current.startY=i);else{if(!(n?a<l:i<l))return;re.current.paperHit=!0,re.current.startX=a,re.current.startY=i}null===re.current.lastTranslate&&(re.current.lastTranslate=f,re.current.lastTime=performance.now()+1);var h=(f-re.current.lastTranslate)/(performance.now()-re.current.lastTime)*1e3;re.current.velocity=.4*re.current.velocity+.6*h,re.current.lastTranslate=f,re.current.lastTime=performance.now(),e.cancelable&&e.preventDefault(),ce(f)}}})),le=(0,d.Z)((function(e){if(!e.defaultPrevented&&!e.muiHandled&&(!U||ae.current.contains(e.target)||ie.current.contains(e.target))){var t=(0,c.ni)(r,v),n=(0,c.wE)(v),a=S(t,e.touches),i=k(t,e.touches);if(!U){if(I||e.target!==ne.current)return;if(n){if(a>G)return}else if(i>G)return}e.muiHandled=!0,x=null,re.current.startX=a,re.current.startY=i,te(!0),!U&&ie.current&&ce(R(n,ie.current)+(w?20:-G),{changeTransition:!1}),re.current.velocity=0,re.current.lastTime=null,re.current.lastTranslate=null,re.current.paperHit=!1,oe.current=!0}}));i.useEffect((function(){if("temporary"===X){var e=(0,u.Z)(ie.current);return e.addEventListener("touchstart",le),e.addEventListener("touchmove",de,{passive:!1}),e.addEventListener("touchend",ue),function(){e.removeEventListener("touchstart",le),e.removeEventListener("touchmove",de,{passive:!1}),e.removeEventListener("touchend",ue)}}}),[X,le,de,ue]),i.useEffect((function(){return function(){x===re.current&&(x=null)}}),[]),i.useEffect((function(){U||te(!1)}),[U]);var pe=i.useCallback((function(e){ae.current=o.findDOMNode(e)}),[]);return i.createElement(i.Fragment,null,i.createElement(c.ZP,(0,a.Z)({open:!("temporary"!==X||!ee)||U,variant:X,ModalProps:(0,a.Z)({BackdropProps:(0,a.Z)({},N,{ref:pe})},F),PaperProps:(0,a.Z)({},V,{style:(0,a.Z)({pointerEvents:"temporary"!==X||U?"":"none"},V.style),ref:ie}),anchor:v,transitionDuration:se.current||Y,onClose:B,ref:t},Q)),!I&&"temporary"===X&&i.createElement(m,null,i.createElement(_,(0,a.Z)({anchor:v,ref:ne,width:G},W))))}))},86471:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}),"AccountCircle")},45868:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},55906:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},363:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},54031:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},56142:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},50544:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"}),"Forum")},41453:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group")},55368:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}),"GroupAdd")},7161:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8 17.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM9.5 8c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5S9.5 9.38 9.5 8zm6.5 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"GroupWork")},70157:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic")},31585:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"}),"MicOff")},93879:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")},12494:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},15869:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings")},26419:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}),"Videocam")},80692:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"}),"VideocamOff")},10314:function(e,t,r){"use strict";var n=r(27878),a=r(15853);t.Z=(0,a.Z)(n.createElement("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"}),"VolumeUp")},18426:function(e,t,r){"use strict";var n=r(87400),a=r(27878),i=r(82139),o=r(95827),s=r(51519);t.Z=function(e){var t=e.children,r=e.theme,c=(0,o.Z)(),u=a.useMemo((function(){var e=null===c?r:function(e,t){return"function"===typeof t?t(e):(0,n.Z)({},e,t)}(c,r);return null!=e&&(e[s.Z]=null!==c),e}),[r,c]);return a.createElement(i.Z.Provider,{value:u},t)}},86681:function(e,t,r){"use strict";var n=r(48533),a=r(49804),i=r(4821);function o(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ClosedErrorClass:Error,StoppedErrorClass:Error},r=t.ClosedErrorClass,n=void 0===r?Error:r,i=t.StoppedErrorClass,o=void 0===i?Error:i;a(this,e),this.closed=!1,this.pendingTasks=[],this.ClosedErrorClass=Error,this.StoppedErrorClass=Error,this.ClosedErrorClass=n,this.StoppedErrorClass=o}return i(e,[{key:"close",value:function(){if(!this.closed){this.closed=!0;var e,t=o(this.pendingTasks);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.stopped=!0,r.reject(new this.ClosedErrorClass("AwaitQueue closed"))}}catch(n){t.e(n)}finally{t.f()}this.pendingTasks.length=0}}},{key:"push",value:function(e,t){return c(this,void 0,void 0,n.mark((function r(){var a=this;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.closed){r.next=2;break}throw new this.ClosedErrorClass("AwaitQueue closed");case 2:if("function"===typeof e){r.next=4;break}throw new TypeError("given task is not a function");case 4:if(!e.name&&t)try{Object.defineProperty(e,"name",{value:t})}catch(n){}return r.abrupt("return",new Promise((function(r,n){var i={task:e,name:t,resolve:r,reject:n,stopped:!1,enqueuedAt:new Date,executedAt:void 0};a.pendingTasks.push(i),1===a.pendingTasks.length&&a.next()})));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"stop",value:function(){if(!this.closed){var e,t=o(this.pendingTasks);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.stopped=!0,r.reject(new this.StoppedErrorClass("AwaitQueue stopped"))}}catch(n){t.e(n)}finally{t.f()}this.pendingTasks.length=0}}},{key:"dump",value:function(){var e=new Date;return this.pendingTasks.map((function(t){return{task:t.task,name:t.name,enqueuedTime:t.executedAt?t.executedAt.getTime()-t.enqueuedAt.getTime():e.getTime()-t.enqueuedAt.getTime(),executingTime:t.executedAt?e.getTime()-t.executedAt.getTime():0}}))}},{key:"next",value:function(){return c(this,void 0,void 0,n.mark((function e(){var t;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.pendingTasks[0]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.executeTask(t);case 5:this.pendingTasks.shift(),this.next();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"executeTask",value:function(e){return c(this,void 0,void 0,n.mark((function t(){var r;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.stopped){t.next=2;break}return t.abrupt("return");case 2:return e.executedAt=new Date,t.prev=3,t.next=6,e.task();case 6:if(r=t.sent,!e.stopped){t.next=9;break}return t.abrupt("return");case 9:e.resolve(r),t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(3),!e.stopped){t.next=16;break}return t.abrupt("return");case 16:e.reject(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,12]])})))}},{key:"size",get:function(){return this.pendingTasks.length}}]),e}();t.AwaitQueue=u},20246:function(e){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),a=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var a=e.getVersionPrecision(t),i=e.getVersionPrecision(r),o=Math.max(a,i),s=0,c=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(s=o-Math.min(a,i)),o-=1;o>=s;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===s)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var a=e[r];if(t(a,r))return a}},e.assign=function(e){for(var t,r,n=e,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var s=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=i.length;t<r;t+=1)s();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=a,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){}var t,r,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new a.default(e,t)},e.parse=function(e){return new a.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),n&&o(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=c(r(92)),a=c(r(93)),i=c(r(94)),o=c(r(95)),s=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,a={},i=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(a[t]=o,i+=1):"object"==typeof o&&(r[t]=o,n+=1)})),n>0){var o=Object.keys(r),c=s.default.find(o,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(r[c]);if(void 0!==u)return u}var d=s.default.find(o,(function(e){return t.isPlatform(e)}));if(d){var l=this.satisfies(r[d]);if(void 0!==l)return l}}if(i>0){var p=Object.keys(a),f=s.default.find(p,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(a[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),a=s.default.getBrowserTypeByAlias(n);return t&&a&&(n=a.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,a=this.getBrowserVersion();if("string"==typeof a)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(s.default.compareVersions(a,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=a.default.getFirstMatch(i,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=a.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=a.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:i.OS_MAP.iOS},r=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=a.default.getMacOSVersionName(t),n={name:i.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=a.default.getAndroidVersionName(t),n={name:i.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:i.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,a=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},r=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},r=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},r=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},r=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}})},82411:function(e){var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a,o=365.25*a;function s(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*a;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=a)return s(e,i,a,"day");if(i>=n)return s(e,i,n,"hour");if(i>=r)return s(e,i,r,"minute");if(i>=t)return s(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=a)return Math.round(e/a)+"d";if(i>=n)return Math.round(e/n)+"h";if(i>=r)return Math.round(e/r)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},84560:function(e,t,r){var n=r(33221);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=r(27959)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},27959:function(e,t,r){var n=r(64181);e.exports=function(e){function t(e){var r,n=null;function i(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];if(i.enabled){var o=i,s=Number(new Date),c=s-(r||s);o.diff=c,o.prev=r,o.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";u++;var a=t.formatters[r];if("function"===typeof a){var i=n[u];e=a.call(o,i),n.splice(u,1),u--}return e})),t.formatArgs.call(o,n);var d=o.log||t.log;d.apply(o,n)}}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=a,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===n?t.enabled(e):n},set:function(e){n=e}}),"function"===typeof t.init&&t.init(i),i}function a(e,r){var n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(n(t.names.map(i)),n(t.skips.map(i).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),a=n.length;for(r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(82411),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},78315:function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(r,n){function a(){void 0!==i&&e.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==t&&(i=function(r){e.removeListener(t,a),n(r)},e.once("error",i)),e.once(t,a)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var a,i,o,u;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),void 0===o)o=i[t]=r,++e._eventsCount;else if("function"===typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(a=c(e))>0&&o.length>a&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=o.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=d.bind(n);return a.listener=r,n.wrapFn=a,a}function p(e,t,r){var n=e._events;if(void 0===n)return[];var a=n[t];return void 0===a?[]:"function"===typeof a?r?[a.listener||a]:[a]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function h(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)n(c,this,t);else{var u=c.length,d=h(c,u);for(r=0;r<u;++r)n(d[r],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,l(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,l(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,a,i,o;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(a=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,a=i;break}if(a<0)return this;0===a?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,a),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var a,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(a=i[n])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return p(this,e,!0)},i.prototype.rawListeners=function(e){return p(this,e,!1)},i.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},17606:function(e,t,r){var n=r(4821),a=r(49804);function i(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=r(84560)("h264-profile-level-id");s.log=console.info.bind(console);t.ProfileConstrainedBaseline=1,t.ProfileBaseline=2,t.ProfileMain=3,t.ProfileConstrainedHigh=4,t.ProfileHigh=5;t.Level1_b=0,t.Level1=10,t.Level1_1=11,t.Level1_2=12,t.Level1_3=13,t.Level2=20,t.Level2_1=21,t.Level2_2=22,t.Level3=30,t.Level3_1=31,t.Level3_2=32,t.Level4=40,t.Level4_1=41,t.Level4_2=42,t.Level5=50,t.Level5_1=51,t.Level5_2=52;var c=function e(t,r){"use strict";a(this,e),this.profile=t,this.level=r};t.ProfileLevelId=c;var u=new c(1,31),d=function(){"use strict";function e(t){a(this,e),this._mask=~f("x",t),this._maskedValue=f("1",t)}return n(e,[{key:"isMatch",value:function(e){return this._maskedValue===(e&this._mask)}}]),e}(),l=function e(t,r,n){"use strict";a(this,e),this.profile_idc=t,this.profile_iop=r,this.profile=n},p=[new l(66,new d("x1xx0000"),1),new l(77,new d("1xxx0000"),1),new l(88,new d("11xx0000"),1),new l(66,new d("x0xx0000"),2),new l(88,new d("10xx0000"),2),new l(77,new d("0x0x0000"),3),new l(100,new d("00000000"),5),new l(100,new d("00001100"),4)];function f(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function h(e,t){return function(e,t){return 0===e?10!==t&&0!==t:0===t?10!==e:e<t}(e,t)?e:t}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["level-asymmetry-allowed"];return 1===t||"1"===t}t.parseProfileLevelId=function(e){if("string"!==typeof e||6!==e.length)return null;var t=parseInt(e,16);if(0===t)return null;var r,n=255&t,a=t>>8&255,o=t>>16&255;switch(n){case 11:r=0!==(16&a)?0:11;break;case 10:case 12:case 13:case 20:case 21:case 22:case 30:case 31:case 32:case 40:case 41:case 42:case 50:case 51:case 52:r=n;break;default:return s("parseProfileLevelId() | unrecognized level_idc:%s",n),null}var u,d=i(p);try{for(d.s();!(u=d.n()).done;){var l=u.value;if(o===l.profile_idc&&l.profile_iop.isMatch(a))return new c(l.profile,r)}}catch(f){d.e(f)}finally{d.f()}return s("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){if(0==e.level)switch(e.profile){case 1:return"42f00b";case 2:return"42100b";case 3:return"4d100b";default:return s("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}var t;switch(e.profile){case 1:t="42e0";break;case 2:t="4200";break;case 3:t="4d00";break;case 4:t="640c";break;case 5:t="6400";break;default:return s("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}var r=e.level.toString(16);return 1===r.length&&(r="0".concat(r)),"".concat(t).concat(r)},t.parseSdpProfileLevelId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e["profile-level-id"];return r?t.parseProfileLevelId(r):u},t.isSameProfile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.parseSdpProfileLevelId(e),a=t.parseSdpProfileLevelId(r);return Boolean(n&&a&&n.profile===a.profile)},t.generateProfileLevelIdForAnswer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e["profile-level-id"]&&!r["profile-level-id"])return s("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;var n=t.parseSdpProfileLevelId(e),a=t.parseSdpProfileLevelId(r);if(!n)throw new TypeError("invalid local_profile_level_id");if(!a)throw new TypeError("invalid remote_profile_level_id");if(n.profile!==a.profile)throw new TypeError("H264 Profile mismatch");var i=m(e)&&m(r),o=n.level,u=a.level,d=h(o,u),l=i?o:d;return s("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",n.profile,l),t.profileLevelIdToString(new c(n.profile,l))}},30473:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(70873),c=r(31790),u=r(19678),d=r(41510);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var p=r(83603),f=r(60035),h=r(89098),m=new p.Logger("Consumer"),v=function(e){c(r,e);var t=l(r);function r(e){var n,a=e.id,o=e.localId,c=e.producerId,u=e.rtpReceiver,d=e.track,l=e.rtpParameters,p=e.appData;return i(this,r),(n=t.call(this))._closed=!1,n._observer=new f.EnhancedEventEmitter,m.debug("constructor()"),n._id=a,n._localId=o,n._producerId=c,n._rtpReceiver=u,n._track=d,n._rtpParameters=l,n._paused=!d.enabled,n._appData=p,n._onTrackEnded=n._onTrackEnded.bind(s(n)),n._handleTrack(),n}return o(r,[{key:"close",value:function(){this._closed||(m.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}},{key:"transportClosed",value:function(){this._closed||(m.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}},{key:"getStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new h.InvalidStateError("closed");case 2:return e.abrupt("return",this.safeEmitAsPromise("@getstats"));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){m.debug("pause()"),this._closed?m.error("pause() | Consumer closed"):(this._paused=!0,this._track.enabled=!1,this._observer.safeEmit("pause"))}},{key:"resume",value:function(){m.debug("resume()"),this._closed?m.error("resume() | Consumer closed"):(this._paused=!1,this._track.enabled=!0,this._observer.safeEmit("resume"))}},{key:"_onTrackEnded",value:function(){m.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}},{key:"_handleTrack",value:function(){this._track.addEventListener("ended",this._onTrackEnded)}},{key:"_destroyTrack",value:function(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(e){}}},{key:"id",get:function(){return this._id}},{key:"localId",get:function(){return this._localId}},{key:"producerId",get:function(){return this._producerId}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._track.kind}},{key:"rtpReceiver",get:function(){return this._rtpReceiver}},{key:"track",get:function(){return this._track}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"paused",get:function(){return this._paused}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}},{key:"observer",get:function(){return this._observer}}]),r}(f.EnhancedEventEmitter);t.Consumer=v},51837:function(e,t,r){"use strict";var n=r(49804),a=r(4821),i=r(31790),o=r(19678),s=r(41510);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(83603),d=r(60035),l=new u.Logger("DataConsumer"),p=function(e){i(r,e);var t=c(r);function r(e){var a,i=e.id,o=e.dataProducerId,s=e.dataChannel,c=e.sctpStreamParameters,u=e.appData;return n(this,r),(a=t.call(this))._closed=!1,a._observer=new d.EnhancedEventEmitter,l.debug("constructor()"),a._id=i,a._dataProducerId=o,a._dataChannel=s,a._sctpStreamParameters=c,a._appData=u,a._handleDataChannel(),a}return a(r,[{key:"close",value:function(){this._closed||(l.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}},{key:"transportClosed",value:function(){this._closed||(l.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}},{key:"_handleDataChannel",value:function(){var e=this;this._dataChannel.addEventListener("open",(function(){e._closed||(l.debug('DataChannel "open" event'),e.safeEmit("open"))})),this._dataChannel.addEventListener("error",(function(t){if(!e._closed){var r=t.error;r||(r=new Error("unknown DataChannel error")),"sctp-failure"===r.errorDetail?l.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):l.error('DataChannel "error" event: %o',r),e.safeEmit("error",r)}})),this._dataChannel.addEventListener("close",(function(){e._closed||(l.warn('DataChannel "close" event'),e._closed=!0,e.emit("@close"),e.safeEmit("close"))})),this._dataChannel.addEventListener("message",(function(t){e._closed||e.safeEmit("message",t.data)}))}},{key:"id",get:function(){return this._id}},{key:"dataProducerId",get:function(){return this._dataProducerId}},{key:"closed",get:function(){return this._closed}},{key:"sctpStreamParameters",get:function(){return this._sctpStreamParameters}},{key:"readyState",get:function(){return this._dataChannel.readyState}},{key:"label",get:function(){return this._dataChannel.label}},{key:"protocol",get:function(){return this._dataChannel.protocol}},{key:"binaryType",get:function(){return this._dataChannel.binaryType},set:function(e){this._dataChannel.binaryType=e}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}},{key:"observer",get:function(){return this._observer}}]),r}(d.EnhancedEventEmitter);t.DataConsumer=p},52664:function(e,t,r){"use strict";var n=r(49804),a=r(4821),i=r(31790),o=r(19678),s=r(41510);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(83603),d=r(60035),l=r(89098),p=new u.Logger("DataProducer"),f=function(e){i(r,e);var t=c(r);function r(e){var a,i=e.id,o=e.dataChannel,s=e.sctpStreamParameters,c=e.appData;return n(this,r),(a=t.call(this))._closed=!1,a._observer=new d.EnhancedEventEmitter,p.debug("constructor()"),a._id=i,a._dataChannel=o,a._sctpStreamParameters=s,a._appData=c,a._handleDataChannel(),a}return a(r,[{key:"close",value:function(){this._closed||(p.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}},{key:"transportClosed",value:function(){this._closed||(p.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}},{key:"send",value:function(e){if(p.debug("send()"),this._closed)throw new l.InvalidStateError("closed");this._dataChannel.send(e)}},{key:"_handleDataChannel",value:function(){var e=this;this._dataChannel.addEventListener("open",(function(){e._closed||(p.debug('DataChannel "open" event'),e.safeEmit("open"))})),this._dataChannel.addEventListener("error",(function(t){if(!e._closed){var r=t.error;r||(r=new Error("unknown DataChannel error")),"sctp-failure"===r.errorDetail?p.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",r.sctpCauseCode,r.message):p.error('DataChannel "error" event: %o',r),e.safeEmit("error",r)}})),this._dataChannel.addEventListener("close",(function(){e._closed||(p.warn('DataChannel "close" event'),e._closed=!0,e.emit("@close"),e.safeEmit("close"))})),this._dataChannel.addEventListener("message",(function(){e._closed||p.warn('DataChannel "message" event in a DataProducer, message discarded')})),this._dataChannel.addEventListener("bufferedamountlow",(function(){e._closed||e.safeEmit("bufferedamountlow")}))}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"sctpStreamParameters",get:function(){return this._sctpStreamParameters}},{key:"readyState",get:function(){return this._dataChannel.readyState}},{key:"label",get:function(){return this._dataChannel.label}},{key:"protocol",get:function(){return this._dataChannel.protocol}},{key:"bufferedAmount",get:function(){return this._dataChannel.bufferedAmount}},{key:"bufferedAmountLowThreshold",get:function(){return this._dataChannel.bufferedAmountLowThreshold},set:function(e){this._dataChannel.bufferedAmountLowThreshold=e}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}},{key:"observer",get:function(){return this._observer}}]),r}(d.EnhancedEventEmitter);t.DataProducer=f},29307:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821);Object.defineProperty(t,"__esModule",{value:!0});var s=r(20246),c=r(83603),u=r(60035),d=r(89098),l=r(54952),p=r(38418),f=r(59250),h=r(48208),m=r(12682),v=r(95077),g=r(66542),y=r(10901),b=r(94012),w=r(3265),_=r(78941),x=r(16480),S=new c.Logger("Device");function k(){if("object"===typeof navigator&&"ReactNative"===navigator.product)return"undefined"===typeof RTCPeerConnection?void S.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection"):(S.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative");if("object"!==typeof navigator||"string"!==typeof navigator.userAgent)S.warn("this._detectDevice() | unknown device");else{var e=navigator.userAgent,t=s.getParser(e),r=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({safari:">=12.0"})&&"undefined"!==typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(r.name&&"blink"===r.name.toLowerCase()){var n=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(n){var a=Number(n[1]);return a>=74?"Chrome74":a>=70?"Chrome70":a>=67?"Chrome67":"Chrome55"}return"Chrome74"}S.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion())}}t.detectDevice=k;var R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.handlerName,n=t.handlerFactory,a=t.Handler;if(i(this,e),this._loaded=!1,this._observer=new u.EnhancedEventEmitter,S.debug("constructor()"),a){if(S.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!==typeof a)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");r=a}if(r&&n)throw new TypeError("just one of handlerName or handlerInterface can be given");if(n)this._handlerFactory=n;else{if(r)S.debug("constructor() | handler given: %s",r);else{if(!(r=k()))throw new d.UnsupportedError("device not supported");S.debug("constructor() | detected handler: %s",r)}switch(r){case"Chrome74":this._handlerFactory=h.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=m.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=v.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=g.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=y.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=b.Safari12.createFactory();break;case"Safari11":this._handlerFactory=w.Safari11.createFactory();break;case"Edge11":this._handlerFactory=_.Edge11.createFactory();break;case"ReactNative":this._handlerFactory=x.ReactNative.createFactory();break;default:throw new TypeError('unknown handlerName "'.concat(r,'"'))}}var o=this._handlerFactory();this._handlerName=o.name,o.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}return o(e,[{key:"load",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.routerRtpCapabilities,S.debug("load() [routerRtpCapabilities:%o]",r),r=l.clone(r,void 0),e.prev=3,!this._loaded){e.next=6;break}throw new d.InvalidStateError("already loaded");case 6:return p.validateRtpCapabilities(r),a=this._handlerFactory(),e.next=10,a.getNativeRtpCapabilities();case 10:return i=e.sent,S.debug("load() | got native RTP capabilities:%o",i),p.validateRtpCapabilities(i),this._extendedRtpCapabilities=p.getExtendedRtpCapabilities(i,r),S.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=p.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=p.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=p.getRecvRtpCapabilities(this._extendedRtpCapabilities),p.validateRtpCapabilities(this._recvRtpCapabilities),S.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),e.next=22,a.getNativeSctpCapabilities();case 22:this._sctpCapabilities=e.sent,S.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),p.validateSctpCapabilities(this._sctpCapabilities),S.debug("load() succeeded"),this._loaded=!0,a.close(),e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(3),a&&a.close(),e.t0;case 34:case"end":return e.stop()}}),e,this,[[3,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"canProduce",value:function(e){if(!this._loaded)throw new d.InvalidStateError("not loaded");if("audio"!==e&&"video"!==e)throw new TypeError('invalid kind "'.concat(e,'"'));return this._canProduceByKind[e]}},{key:"createSendTransport",value:function(e){var t=e.id,r=e.iceParameters,n=e.iceCandidates,a=e.dtlsParameters,i=e.sctpParameters,o=e.iceServers,s=e.iceTransportPolicy,c=e.additionalSettings,u=e.proprietaryConstraints,d=e.appData,l=void 0===d?{}:d;return S.debug("createSendTransport()"),this._createTransport({direction:"send",id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:u,appData:l})}},{key:"createRecvTransport",value:function(e){var t=e.id,r=e.iceParameters,n=e.iceCandidates,a=e.dtlsParameters,i=e.sctpParameters,o=e.iceServers,s=e.iceTransportPolicy,c=e.additionalSettings,u=e.proprietaryConstraints,d=e.appData,l=void 0===d?{}:d;return S.debug("createRecvTransport()"),this._createTransport({direction:"recv",id:t,iceParameters:r,iceCandidates:n,dtlsParameters:a,sctpParameters:i,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:u,appData:l})}},{key:"_createTransport",value:function(e){var t=e.direction,r=e.id,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,l=e.proprietaryConstraints,p=e.appData,h=void 0===p?{}:p;if(!this._loaded)throw new d.InvalidStateError("not loaded");if("string"!==typeof r)throw new TypeError("missing id");if("object"!==typeof n)throw new TypeError("missing iceParameters");if(!Array.isArray(a))throw new TypeError("missing iceCandidates");if("object"!==typeof i)throw new TypeError("missing dtlsParameters");if(o&&"object"!==typeof o)throw new TypeError("wrong sctpParameters");if(h&&"object"!==typeof h)throw new TypeError("if given, appData must be an object");var m=new f.Transport({direction:t,id:r,iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o,iceServers:s,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,appData:h,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",m),m}},{key:"handlerName",get:function(){return this._handlerName}},{key:"loaded",get:function(){return this._loaded}},{key:"rtpCapabilities",get:function(){if(!this._loaded)throw new d.InvalidStateError("not loaded");return this._recvRtpCapabilities}},{key:"sctpCapabilities",get:function(){if(!this._loaded)throw new d.InvalidStateError("not loaded");return this._sctpCapabilities}},{key:"observer",get:function(){return this._observer}}]),e}();t.Device=R},60035:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var l=r(78315),p=new(r(83603).Logger)("EnhancedEventEmitter"),f=function(e){s(r,e);var t=d(r);function r(){var e;return i(this,r),(e=t.call(this)).setMaxListeners(1/0),e}return o(r,[{key:"safeEmit",value:function(e){var t=this.listenerCount(e);try{for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return this.emit.apply(this,[e].concat(n))}catch(i){return p.error("safeEmit() | event listener threw an error [event:%s]:%o",e,i),Boolean(t)}}},{key:"safeEmitAsPromise",value:function(){var e=a(n.mark((function e(t){var r,a,i,o=this,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=s.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=s[i];return e.abrupt("return",new Promise((function(e,r){try{o.emit.apply(o,[t].concat(a,[e,r]))}catch(n){p.error("safeEmitAsPromise() | event listener threw an error [event:%s]:%o",t,n),r(n)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l.EventEmitter);t.EnhancedEventEmitter=f},83603:function(e,t,r){"use strict";var n=r(49804),a=r(4821);Object.defineProperty(t,"__esModule",{value:!0});var i=r(84560),o="mediasoup-client",s=function(){function e(t){n(this,e),t?(this._debug=i.default("".concat(o,":").concat(t)),this._warn=i.default("".concat(o,":WARN:").concat(t)),this._error=i.default("".concat(o,":ERROR:").concat(t))):(this._debug=i.default(o),this._warn=i.default("".concat(o,":WARN")),this._error=i.default("".concat(o,":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return a(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();t.Logger=s},72604:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(70873),c=r(31790),u=r(19678),d=r(41510);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return u(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var p=r(83603),f=r(60035),h=r(89098),m=new p.Logger("Producer"),v=function(e){c(r,e);var t=l(r);function r(e){var n,a=e.id,o=e.localId,c=e.rtpSender,u=e.track,d=e.rtpParameters,l=e.stopTracks,p=e.disableTrackOnPause,h=e.zeroRtpOnPause,v=e.appData;return i(this,r),(n=t.call(this))._closed=!1,n._observer=new f.EnhancedEventEmitter,m.debug("constructor()"),n._id=a,n._localId=o,n._rtpSender=c,n._track=u,n._kind=u.kind,n._rtpParameters=d,n._paused=!!p&&!u.enabled,n._maxSpatialLayer=void 0,n._stopTracks=l,n._disableTrackOnPause=p,n._zeroRtpOnPause=h,n._appData=v,n._onTrackEnded=n._onTrackEnded.bind(s(n)),n._handleTrack(),n}return o(r,[{key:"close",value:function(){this._closed||(m.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}},{key:"transportClosed",value:function(){this._closed||(m.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}},{key:"getStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new h.InvalidStateError("closed");case 2:return e.abrupt("return",this.safeEmitAsPromise("@getstats"));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){m.debug("pause()"),this._closed?m.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",null).catch((function(){})),this._observer.safeEmit("pause"))}},{key:"resume",value:function(){m.debug("resume()"),this._closed?m.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",this._track).catch((function(){})),this._observer.safeEmit("resume"))}},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.track,m.debug("replaceTrack() [track:%o]",r),!this._closed){e.next=7;break}if(r&&this._stopTracks)try{r.stop()}catch(n){}throw new h.InvalidStateError("closed");case 7:if(!r||"ended"!==r.readyState){e.next=9;break}throw new h.InvalidStateError("track ended");case 9:if(r!==this._track){e.next=12;break}return m.debug("replaceTrack() | same track, ignored"),e.abrupt("return");case 12:if(this._zeroRtpOnPause&&this._paused){e.next=15;break}return e.next=15,this.safeEmitAsPromise("@replacetrack",r);case 15:this._destroyTrack(),this._track=r,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack();case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=4;break}throw new h.InvalidStateError("closed");case 4:if("video"===this._kind){e.next=8;break}throw new h.UnsupportedError("not a video Producer");case 8:if("number"===typeof t){e.next=10;break}throw new TypeError("invalid spatialLayer");case 10:if(t!==this._maxSpatialLayer){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,this.safeEmitAsPromise("@setmaxspatiallayer",t);case 14:this._maxSpatialLayer=t;case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=4;break}throw new h.InvalidStateError("closed");case 4:if("object"===typeof t){e.next=6;break}throw new TypeError("invalid params");case 6:return e.next=8,this.safeEmitAsPromise("@setrtpencodingparameters",t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onTrackEnded",value:function(){m.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}},{key:"_handleTrack",value:function(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}},{key:"_destroyTrack",value:function(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}},{key:"id",get:function(){return this._id}},{key:"localId",get:function(){return this._localId}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._kind}},{key:"rtpSender",get:function(){return this._rtpSender}},{key:"track",get:function(){return this._track}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"paused",get:function(){return this._paused}},{key:"maxSpatialLayer",get:function(){return this._maxSpatialLayer}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}},{key:"observer",get:function(){return this._observer}}]),r}(f.EnhancedEventEmitter);t.Producer=v},59250:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(86681),h=r(83603),m=r(60035),v=r(89098),g=r(54952),y=r(38418),b=r(72604),w=r(30473),_=r(52664),x=r(51837),S=new h.Logger("Transport"),k=function(e){s(r,e);var t=p(r);function r(e){var n,a=e.direction,o=e.id,s=e.iceParameters,c=e.iceCandidates,u=e.dtlsParameters,d=e.sctpParameters,l=e.iceServers,p=e.iceTransportPolicy,h=e.additionalSettings,y=e.proprietaryConstraints,b=e.appData,w=e.handlerFactory,_=e.extendedRtpCapabilities,x=e.canProduceByKind;return i(this,r),(n=t.call(this))._closed=!1,n._connectionState="new",n._producers=new Map,n._consumers=new Map,n._dataProducers=new Map,n._dataConsumers=new Map,n._probatorConsumerCreated=!1,n._awaitQueue=new f.AwaitQueue({ClosedErrorClass:v.InvalidStateError}),n._observer=new m.EnhancedEventEmitter,S.debug("constructor() [id:%s, direction:%s]",o,a),n._id=o,n._direction=a,n._extendedRtpCapabilities=_,n._canProduceByKind=x,n._maxSctpMessageSize=d?d.maxMessageSize:null,delete(h=g.clone(h,{})).iceServers,delete h.iceTransportPolicy,delete h.bundlePolicy,delete h.rtcpMuxPolicy,delete h.sdpSemantics,n._handler=w(),n._handler.run({direction:a,iceParameters:s,iceCandidates:c,dtlsParameters:u,sctpParameters:d,iceServers:l,iceTransportPolicy:p,additionalSettings:h,proprietaryConstraints:y,extendedRtpCapabilities:_}),n._appData=b,n._handleHandler(),n}return o(r,[{key:"close",value:function(){if(!this._closed){S.debug("close()"),this._closed=!0,this._awaitQueue.close(),this._handler.close();var e,t=d(this._producers.values());try{for(t.s();!(e=t.n()).done;){e.value.transportClosed()}}catch(c){t.e(c)}finally{t.f()}this._producers.clear();var r,n=d(this._consumers.values());try{for(n.s();!(r=n.n()).done;){r.value.transportClosed()}}catch(c){n.e(c)}finally{n.f()}this._consumers.clear();var a,i=d(this._dataProducers.values());try{for(i.s();!(a=i.n()).done;){a.value.transportClosed()}}catch(c){i.e(c)}finally{i.f()}this._dataProducers.clear();var o,s=d(this._dataConsumers.values());try{for(s.s();!(o=s.n()).done;){o.value.transportClosed()}}catch(c){s.e(c)}finally{s.f()}this._dataConsumers.clear(),this._observer.safeEmit("close")}}},{key:"getStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new v.InvalidStateError("closed");case 2:return e.abrupt("return",this._handler.getTransportStats());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,i=this;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.iceParameters,S.debug("restartIce()"),!this._closed){e.next=6;break}throw new v.InvalidStateError("closed");case 6:if(r){e.next=8;break}throw new TypeError("missing iceParameters");case 8:return e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i._handler.restartIce(r));case 1:case"end":return e.stop()}}),e)}))),"transport.restartIce()"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(){var t,r,i=this,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},r=t.iceServers,S.debug("updateIceServers()"),!this._closed){e.next=6;break}throw new v.InvalidStateError("closed");case 6:if(Array.isArray(r)){e.next=8;break}throw new TypeError("missing iceServers");case 8:return e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i._handler.updateIceServers(r));case 1:case"end":return e.stop()}}),e)}))),"transport.updateIceServers()"));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"produce",value:function(){var e=a(n.mark((function e(){var t,r,i,o,s,c,u,d,l,p,f,h,m,g=this,w=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.length>0&&void 0!==w[0]?w[0]:{},r=t.track,i=t.encodings,o=t.codecOptions,s=t.codec,c=t.stopTracks,u=void 0===c||c,d=t.disableTrackOnPause,l=void 0===d||d,p=t.zeroRtpOnPause,f=void 0!==p&&p,h=t.appData,m=void 0===h?{}:h,S.debug("produce() [track:%o]",r),r){e.next=6;break}throw new TypeError("missing track");case 6:if("send"===this._direction){e.next=10;break}throw new v.UnsupportedError("not a sending Transport");case 10:if(this._canProduceByKind[r.kind]){e.next=14;break}throw new v.UnsupportedError("cannot produce ".concat(r.kind));case 14:if("ended"!==r.readyState){e.next=18;break}throw new v.InvalidStateError("track ended");case 18:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=22;break}throw new TypeError('no "connect" listener set into this transport');case 22:if(0!==this.listenerCount("produce")){e.next=26;break}throw new TypeError('no "produce" listener set into this transport');case 26:if(!m||"object"===typeof m){e.next=28;break}throw new TypeError("if given, appData must be an object");case 28:return e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){var t,a,c,d,p,h,v,w;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||Array.isArray(i)){e.next=4;break}throw TypeError("encodings must be an array");case 4:i&&0===i.length?t=void 0:i&&(t=i.map((function(e){var t={active:!0};return!1===e.active&&(t.active=!1),"boolean"===typeof e.dtx&&(t.dtx=e.dtx),"string"===typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"===typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"===typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"===typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"===typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"===typeof e.priority&&(t.priority=e.priority),"string"===typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t})));case 5:return e.next=7,g._handler.send({track:r,encodings:t,codecOptions:o,codec:s});case 7:return a=e.sent,c=a.localId,d=a.rtpParameters,p=a.rtpSender,e.prev=11,y.validateRtpParameters(d),e.next=15,g.safeEmitAsPromise("produce",{kind:r.kind,rtpParameters:d,appData:m});case 15:return h=e.sent,v=h.id,w=new b.Producer({id:v,localId:c,rtpSender:p,track:r,rtpParameters:d,stopTracks:u,disableTrackOnPause:l,zeroRtpOnPause:f,appData:m}),g._producers.set(w.id,w),g._handleProducer(w),g._observer.safeEmit("newproducer",w),e.abrupt("return",w);case 24:throw e.prev=24,e.t0=e.catch(11),g._handler.stopSending(c).catch((function(){})),e.t0;case 28:case"end":return e.stop()}}),e,null,[[11,24]])}))),"transport.produce()").catch((function(e){if(u)try{r.stop()}catch(t){}throw e})));case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"consume",value:function(){var e=a(n.mark((function e(t){var r,i,o,s,c,u,d=this;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.producerId,o=t.kind,s=t.rtpParameters,c=t.appData,u=void 0===c?{}:c,S.debug("consume()"),s=g.clone(s,void 0),!this._closed){e.next=7;break}throw new v.InvalidStateError("closed");case 7:if("recv"===this._direction){e.next=11;break}throw new v.UnsupportedError("not a receiving Transport");case 11:if("string"===typeof r){e.next=15;break}throw new TypeError("missing id");case 15:if("string"===typeof i){e.next=19;break}throw new TypeError("missing producerId");case 19:if("audio"===o||"video"===o){e.next=23;break}throw new TypeError("invalid kind '".concat(o,"'"));case 23:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=27;break}throw new TypeError('no "connect" listener set into this transport');case 27:if(!u||"object"===typeof u){e.next=29;break}throw new TypeError("if given, appData must be an object");case 29:return e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){var t,a,c,l,p,f;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.canReceive(s,d._extendedRtpCapabilities)){e.next=3;break}throw new v.UnsupportedError("cannot consume this Producer");case 3:return e.next=5,d._handler.receive({trackId:r,kind:o,rtpParameters:s});case 5:if(t=e.sent,a=t.localId,c=t.rtpReceiver,l=t.track,p=new w.Consumer({id:r,localId:a,producerId:i,rtpReceiver:c,track:l,rtpParameters:s,appData:u}),d._consumers.set(p.id,p),d._handleConsumer(p),d._probatorConsumerCreated||"video"!==o){e.next=24;break}return e.prev=13,f=y.generateProbatorRtpParameters(p.rtpParameters),e.next=17,d._handler.receive({trackId:"probator",kind:"video",rtpParameters:f});case 17:S.debug("consume() | Consumer for RTP probation created"),d._probatorConsumerCreated=!0,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),S.error("consume() | failed to create Consumer for RTP probation:%o",e.t0);case 24:return d._observer.safeEmit("newconsumer",p),e.abrupt("return",p);case 26:case"end":return e.stop()}}),e,null,[[13,21]])}))),"transport.consume()"));case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"produceData",value:function(){var e=a(n.mark((function e(){var t,r,i,o,s,c,u,d,l,p,f,h,m,g=this,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]?b[0]:{},r=t.ordered,i=void 0===r||r,o=t.maxPacketLifeTime,s=t.maxRetransmits,c=t.priority,u=void 0===c?"low":c,d=t.label,l=void 0===d?"":d,p=t.protocol,f=void 0===p?"":p,h=t.appData,m=void 0===h?{}:h,S.debug("produceData()"),"send"===this._direction){e.next=6;break}throw new v.UnsupportedError("not a sending Transport");case 6:if(this._maxSctpMessageSize){e.next=10;break}throw new v.UnsupportedError("SCTP not enabled by remote Transport");case 10:if(["very-low","low","medium","high"].includes(u)){e.next=14;break}throw new TypeError("wrong priority");case 14:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=18;break}throw new TypeError('no "connect" listener set into this transport');case 18:if(0!==this.listenerCount("producedata")){e.next=22;break}throw new TypeError('no "producedata" listener set into this transport');case 22:if(!m||"object"===typeof m){e.next=24;break}throw new TypeError("if given, appData must be an object");case 24:return(o||s)&&(i=!1),e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){var t,r,a,c,d,p;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g._handler.sendDataChannel({ordered:i,maxPacketLifeTime:o,maxRetransmits:s,priority:u,label:l,protocol:f});case 2:return t=e.sent,r=t.dataChannel,a=t.sctpStreamParameters,y.validateSctpStreamParameters(a),e.next=8,g.safeEmitAsPromise("producedata",{sctpStreamParameters:a,label:l,protocol:f,appData:m});case 8:return c=e.sent,d=c.id,p=new _.DataProducer({id:d,dataChannel:r,sctpStreamParameters:a,appData:m}),g._dataProducers.set(p.id,p),g._handleDataProducer(p),g._observer.safeEmit("newdataproducer",p),e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)}))),"transport.produceData()"));case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"consumeData",value:function(){var e=a(n.mark((function e(t){var r,i,o,s,c,u,d,l,p,f=this;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.dataProducerId,o=t.sctpStreamParameters,s=t.label,c=void 0===s?"":s,u=t.protocol,d=void 0===u?"":u,l=t.appData,p=void 0===l?{}:l,S.debug("consumeData()"),o=g.clone(o,void 0),!this._closed){e.next=7;break}throw new v.InvalidStateError("closed");case 7:if("recv"===this._direction){e.next=11;break}throw new v.UnsupportedError("not a receiving Transport");case 11:if(this._maxSctpMessageSize){e.next=15;break}throw new v.UnsupportedError("SCTP not enabled by remote Transport");case 15:if("string"===typeof r){e.next=19;break}throw new TypeError("missing id");case 19:if("string"===typeof i){e.next=23;break}throw new TypeError("missing dataProducerId");case 23:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=27;break}throw new TypeError('no "connect" listener set into this transport');case 27:if(!p||"object"===typeof p){e.next=29;break}throw new TypeError("if given, appData must be an object");case 29:return y.validateSctpStreamParameters(o),e.abrupt("return",this._awaitQueue.push(a(n.mark((function e(){var t,a,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f._handler.receiveDataChannel({sctpStreamParameters:o,label:c,protocol:d});case 2:return t=e.sent,a=t.dataChannel,s=new x.DataConsumer({id:r,dataProducerId:i,dataChannel:a,sctpStreamParameters:o,appData:p}),f._dataConsumers.set(s.id,s),f._handleDataConsumer(s),f._observer.safeEmit("newdataconsumer",s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),"transport.consumeData()"));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleHandler",value:function(){var e=this,t=this._handler;t.on("@connect",(function(t,r,n){var a=t.dtlsParameters;e._closed?n(new v.InvalidStateError("closed")):e.safeEmit("connect",{dtlsParameters:a},r,n)})),t.on("@connectionstatechange",(function(t){t!==e._connectionState&&(S.debug("connection state changed to %s",t),e._connectionState=t,e._closed||e.safeEmit("connectionstatechange",t))}))}},{key:"_handleProducer",value:function(e){var t=this;e.on("@close",(function(){t._producers.delete(e.id),t._closed||t._awaitQueue.push(a(n.mark((function r(){return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t._handler.stopSending(e.localId));case 1:case"end":return r.stop()}}),r)}))),"producer @close event").catch((function(e){return S.warn("producer.close() failed:%o",e)}))})),e.on("@replacetrack",(function(r,i,o){t._awaitQueue.push(a(n.mark((function a(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._handler.replaceTrack(e.localId,r));case 1:case"end":return n.stop()}}),a)}))),"producer @replacetrack event").then(i).catch(o)})),e.on("@setmaxspatiallayer",(function(r,i,o){t._awaitQueue.push(a(n.mark((function a(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._handler.setMaxSpatialLayer(e.localId,r));case 1:case"end":return n.stop()}}),a)}))),"producer @setmaxspatiallayer event").then(i).catch(o)})),e.on("@setrtpencodingparameters",(function(r,i,o){t._awaitQueue.push(a(n.mark((function a(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._handler.setRtpEncodingParameters(e.localId,r));case 1:case"end":return n.stop()}}),a)}))),"producer @setrtpencodingparameters event").then(i).catch(o)})),e.on("@getstats",(function(r,n){if(t._closed)return n(new v.InvalidStateError("closed"));t._handler.getSenderStats(e.localId).then(r).catch(n)}))}},{key:"_handleConsumer",value:function(e){var t=this;e.on("@close",(function(){t._consumers.delete(e.id),t._closed||t._awaitQueue.push(a(n.mark((function r(){return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t._handler.stopReceiving(e.localId));case 1:case"end":return r.stop()}}),r)}))),"consumer @close event").catch((function(){}))})),e.on("@getstats",(function(r,n){if(t._closed)return n(new v.InvalidStateError("closed"));t._handler.getReceiverStats(e.localId).then(r).catch(n)}))}},{key:"_handleDataProducer",value:function(e){var t=this;e.on("@close",(function(){t._dataProducers.delete(e.id)}))}},{key:"_handleDataConsumer",value:function(e){var t=this;e.on("@close",(function(){t._dataConsumers.delete(e.id)}))}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"direction",get:function(){return this._direction}},{key:"handler",get:function(){return this._handler}},{key:"connectionState",get:function(){return this._connectionState}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}},{key:"observer",get:function(){return this._observer}}]),r}(m.EnhancedEventEmitter);t.Transport=k},89098:function(e,t,r){"use strict";var n=r(49804),a=r(70873),i=r(31790),o=r(19678),s=r(41510),c=r(96714);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var a=s(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){i(r,e);var t=u(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(a(i),r):i.stack=new Error(e).stack,i}return r}(c(Error));t.UnsupportedError=d;var l=function(e){i(r,e);var t=u(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(a(i),r):i.stack=new Error(e).stack,i}return r}(c(Error));t.InvalidStateError=l},66542:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(89098),v=r(54952),g=r(38418),y=r(39510),b=r(52107),w=r(50410),_=r(67665),x=new h.Logger("Chrome55"),S={OS:1024,MIS:1024},k=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._sendStream=new MediaStream,e._mapSendLocalIdTrack=new Map,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new Map,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=y.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:S});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;x.debug("run()"),this._direction=r,this._remoteSdp=new _.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",l),video:g.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",l),video:g.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,m,w,_,S;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),o&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(r),this._pc.addStream(this._sendStream),e.next=8,this._pc.createOffer();case 8:if(s=e.sent,c=f.parse(s.sdp),(l=v.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(l.codecs),(p=v.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(p.codecs),this._transportReady){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"server",localSdpObject:c});case 17:return"video"===r.kind&&a&&a.length>1&&(x.debug("send() | enabling simulcast"),c=f.parse(s.sdp),u=c.media.find((function(e){return"video"===e.type})),b.addLegacySimulcast({offerMediaObject:u,track:r,numStreams:a.length}),s={type:"offer",sdp:f.write(c)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),e.next=21,this._pc.setLocalDescription(s);case 21:if(c=f.parse(this._pc.localDescription.sdp),u=c.media.find((function(e){return e.type===r.kind})),l.rtcp.cname=y.getCname({offerMediaObject:u}),l.encodings=b.getRtpEncodings({offerMediaObject:u,track:r}),a)for(h=0;h<l.encodings.length;++h)a[h]&&Object.assign(l.encodings[h],a[h]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase()){m=d(l.encodings);try{for(m.s();!(w=m.n()).done;)w.value.scalabilityMode="S1T3"}catch(n){m.e(n)}finally{m.f()}}return this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:p,codecOptions:i}),_={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=32,this._pc.setRemoteDescription(_);case 32:return S=String(this._nextSendLocalId),this._nextSendLocalId++,this._mapSendLocalIdTrack.set(S,r),e.abrupt("return",{localId:S,rtpParameters:l});case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("stopSending() [localId:%s]",t),r=this._mapSendLocalIdTrack.get(t)){e.next=5;break}throw new Error("track not found");case 5:return this._mapSendLocalIdTrack.delete(t),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream),e.next=10,this._pc.createOffer();case 10:return a=e.sent,x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.prev=12,e.next=15,this._pc.setLocalDescription(a);case 15:e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(12),0!==this._sendStream.getTracks().length){e.next=22;break}return x.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()),e.abrupt("return");case 22:throw e.t0;case 23:if("stable"!==this._pc.signalingState){e.next=25;break}return e.abrupt("return");case 25:return i={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=29,this._pc.setRemoteDescription(i);case 29:case"end":return e.stop()}}),e,this,[[12,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError(" not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:i,protocol:s,priority:c},x.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),x.debug("receive() [trackId:%s, kind:%s]",r,a),o=r,s=a,c=i.rtcp.cname,this._remoteSdp.receive({mid:s,kind:a,offerRtpParameters:i,streamId:c,trackId:r}),u={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=11,this._pc.setRemoteDescription(u);case 11:return e.next=13,this._pc.createAnswer();case 13:if(d=e.sent,l=f.parse(d.sdp),p=l.media.find((function(e){return String(e.mid)===s})),y.applyCodecParameters({offerRtpParameters:i,answerMediaObject:p}),d={type:"answer",sdp:f.write(l)},this._transportReady){e.next=21;break}return e.next=21,this._setupTransport({localDtlsRole:"client",localSdpObject:l});case 21:return x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",d),e.next=24,this._pc.setLocalDescription(d);case 24:if(h=this._pc.getRemoteStreams().find((function(e){return e.id===c})),m=h.getTrackById(o)){e.next=28;break}throw new Error("remote track not found");case 28:return this._mapRecvLocalIdInfo.set(o,{mid:s,rtpParameters:i}),e.abrupt("return",{localId:o,track:m});case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),x.debug("stopReceiving() [localId:%s]",t),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.mid,i=r.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:a,offerRtpParameters:i}),o={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=9,this._pc.setRemoteDescription(o);case 9:return e.next=11,this._pc.createAnswer();case 11:return s=e.sent,x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),e.next=15,this._pc.setLocalDescription(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:u,protocol:i},x.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),p={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=y.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome55"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(w.HandlerInterface);t.Chrome55=k},95077:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(54952),v=r(38418),g=r(39510),y=r(52107),b=r(50410),w=r(67665),_=new h.Logger("Chrome67"),x={OS:1024,MIS:1024},S=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._sendStream=new MediaStream,e._mapSendLocalIdRtpSender=new Map,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new Map,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(_.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=g.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:x});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;_.debug("run()"),this._direction=r,this._remoteSdp=new w.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",l),video:v.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",l),video:v.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,b,w,x,S,k;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),o&&_.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(r),this._pc.addTrack(r,this._sendStream),e.next=8,this._pc.createOffer();case 8:if(s=e.sent,c=f.parse(s.sdp),(l=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(l.codecs),(p=m.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(p.codecs),this._transportReady){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"server",localSdpObject:c});case 17:return"video"===r.kind&&a&&a.length>1&&(_.debug("send() | enabling simulcast"),c=f.parse(s.sdp),u=c.media.find((function(e){return"video"===e.type})),y.addLegacySimulcast({offerMediaObject:u,track:r,numStreams:a.length}),s={type:"offer",sdp:f.write(c)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),e.next=21,this._pc.setLocalDescription(s);case 21:if(c=f.parse(this._pc.localDescription.sdp),u=c.media.find((function(e){return e.type===r.kind})),l.rtcp.cname=g.getCname({offerMediaObject:u}),l.encodings=y.getRtpEncodings({offerMediaObject:u,track:r}),a)for(h=0;h<l.encodings.length;++h)a[h]&&Object.assign(l.encodings[h],a[h]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase()){b=d(l.encodings);try{for(b.s();!(w=b.n()).done;)w.value.scalabilityMode="S1T3"}catch(n){b.e(n)}finally{b.f()}}return this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:p,codecOptions:i}),x={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),e.next=32,this._pc.setRemoteDescription(x);case 32:return S=String(this._nextSendLocalId),this._nextSendLocalId++,k=this._pc.getSenders().find((function(e){return e.track===r})),this._mapSendLocalIdRtpSender.set(S,k),e.abrupt("return",{localId:S,rtpParameters:l,rtpSender:k});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("stopSending() [localId:%s]",t),r=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return this._pc.removeTrack(r),r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(t),e.next=10,this._pc.createOffer();case 10:return a=e.sent,_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.prev=12,e.next=15,this._pc.setLocalDescription(a);case 15:e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(12),0!==this._sendStream.getTracks().length){e.next=22;break}return _.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()),e.abrupt("return");case 22:throw e.t0;case 23:if("stable"!==this._pc.signalingState){e.next=25;break}return e.abrupt("return");case 25:return i={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=29,this._pc.setRemoteDescription(i);case 29:case"end":return e.stop()}}),e,this,[[12,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?_.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):_.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return i=a.track,e.next=8,a.replaceTrack(r);case 8:i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return(i=a.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=9,a.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return(i=a.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return e.abrupt("return",r.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:i,protocol:s,priority:c},_.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return _.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),_.debug("receive() [trackId:%s, kind:%s]",r,a),o=r,s=a,this._remoteSdp.receive({mid:s,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),c={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),e.next=10,this._pc.setRemoteDescription(c);case 10:return e.next=12,this._pc.createAnswer();case 12:if(u=e.sent,d=f.parse(u.sdp),l=d.media.find((function(e){return String(e.mid)===s})),g.applyCodecParameters({offerRtpParameters:i,answerMediaObject:l}),u={type:"answer",sdp:f.write(d)},this._transportReady){e.next=20;break}return e.next=20,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 20:return _.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),e.next=23,this._pc.setLocalDescription(u);case 23:if(p=this._pc.getReceivers().find((function(e){return e.track&&e.track.id===o}))){e.next=26;break}throw new Error("new RTCRtpReceiver not");case 26:return this._mapRecvLocalIdInfo.set(o,{mid:s,rtpParameters:i,rtpReceiver:p}),e.abrupt("return",{localId:o,track:p.track,rtpReceiver:p});case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),_.debug("stopReceiving() [localId:%s]",t),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.mid,i=r.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:a,offerRtpParameters:i}),o={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=9,this._pc.setRemoteDescription(o);case 9:return e.next=11,this._pc.createAnswer();case 11:return s=e.sent,_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),e.next=15,this._pc.setLocalDescription(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.rtpReceiver){e.next=4;break}throw new Error("associated RTCRtpReceiver not found");case 4:return e.abrupt("return",a.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:u,protocol:i},_.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),p={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return _.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=g.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome67"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(b.HandlerInterface);t.Chrome67=S},12682:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(54952),v=r(38418),g=r(39510),y=r(66207),b=r(50410),w=r(67665),_=r(80283),x=new h.Logger("Chrome70"),S={OS:1024,MIS:1024},k=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._mapMidTransceiver=new Map,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=7,t.createOffer();case 7:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=g.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:S});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;x.debug("run()"),this._direction=r,this._remoteSdp=new w.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",l),video:v.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",l),video:v.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,b,w,S,k,R,C,P,T,E,D,I,M;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),(s=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(s.codecs,o),(c=m.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(c.codecs,o),u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(r,{direction:"sendonly",streams:[this._sendStream]}),e.next=11,this._pc.createOffer();case 11:if(p=e.sent,h=f.parse(p.sdp),this._transportReady){e.next=16;break}return e.next=16,this._setupTransport({localDtlsRole:"server",localSdpObject:h});case 16:return a&&a.length>1&&(x.debug("send() | enabling legacy simulcast"),h=f.parse(p.sdp),b=h.media[u.idx],y.addLegacySimulcast({offerMediaObject:b,numStreams:a.length}),p={type:"offer",sdp:f.write(h)}),w=!1,S=_.parse((a||[{}])[0].scalabilityMode),a&&1===a.length&&S.spatialLayers>1&&"video/vp9"===s.codecs[0].mimeType.toLowerCase()&&(x.debug("send() | enabling legacy simulcast for VP9 SVC"),w=!0,h=f.parse(p.sdp),b=h.media[u.idx],y.addLegacySimulcast({offerMediaObject:b,numStreams:S.spatialLayers}),p={type:"offer",sdp:f.write(h)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),e.next=23,this._pc.setLocalDescription(p);case 23:if(!a){e.next=38;break}x.debug("send() | applying given encodings"),k=l.sender.getParameters(),R=0;case 27:if(!(R<(k.encodings||[]).length)){e.next=36;break}if(C=k.encodings[R],P=a[R]){e.next=32;break}return e.abrupt("break",36);case 32:k.encodings[R]=Object.assign(C,P);case 33:++R,e.next=27;break;case 36:return e.next=38,l.sender.setParameters(k);case 38:if(T=l.mid,s.mid=T,h=f.parse(this._pc.localDescription.sdp),b=h.media[u.idx],s.rtcp.cname=g.getCname({offerMediaObject:b}),s.encodings=y.getRtpEncodings({offerMediaObject:b}),a)for(E=0;E<s.encodings.length;++E)a[E]&&Object.assign(s.encodings[E],a[E]);if(w&&(s.encodings=[s.encodings[0]]),s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase())){D=d(s.encodings);try{for(D.s();!(I=D.n()).done;)I.value.scalabilityMode="S1T3"}catch(n){D.e(n)}finally{D.f()}}return this._remoteSdp.send({offerMediaObject:b,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:c,codecOptions:i}),M={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),e.next=52,this._pc.setRemoteDescription(M);case 52:return this._mapMidTransceiver.set(T,l),e.abrupt("return",{localId:T,rtpParameters:s,rtpSender:l.sender});case 54:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("stopSending() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid),e.next=10,this._pc.createOffer();case 10:return a=e.sent,x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.next=14,this._pc.setLocalDescription(a);case 14:return i={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?x.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):x.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return e.next=7,a.sender.replaceTrack(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:i,protocol:s,priority:c},x.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),x.debug("receive() [trackId:%s, kind:%s]",r,a),o=i.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:o,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),s={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),e.next=9,this._pc.setRemoteDescription(s);case 9:return e.next=11,this._pc.createAnswer();case 11:if(c=e.sent,u=f.parse(c.sdp),d=u.media.find((function(e){return String(e.mid)===o})),g.applyCodecParameters({offerRtpParameters:i,answerMediaObject:d}),c={type:"answer",sdp:f.write(u)},this._transportReady){e.next=19;break}return e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:u});case 19:return x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),e.next=22,this._pc.setLocalDescription(c);case 22:if(l=this._pc.getTransceivers().find((function(e){return e.mid===o}))){e.next=25;break}throw new Error("new RTCRtpTransceiver not found");case 25:return this._mapMidTransceiver.set(o,l),e.abrupt("return",{localId:o,track:l.receiver.track,rtpReceiver:l.receiver});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),x.debug("stopReceiving() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return this._remoteSdp.closeMediaSection(r.mid),a={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=10,this._pc.setRemoteDescription(a);case 10:return e.next=12,this._pc.createAnswer();case 12:return i=e.sent,x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=16,this._pc.setLocalDescription(i);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:u,protocol:i},x.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation(),p={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=g.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome70"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(b.HandlerInterface);t.Chrome70=k},48208:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(54952),v=r(38418),g=r(39510),y=r(66207),b=r(50410),w=r(67665),_=r(80283),x=new h.Logger("Chrome74"),S={OS:1024,MIS:1024},k=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._mapMidTransceiver=new Map,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=7,t.createOffer();case 7:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=g.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:S});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;x.debug("run()"),this._direction=r,this._remoteSdp=new w.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",l),video:v.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",l),video:v.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,b,w,S,k,R,C,P,T;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),a&&a.length>1&&a.forEach((function(e,t){e.rid="r".concat(t)})),(s=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(s.codecs,o),(c=m.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(c.codecs,o),u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(r,{direction:"sendonly",streams:[this._sendStream],sendEncodings:a}),e.next=12,this._pc.createOffer();case 12:if(p=e.sent,h=f.parse(p.sdp),this._transportReady){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"server",localSdpObject:h});case 17:return w=!1,S=_.parse((a||[{}])[0].scalabilityMode),a&&1===a.length&&S.spatialLayers>1&&"video/vp9"===s.codecs[0].mimeType.toLowerCase()&&(x.debug("send() | enabling legacy simulcast for VP9 SVC"),w=!0,h=f.parse(p.sdp),b=h.media[u.idx],y.addLegacySimulcast({offerMediaObject:b,numStreams:S.spatialLayers}),p={type:"offer",sdp:f.write(h)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),e.next=23,this._pc.setLocalDescription(p);case 23:if(k=l.mid,s.mid=k,h=f.parse(this._pc.localDescription.sdp),b=h.media[u.idx],s.rtcp.cname=g.getCname({offerMediaObject:b}),a?1===a.length?(R=y.getRtpEncodings({offerMediaObject:b}),Object.assign(R[0],a[0]),w&&(R=[R[0]]),s.encodings=R):s.encodings=a:s.encodings=y.getRtpEncodings({offerMediaObject:b}),s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase())){C=d(s.encodings);try{for(C.s();!(P=C.n()).done;)P.value.scalabilityMode="S1T3"}catch(n){C.e(n)}finally{C.f()}}return this._remoteSdp.send({offerMediaObject:b,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:c,codecOptions:i,extmapAllowMixed:!0}),T={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",T),e.next=35,this._pc.setRemoteDescription(T);case 35:return this._mapMidTransceiver.set(k,l),e.abrupt("return",{localId:k,rtpParameters:s,rtpSender:l.sender});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("stopSending() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid),e.next=10,this._pc.createOffer();case 10:return a=e.sent,x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.next=14,this._pc.setLocalDescription(a);case 14:return i={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?x.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):x.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return e.next=7,a.sender.replaceTrack(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmits:i,protocol:s,priority:c},x.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),x.debug("receive() [trackId:%s, kind:%s]",r,a),o=i.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:o,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),s={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),e.next=9,this._pc.setRemoteDescription(s);case 9:return e.next=11,this._pc.createAnswer();case 11:if(c=e.sent,u=f.parse(c.sdp),d=u.media.find((function(e){return String(e.mid)===o})),g.applyCodecParameters({offerRtpParameters:i,answerMediaObject:d}),c={type:"answer",sdp:f.write(u)},this._transportReady){e.next=19;break}return e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:u});case 19:return x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),e.next=22,this._pc.setLocalDescription(c);case 22:if(l=this._pc.getTransceivers().find((function(e){return e.mid===o}))){e.next=25;break}throw new Error("new RTCRtpTransceiver not found");case 25:return this._mapMidTransceiver.set(o,l),e.abrupt("return",{localId:o,track:l.receiver.track,rtpReceiver:l.receiver});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),x.debug("stopReceiving() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return this._remoteSdp.closeMediaSection(r.mid),a={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=10,this._pc.setRemoteDescription(a);case 10:return e.next=12,this._pc.createAnswer();case 12:return i=e.sent,x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=16,this._pc.setLocalDescription(i);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmits:u,protocol:i},x.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation(),p={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=g.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome74"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(b.HandlerInterface);t.Chrome74=k},78941:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(83603),h=r(89098),m=r(54952),v=r(38418),g=r(79033),y=r(50410),b=new f.Logger("Edge11"),w=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._rtpSenders=new Map,e._rtpReceivers=new Map,e._nextSendLocalId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){b.debug("close()");try{this._iceGatherer.close()}catch(o){}try{this._iceTransport.stop()}catch(o){}try{this._dtlsTransport.stop()}catch(o){}var e,t=d(this._rtpSenders.values());try{for(t.s();!(e=t.n()).done;){var r=e.value;try{r.stop()}catch(o){}}}catch(s){t.e(s)}finally{t.f()}var n,a=d(this._rtpReceivers.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;try{i.stop()}catch(o){}}}catch(s){a.e(s)}finally{a.f()}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.debug("getNativeRtpCapabilities()"),e.abrupt("return",g.getCapabilities());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:{OS:0,MIS:0}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){e.direction;var t=e.iceParameters,r=e.iceCandidates,n=e.dtlsParameters,a=(e.sctpParameters,e.iceServers),i=e.iceTransportPolicy,o=(e.additionalSettings,e.proprietaryConstraints,e.extendedRtpCapabilities);b.debug("run()"),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",o),video:v.getSendingRtpParameters("video",o)},this._remoteIceParameters=t,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname="CNAME-".concat(m.generateRandomNumber()),this._setIceGatherer({iceServers:a,iceTransportPolicy:i}),this._setIceTransport(),this._setDtlsTransport()}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.debug("restartIce()"),this._remoteIceParameters=t,this._transportReady){e.next=4;break}return e.abrupt("return");case 4:b.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,t,"controlling"),r=d(this._remoteIceCandidates);try{for(r.s();!(a=r.n()).done;)i=a.value,this._iceTransport.addRemoteCandidate(i)}catch(n){r.e(n)}finally{r.f()}this._iceTransport.addRemoteCandidate({});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._iceTransport.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,f,h;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.track,a=t.encodings,t.codecOptions,i=t.codec,b.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),this._transportReady){e.next=5;break}return e.next=5,this._setupTransport({localDtlsRole:"server"});case 5:b.debug("send() | calling new RTCRtpSender()"),o=new RTCRtpSender(r,this._dtlsTransport),(s=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(s.codecs,i),c=s.codecs.some((function(e){return/.+\/rtx$/i.test(e.mimeType)})),a||(a=[{}]),u=d(a);try{for(u.s();!(l=u.n()).done;)(p=l.value).ssrc=m.generateRandomNumber(),c&&(p.rtx={ssrc:m.generateRandomNumber()})}catch(n){u.e(n)}finally{u.f()}return s.encodings=a,s.rtcp={cname:this._cname,reducedSize:!0,mux:!0},f=g.mangleRtpParameters(s),b.debug("send() | calling rtpSender.send() [params:%o]",f),e.next=19,o.send(f);case 19:return h=String(this._nextSendLocalId),this._nextSendLocalId++,this._rtpSenders.set(h,o),e.abrupt("return",{localId:h,rtpParameters:s,rtpSender:o});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.debug("stopSending() [localId:%s]",t),r=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:this._rtpSenders.delete(t),e.prev=5,b.debug("stopSending() | calling rtpSender.stop()"),r.stop(),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(5),b.warn("stopSending() | rtpSender.stop() failed:%o",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r?b.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):b.debug("replaceTrack() [localId:%s, no track]",t),a=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:a.setTrack(r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:return(i=a.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=8,a.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:return(i=a.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=8,a.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._rtpSenders.get(t)){e.next=3;break}throw new Error("RTCRtpSender not found");case 3:return e.abrupt("return",r.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.trackId,a=t.kind,i=t.rtpParameters,b.debug("receive() [trackId:%s, kind:%s]",r,a),this._transportReady){e.next=5;break}return e.next=5,this._setupTransport({localDtlsRole:"server"});case 5:return b.debug("receive() | calling new RTCRtpReceiver()"),(o=new RTCRtpReceiver(this._dtlsTransport,a)).addEventListener("error",(function(e){b.error('rtpReceiver "error" event [event:%o]',e)})),s=g.mangleRtpParameters(i),b.debug("receive() | calling rtpReceiver.receive() [params:%o]",s),e.next=12,o.receive(s);case 12:return c=r,this._rtpReceivers.set(c,o),e.abrupt("return",{localId:c,track:o.track,rtpReceiver:o});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.debug("stopReceiving() [localId:%s]",t),r=this._rtpReceivers.get(t)){e.next=4;break}throw new Error("RTCRtpReceiver not found");case 4:this._rtpReceivers.delete(t);try{b.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(n){b.warn("stopReceiving() | rtpReceiver.stop() failed:%o",n)}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._rtpReceivers.get(t)){e.next=3;break}throw new Error("RTCRtpReceiver not found");case 3:return e.abrupt("return",r.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setIceGatherer",value:function(e){var t=e.iceServers,r=e.iceTransportPolicy,n=new RTCIceGatherer({iceServers:t||[],gatherPolicy:r||"all"});n.addEventListener("error",(function(e){b.error('iceGatherer "error" event [event:%o]',e)}));try{n.gather()}catch(a){b.debug("_setIceGatherer() | iceGatherer.gather() failed: %s",a.toString())}this._iceGatherer=n}},{key:"_setIceTransport",value:function(){var e=this,t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",(function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}})),t.addEventListener("icestatechange",(function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}})),t.addEventListener("candidatepairchange",(function(e){b.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)})),this._iceTransport=t}},{key:"_setDtlsTransport",value:function(){var e=this,t=new RTCDtlsTransport(this._iceTransport);t.addEventListener("statechange",(function(){b.debug('dtlsTransport "statechange" event [state:%s]',t.state)})),t.addEventListener("dtlsstatechange",(function(){b.debug('dtlsTransport "dtlsstatechange" event [state:%s]',t.state),"closed"===t.state&&e.emit("@connectionstatechange","closed")})),t.addEventListener("error",(function(e){b.error('dtlsTransport "error" event [event:%o]',e)})),this._dtlsTransport=t}},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,b.debug("_setupTransport()"),(a=this._dtlsTransport.getLocalParameters()).role=r,e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:a});case 6:this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling"),i=d(this._remoteIceCandidates);try{for(i.s();!(o=i.n()).done;)s=o.value,this._iceTransport.addRemoteCandidate(s)}catch(n){i.e(n)}finally{i.f()}this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter((function(e){return"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm})),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"name",get:function(){return"Edge11"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(y.HandlerInterface);t.Edge11=w},10901:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(89098),v=r(54952),g=r(38418),y=r(39510),b=r(66207),w=r(50410),_=r(67665),x=new h.Logger("Firefox60"),S={OS:16,MIS:2048},k=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._mapMidTransceiver=new Map,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i,o,s,c,u,d,l;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),(r=document.createElement("canvas")).getContext("2d"),a=r.captureStream(),i=a.getVideoTracks()[0],e.prev=6,t.addTransceiver("audio",{direction:"sendrecv"}),o=t.addTransceiver(i,{direction:"sendrecv"}),s=o.sender.getParameters(),c=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}],s.encodings=c,e.next=14,o.sender.setParameters(s);case 14:return e.next=16,t.createOffer();case 16:u=e.sent;try{r.remove()}catch(n){}try{i.stop()}catch(n){}try{t.close()}catch(n){}return d=f.parse(u.sdp),l=y.extractRtpCapabilities({sdpObject:d}),e.abrupt("return",l);case 25:e.prev=25,e.t0=e.catch(6);try{r.remove()}catch(p){}try{i.stop()}catch(p){}try{t.close()}catch(p){}throw e.t0;case 31:case"end":return e.stop()}}),e,null,[[6,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:S});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;x.debug("run()"),this._direction=r,this._remoteSdp=new _.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",l),video:g.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",l),video:g.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,m,w,_,S,k,R;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),a&&(a=v.clone(a,[])).length>1&&(a.forEach((function(e,t){e.rid="r".concat(t)})),a.reverse()),(s=v.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(s.codecs,o),(c=v.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(c.codecs,o),u=this._pc.addTransceiver(r,{direction:"sendonly",streams:[this._sendStream]}),!a){e.next=14;break}return(l=u.sender.getParameters()).encodings=a,e.next=14,u.sender.setParameters(l);case 14:return e.next=16,this._pc.createOffer();case 16:if(p=e.sent,h=f.parse(p.sdp),this._transportReady){e.next=21;break}return e.next=21,this._setupTransport({localDtlsRole:"client",localSdpObject:h});case 21:return x.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),e.next=24,this._pc.setLocalDescription(p);case 24:if(m=u.mid,s.mid=m,h=f.parse(this._pc.localDescription.sdp),w=h.media[h.media.length-1],s.rtcp.cname=y.getCname({offerMediaObject:w}),a?1===a.length?(_=b.getRtpEncodings({offerMediaObject:w}),Object.assign(_[0],a[0]),s.encodings=_):s.encodings=a.reverse():s.encodings=b.getRtpEncodings({offerMediaObject:w}),s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase())){S=d(s.encodings);try{for(S.s();!(k=S.n()).done;)k.value.scalabilityMode="S1T3"}catch(n){S.e(n)}finally{S.f()}}return this._remoteSdp.send({offerMediaObject:w,offerRtpParameters:s,answerRtpParameters:c,codecOptions:i,extmapAllowMixed:!0}),R={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",R),e.next=36,this._pc.setRemoteDescription(R);case 36:return this._mapMidTransceiver.set(m,u),e.abrupt("return",{localId:m,rtpParameters:s,rtpSender:u.sender});case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("stopSending() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated transceiver not found");case 4:return r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.disableMediaSection(r.mid),e.next=9,this._pc.createOffer();case 9:return a=e.sent,x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.next=13,this._pc.setLocalDescription(a);case 13:return i={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=17,this._pc.setRemoteDescription(i);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?x.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):x.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return e.next=7,a.sender.replaceTrack(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated transceiver not found");case 5:return i=a.sender.getParameters(),r=i.encodings.length-1-r,i.encodings.forEach((function(e,t){e.active=t>=r})),e.next=10,a.sender.setParameters(i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmits:i,protocol:s,priority:c},x.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),x.debug("receive() [trackId:%s, kind:%s]",r,a),o=i.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:o,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),s={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),e.next=9,this._pc.setRemoteDescription(s);case 9:return e.next=11,this._pc.createAnswer();case 11:if(c=e.sent,u=f.parse(c.sdp),d=u.media.find((function(e){return String(e.mid)===o})),y.applyCodecParameters({offerRtpParameters:i,answerMediaObject:d}),c={type:"answer",sdp:f.write(u)},this._transportReady){e.next=19;break}return e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:u});case 19:return x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),e.next=22,this._pc.setLocalDescription(c);case 22:if(l=this._pc.getTransceivers().find((function(e){return e.mid===o}))){e.next=25;break}throw new Error("new RTCRtpTransceiver not found");case 25:return this._mapMidTransceiver.set(o,l),e.abrupt("return",{localId:o,track:l.receiver.track,rtpReceiver:l.receiver});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),x.debug("stopReceiving() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return this._remoteSdp.closeMediaSection(r.mid),a={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=10,this._pc.setRemoteDescription(a);case 10:return e.next=12,this._pc.createAnswer();case 12:return i=e.sent,x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=16,this._pc.setLocalDescription(i);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmits:u,protocol:i},x.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation(),p={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=y.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Firefox60"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(w.HandlerInterface);t.Firefox60=k},50410:function(e,t,r){"use strict";var n=r(49804),a=r(31790),i=r(19678),o=r(41510);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=o(e);if(t){var a=o(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return i(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){a(r,e);var t=s(r);function r(){return n(this,r),t.call(this)}return r}(r(60035).EnhancedEventEmitter);t.HandlerInterface=c},16480:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(89098),v=r(54952),g=r(38418),y=r(39510),b=r(52107),w=r(50410),_=r(67665),x=new h.Logger("ReactNative"),S={OS:1024,MIS:1024},k=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._sendStream=new MediaStream,e._mapSendLocalIdTrack=new Map,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new Map,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=y.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:S});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;x.debug("run()"),this._direction=r,this._remoteSdp=new _.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",l),video:g.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",l),video:g.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,m,w,_,S;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),o&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(r),this._pc.addStream(this._sendStream),e.next=8,this._pc.createOffer();case 8:if(s=e.sent,c=f.parse(s.sdp),(l=v.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(l.codecs),(p=v.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=g.reduceCodecs(p.codecs),this._transportReady){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"server",localSdpObject:c});case 17:return"video"===r.kind&&a&&a.length>1&&(x.debug("send() | enabling simulcast"),c=f.parse(s.sdp),u=c.media.find((function(e){return"video"===e.type})),b.addLegacySimulcast({offerMediaObject:u,track:r,numStreams:a.length}),s={type:"offer",sdp:f.write(c)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),e.next=21,this._pc.setLocalDescription(s);case 21:if(c=f.parse(this._pc.localDescription.sdp),u=c.media.find((function(e){return e.type===r.kind})),l.rtcp.cname=y.getCname({offerMediaObject:u}),l.encodings=b.getRtpEncodings({offerMediaObject:u,track:r}),a)for(h=0;h<l.encodings.length;++h)a[h]&&Object.assign(l.encodings[h],a[h]);if(l.encodings.length>1&&("video/vp8"===l.codecs[0].mimeType.toLowerCase()||"video/h264"===l.codecs[0].mimeType.toLowerCase())){m=d(l.encodings);try{for(m.s();!(w=m.n()).done;)w.value.scalabilityMode="S1T3"}catch(n){m.e(n)}finally{m.f()}}return this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:p,codecOptions:i}),_={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=32,this._pc.setRemoteDescription(_);case 32:return S=String(this._nextSendLocalId),this._nextSendLocalId++,this._mapSendLocalIdTrack.set(S,r),e.abrupt("return",{localId:S,rtpParameters:l});case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),x.debug("stopSending() [localId:%s]",t),r=this._mapSendLocalIdTrack.get(t)){e.next=5;break}throw new Error("track not found");case 5:return this._mapSendLocalIdTrack.delete(t),this._sendStream.removeTrack(r),this._pc.addStream(this._sendStream),e.next=10,this._pc.createOffer();case 10:return a=e.sent,x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.prev=12,e.next=15,this._pc.setLocalDescription(a);case 15:e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(12),0!==this._sendStream.getTracks().length){e.next=22;break}return x.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()),e.abrupt("return");case 22:throw e.t0;case 23:if("stable"!==this._pc.signalingState){e.next=25;break}return e.abrupt("return");case 25:return i={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=29,this._pc.setRemoteDescription(i);case 29:case"end":return e.stop()}}),e,this,[[12,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:i,protocol:s,priority:c},x.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),x.debug("receive() [trackId:%s, kind:%s]",r,a),o=r,s=a,c=i.rtcp.cname,x.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),c+="-hack-".concat(v.generateRandomNumber()),this._remoteSdp.receive({mid:s,kind:a,offerRtpParameters:i,streamId:c,trackId:r}),u={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=13,this._pc.setRemoteDescription(u);case 13:return e.next=15,this._pc.createAnswer();case 15:if(d=e.sent,l=f.parse(d.sdp),p=l.media.find((function(e){return String(e.mid)===s})),y.applyCodecParameters({offerRtpParameters:i,answerMediaObject:p}),d={type:"answer",sdp:f.write(l)},this._transportReady){e.next=23;break}return e.next=23,this._setupTransport({localDtlsRole:"client",localSdpObject:l});case 23:return x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",d),e.next=26,this._pc.setLocalDescription(d);case 26:if(h=this._pc.getRemoteStreams().find((function(e){return e.id===c})),m=h.getTrackById(o)){e.next=30;break}throw new Error("remote track not found");case 30:return this._mapRecvLocalIdInfo.set(o,{mid:s,rtpParameters:i}),e.abrupt("return",{localId:o,track:m});case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),x.debug("stopReceiving() [localId:%s]",t),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.mid,i=r.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:a,offerRtpParameters:i}),o={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=9,this._pc.setRemoteDescription(o);case 9:return e.next=11,this._pc.createAnswer();case 11:return s=e.sent,x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),e.next=15,this._pc.setLocalDescription(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new m.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmitTime:c,maxRetransmits:u,protocol:i},x.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),p={type:"offer",sdp:this._remoteSdp.getSdp()},x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=y.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"ReactNative"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(w.HandlerInterface);t.ReactNative=k},3265:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(54952),v=r(38418),g=r(39510),y=r(52107),b=r(50410),w=r(67665),_=new h.Logger("Safari11"),x={OS:1024,MIS:1024},S=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._sendStream=new MediaStream,e._mapSendLocalIdRtpSender=new Map,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new Map,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(_.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=g.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:x});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;_.debug("run()"),this._direction=r,this._remoteSdp=new w.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o,planB:!0}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",l),video:v.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",l),video:v.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,b,w,x,S,k;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),o&&_.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(r),this._pc.addTrack(r,this._sendStream),e.next=8,this._pc.createOffer();case 8:if(s=e.sent,c=f.parse(s.sdp),(l=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(l.codecs),(p=m.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(p.codecs),this._transportReady){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"server",localSdpObject:c});case 17:return"video"===r.kind&&a&&a.length>1&&(_.debug("send() | enabling simulcast"),c=f.parse(s.sdp),u=c.media.find((function(e){return"video"===e.type})),y.addLegacySimulcast({offerMediaObject:u,track:r,numStreams:a.length}),s={type:"offer",sdp:f.write(c)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),e.next=21,this._pc.setLocalDescription(s);case 21:if(c=f.parse(this._pc.localDescription.sdp),u=c.media.find((function(e){return e.type===r.kind})),l.rtcp.cname=g.getCname({offerMediaObject:u}),l.encodings=y.getRtpEncodings({offerMediaObject:u,track:r}),a)for(h=0;h<l.encodings.length;++h)a[h]&&Object.assign(l.encodings[h],a[h]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase()){b=d(l.encodings);try{for(b.s();!(w=b.n()).done;)w.value.scalabilityMode="S1T3"}catch(n){b.e(n)}finally{b.f()}}return this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:l,answerRtpParameters:p,codecOptions:i}),x={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),e.next=32,this._pc.setRemoteDescription(x);case 32:return S=String(this._nextSendLocalId),this._nextSendLocalId++,k=this._pc.getSenders().find((function(e){return e.track===r})),this._mapSendLocalIdRtpSender.set(S,k),e.abrupt("return",{localId:S,rtpParameters:l,rtpSender:k});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return r.track&&this._sendStream.removeTrack(r.track),this._mapSendLocalIdRtpSender.delete(t),e.next=8,this._pc.createOffer();case 8:return a=e.sent,_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.prev=10,e.next=13,this._pc.setLocalDescription(a);case 13:e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(10),0!==this._sendStream.getTracks().length){e.next=20;break}return _.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()),e.abrupt("return");case 20:throw e.t0;case 21:if("stable"!==this._pc.signalingState){e.next=23;break}return e.abrupt("return");case 23:return i={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=27,this._pc.setRemoteDescription(i);case 27:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?_.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):_.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return i=a.track,e.next=8,a.replaceTrack(r);case 8:i&&this._sendStream.removeTrack(i),r&&this._sendStream.addTrack(r);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return(i=a.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=9,a.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapSendLocalIdRtpSender.get(t)){e.next=5;break}throw new Error("associated RTCRtpSender not found");case 5:return(i=a.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return e.abrupt("return",r.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmits:i,protocol:s,priority:c},_.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return _.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),_.debug("receive() [trackId:%s, kind:%s]",r,a),o=r,s=a,this._remoteSdp.receive({mid:s,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),c={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),e.next=10,this._pc.setRemoteDescription(c);case 10:return e.next=12,this._pc.createAnswer();case 12:if(u=e.sent,d=f.parse(u.sdp),l=d.media.find((function(e){return String(e.mid)===s})),g.applyCodecParameters({offerRtpParameters:i,answerMediaObject:l}),u={type:"answer",sdp:f.write(d)},this._transportReady){e.next=20;break}return e.next=20,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 20:return _.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),e.next=23,this._pc.setLocalDescription(u);case 23:if(p=this._pc.getReceivers().find((function(e){return e.track&&e.track.id===o}))){e.next=26;break}throw new Error("new RTCRtpReceiver not");case 26:return this._mapRecvLocalIdInfo.set(o,{mid:s,rtpParameters:i,rtpReceiver:p}),e.abrupt("return",{localId:o,track:p.track,rtpReceiver:p});case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),_.debug("stopReceiving() [localId:%s]",t),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.mid,i=r.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:a,offerRtpParameters:i}),o={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=9,this._pc.setRemoteDescription(o);case 9:return e.next=11,this._pc.createAnswer();case 11:return s=e.sent,_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),e.next=15,this._pc.setLocalDescription(s);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapRecvLocalIdInfo.get(t)||{},a=r.rtpReceiver){e.next=4;break}throw new Error("associated RTCRtpReceiver not found");case 4:return e.abrupt("return",a.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmits:u,protocol:i},_.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),p={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return _.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=g.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Safari11"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(b.HandlerInterface);t.Safari11=S},94012:function(e,t,r){"use strict";var n=r(48533),a=r(53237),i=r(49804),o=r(4821),s=r(31790),c=r(19678),u=r(41510);function d(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var a=u(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return c(this,r)}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(90228),h=r(83603),m=r(54952),v=r(38418),g=r(39510),y=r(66207),b=r(50410),w=r(67665),_=new h.Logger("Safari12"),x={OS:1024,MIS:1024},S=function(e){s(r,e);var t=p(r);function r(){var e;return i(this,r),(e=t.call(this))._mapMidTransceiver=new Map,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return o(r,[{key:"close",value:function(){if(_.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=a(n.mark((function e(){var t,r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=7,t.createOffer();case 7:r=e.sent;try{t.close()}catch(n){}return a=f.parse(r.sdp),i=g.extractRtpCapabilities({sdpObject:a}),e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(2);try{t.close()}catch(o){}throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.debug("getNativeSctpCapabilities()"),e.abrupt("return",{numStreams:x});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,r=e.direction,n=e.iceParameters,a=e.iceCandidates,i=e.dtlsParameters,o=e.sctpParameters,s=e.iceServers,c=e.iceTransportPolicy,u=e.additionalSettings,d=e.proprietaryConstraints,l=e.extendedRtpCapabilities;_.debug("run()"),this._direction=r,this._remoteSdp=new w.RemoteSdp({iceParameters:n,iceCandidates:a,dtlsParameters:i,sctpParameters:o}),this._sendingRtpParametersByKind={audio:v.getSendingRtpParameters("audio",l),video:v.getSendingRtpParameters("video",l)},this._sendingRemoteRtpParametersByKind={audio:v.getSendingRemoteRtpParameters("audio",l),video:v.getSendingRemoteRtpParameters("video",l)},this._pc=new RTCPeerConnection(Object.assign({iceServers:s||[],iceTransportPolicy:c||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},u),d),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.debug("updateIceServers()"),(r=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=a(n.mark((function e(t){var r,a,i,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),this._transportReady){e.next=4;break}return e.abrupt("return");case 4:if("send"!==this._direction){e.next=17;break}return e.next=7,this._pc.createOffer({iceRestart:!0});case 7:return r=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return a={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",a),e.next=15,this._pc.setRemoteDescription(a);case 15:e.next=27;break;case 17:return i={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=21,this._pc.setRemoteDescription(i);case 21:return e.next=23,this._pc.createAnswer();case 23:return o=e.sent,_.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",o),e.next=27,this._pc.setLocalDescription(o);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=a(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,l,p,h,b,w,x,S,k,R;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.track,a=t.encodings,i=t.codecOptions,o=t.codec,this._assertSendDirection(),_.debug("send() [kind:%s, track.id:%s]",r.kind,r.id),(s=m.clone(this._sendingRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(s.codecs,o),(c=m.clone(this._sendingRemoteRtpParametersByKind[r.kind],{})).codecs=v.reduceCodecs(c.codecs,o),u=this._remoteSdp.getNextMediaSectionIdx(),l=this._pc.addTransceiver(r,{direction:"sendonly",streams:[this._sendStream]}),e.next=11,this._pc.createOffer();case 11:if(p=e.sent,h=f.parse(p.sdp),this._transportReady){e.next=16;break}return e.next=16,this._setupTransport({localDtlsRole:"server",localSdpObject:h});case 16:return a&&a.length>1&&(_.debug("send() | enabling legacy simulcast"),h=f.parse(p.sdp),b=h.media[u.idx],y.addLegacySimulcast({offerMediaObject:b,numStreams:a.length}),p={type:"offer",sdp:f.write(h)}),_.debug("send() | calling pc.setLocalDescription() [offer:%o]",p),e.next=20,this._pc.setLocalDescription(p);case 20:if(w=l.mid,s.mid=w,h=f.parse(this._pc.localDescription.sdp),b=h.media[u.idx],s.rtcp.cname=g.getCname({offerMediaObject:b}),s.encodings=y.getRtpEncodings({offerMediaObject:b}),a)for(x=0;x<s.encodings.length;++x)a[x]&&Object.assign(s.encodings[x],a[x]);if(s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase())){S=d(s.encodings);try{for(S.s();!(k=S.n()).done;)k.value.scalabilityMode="S1T3"}catch(n){S.e(n)}finally{S.f()}}return this._remoteSdp.send({offerMediaObject:b,reuseMid:u.reuseMid,offerRtpParameters:s,answerRtpParameters:c,codecOptions:i}),R={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("send() | calling pc.setRemoteDescription() [answer:%o]",R),e.next=33,this._pc.setRemoteDescription(R);case 33:return this._mapMidTransceiver.set(w,l),e.abrupt("return",{localId:w,rtpParameters:s,rtpSender:l.sender});case 35:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("stopSending() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return r.sender.replaceTrack(null),this._pc.removeTrack(r.sender),this._remoteSdp.closeMediaSection(r.mid),e.next=10,this._pc.createOffer();case 10:return a=e.sent,_.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",a),e.next=14,this._pc.setLocalDescription(a);case 14:return i={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=a(n.mark((function e(t,r){var a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r?_.debug("replaceTrack() [localId:%s, track.id:%s]",t,r.id):_.debug("replaceTrack() [localId:%s, no track]",t),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return e.next=7,a.sender.replaceTrack(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=r})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=a(n.mark((function e(t,r){var a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),_.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,r),a=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return(i=a.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=Object.assign(Object.assign({},e),r)})),e.next=9,a.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m,v;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.ordered,a=t.maxPacketLifeTime,i=t.maxRetransmits,o=t.label,s=t.protocol,c=t.priority,this._assertSendDirection(),u={negotiated:!0,id:this._nextSendSctpStreamId,ordered:r,maxPacketLifeTime:a,maxRetransmits:i,protocol:s,priority:c},_.debug("sendDataChannel() [options:%o]",u),d=this._pc.createDataChannel(o,u),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%x.MIS,this._hasDataChannelMediaSection){e.next=24;break}return e.next=9,this._pc.createOffer();case 9:if(l=e.sent,p=f.parse(l.sdp),h=p.media.find((function(e){return"application"===e.type})),this._transportReady){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:p});case 15:return _.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),e.next=18,this._pc.setLocalDescription(l);case 18:return this._remoteSdp.sendSctpAssociation({offerMediaObject:h}),m={type:"answer",sdp:this._remoteSdp.getSdp()},_.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",m),e.next=23,this._pc.setRemoteDescription(m);case 23:this._hasDataChannelMediaSection=!0;case 24:return v={streamId:u.id,ordered:u.ordered,maxPacketLifeTime:u.maxPacketLifeTime,maxRetransmits:u.maxRetransmits},e.abrupt("return",{dataChannel:d,sctpStreamParameters:v});case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.trackId,a=t.kind,i=t.rtpParameters,this._assertRecvDirection(),_.debug("receive() [trackId:%s, kind:%s]",r,a),o=i.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:o,kind:a,offerRtpParameters:i,streamId:i.rtcp.cname,trackId:r}),s={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),e.next=9,this._pc.setRemoteDescription(s);case 9:return e.next=11,this._pc.createAnswer();case 11:if(c=e.sent,u=f.parse(c.sdp),d=u.media.find((function(e){return String(e.mid)===o})),g.applyCodecParameters({offerRtpParameters:i,answerMediaObject:d}),c={type:"answer",sdp:f.write(u)},this._transportReady){e.next=19;break}return e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:u});case 19:return _.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),e.next=22,this._pc.setLocalDescription(c);case 22:if(l=this._pc.getTransceivers().find((function(e){return e.mid===o}))){e.next=25;break}throw new Error("new RTCRtpTransceiver not found");case 25:return this._mapMidTransceiver.set(o,l),e.abrupt("return",{localId:o,track:l.receiver.track,rtpReceiver:l.receiver});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),_.debug("stopReceiving() [localId:%s]",t),r=this._mapMidTransceiver.get(t)){e.next=5;break}throw new Error("associated RTCRtpTransceiver not found");case 5:return this._remoteSdp.closeMediaSection(r.mid),a={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=10,this._pc.setRemoteDescription(a);case 10:return e.next=12,this._pc.createAnswer();case 12:return i=e.sent,_.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=16,this._pc.setLocalDescription(i);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=a(n.mark((function e(t){var r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",r.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=a(n.mark((function e(t){var r,a,i,o,s,c,u,d,l,p,h,m;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sctpStreamParameters,a=t.label,i=t.protocol,this._assertRecvDirection(),o=r.streamId,s=r.ordered,c=r.maxPacketLifeTime,u=r.maxRetransmits,d={negotiated:!0,id:o,ordered:s,maxPacketLifeTime:c,maxRetransmits:u,protocol:i},_.debug("receiveDataChannel() [options:%o]",d),l=this._pc.createDataChannel(a,d),this._hasDataChannelMediaSection){e.next=23;break}return this._remoteSdp.receiveSctpAssociation(),p={type:"offer",sdp:this._remoteSdp.getSdp()},_.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",p),e.next=12,this._pc.setRemoteDescription(p);case 12:return e.next=14,this._pc.createAnswer();case 14:if(h=e.sent,this._transportReady){e.next=19;break}return m=f.parse(h.sdp),e.next=19,this._setupTransport({localDtlsRole:"client",localSdpObject:m});case 19:return _.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",h),e.next=22,this._pc.setLocalDescription(h);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:l});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=a(n.mark((function e(t){var r,a,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.localDtlsRole,(a=t.localSdpObject)||(a=f.parse(this._pc.localDescription.sdp)),(i=g.extractDtlsParameters({sdpObject:a})).role=r,this._remoteSdp.updateDtlsRole("client"===r?"server":"client"),e.next=7,this.safeEmitAsPromise("@connect",{dtlsParameters:i});case 7:this._transportReady=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Safari12"}}],[{key:"createFactory",value:function(){return function(){return new r}}}]),r}(b.HandlerInterface);t.Safari12=S},79033:function(e,t,r){"use strict";function n(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(54952);t.getCapabilities=function(){var e,t=RTCRtpReceiver.getCapabilities(),r=i.clone(t,{}),a=n(r.codecs);try{for(a.s();!(e=a.n()).done;){var o=e.value;if(o.channels=o.numChannels,delete o.numChannels,o.mimeType=o.mimeType||"".concat(o.kind,"/").concat(o.name),o.parameters){var s=o.parameters;s.apt&&(s.apt=Number(s.apt)),s["packetization-mode"]&&(s["packetization-mode"]=Number(s["packetization-mode"]))}var c,u=n(o.rtcpFeedback||[]);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.parameter||(d.parameter="")}}catch(l){u.e(l)}finally{u.f()}}}catch(l){a.e(l)}finally{a.f()}return r},t.mangleRtpParameters=function(e){var t=i.clone(e,{});t.mid&&(t.muxId=t.mid,delete t.mid);var r,a=n(t.codecs);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.channels&&(o.numChannels=o.channels,delete o.channels),o.mimeType&&!o.name&&(o.name=o.mimeType.split("/")[1]),delete o.mimeType}}catch(s){a.e(s)}finally{a.f()}return t}},8645:function(e,t,r){"use strict";var n=r(31790),a=r(19678),i=r(41510),o=r(49804),s=r(4821);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=i(e);if(t){var o=i(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function u(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var l=r(54952),p=function(){function e(t){var r=t.iceParameters,n=t.iceCandidates,a=t.dtlsParameters,i=t.planB,s=void 0!==i&&i;if(o(this,e),this._mediaObject={},this._planB=s,r&&this.setIceParameters(r),n){this._mediaObject.candidates=[];var c,d=u(n);try{for(d.s();!(c=d.n()).done;){var l=c.value,p={component:1};p.foundation=l.foundation,p.ip=l.ip,p.port=l.port,p.priority=l.priority,p.transport=l.protocol,p.type=l.type,l.tcpType&&(p.tcptype=l.tcpType),this._mediaObject.candidates.push(p)}}catch(f){d.e(f)}finally{d.f()}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}a&&this.setDtlsRole(a.role)}return s(e,[{key:"getObject",value:function(){return this._mediaObject}},{key:"setIceParameters",value:function(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}},{key:"disable",value:function(){this._mediaObject.direction="inactive",delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids}},{key:"close",value:function(){this._mediaObject.direction="inactive",this._mediaObject.port=0,delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}},{key:"mid",get:function(){return String(this._mediaObject.mid)}},{key:"closed",get:function(){return 0===this._mediaObject.port}}]),e}();t.MediaSection=p;var f=function(e){n(r,e);var t=c(r);function r(e){var n,a=e.iceParameters,i=e.iceCandidates,s=e.dtlsParameters,c=e.sctpParameters,d=e.plainRtpParameters,p=e.planB,f=void 0!==p&&p,h=e.offerMediaObject,v=e.offerRtpParameters,g=e.answerRtpParameters,y=e.codecOptions,b=e.extmapAllowMixed,w=void 0!==b&&b;switch(o(this,r),(n=t.call(this,{iceParameters:a,iceCandidates:i,dtlsParameters:s,planB:f}))._mediaObject.mid=String(h.mid),n._mediaObject.type=h.type,n._mediaObject.protocol=h.protocol,d?(n._mediaObject.connection={ip:d.ip,version:d.ipVersion},n._mediaObject.port=d.port):(n._mediaObject.connection={ip:"127.0.0.1",version:4},n._mediaObject.port=7),h.type){case"audio":case"video":n._mediaObject.direction="recvonly",n._mediaObject.rtp=[],n._mediaObject.rtcpFb=[],n._mediaObject.fmtp=[];var _,x=u(g.codecs);try{var S=function(){var e=_.value,t={payload:e.payloadType,codec:m(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),n._mediaObject.rtp.push(t);var r=l.clone(e.parameters,{});if(y){var a=y.opusStereo,i=y.opusFec,o=y.opusDtx,s=y.opusMaxPlaybackRate,c=y.opusMaxAverageBitrate,d=y.opusPtime,p=y.videoGoogleStartBitrate,f=y.videoGoogleMaxBitrate,h=y.videoGoogleMinBitrate,g=v.codecs.find((function(t){return t.payloadType===e.payloadType}));switch(e.mimeType.toLowerCase()){case"audio/opus":void 0!==a&&(g.parameters["sprop-stereo"]=a?1:0,r.stereo=a?1:0),void 0!==i&&(g.parameters.useinbandfec=i?1:0,r.useinbandfec=i?1:0),void 0!==o&&(g.parameters.usedtx=o?1:0,r.usedtx=o?1:0),void 0!==s&&(r.maxplaybackrate=s),void 0!==c&&(r.maxaveragebitrate=c),void 0!==d&&(g.parameters.ptime=d,r.ptime=d);break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==p&&(r["x-google-start-bitrate"]=p),void 0!==f&&(r["x-google-max-bitrate"]=f),void 0!==h&&(r["x-google-min-bitrate"]=h)}}for(var b={payload:e.payloadType,config:""},w=0,x=Object.keys(r);w<x.length;w++){var S=x[w];b.config&&(b.config+=";"),b.config+="".concat(S,"=").concat(r[S])}b.config&&n._mediaObject.fmtp.push(b);var k,R=u(e.rtcpFeedback);try{for(R.s();!(k=R.n()).done;){var C=k.value;n._mediaObject.rtcpFb.push({payload:e.payloadType,type:C.type,subtype:C.parameter})}}catch(P){R.e(P)}finally{R.f()}};for(x.s();!(_=x.n()).done;)S()}catch(O){x.e(O)}finally{x.f()}n._mediaObject.payloads=g.codecs.map((function(e){return e.payloadType})).join(" "),n._mediaObject.ext=[];var k,R=u(g.headerExtensions);try{var C=function(){var e=k.value;if(!(h.ext||[]).some((function(t){return t.uri===e.uri})))return"continue";n._mediaObject.ext.push({uri:e.uri,value:e.id})};for(R.s();!(k=R.n()).done;)C()}catch(O){R.e(O)}finally{R.f()}if(w&&"extmap-allow-mixed"===h.extmapAllowMixed&&(n._mediaObject.extmapAllowMixed="extmap-allow-mixed"),h.simulcast){n._mediaObject.simulcast={dir1:"recv",list1:h.simulcast.list1},n._mediaObject.rids=[];var P,T=u(h.rids||[]);try{for(T.s();!(P=T.n()).done;){var E=P.value;"send"===E.direction&&n._mediaObject.rids.push({id:E.id,direction:"recv"})}}catch(O){T.e(O)}finally{T.f()}}else if(h.simulcast_03){n._mediaObject.simulcast_03={value:h.simulcast_03.value.replace(/send/g,"recv")},n._mediaObject.rids=[];var D,I=u(h.rids||[]);try{for(I.s();!(D=I.n()).done;){var M=D.value;"send"===M.direction&&n._mediaObject.rids.push({id:M.id,direction:"recv"})}}catch(O){I.e(O)}finally{I.f()}}n._mediaObject.rtcpMux="rtcp-mux",n._mediaObject.rtcpRsize="rtcp-rsize",n._planB&&"video"===n._mediaObject.type&&(n._mediaObject.xGoogleFlag="conference");break;case"application":"number"===typeof h.sctpPort?(n._mediaObject.payloads="webrtc-datachannel",n._mediaObject.sctpPort=c.port,n._mediaObject.maxMessageSize=c.maxMessageSize):h.sctpmap&&(n._mediaObject.payloads=c.port,n._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:c.port,maxMessageSize:c.maxMessageSize})}return n}return s(r,[{key:"setDtlsRole",value:function(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}}]),r}(p);t.AnswerMediaSection=f;var h=function(e){n(r,e);var t=c(r);function r(e){var n,a=e.iceParameters,i=e.iceCandidates,s=e.dtlsParameters,c=e.sctpParameters,d=e.plainRtpParameters,l=e.planB,p=void 0!==l&&l,f=e.mid,h=e.kind,v=e.offerRtpParameters,g=e.streamId,y=e.trackId,b=e.oldDataChannelSpec,w=void 0!==b&&b;switch(o(this,r),(n=t.call(this,{iceParameters:a,iceCandidates:i,dtlsParameters:s,planB:p}))._mediaObject.mid=String(f),n._mediaObject.type=h,d?(n._mediaObject.connection={ip:d.ip,version:d.ipVersion},n._mediaObject.protocol="RTP/AVP",n._mediaObject.port=d.port):(n._mediaObject.connection={ip:"127.0.0.1",version:4},n._mediaObject.protocol=c?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",n._mediaObject.port=7),h){case"audio":case"video":n._mediaObject.direction="sendonly",n._mediaObject.rtp=[],n._mediaObject.rtcpFb=[],n._mediaObject.fmtp=[],n._planB||(n._mediaObject.msid="".concat(g||"-"," ").concat(y));var _,x=u(v.codecs);try{for(x.s();!(_=x.n()).done;){var S=_.value,k={payload:S.payloadType,codec:m(S),rate:S.clockRate};S.channels>1&&(k.encoding=S.channels),n._mediaObject.rtp.push(k);for(var R={payload:S.payloadType,config:""},C=0,P=Object.keys(S.parameters);C<P.length;C++){var T=P[C];R.config&&(R.config+=";"),R.config+="".concat(T,"=").concat(S.parameters[T])}R.config&&n._mediaObject.fmtp.push(R);var E,D=u(S.rtcpFeedback);try{for(D.s();!(E=D.n()).done;){var I=E.value;n._mediaObject.rtcpFb.push({payload:S.payloadType,type:I.type,subtype:I.parameter})}}catch(N){D.e(N)}finally{D.f()}}}catch(N){x.e(N)}finally{x.f()}n._mediaObject.payloads=v.codecs.map((function(e){return e.payloadType})).join(" "),n._mediaObject.ext=[];var M,O=u(v.headerExtensions);try{for(O.s();!(M=O.n()).done;){var L=M.value;n._mediaObject.ext.push({uri:L.uri,value:L.id})}}catch(N){O.e(N)}finally{O.f()}n._mediaObject.rtcpMux="rtcp-mux",n._mediaObject.rtcpRsize="rtcp-rsize";var Z=v.encodings[0],j=Z.ssrc,A=Z.rtx&&Z.rtx.ssrc?Z.rtx.ssrc:void 0;n._mediaObject.ssrcs=[],n._mediaObject.ssrcGroups=[],v.rtcp.cname&&n._mediaObject.ssrcs.push({id:j,attribute:"cname",value:v.rtcp.cname}),n._planB&&n._mediaObject.ssrcs.push({id:j,attribute:"msid",value:"".concat(g||"-"," ").concat(y)}),A&&(v.rtcp.cname&&n._mediaObject.ssrcs.push({id:A,attribute:"cname",value:v.rtcp.cname}),n._planB&&n._mediaObject.ssrcs.push({id:A,attribute:"msid",value:"".concat(g||"-"," ").concat(y)}),n._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:"".concat(j," ").concat(A)}));break;case"application":w?(n._mediaObject.payloads=c.port,n._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:c.port,maxMessageSize:c.maxMessageSize}):(n._mediaObject.payloads="webrtc-datachannel",n._mediaObject.sctpPort=c.port,n._mediaObject.maxMessageSize=c.maxMessageSize)}return n}return s(r,[{key:"setDtlsRole",value:function(e){this._mediaObject.setup="actpass"}},{key:"planBReceive",value:function(e){var t=e.offerRtpParameters,r=e.streamId,n=e.trackId,a=t.encodings[0],i=a.ssrc,o=a.rtx&&a.rtx.ssrc?a.rtx.ssrc:void 0;t.rtcp.cname&&this._mediaObject.ssrcs.push({id:i,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:i,attribute:"msid",value:"".concat(r||"-"," ").concat(n)}),o&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:o,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:o,attribute:"msid",value:"".concat(r||"-"," ").concat(n)}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:"".concat(i," ").concat(o)}))}},{key:"planBStopReceiving",value:function(e){var t=e.offerRtpParameters.encodings[0],r=t.ssrc,n=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter((function(e){return e.id!==r&&e.id!==n})),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter((function(e){return e.ssrcs!=="".concat(r," ").concat(n)})))}}]),r}(p);function m(e){var t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}t.OfferMediaSection=h},67665:function(e,t,r){"use strict";var n=r(49804),a=r(4821);function i(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var s=r(90228),c=r(83603),u=r(8645),d=new c.Logger("RemoteSdp"),l=function(){function e(t){var r=t.iceParameters,a=t.iceCandidates,i=t.dtlsParameters,o=t.sctpParameters,s=t.plainRtpParameters,c=t.planB,u=void 0!==c&&c;if(n(this,e),this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=r,this._iceCandidates=a,this._dtlsParameters=i,this._sctpParameters=o,this._plainRtpParameters=s,this._planB=u,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},r&&r.iceLite&&(this._sdpObject.icelite="ice-lite"),i){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};var d=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:i.fingerprints[d-1].algorithm,hash:i.fingerprints[d-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}s&&(this._sdpObject.origin.address=s.ip,this._sdpObject.origin.ipVer=s.ipVersion)}return a(e,[{key:"updateIceParameters",value:function(e){d.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;var t,r=i(this._mediaSections);try{for(r.s();!(t=r.n()).done;){t.value.setIceParameters(e)}}catch(n){r.e(n)}finally{r.f()}}},{key:"updateDtlsRole",value:function(e){d.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;var t,r=i(this._mediaSections);try{for(r.s();!(t=r.n()).done;){t.value.setDtlsRole(e)}}catch(n){r.e(n)}finally{r.f()}}},{key:"getNextMediaSectionIdx",value:function(){for(var e=0;e<this._mediaSections.length;++e){var t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}},{key:"send",value:function(e){var t=e.offerMediaObject,r=e.reuseMid,n=e.offerRtpParameters,a=e.answerRtpParameters,i=e.codecOptions,o=e.extmapAllowMixed,s=void 0!==o&&o,c=new u.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:n,answerRtpParameters:a,codecOptions:i,extmapAllowMixed:s});r?this._replaceMediaSection(c,r):this._midToIndex.has(c.mid)?this._replaceMediaSection(c):this._addMediaSection(c)}},{key:"receive",value:function(e){var t,r=e.mid,n=e.kind,a=e.offerRtpParameters,i=e.streamId,o=e.trackId,s=this._midToIndex.get(r);if(void 0!==s&&(t=this._mediaSections[s]),t)t.planBReceive({offerRtpParameters:a,streamId:i,trackId:o}),this._replaceMediaSection(t);else{t=new u.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:r,kind:n,offerRtpParameters:a,streamId:i,trackId:o});var c=this._mediaSections.find((function(e){return e.closed}));c?this._replaceMediaSection(t,c.mid):this._addMediaSection(t)}}},{key:"disableMediaSection",value:function(e){var t=this._midToIndex.get(e);if(void 0===t)throw new Error("no media section found with mid '".concat(e,"'"));this._mediaSections[t].disable()}},{key:"closeMediaSection",value:function(e){var t=this._midToIndex.get(e);if(void 0===t)throw new Error("no media section found with mid '".concat(e,"'"));var r=this._mediaSections[t];if(e===this._firstMid)return d.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),void this.disableMediaSection(e);r.close(),this._regenerateBundleMids()}},{key:"planBStopReceiving",value:function(e){var t=e.mid,r=e.offerRtpParameters,n=this._midToIndex.get(t);if(void 0===n)throw new Error("no media section found with mid '".concat(t,"'"));var a=this._mediaSections[n];a.planBStopReceiving({offerRtpParameters:r}),this._replaceMediaSection(a)}},{key:"sendSctpAssociation",value:function(e){var t=e.offerMediaObject,r=new u.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(r)}},{key:"receiveSctpAssociation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.oldDataChannelSpec,r=void 0!==t&&t,n=new u.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:r});this._addMediaSection(n)}},{key:"getSdp",value:function(){return this._sdpObject.origin.sessionVersion++,s.write(this._sdpObject)}},{key:"_addMediaSection",value:function(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}},{key:"_replaceMediaSection",value:function(e,t){if("string"===typeof t){var r=this._midToIndex.get(t);if(void 0===r)throw new Error("no media section found for reuseMid '".concat(t,"'"));var n=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(n.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{var a=this._midToIndex.get(e.mid);if(void 0===a)throw new Error("no media section found with mid '".concat(e.mid,"'"));this._mediaSections[a]=e,this._sdpObject.media[a]=e.getObject()}}},{key:"_regenerateBundleMids",value:function(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter((function(e){return!e.closed})).map((function(e){return e.mid})).join(" "))}}]),e}();t.RemoteSdp=l},39510:function(e,t,r){"use strict";function n(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(90228);t.extractRtpCapabilities=function(e){var t,r=e.sdpObject,a=new Map,o=[],s=!1,c=!1,u=n(r.media);try{for(u.s();!(t=u.n()).done;){var d=t.value,l=d.type;switch(l){case"audio":if(s)continue;s=!0;break;case"video":if(c)continue;c=!0;break;default:continue}var p,f=n(d.rtp);try{for(f.s();!(p=f.n()).done;){var h=p.value,m={kind:l,mimeType:"".concat(l,"/").concat(h.codec),preferredPayloadType:h.payload,clockRate:h.rate,channels:h.encoding,parameters:{},rtcpFeedback:[]};a.set(m.preferredPayloadType,m)}}catch(D){f.e(D)}finally{f.f()}var v,g=n(d.fmtp||[]);try{for(g.s();!(v=g.n()).done;){var y=v.value,b=i.parseParams(y.config),w=a.get(y.payload);w&&(b&&b["profile-level-id"]&&(b["profile-level-id"]=String(b["profile-level-id"])),w.parameters=b)}}catch(D){g.e(D)}finally{g.f()}var _,x=n(d.rtcpFb||[]);try{for(x.s();!(_=x.n()).done;){var S=_.value,k=a.get(S.payload);if(k){var R={type:S.type,parameter:S.subtype};R.parameter||delete R.parameter,k.rtcpFeedback.push(R)}}}catch(D){x.e(D)}finally{x.f()}var C,P=n(d.ext||[]);try{for(P.s();!(C=P.n()).done;){var T=C.value;if(!T["encrypt-uri"]){var E={kind:l,uri:T.uri,preferredId:T.value};o.push(E)}}}catch(D){P.e(D)}finally{P.f()}}}catch(D){u.e(D)}finally{u.f()}return{codecs:Array.from(a.values()),headerExtensions:o}},t.extractDtlsParameters=function(e){var t=e.sdpObject,r=(t.media||[]).find((function(e){return e.iceUfrag&&0!==e.port}));if(!r)throw new Error("no active media section found");var n,a=r.fingerprint||t.fingerprint;switch(r.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:a.type,value:a.hash}]}},t.getCname=function(e){var t=(e.offerMediaObject.ssrcs||[]).find((function(e){return"cname"===e.attribute}));return t?t.value:""},t.applyCodecParameters=function(e){var t,r=e.offerRtpParameters,a=e.answerMediaObject,o=n(r.codecs);try{var s=function(){var e=t.value,r=e.mimeType.toLowerCase();if("audio/opus"!==r)return"continue";if(!(a.rtp||[]).find((function(t){return t.payload===e.payloadType})))return"continue";a.fmtp=a.fmtp||[];var n=a.fmtp.find((function(t){return t.payload===e.payloadType}));n||(n={payload:e.payloadType,config:""},a.fmtp.push(n));var o=i.parseParams(n.config);switch(r){case"audio/opus":var s=e.parameters["sprop-stereo"];void 0!==s&&(o.stereo=s?1:0)}n.config="";for(var c=0,u=Object.keys(o);c<u.length;c++){var d=u[c];n.config&&(n.config+=";"),n.config+="".concat(d,"=").concat(o[d])}};for(o.s();!(t=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}}},52107:function(e,t,r){"use strict";var n=r(18704);function a(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getRtpEncodings=function(e){var t,r,i=e.offerMediaObject,o=e.track,s=new Set,c=a(i.ssrcs||[]);try{for(c.s();!(r=c.n()).done;){var u=r.value;if("msid"===u.attribute)if(u.value.split(" ")[1]===o.id){var d=u.id;s.add(d),t||(t=d)}}}catch(E){c.e(E)}finally{c.f()}if(0===s.size)throw new Error("a=ssrc line with msid information not found [track.id:".concat(o.id,"]"));var l,p=new Map,f=a(i.ssrcGroups||[]);try{for(f.s();!(l=f.n()).done;){var h=l.value;if("FID"===h.semantics){var m=h.ssrcs.split(/\s+/),v=n(m,2),g=v[0],y=v[1];g=Number(g),y=Number(y),s.has(g)&&(s.delete(g),s.delete(y),p.set(g,y))}}}catch(E){f.e(E)}finally{f.f()}var b,w=a(s);try{for(w.s();!(b=w.n()).done;){var _=b.value;p.set(_,null)}}catch(E){w.e(E)}finally{w.f()}var x,S=[],k=a(p);try{for(k.s();!(x=k.n()).done;){var R=n(x.value,2),C=R[0],P=R[1],T={ssrc:C};P&&(T.rtx={ssrc:P}),S.push(T)}}catch(E){k.e(E)}finally{k.f()}return S},t.addLegacySimulcast=function(e){var t,r,n,a=e.offerMediaObject,i=e.track,o=e.numStreams;if(o<=1)throw new TypeError("numStreams must be greater than 1");if(!(a.ssrcs||[]).find((function(e){return"msid"===e.attribute&&(e.value.split(" ")[1]===i.id&&(t=e.id,n=e.value.split(" ")[0],!0))})))throw new Error("a=ssrc line with msid information not found [track.id:".concat(i.id,"]"));(a.ssrcGroups||[]).some((function(e){if("FID"!==e.semantics)return!1;var n=e.ssrcs.split(/\s+/);return Number(n[0])===t&&(r=Number(n[1]),!0)}));var s=a.ssrcs.find((function(e){return"cname"===e.attribute&&e.id===t}));if(!s)throw new Error("a=ssrc line with cname information not found [track.id:".concat(i.id,"]"));for(var c=s.value,u=[],d=[],l=0;l<o;++l)u.push(t+l),r&&d.push(r+l);a.ssrcGroups=a.ssrcGroups||[],a.ssrcs=a.ssrcs||[],a.ssrcGroups.push({semantics:"SIM",ssrcs:u.join(" ")});for(var p=0;p<u.length;++p){var f=u[p];a.ssrcs.push({id:f,attribute:"cname",value:c}),a.ssrcs.push({id:f,attribute:"msid",value:"".concat(n," ").concat(i.id)})}for(var h=0;h<d.length;++h){var m=u[h],v=d[h];a.ssrcs.push({id:v,attribute:"cname",value:c}),a.ssrcs.push({id:v,attribute:"msid",value:"".concat(n," ").concat(i.id)}),a.ssrcGroups.push({semantics:"FID",ssrcs:"".concat(m," ").concat(v)})}}},66207:function(e,t,r){"use strict";var n=r(18704);function a(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getRtpEncodings=function(e){var t,r=e.offerMediaObject,i=new Set,o=a(r.ssrcs||[]);try{for(o.s();!(t=o.n()).done;){var s=t.value.id;i.add(s)}}catch(C){o.e(C)}finally{o.f()}if(0===i.size)throw new Error("no a=ssrc lines found");var c,u=new Map,d=a(r.ssrcGroups||[]);try{for(d.s();!(c=d.n()).done;){var l=c.value;if("FID"===l.semantics){var p=l.ssrcs.split(/\s+/),f=n(p,2),h=f[0],m=f[1];h=Number(h),m=Number(m),i.has(h)&&(i.delete(h),i.delete(m),u.set(h,m))}}}catch(C){d.e(C)}finally{d.f()}var v,g=a(i);try{for(g.s();!(v=g.n()).done;){var y=v.value;u.set(y,null)}}catch(C){g.e(C)}finally{g.f()}var b,w=[],_=a(u);try{for(_.s();!(b=_.n()).done;){var x=n(b.value,2),S=x[0],k=x[1],R={ssrc:S};k&&(R.rtx={ssrc:k}),w.push(R)}}catch(C){_.e(C)}finally{_.f()}return w},t.addLegacySimulcast=function(e){var t=e.offerMediaObject,r=e.numStreams;if(r<=1)throw new TypeError("numStreams must be greater than 1");var a=(t.ssrcs||[]).find((function(e){return"msid"===e.attribute}));if(!a)throw new Error("a=ssrc line with msid information not found");var i,o=n(a.value.split(" ")[0],2),s=o[0],c=o[1],u=a.id;(t.ssrcGroups||[]).some((function(e){if("FID"!==e.semantics)return!1;var t=e.ssrcs.split(/\s+/);return Number(t[0])===u&&(i=Number(t[1]),!0)}));var d=t.ssrcs.find((function(e){return"cname"===e.attribute}));if(!d)throw new Error("a=ssrc line with cname information not found");for(var l=d.value,p=[],f=[],h=0;h<r;++h)p.push(u+h),i&&f.push(i+h);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:p.join(" ")});for(var m=0;m<p.length;++m){var v=p[m];t.ssrcs.push({id:v,attribute:"cname",value:l}),t.ssrcs.push({id:v,attribute:"msid",value:"".concat(s," ").concat(c)})}for(var g=0;g<f.length;++g){var y=p[g],b=f[g];t.ssrcs.push({id:b,attribute:"cname",value:l}),t.ssrcs.push({id:b,attribute:"msid",value:"".concat(s," ").concat(c)}),t.ssrcGroups.push({semantics:"FID",ssrcs:"".concat(y," ").concat(b)})}}},64824:function(e,t,r){"use strict";var n=r(29307);t.AS=n.Device,n.detectDevice,r(11989),r(80283).parse},38418:function(e,t,r){"use strict";function n(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0});var i=r(17606),o=r(54952);function s(e){var t=new RegExp("^(audio|video)/(.+)","i");if("object"!==typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!==typeof e.mimeType)throw new TypeError("missing codec.mimeType");var r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if(e.kind=r[1].toLowerCase(),e.preferredPayloadType&&"number"!==typeof e.preferredPayloadType)throw new TypeError("invalid codec.preferredPayloadType");if("number"!==typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===e.kind?"number"!==typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(var a=0,i=Object.keys(e.parameters);a<i.length;a++){var o=i[a],s=e.parameters[o];if(void 0===s&&(e.parameters[o]="",s=""),"string"!==typeof s&&"number"!==typeof s)throw new TypeError("invalid codec parameter [key:".concat(o,"s, value:").concat(s,"]"));if("apt"===o&&"number"!==typeof s)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);var u,d=n(e.rtcpFeedback);try{for(d.s();!(u=d.n()).done;){c(u.value)}}catch(l){d.e(l)}finally{d.f()}}function c(e){if("object"!==typeof e)throw new TypeError("fb is not an object");if(!e.type||"string"!==typeof e.type)throw new TypeError("missing fb.type");e.parameter&&"string"===typeof e.parameter||(e.parameter="")}function u(e){if("object"!==typeof e)throw new TypeError("ext is not an object");if(e.kind&&"string"===typeof e.kind||(e.kind=""),""!==e.kind&&"audio"!==e.kind&&"video"!==e.kind)throw new TypeError("invalid ext.kind");if(!e.uri||"string"!==typeof e.uri)throw new TypeError("missing ext.uri");if("number"!==typeof e.preferredId)throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!==typeof e.preferredEncrypt)throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!==typeof e.direction)throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function d(e){if("object"!==typeof e)throw new TypeError("params is not an object");if(e.mid&&"string"!==typeof e.mid)throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");var t,r=n(e.codecs);try{for(r.s();!(t=r.n()).done;){l(t.value)}}catch(c){r.e(c)}finally{r.f()}if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);var a,i=n(e.headerExtensions);try{for(i.s();!(a=i.n()).done;){p(a.value)}}catch(c){i.e(c)}finally{i.f()}if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);var o,s=n(e.encodings);try{for(s.s();!(o=s.n()).done;){f(o.value)}}catch(c){s.e(c)}finally{s.f()}if(e.rtcp&&"object"!==typeof e.rtcp)throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),h(e.rtcp)}function l(e){var t=new RegExp("^(audio|video)/(.+)","i");if("object"!==typeof e)throw new TypeError("codec is not an object");if(!e.mimeType||"string"!==typeof e.mimeType)throw new TypeError("missing codec.mimeType");var r=t.exec(e.mimeType);if(!r)throw new TypeError("invalid codec.mimeType");if("number"!==typeof e.payloadType)throw new TypeError("missing codec.payloadType");if("number"!==typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===r[1].toLowerCase()?"number"!==typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(var a=0,i=Object.keys(e.parameters);a<i.length;a++){var o=i[a],s=e.parameters[o];if(void 0===s&&(e.parameters[o]="",s=""),"string"!==typeof s&&"number"!==typeof s)throw new TypeError("invalid codec parameter [key:".concat(o,"s, value:").concat(s,"]"));if("apt"===o&&"number"!==typeof s)throw new TypeError("invalid codec apt parameter")}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);var u,d=n(e.rtcpFeedback);try{for(d.s();!(u=d.n()).done;){c(u.value)}}catch(l){d.e(l)}finally{d.f()}}function p(e){if("object"!==typeof e)throw new TypeError("ext is not an object");if(!e.uri||"string"!==typeof e.uri)throw new TypeError("missing ext.uri");if("number"!==typeof e.id)throw new TypeError("missing ext.id");if(e.encrypt&&"boolean"!==typeof e.encrypt)throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),e.parameters&&"object"===typeof e.parameters||(e.parameters={});for(var t=0,r=Object.keys(e.parameters);t<r.length;t++){var n=r[t],a=e.parameters[n];if(void 0===a&&(e.parameters[n]="",a=""),"string"!==typeof a&&"number"!==typeof a)throw new TypeError("invalid header extension parameter")}}function f(e){if("object"!==typeof e)throw new TypeError("encoding is not an object");if(e.ssrc&&"number"!==typeof e.ssrc)throw new TypeError("invalid encoding.ssrc");if(e.rid&&"string"!==typeof e.rid)throw new TypeError("invalid encoding.rid");if(e.rtx&&"object"!==typeof e.rtx)throw new TypeError("invalid encoding.rtx");if(e.rtx&&"number"!==typeof e.rtx.ssrc)throw new TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"===typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!==typeof e.scalabilityMode)throw new TypeError("invalid encoding.scalabilityMode")}function h(e){if("object"!==typeof e)throw new TypeError("rtcp is not an object");if(e.cname&&"string"!==typeof e.cname)throw new TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"===typeof e.reducedSize||(e.reducedSize=!0)}function m(e){if("object"!==typeof e)throw new TypeError("numStreams is not an object");if("number"!==typeof e.OS)throw new TypeError("missing numStreams.OS");if("number"!==typeof e.MIS)throw new TypeError("missing numStreams.MIS")}function v(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.strict,a=void 0!==n&&n,o=r.modify,s=void 0!==o&&o,c=e.mimeType.toLowerCase(),u=t.mimeType.toLowerCase();if(c!==u)return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;switch(c){case"video/h264":var d=e.parameters["packetization-mode"]||0,l=t.parameters["packetization-mode"]||0;if(d!==l)return!1;if(a){if(!i.isSameProfile(e.parameters,t.parameters))return!1;var p;try{p=i.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(m){return!1}s&&(p?(e.parameters["profile-level-id"]=p,t.parameters["profile-level-id"]=p):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break;case"video/vp9":if(a){var f=e.parameters["profile-id"]||0,h=t.parameters["profile-id"]||0;if(f!==h)return!1}}return!0}function y(e,t){var r,a=[],i=n(e.rtcpFeedback||[]);try{var o=function(){var e=r.value,n=(t.rtcpFeedback||[]).find((function(t){return t.type===e.type&&(t.parameter===e.parameter||!t.parameter&&!e.parameter)}));n&&a.push(n)};for(i.s();!(r=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}return a}t.validateRtpCapabilities=function(e){if("object"!==typeof e)throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);var t,r=n(e.codecs);try{for(r.s();!(t=r.n()).done;){s(t.value)}}catch(o){r.e(o)}finally{r.f()}if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);var a,i=n(e.headerExtensions);try{for(i.s();!(a=i.n()).done;){u(a.value)}}catch(o){i.e(o)}finally{i.f()}},t.validateRtpCodecCapability=s,t.validateRtcpFeedback=c,t.validateRtpHeaderExtension=u,t.validateRtpParameters=d,t.validateRtpCodecParameters=l,t.validateRtpHeaderExtensionParameters=p,t.validateRtpEncodingParameters=f,t.validateRtcpParameters=h,t.validateSctpCapabilities=function(e){if("object"!==typeof e)throw new TypeError("caps is not an object");if(!e.numStreams||"object"!==typeof e.numStreams)throw new TypeError("missing caps.numStreams");m(e.numStreams)},t.validateNumSctpStreams=m,t.validateSctpParameters=function(e){if("object"!==typeof e)throw new TypeError("params is not an object");if("number"!==typeof e.port)throw new TypeError("missing params.port");if("number"!==typeof e.OS)throw new TypeError("missing params.OS");if("number"!==typeof e.MIS)throw new TypeError("missing params.MIS");if("number"!==typeof e.maxMessageSize)throw new TypeError("missing params.maxMessageSize")},t.validateSctpStreamParameters=function(e){if("object"!==typeof e)throw new TypeError("params is not an object");if("number"!==typeof e.streamId)throw new TypeError("missing params.streamId");var t=!1;if("boolean"===typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!==typeof e.maxPacketLifeTime)throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!==typeof e.maxRetransmits)throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(t||!e.maxPacketLifeTime&&!e.maxRetransmits||(e.ordered=!1),e.priority&&"string"!==typeof e.priority)throw new TypeError("invalid params.priority");if(e.label&&"string"!==typeof e.label)throw new TypeError("invalid params.label");if(e.protocol&&"string"!==typeof e.protocol)throw new TypeError("invalid params.protocol")},t.getExtendedRtpCapabilities=function(e,t){var r,a={codecs:[],headerExtensions:[]},i=n(t.codecs||[]);try{var o=function(){var t=r.value;if(v(t))return"continue";var n=(e.codecs||[]).find((function(e){return g(e,t,{strict:!0,modify:!0})}));if(!n)return"continue";var i={mimeType:n.mimeType,kind:n.kind,clockRate:n.clockRate,channels:n.channels,localPayloadType:n.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:t.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:n.parameters,remoteParameters:t.parameters,rtcpFeedback:y(n,t)};a.codecs.push(i)};for(i.s();!(r=i.n()).done;)o()}catch(f){i.e(f)}finally{i.f()}var s,c=n(a.codecs);try{var u=function(){var r=s.value,n=e.codecs.find((function(e){return v(e)&&e.parameters.apt===r.localPayloadType})),a=t.codecs.find((function(e){return v(e)&&e.parameters.apt===r.remotePayloadType}));n&&a&&(r.localRtxPayloadType=n.preferredPayloadType,r.remoteRtxPayloadType=a.preferredPayloadType)};for(c.s();!(s=c.n()).done;)u()}catch(f){c.e(f)}finally{c.f()}var d,l=n(t.headerExtensions);try{var p=function(){var t=d.value,r=e.headerExtensions.find((function(e){return n=t,(!(r=e).kind||!n.kind||r.kind===n.kind)&&r.uri===n.uri;var r,n}));if(!r)return"continue";var n={kind:t.kind,uri:t.uri,sendId:r.preferredId,recvId:t.preferredId,encrypt:r.preferredEncrypt,direction:"sendrecv"};switch(t.direction){case"sendrecv":n.direction="sendrecv";break;case"recvonly":n.direction="sendonly";break;case"sendonly":n.direction="recvonly";break;case"inactive":n.direction="inactive"}a.headerExtensions.push(n)};for(l.s();!(d=l.n()).done;)p()}catch(f){l.e(f)}finally{l.f()}return a},t.getRecvRtpCapabilities=function(e){var t,r={codecs:[],headerExtensions:[]},a=n(e.codecs);try{for(a.s();!(t=a.n()).done;){var i=t.value,o={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(r.codecs.push(o),i.remoteRtxPayloadType){var s={mimeType:"".concat(i.kind,"/rtx"),kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};r.codecs.push(s)}}}catch(p){a.e(p)}finally{a.f()}var c,u=n(e.headerExtensions);try{for(u.s();!(c=u.n()).done;){var d=c.value;if("sendrecv"===d.direction||"recvonly"===d.direction){var l={kind:d.kind,uri:d.uri,preferredId:d.recvId,preferredEncrypt:d.encrypt,direction:d.direction};r.headerExtensions.push(l)}}}catch(p){u.e(p)}finally{u.f()}return r},t.getSendingRtpParameters=function(e,t){var r,a={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},i=n(t.codecs);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.kind===e){var s={mimeType:o.mimeType,payloadType:o.localPayloadType,clockRate:o.clockRate,channels:o.channels,parameters:o.localParameters,rtcpFeedback:o.rtcpFeedback};if(a.codecs.push(s),o.localRtxPayloadType){var c={mimeType:"".concat(o.kind,"/rtx"),payloadType:o.localRtxPayloadType,clockRate:o.clockRate,parameters:{apt:o.localPayloadType},rtcpFeedback:[]};a.codecs.push(c)}}}}catch(f){i.e(f)}finally{i.f()}var u,d=n(t.headerExtensions);try{for(d.s();!(u=d.n()).done;){var l=u.value;if(!(l.kind&&l.kind!==e||"sendrecv"!==l.direction&&"sendonly"!==l.direction)){var p={uri:l.uri,id:l.sendId,encrypt:l.encrypt,parameters:{}};a.headerExtensions.push(p)}}}catch(f){d.e(f)}finally{d.f()}return a},t.getSendingRemoteRtpParameters=function(e,t){var r,a={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},i=n(t.codecs);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.kind===e){var s={mimeType:o.mimeType,payloadType:o.localPayloadType,clockRate:o.clockRate,channels:o.channels,parameters:o.remoteParameters,rtcpFeedback:o.rtcpFeedback};if(a.codecs.push(s),o.localRtxPayloadType){var c={mimeType:"".concat(o.kind,"/rtx"),payloadType:o.localRtxPayloadType,clockRate:o.clockRate,parameters:{apt:o.localPayloadType},rtcpFeedback:[]};a.codecs.push(c)}}}}catch(x){i.e(x)}finally{i.f()}var u,d=n(t.headerExtensions);try{for(d.s();!(u=d.n()).done;){var l=u.value;if(!(l.kind&&l.kind!==e||"sendrecv"!==l.direction&&"sendonly"!==l.direction)){var p={uri:l.uri,id:l.sendId,encrypt:l.encrypt,parameters:{}};a.headerExtensions.push(p)}}}catch(x){d.e(x)}finally{d.f()}if(a.headerExtensions.some((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri}))){var f,h=n(a.codecs);try{for(h.s();!(f=h.n()).done;){var m=f.value;m.rtcpFeedback=(m.rtcpFeedback||[]).filter((function(e){return"goog-remb"!==e.type}))}}catch(x){h.e(x)}finally{h.f()}}else if(a.headerExtensions.some((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri}))){var v,g=n(a.codecs);try{for(g.s();!(v=g.n()).done;){var y=v.value;y.rtcpFeedback=(y.rtcpFeedback||[]).filter((function(e){return"transport-cc"!==e.type}))}}catch(x){g.e(x)}finally{g.f()}}else{var b,w=n(a.codecs);try{for(w.s();!(b=w.n()).done;){var _=b.value;_.rtcpFeedback=(_.rtcpFeedback||[]).filter((function(e){return"transport-cc"!==e.type&&"goog-remb"!==e.type}))}}catch(x){w.e(x)}finally{w.f()}}return a},t.reduceCodecs=function(e,t){var r=[];if(t){for(var n=0;n<e.length;++n)if(g(e[n],t)){r.push(e[n]),v(e[n+1])&&r.push(e[n+1]);break}if(0===r.length)throw new TypeError("no matching codec found")}else r.push(e[0]),v(e[1])&&r.push(e[1]);return r},t.generateProbatorRtpParameters=function(e){d(e=o.clone(e,{}));var t={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=127,t.headerExtensions=e.headerExtensions,t},t.canSend=function(e,t){return t.codecs.some((function(t){return t.kind===e}))},t.canReceive=function(e,t){if(d(e),0===e.codecs.length)return!1;var r=e.codecs[0];return t.codecs.some((function(e){return e.remotePayloadType===r.payloadType}))}},80283:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");t.parse=function(e){var t=r.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}},11989:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(29307)),n(r(59250)),n(r(72604)),n(r(30473)),n(r(52664)),n(r(51837)),n(r(50410)),n(r(89098))},54952:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clone=function(e,t){return"undefined"===typeof e?t:JSON.parse(JSON.stringify(e))},t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},30573:function(e,t,r){e.exports=r(12717)},70873:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},8756:function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},20193:function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Z:function(){return n}})},41510:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(r)}e.exports=t},31790:function(e,t,r){var n=r(44837);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},90596:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},19678:function(e,t,r){var n=r(43108),a=r(70873);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?a(e):t}},96714:function(e,t,r){var n=r(41510),a=r(44837),i=r(90596),o=r(3899);function s(t){var r="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!i(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},s(t)}e.exports=s},95536:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},90228:function(e,t,r){var n=r(52132),a=r(38709);t.write=a,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},52132:function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},a=function(e,t,r){var a=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:a&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:a?t[e.name]:t;!function(e,t,r,a){if(a&&!r)t[a]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))}(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=r(95536),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(i[t]||[]).length;s+=1){var c=i[t][s];if(c.reg.test(o))return a(c,n,o)}})),t.media=r,t};var s=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),a=0;a<r.length;a+=3)t.push({component:r[a],ip:r[a+1],port:r[a+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},38709:function(e,t,r){var n=r(95536),a=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(a,(function(e){if(t>=n)return e;var a=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(a);case"%d":return Number(a);case"%v":return""}}))},o=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var a=0;a<t.names.length;a+=1){var o=t.names[a];t.name?n.push(r[t.name][o]):n.push(r[t.names[a]])}else n.push(r[t.name]);return i.apply(null,n)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||s,a=t.innerOrder||c,i=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(o(t,r,e))}))}))})),e.media.forEach((function(e){i.push(o("m",n.m[0],e)),a.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(o(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(o(t,r,e))}))}))}))})),i.join("\r\n")+"\r\n"}},94989:function(e,t,r){"use strict";var n;t.__esModule=!0,t.AmpStateContext=void 0;var a=((n=r(27878))&&n.__esModule?n:{default:n}).default.createContext({});t.AmpStateContext=a},59735:function(e,t,r){"use strict";t.__esModule=!0,t.isInAmpMode=o,t.useAmp=function(){return o(a.default.useContext(i.AmpStateContext))};var n,a=(n=r(27878))&&n.__esModule?n:{default:n},i=r(94989);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,r=void 0!==t&&t,n=e.hybrid,a=void 0!==n&&n,i=e.hasQuery,o=void 0!==i&&i;return r||a&&o}},40052:function(e,t,r){"use strict";var n;t.__esModule=!0,t.HeadManagerContext=void 0;var a=((n=r(27878))&&n.__esModule?n:{default:n}).default.createContext({});t.HeadManagerContext=a},12717:function(e,t,r){"use strict";r(8756);t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(27878)),i=(n=r(3411))&&n.__esModule?n:{default:n},o=r(94989),s=r(40052),c=r(59735);function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function d(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[a.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(a.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function l(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var p=["name","httpEquiv","charSet","itemProp"];function f(e,t){return e.reduce((function(e,t){var r=a.default.Children.toArray(t.props.children);return e.concat(r)}),[]).reduce(l,[]).reverse().concat(d(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,r=new Set,n={};return function(a){var i=!0,o=!1;if(a.key&&"number"!==typeof a.key&&a.key.indexOf("$")>0){o=!0;var s=a.key.slice(a.key.indexOf("$")+1);e.has(s)?i=!1:e.add(s)}switch(a.type){case"title":case"base":t.has(a.type)?i=!1:t.add(a.type);break;case"meta":for(var c=0,u=p.length;c<u;c++){var d=p[c];if(a.props.hasOwnProperty(d))if("charSet"===d)r.has(d)?i=!1:r.add(d);else{var l=a.props[d],f=n[d]||new Set;"name"===d&&o||!f.has(l)?(f.add(l),n[d]=f):i=!1}}}return i}}()).reverse().map((function(e,t){var r=e.key||t;return a.default.cloneElement(e,{key:r})}))}function h(e){var t=e.children,r=(0,a.useContext)(o.AmpStateContext),n=(0,a.useContext)(s.HeadManagerContext);return a.default.createElement(i.default,{reduceComponentsToState:f,headManager:n,inAmpMode:(0,c.isInAmpMode)(r)},t)}h.rewind=function(){};var m=h;t.default=m},3411:function(e,t,r){"use strict";var n=r(64181),a=r(49804),i=r(4821),o=(r(70873),r(31790)),s=r(19678),c=r(41510);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return s(this,r)}}t.__esModule=!0,t.default=void 0;var d=r(27878),l=function(e){o(r,e);var t=u(r);function r(e){var i;return a(this,r),(i=t.call(this,e))._hasHeadManager=void 0,i.emitChange=function(){i._hasHeadManager&&i.props.headManager.updateHead(i.props.reduceComponentsToState(n(i.props.headManager.mountedInstances),i.props))},i._hasHeadManager=i.props.headManager&&i.props.headManager.mountedInstances,i}return i(r,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),r}(d.Component);t.default=l},29755:function(e,t,r){"use strict";r.d(t,{Z:function(){return $}});var n=r(15194),a=r(27878),i=r(69744),o=r(14571),s=r(33859),c=r(58893),u=r(4563),d=r(60165),l=r(3614),p=r(45822),f=r(22063),h=r(42097),m=r.n(h),v=r(68274),g=r(68255),y=r(18920),b=r(30635),w=r(680),_=r(3877),x=r(81273),S=r(52299),k=r(12455),R=r(93982),C=r(65325),P=r(39627),T=r(84724),E=r(2668),D=r(84135),I=r(15853),M=(0,I.Z)(a.createElement("path",{d:"M14 7l-5 5 5 5V7z"}),"ArrowLeft"),O=(0,I.Z)(a.createElement("path",{d:"M16.5 12c1.38 0 2.49-1.12 2.49-2.5S17.88 7 16.5 7C15.12 7 14 8.12 14 9.5s1.12 2.5 2.5 2.5zM9 11c1.66 0 2.99-1.34 2.99-3S10.66 5 9 5C7.34 5 6 6.34 6 8s1.34 3 3 3zm7.5 3c-1.83 0-5.5.92-5.5 2.75V19h11v-2.25c0-1.83-3.67-2.75-5.5-2.75zM9 13c-2.33 0-7 1.17-7 3.5V19h7v-2.25c0-.85.33-2.34 2.37-3.47C10.5 13.1 9.66 13 9 13z"}),"SupervisorAccount"),L=(0,I.Z)(a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block"),Z=r(50544),j=r(55368),A=r(363),N=r(45868),F=r(54031),B=r(35231),z=r.n(B),U=r(86649),H=r(90858),V=r.n(H),W=a.createElement,q={id:"",name:"",userRole:"",identityProviders:[],relationType:{},inverseRelationType:{},avatarUrl:""},G={id:"",name:"",groupUsers:[],description:""},$=(0,o.$j)((function(e){return{authState:(0,s._)(e),chatState:(0,c.l)(e),friendState:(0,u.t)(e),groupState:(0,d.w)(e),locationState:(0,f.T)(e),partyState:(0,l.F)(e),userState:(0,p.t)(e)}}),(function(e){return{getFriends:(0,i.DE)(y.$,e),unfriend:(0,i.DE)(y.o,e),getGroups:(0,i.DE)(b.jA,e),createGroup:(0,i.DE)(b.sS,e),patchGroup:(0,i.DE)(b.ir,e),removeGroup:(0,i.DE)(b.BN,e),removeGroupUser:(0,i.DE)(b.lU,e),getParty:(0,i.DE)(U.Ze,e),createParty:(0,i.DE)(U.ny,e),removeParty:(0,i.DE)(U.sQ,e),removePartyUser:(0,i.DE)(U.Zn,e),transferPartyOwner:(0,i.DE)(U.Z7,e),updateInviteTarget:(0,i.DE)(v.xz,e),updateChatTarget:(0,i.DE)(g.xN,e),updateMessageScrollInit:(0,i.DE)(g.mU,e),getLayerUsers:(0,i.DE)(w.mz,e),banUserFromLocation:(0,i.DE)(_.hZ,e)}}))((function(e){var t,r;try{var i,o,s,c,u,d,l,p,f,h,v,g,y,b,w,_,I=e.authState,B=e.friendState,U=e.locationState,H=e.getFriends,$=e.unfriend,Y=e.groupState,K=e.getGroups,X=e.createGroup,Q=e.harmony,J=(e.setHarmonyOpen,e.patchGroup),ee=e.removeGroup,te=e.removeGroupUser,re=e.partyState,ne=e.getParty,ae=e.createParty,ie=e.removeParty,oe=e.removePartyUser,se=e.transferPartyOwner,ce=e.setLeftDrawerOpen,ue=e.leftDrawerOpen,de=e.setRightDrawerOpen,le=e.setBottomDrawerOpen,pe=e.updateInviteTarget,fe=e.updateChatTarget,he=e.updateMessageScrollInit,me=e.userState,ve=e.getLayerUsers,ge=(e.banUserFromLocation,e.detailsType),ye=e.setDetailsType,be=e.groupFormMode,we=e.setGroupFormMode,_e=e.groupFormOpen,xe=e.setGroupFormOpen,Se=e.groupForm,ke=e.setGroupForm,Re=e.selectedUser,Ce=e.setSelectedUser,Pe=e.selectedGroup,Te=e.setSelectedGroup,Ee=I.get("user"),De=B.get("friends"),Ie=(De.get("friends"),Y.get("groups")),Me=(Ie.get("groups"),re.get("party")),Oe=(0,a.useState)(0),Le=Oe[0],Ze=(Oe[1],(0,a.useState)("")),je=Ze[0],Ae=Ze[1],Ne=(0,a.useState)(""),Fe=Ne[0],Be=Ne[1],ze=(0,a.useState)(""),Ue=ze[0],He=ze[1],Ve=(0,a.useState)(!1),We=Ve[0],qe=Ve[1],Ge=(0,a.useState)(""),$e=Ge[0],Ye=Ge[1],Ke=(0,a.useState)(""),Xe=Ke[0],Qe=Ke[1],Je=(0,a.useState)(""),et=(Je[0],Je[1],(0,a.useState)("")),tt=(et[0],et[1],Pe.id&&Pe.id.length>0?Pe.groupUsers.find((function(e){return e.userId===Ee.id})):{}),rt=Me&&Me.partyUsers?Me.partyUsers:[],nt=Me&&Me.partyUsers?Me.partyUsers.find((function(e){return e.userId===Ee.id})):{},at=(t=me.get("layerUsers"),U.get("currentLocation").get("location"));null===(r=Ee.locationAdmins)||void 0===r||r.find((function(e){return at.id===e.locationId}));(0,a.useEffect)((function(){!0===B.get("updateNeeded")&&!0!==B.get("getFriendsInProgress")&&H(0),B.get("closeDetails")===Re.id&&(ut(),B.set("closeDetails",""))}),[B]),(0,a.useEffect)((function(){!0===Y.get("updateNeeded")&&!0!==Y.get("getGroupsInProgress")&&K(0),Y.get("closeDetails")===Pe.id&&(ut(),Y.set("closeDetails",""))}),[Y]),(0,a.useEffect)((function(){!0===re.get("updateNeeded")&&ne()}),[re]),(0,a.useEffect)((function(){null!=Ee.instanceId&&!0===me.get("layerUsersUpdateNeeded")&&ve(!0),null!=Ee.channelInstanceId&&!0===me.get("channelLayerUsersUpdateNeeded")&&ve(!1)}),[Ee,me]);var it=function(e,t){e.preventDefault(),He(t)},ot=function(e,t){e.preventDefault();var r=z().find(Pe.groupUsers,(function(e){return e.id===t}));He(""),te(t),r.userId===Ee.id&&(Te(G),ye(""))},st=function(e,t){e.preventDefault(),Qe(t)},ct=function(e,t){e.preventDefault(),Qe(""),oe(t)},ut=function(){ce(!1),ye(""),Ce(q),Te(G)},dt=function(e){var t=e.target.value,r=Object.assign({},Se);r[e.target.name]=t,ke(r)},lt=function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&(0===Le?De.get("skip")+De.get("limit")<De.get("total")&&H(De.get("skip")+De.get("limit")):1===Le&&Ie.get("skip")+Ie.get("limit")<Ie.get("total")&&K(Ie.get("skip")+Ie.get("limit")))},pt=function(e,t){pe(e,t),ce(!1),de(!0)},ft=function(e,t){ce(!1),!0!==Q&&le(!0),setTimeout((function(){fe(e,t),he(!0)}),100)};return W("div",null,W(x.Z,{className:V()((i={},(0,n.Z)(i,m()["flex-column"],!0),(0,n.Z)(i,m()["left-drawer"],!0),i)),anchor:"left",open:!0===ue,onClose:function(){ce(!1)},onOpen:function(){}},!1===_e&&"user"===ge&&W("div",{className:m()["details-container"]},W("div",{className:m().header},W(S.Z,{className:m().backButton,onClick:ut},W(M,null)),W(k.Z,null)),W("div",{className:m().details},W("div",{className:V()((o={},(0,n.Z)(o,m().avatarUrl,!0),(0,n.Z)(o,m()["flex-center"],!0),o))},W(R.Z,{src:Re.avatarUrl})),W("div",{className:V()((s={},(0,n.Z)(s,m().userName,!0),(0,n.Z)(s,m()["flex-center"],!0),s))},W("div",null,Re.name)),W("div",{className:V()((c={},(0,n.Z)(c,m().userId,!0),(0,n.Z)(c,m()["flex-center"],!0),c))},W("div",null,"ID: ",Re.id)),W("div",{className:V()((u={"action-buttons":!0},(0,n.Z)(u,m()["flex-center"],!0),(0,n.Z)(u,m()["flex-column"],!0),u))},W(S.Z,{variant:"contained",color:"primary",startIcon:W(Z.Z,null),onClick:function(){ft("user",Re)}},"Chat"),W(S.Z,{variant:"contained",color:"secondary",startIcon:W(j.Z,null),onClick:function(){return pt("user",Re.id)}},"Invite"),je!==Re.id&&W(S.Z,{variant:"contained",className:m()["background-red"],startIcon:W(A.Z,null),onClick:function(e){return function(e,t){e.preventDefault(),Ae(t)}(e,Re.id)}},"Unfriend"),je===Re.id&&W("div",{className:m().deleteConfirm},W(S.Z,{variant:"contained",startIcon:W(A.Z,null),className:m()["background-red"],onClick:function(e){return function(e,t){e.preventDefault(),Ae(""),$(t),ut()}(e,Re.id)}},"Unfriend"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),Ae("")}(e)}},"Cancel"))))),!1===_e&&"party"===ge&&W("div",{className:m()["details-container"]},W("div",{className:m().header},W(S.Z,{className:m().backButton,onClick:ut},W(M,null)),W(k.Z,null)),null==Me&&W("div",null,W("div",{className:m().title},"You are not currently in a party"),W("div",{className:m()["flex-center"]},W(S.Z,{variant:"contained",color:"primary",startIcon:W(N.Z,null),onClick:function(){ae()}},"Create Party"))),null!=Me&&W("div",{className:m()["list-container"]},W("div",{className:m().title},"Current Party"),W("div",{className:V()((d={},(0,n.Z)(d,m()["party-id"],!0),(0,n.Z)(d,m()["flex-center"],!0),d))},W("div",null,"ID: ",Me.id)),W("div",{className:V()((l={"action-buttons":!0},(0,n.Z)(l,m()["flex-center"],!0),(0,n.Z)(l,m()["flex-column"],!0),l))},W(S.Z,{variant:"contained",color:"primary",startIcon:W(Z.Z,null),onClick:function(){return ft("party",Me)}},"Chat"),(!0===(null===nt||void 0===nt?void 0:nt.isOwner)||1===(null===nt||void 0===nt?void 0:nt.isOwner))&&W(S.Z,{variant:"contained",color:"secondary",startIcon:W(j.Z,null),onClick:function(){return pt("party",Me.id)}},"Invite"),!0!==We&&(!0===(null===nt||void 0===nt?void 0:nt.isOwner)||1===(null===nt||void 0===nt?void 0:nt.isOwner))&&W(S.Z,{variant:"contained",className:m()["background-red"],startIcon:W(A.Z,null),onClick:function(e){return function(e){e.preventDefault(),qe(!0)}(e)}},"Delete"),!0===We&&W("div",{className:m().deleteConfirm},W(S.Z,{variant:"contained",startIcon:W(A.Z,null),className:m()["background-red"],onClick:function(e){return function(e,t){e.preventDefault(),qe(!1),ie(t)}(e,Me.id)}},"Delete"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),qe(!1)}(e)}},"Cancel"))),W(k.Z,null),W("div",{className:V()((p={},(0,n.Z)(p,m().title,!0),(0,n.Z)(p,m()["margin-top"],!0),p))},"Members"),W(C.Z,{className:V()((f={},(0,n.Z)(f,m()["flex-center"],!0),(0,n.Z)(f,m()["flex-column"],!0),f)),onScroll:function(e){return lt(e)}},rt&&rt.length>0&&rt.sort((function(e,t){return e.name-t.name})).map((function(e){return W(P.Z,{key:e.id},W(T.Z,null,W(R.Z,{src:e.user.avatarUrl})),Ee.id===e.userId&&(!0===e.isOwner||1===e.isOwner)&&W(E.Z,{primary:e.user.name+" (you, owner)"}),Ee.id===e.userId&&!0!==e.isOwner&&1!==e.isOwner&&W(E.Z,{primary:e.user.name+" (you)"}),Ee.id!==e.userId&&(!0===e.isOwner||1===e.isOwner)&&W(E.Z,{primary:e.user.name+" (owner)"}),Ee.id!==e.userId&&!0!==e.isOwner&&1!==e.isOwner&&W(E.Z,{primary:e.user.name}),Xe!==e.id&&$e!==e.id&&(!0===(null===nt||void 0===nt?void 0:nt.isOwner)||1===(null===nt||void 0===nt?void 0:nt.isOwner))&&Ee.id!==e.userId&&W(S.Z,{variant:"contained",className:m().groupUserMakeOwnerInit,color:"primary",onClick:function(t){return function(e,t){e.preventDefault(),Ye(t)}(t,e.id)}},W(O,null)),Xe!==e.id&&$e===e.id&&W("div",{className:m().userConfirmButtons},W(S.Z,{variant:"contained",color:"primary",onClick:function(t){return function(e,t){e.preventDefault(),Ye(""),se(t)}(t,e.id)}},"Make Owner"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),Ye("")}(e)}},"Cancel")),$e!==e.id&&Xe!==e.id&&(!0===(null===nt||void 0===nt?void 0:nt.isOwner)||1===(null===nt||void 0===nt?void 0:nt.isOwner))&&Ee.id!==e.userId&&W(S.Z,{className:m().groupUserDeleteInit,onClick:function(t){return st(t,e.id)}},W(A.Z,null)),Xe!==e.id&&Ee.id===e.userId&&W(S.Z,{className:m().groupUserDeleteInit,onClick:function(t){return st(t,e.id)}},W(A.Z,null)),$e!==e.id&&Xe===e.id&&W("div",{className:m().userConfirmButtons},Ee.id!==e.userId&&W(S.Z,{variant:"contained",color:"primary",onClick:function(t){return ct(t,e.id)}},"Remove User"),Ee.id===e.userId&&W(S.Z,{variant:"contained",color:"primary",onClick:function(t){return ct(t,e.id)}},"Leave party"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),Qe("")}(e)}},"Cancel")))}))))),!1===_e&&"group"===ge&&W("div",{className:m()["details-container"]},W("div",{className:m().header},W(S.Z,{className:m().backButton,onClick:ut},W(M,null)),W(k.Z,null)),W("div",{className:V()((h={},(0,n.Z)(h,m().details,!0),(0,n.Z)(h,m()["list-container"],!0),h))},W("div",{className:V()((v={},(0,n.Z)(v,m().title,!0),(0,n.Z)(v,m()["flex-center"],!0),v))},W("div",null,Pe.name)),W("div",{className:V()((0,n.Z)({"group-id":!0},m()["flex-center"],!0))},W("div",null,"ID: ",Pe.id)),W("div",{className:V()((g={},(0,n.Z)(g,m().description,!0),(0,n.Z)(g,m()["flex-center"],!0),g))},W("div",null,Pe.description)),W("div",{className:V()((y={"action-buttons":!0},(0,n.Z)(y,m()["flex-center"],!0),(0,n.Z)(y,m()["flex-column"],!0),y))},W(S.Z,{variant:"contained",color:"primary",startIcon:W(Z.Z,null),onClick:function(){ft("group",Pe)}},"Chat"),null!=tt&&"owner"===tt.groupUserRank&&W(S.Z,{variant:"contained",startIcon:W(F.Z,null),onClick:function(){return e="update",t=Pe,xe(!0),we(e),void(null!=t&&ke({id:t.id,name:t.name,groupUsers:t.groupUsers,description:t.description}));var e,t}},"Edit"),null!=tt&&("owner"===tt.groupUserRank||"admin"===tt.groupUserRank)&&W(S.Z,{variant:"contained",color:"secondary",startIcon:W(j.Z,null),onClick:function(){return pt("group",Pe.id)}},"Invite"),Fe!==Pe.id&&null!=tt&&"owner"===tt.groupUserRank&&W(S.Z,{variant:"contained",className:m()["background-red"],startIcon:W(A.Z,null),onClick:function(e){return function(e,t){e.preventDefault(),Be(t)}(e,Pe.id)}},"Delete"),Fe===Pe.id&&W("div",{className:m().deleteConfirm},W(S.Z,{variant:"contained",startIcon:W(A.Z,null),className:m()["background-red"],onClick:function(e){return function(e,t){e.preventDefault(),Be(""),ee(t),Te(G),ye("")}(e,Pe.id)}},"Delete"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),Be("")}(e)}},"Cancel"))),W(k.Z,null),W("div",{className:V()((b={},(0,n.Z)(b,m().title,!0),(0,n.Z)(b,m()["margin-top"],!0),b))},"Members"),W(C.Z,{className:V()((w={},(0,n.Z)(w,m()["flex-center"],!0),(0,n.Z)(w,m()["flex-column"],!0),w))},Pe&&Pe.groupUsers&&Pe.groupUsers.length>0&&Pe.groupUsers.sort((function(e,t){return e.name-t.name})).map((function(e){return W(P.Z,{key:e.id},W(T.Z,null,W(R.Z,{src:e.user.avatarUrl})),Ee.id===e.userId&&W(E.Z,{className:m().marginRight5px,primary:e.user.name+" (you)"}),Ee.id!==e.userId&&W(E.Z,{className:m().marginRight5px,primary:e.user.name}),Ue!==e.id&&null!=tt&&("owner"===tt.groupUserRank||"admin"===tt.groupUserRank)&&Ee.id!==e.userId&&W(S.Z,{className:m().groupUserDeleteInit,onClick:function(t){return it(t,e.id)}},W(A.Z,null)),Ue!==e.id&&Ee.id===e.userId&&W(S.Z,{className:m().groupUserDeleteInit,onClick:function(t){return it(t,e.id)}},W(A.Z,null)),Ue===e.id&&W("div",{className:m().groupUserDeleteConfirm},Ee.id!==e.userId&&W(S.Z,{variant:"contained",color:"primary",onClick:function(t){return ot(t,e.id)}},W(A.Z,null)),Ee.id===e.userId&&W(S.Z,{variant:"contained",color:"primary",onClick:function(t){return ot(t,e.id)}},W(A.Z,null)),W(S.Z,{variant:"contained",color:"secondary",onClick:function(e){return function(e){e.preventDefault(),He("")}(e)}},W(L,null))))}))))),!0===_e&&W("form",{className:m()["group-form"],noValidate:!0,onSubmit:function(e){return function(e){e.preventDefault();var t={id:Se.id,name:Se.name,description:Se.description};"create"===be?(delete t.id,X(t)):J(t),ce(!1),xe(!1),ke(G)}(e)}},"create"===be&&W("div",{className:m().title},"New Group"),"update"===be&&W("div",{className:m().title},"Update Group"),W(D.Z,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Group Name",name:"name",autoComplete:"name",autoFocus:!0,value:Se.name,onChange:function(e){return dt(e)}}),W(D.Z,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"description",label:"Group Description",name:"description",autoComplete:"description",autoFocus:!0,value:Se.description,onChange:function(e){return dt(e)}}),W("div",{className:V()((_={},(0,n.Z)(_,m()["flex-center"],!0),(0,n.Z)(_,m()["flex-column"],!0),_))},W(S.Z,{type:"submit",variant:"contained",color:"primary",className:m().submit},"create"===be&&"Create Group","update"===be&&"Update Group"),W(S.Z,{variant:"contained",color:"secondary",onClick:function(){return ce(!1),xe(!1),void ke(G)}},"Cancel")))))}catch(ht){console.log("LeftDrawer error:"),console.log(ht)}}))},73662:function(e,t,r){"use strict";r.d(t,{Z:function(){return re}});var n=r(15194),a=r(27878),i=r(69744),o=r(14571),s=r(7803),c=r.n(s),u=r(35231),d=r.n(u),l=r(81273),p=r(57054),f=r(23751),h=r(66226),m=r(4859),v=r(78198),g=r(76737),y=r(65325),b=r(39627),w=r(84724),_=r(93982),x=r(2668),S=r(52299),k=r(12455),R=r(57405),C=r(28531),P=r(93433),T=r(59838),E=r(84135),D=r(15853),I=(0,D.Z)(a.createElement("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}),"Mail"),M=(0,D.Z)(a.createElement("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),O=(0,D.Z)(a.createElement("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),L=(0,D.Z)(a.createElement("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle"),Z=(0,D.Z)(a.createElement("path",{d:"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"}),"PhoneIphone"),j=r(56142),A=r(45868),N=r(41453),F=r(7161),B=r(86471),z=r(33859),U=r(18920),H=r(4563),V=(0,r(62151).P1)([function(e){return e.get("invite")}],(function(e){return e})),W=r(60165),q=r(3614),G=r(22063),$=r(3877),Y=r(59395),K=r(68274),X=r(30635),Q=r(90858),J=r.n(Q),ee=a.createElement,te=new Map;te.set(0,"email"),te.set(1,"sms");var re=(0,o.$j)((function(e){return{authState:(0,z._)(e),friendState:(0,H.t)(e),inviteState:V(e),groupState:(0,W.w)(e),partyState:(0,q.F)(e),locationState:(0,G.T)(e)}}),(function(e){return{getFriends:(0,i.DE)(U.$,e),retrieveReceivedInvites:(0,i.DE)(K.OE,e),retrieveSentInvites:(0,i.DE)(K.A8,e),sendInvite:(0,i.DE)(K.yV,e),removeInvite:(0,i.DE)(K.eg,e),acceptInvite:(0,i.DE)(K.Ol,e),declineInvite:(0,i.DE)(K.dq,e),updateInviteTarget:(0,i.DE)(K.xz,e),getInvitableGroups:(0,i.DE)(X.QM,e),getLocations:(0,i.DE)($.JC,e),provisionInstanceServer:(0,i.DE)(Y.zl,e)}}))((function(e){var t,r=e.authState,i=e.friendState,o=e.inviteState,s=e.sendInvite,u=e.retrieveReceivedInvites,D=e.retrieveSentInvites,z=e.getFriends,U=e.removeInvite,H=e.acceptInvite,V=e.declineInvite,W=e.groupState,q=e.updateInviteTarget,G=e.partyState,$=e.getInvitableGroups,Y=e.locationState,K=e.getLocations,X=(e.provisionInstanceServer,e.rightDrawerOpen),Q=e.setRightDrawerOpen,re=r.get("user"),ne=i.get("friends"),ae=ne.get("friends"),ie=o.get("receivedInvites"),oe=ie.get("invites"),se=o.get("sentInvites"),ce=se.get("invites"),ue=o.get("targetObjectType"),de=o.get("targetObjectId"),le=W.get("invitableGroups"),pe=le.get("groups"),fe=G.get("party"),he=fe&&fe.partyUsers?fe.partyUsers.find((function(e){return e.userId===re.id})):{},me=(Y.get("locations").get("locations"),(0,a.useState)(0)),ve=me[0],ge=me[1],ye=(0,a.useState)(0),be=ye[0],we=ye[1],_e=(0,a.useState)(0),xe=_e[0],Se=_e[1],ke=(0,a.useState)(""),Re=ke[0],Ce=ke[1],Pe=(0,a.useState)(""),Te=Pe[0],Ee=Pe[1],De=(0,a.useState)("invite"),Ie=De[0],Me=De[1];(0,a.useEffect)((function(){!0===W.get("invitableUpdateNeeded")&&!0!==W.get("getInvitableGroupsInProgress")&&$(0)}),[W]),(0,a.useEffect)((function(){!0===Y.get("updateNeeded")&&K()}),[Y]);var Oe=function(e,t){q(e,t),Ce("")},Le=function(e){Ce(e.target.value)};(0,a.useEffect)((function(){!0===o.get("sentUpdateNeeded")&&!0!==o.get("getSentInvitesInProgress")&&D(),!0===o.get("receivedUpdateNeeded")&&!0!==o.get("getReceivedInvitesInProgress")&&u(),Se("party"===ue?2:"group"===ue?1:0),null!=ue&&0!==ue.length||q("user",null),null!=ue&&null!=de&&Me("invite")}),[o]);var Ze,je=function(e){return e[0].toUpperCase()+e.slice(1)},Ae=function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&(0===be?ie.get("skip")+ie.get("limit")<ie.get("total")&&u(ie.get("skip")+ie.get("limit")):se.get("skip")+se.get("limit")<se.get("total")&&D(se.get("skip")+se.get("limit")))},Ne=function(){le.get("skip")+le.get("limit")<le.get("total")&&$(le.get("skip")+le.get("limit"))},Fe=function(){ne.get("skip")+ne.get("limit")<ne.get("total")&&z(ne.get("skip")+ne.get("limit"))};return ee("div",{className:c()["invite-container"]},ee(l.Z,{className:J()((t={},(0,n.Z)(t,c()["flex-column"],!0),(0,n.Z)(t,c()["list-container"],!0),t)),BackdropProps:{invisible:!0},anchor:"right",open:!0===X,onClose:function(){Q(!1),q("user",null),ge(0)},onOpen:function(){}},ee(p.Z,{className:c().rightDrawerAccordion,expanded:"invite"===Ie,onChange:(Ze="invite",function(e,t){Me(Ze===Ie?"":Ze)})},ee(f.Z,{id:"invites-header",expandIcon:ee(j.Z,null),"aria-controls":"invites-content"},ee(I,null),ee(h.Z,null,"Invites")),ee(m.Z,{className:c()["list-container"]},ee("div",{className:c().title},"Invites"),ee(v.Z,{value:be,onChange:function(e,t){e.preventDefault(),we(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"Invites"},ee(g.Z,{icon:ee(A.Z,null),label:"Create"}),ee(g.Z,{icon:ee(M,null),label:"Received"}),ee(g.Z,{icon:ee(O,null),label:"Sent"})),(2===be||1===be)&&ee(y.Z,{onScroll:function(e){return Ae(e)}},1===be&&oe.sort((function(e,t){return e.created-t.created})).map((function(e,t){return ee("div",{key:e.id},ee(b.Z,null,ee(w.Z,null,ee(_.Z,{src:e.user.avatarUrl})),"friend"===e.inviteType&&ee(x.Z,null,je(e.inviteType)," request from ",e.user.name),"group"===e.inviteType&&ee(x.Z,null,"Join group ",e.groupName," from ",e.user.name),"party"===e.inviteType&&ee(x.Z,null,"Join a party from ",e.user.name),ee(S.Z,{variant:"contained",color:"primary",onClick:function(){return function(e){H(e.id,e.passcode)}(e)}},"Accept"),ee(S.Z,{variant:"contained",color:"secondary",onClick:function(){return function(e){V(e)}(e)}},"Decline")),t<oe.length-1&&ee(k.Z,null))})),2===be&&ce.sort((function(e,t){return e.created-t.created})).map((function(e,t){return ee("div",{key:e.id},ee(b.Z,null,ee(w.Z,null,ee(_.Z,{src:e.user.avatarUrl})),"friend"===e.inviteType&&ee(x.Z,null,je(e.inviteType)," request to ",e.invitee?e.invitee.name:e.token),"group"===e.inviteType&&ee(x.Z,null,"Join group ",e.groupName," to ",e.invitee?e.invitee.name:e.token),"party"===e.inviteType&&ee(x.Z,null,"Join a party to ",e.invitee?e.invitee.name:e.token),Te!==e.id&&ee(S.Z,{onClick:function(){return t=e.id,void Ee(t);var t}},"Uninvite"),Te===e.id&&ee("div",null,ee(S.Z,{variant:"contained",color:"primary",onClick:function(){return t=e,Ee(""),void U(t);var t}},"Uninvite"),ee(S.Z,{variant:"contained",color:"secondary",onClick:function(){Ee("")}},"Cancel"))),t<ce.length-1&&ee(k.Z,null))}))),0===be&&ee("div",null,ee("div",{className:c().title},"Send Request"),ee("div",{className:c()["sub-header"]},"Request Type"),ee(v.Z,{value:xe,onChange:function(e,t){e.preventDefault(),Se(t),0===t&&3===ve&&ge(0)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary","aria-label":"Invite Type",className:c()["target-type"]},ee(g.Z,{icon:ee(L,{style:{fontSize:30}}),label:"Friends",onClick:function(){return Oe("user",null)}}),ee(g.Z,{icon:ee(N.Z,{style:{fontSize:30}}),label:"Groups",onClick:function(){return Oe("group",null)}}),ee(g.Z,{icon:ee(F.Z,{style:{fontSize:30}}),label:"Party",onClick:function(){(null===fe||void 0===fe?void 0:fe.id)&&Oe("party",fe.id)}})),1===xe&&ee("div",{className:c()["flex-justify-center"]},le.get("total")>0&&ee(R.Z,{className:c()["group-select"]},ee(C.Z,{id:"invite-group-select-label"},"Group"),ee(P.Z,{labelId:"invite-group-select-label",id:"invite-group-select",value:o.get("targetObjectId"),onChange:function(e){q("group",e.target.value)},onScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&Ne()}},pe.map((function(e){return ee(T.Z,{className:c()["flex-center"],key:e.id,value:e.id},e.name)})))),0===le.get("total")&&ee("div",null,"You cannot invite people to any groups")),2===xe&&null==fe&&ee("div",{className:c()["flex-justify-center"]},"You are not currently in a party"),2===xe&&null!=fe&&!0!==(null===he||void 0===he?void 0:he.isOwner)&&1!==(null===he||void 0===he?void 0:he.isOwner)&&ee("div",{className:c()["flex-justify-center"]},"You are not the owner of your current party"),!(1===xe&&0===le.get("total")||1===xe&&null==d().find(le.get("groups"),(function(e){return e.id===o.get("targetObjectId")}))||2===xe&&null==fe||2===xe&&null!=fe&&!0!==(null===he||void 0===he?void 0:he.isOwner)&&1!==(null===he||void 0===he?void 0:he.isOwner))&&ee("div",null,ee(v.Z,{value:ve,onChange:function(e,t){e.preventDefault(),ge(t),Ce("")},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"Invite Address"},ee(g.Z,{icon:ee(I,null),label:"Email"}),ee(g.Z,{icon:ee(Z,null),label:"Phone #"}),ee(g.Z,{icon:ee(B.Z,null),label:"User ID"}),0!==xe&&ee(g.Z,{icon:ee(L,null),label:"Friend"})),ee("div",{className:c().username},3!==ve&&ee(E.Z,{variant:"outlined",margin:"normal",className:c()["invite-text"],fullWidth:!0,id:"token",label:0===ve?"Recipient's email":1===ve?"Recipient's phone number":"Recipient's user ID",name:"name",autoFocus:!0,value:Re,onChange:function(e){return Le(e)}}),3===ve&&ee(R.Z,{className:c()["friend-select"]},ee(C.Z,{id:"invite-friend-select-label"},"Friend"),ee(P.Z,{labelId:"invite-friend-select-label",id:"invite-friend-select",value:Re,onChange:function(e){return Le(e)},onScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&Fe()}},ae.map((function(e){var t;return ee(T.Z,{className:J()((t={},(0,n.Z)(t,c()["flex-center"],!0),(0,n.Z)(t,c()["friend-selector"],!0),t)),key:e.id,value:e.id},e.name)})))),ee(S.Z,{variant:"contained",color:"primary",className:c()["send-button"],onClick:function(e){var t=te.get(ve),r={type:"user"===o.get("targetObjectType")?"friend":o.get("targetObjectType"),token:t?Re:null,identityProviderType:t||null,targetObjectId:o.get("targetObjectId"),invitee:2===ve||3===ve?Re:null};s(r),Ce("")}},"Send"))))))))}))},7855:function(e,t,r){"use strict";r.d(t,{Z:function(){return ze}});var n=r(15194),a=r(48533),i=r.n(a),o=r(58700),s=r(77866),c=r(6699),u=r(57054),d=r(23751),l=r(66226),p=r(4859),f=r(52299),h=r(65325),m=r(39627),v=r(84724),g=r(93982),y=r(2668),b=r(12455),w=r(81273),_=r(34335),x=r(84135),S=r(27878),k=r(15853),R=(0,k.Z)(S.createElement("path",{d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"}),"PeopleOutline"),C=(0,k.Z)(S.createElement("path",{d:"M10 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-4 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Grain"),P=(0,k.Z)(S.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}),"Public"),T=(0,k.Z)(S.createElement("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"}),"Call"),E=(0,k.Z)(S.createElement("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"}),"CallEnd"),D=(0,k.Z)(S.createElement("path",{d:"M7.52 21.48C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08-.16-.06-.29-.13-.4-.24-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72c.13-.29.2-.61.2-.97 0-.19-.02-.38-.07-.56-.05-.18-.12-.35-.23-.51-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31.2-.09.37-.2.52-.33.15-.13.27-.27.37-.42.1-.15.17-.3.22-.46.05-.16.07-.32.07-.48 0-.36-.06-.68-.18-.96-.12-.28-.29-.51-.51-.69-.2-.19-.47-.33-.77-.43C9.1 8.05 8.76 8 8.39 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34c.11-.09.23-.17.38-.22.15-.05.3-.08.48-.08.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49-.05.15-.14.27-.25.37-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09H7.5v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4.07.16.1.35.1.57 0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.43-.18-.92-.27-1.46-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27.45-.18.84-.43 1.16-.76.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57-.18-.47-.43-.87-.75-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.44 4.84 18.29 0 12 0z"}),"ThreeDRotation"),I=r(15869),M=r(56142),O=r(41453),L=r(45868),Z=r(7161),j=r(70157),A=r(26419),N=r(55368),F=r(54031),B=r(363),z=r(55906),U=r(93879),H=r(12494),V=r(18662),W=r(33859),q=r(24892),G=r(58893),$=r(68255),Y=r(62151),K=(0,Y.P1)([function(e){return e.get("channelConnection")}],(function(e){return e})),X=r(78880),Q=r(83052),J=r(61467),ee=r(81652),te=r(92384),re=r(86887),ne=r(62575);function ae(e,t){return console.log("Calling channelServerProvision"),{type:ne.aE,ipAddress:e.ipAddress,port:e.port,channelId:t}}var ie=r(34452),oe=r(41912);function se(e,t){return function(){var r=(0,o.Z)(i().mark((function r(n,a){var o,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n({type:ne.he}),o=a().get("auth").get("authUser").accessToken,null==e){r.next=7;break}return r.next=5,te.L.service("instance").find({query:{id:e}});case 5:0===r.sent.total&&(e=null);case 7:return r.next=9,te.L.service("instance-provision").find({query:{channelId:t,token:o}});case 9:null!=(s=r.sent).ipAddress&&null!=s.port&&n(ae(s,t));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}function ce(e,t){return function(){var r=(0,o.Z)(i().mark((function r(n,a){var o,s,c,u,d,l,p,f,h,m,v,g,y,b,w;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n({type:ne.Ru}),l=a().get("auth"),p=l.get("user"),f=l.get("authUser").accessToken,h=a().get("channelConnection"),m=h.get("instance"),v=h.get("locationId"),g=a().get("locations"),y=g.get("currentLocation").get("location"),b=y.sceneId,w=null!==Q.p&&void 0!==Q.p&&(null!=(null===(o=Q.p.instance)||void 0===o?void 0:o.camVideoProducer)||null!=(null===(s=Q.p.instance)||void 0===s?void 0:s.camAudioProducer)),void 0===J.Z.instance||null===J.Z.instance){r.next=17;break}return r.next=15,(0,ee.rj)({endConsumers:!0});case 15:return r.next=17,(0,ee.Zu)(!1);case 17:return r.next=19,J.Z.instance.transport.initialize(m.get("ipAddress"),m.get("port"),!1,{locationId:v,token:f,sceneId:b,startVideo:w,channelType:"channel",channelId:e,videoEnabled:!0===(null===(c=null===y||void 0===y?void 0:y.locationSettings)||void 0===c?void 0:c.videoEnabled)||!("showroom"===(null===(u=null===y||void 0===y?void 0:y.locationSettings)||void 0===u?void 0:u.locationType)&&null==(null===(d=p.locationAdmins)||void 0===d?void 0:d.find((function(e){return e.locationId===y.id})))),isHarmonyPage:t});case 19:J.Z.instance.isInitialized=!0,ie.NL.instance.dispatchEvent({type:oe.T.EVENTS.CONNECT}),n({type:ne.Qq}),r.next=27;break;case 24:r.prev=24,r.t0=r.catch(0),console.log(r.t0);case 27:case"end":return r.stop()}}),r,null,[[0,24]])})));return function(e,t){return r.apply(this,arguments)}}()}function ue(){return function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=J.Z.instance.transport.channelRequest&&(J.Z.instance.transport.channelRequest=null),t({type:ne.UH});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}te.L.service("instance-provision").on("created",(function(e){null!=e.channelId&&re.Z.dispatch(ae(e,e.channelId))}));var de=r(45822),le=r(86916),pe=r(97196),fe=r(98847),he=r(90858),me=r.n(he),ve=r(22126),ge=r.n(ve),ye=r(14571),be=r(69744),we=r(16189),_e=r.n(we),xe=r(18920),Se=r(30635),ke=r(86649),Re=r(68274),Ce=r(680),Pe=r(3877),Te=r(94849),Ee=function(){var e=Q.p.instance;return e||De("",""),De(e.channelType,e.channelId)},De=function(e,t){return function(r){r(function(e,t){return{type:ne.uw,channelType:e,channelId:t}}(e,t))}},Ie=r(4563),Me=r(60165),Oe=r(22063),Le=r(3614),Ze=(0,Y.P1)([function(e){return e.get("transport")}],(function(e){return e})),je=r(69574),Ae=r(49903),Ne=S.createElement;function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ze=(0,ye.$j)((function(e){return{authState:(0,W._)(e),chatState:(0,G.l)(e),channelConnectionState:K(e),instanceConnectionState:(0,X.z)(e),userState:(0,de.t)(e),friendState:(0,Ie.t)(e),groupState:(0,Me.w)(e),locationState:(0,Oe.T)(e),partyState:(0,Le.F)(e),transportState:Ze(e),mediastream:(0,je.H)(e)}}),(function(e){return{doLoginAuto:(0,be.DE)(q.bW,e),getChannels:(0,be.DE)($.Ky,e),getChannelMessages:(0,be.DE)($.nU,e),createMessage:(0,be.DE)($.tn,e),removeMessage:(0,be.DE)($.Gd,e),updateChatTarget:(0,be.DE)($.xN,e),provisionChannelServer:(0,be.DE)(se,e),connectToChannelServer:(0,be.DE)(ce,e),resetChannelServer:(0,be.DE)(ue,e),patchMessage:(0,be.DE)($._u,e),updateMessageScrollInit:(0,be.DE)($.mU,e),getFriends:(0,be.DE)(xe.$,e),unfriend:(0,be.DE)(xe.o,e),getGroups:(0,be.DE)(Se.jA,e),createGroup:(0,be.DE)(Se.sS,e),patchGroup:(0,be.DE)(Se.ir,e),removeGroup:(0,be.DE)(Se.BN,e),removeGroupUser:(0,be.DE)(Se.lU,e),getParty:(0,be.DE)(ke.Ze,e),createParty:(0,be.DE)(ke.ny,e),removeParty:(0,be.DE)(ke.sQ,e),removePartyUser:(0,be.DE)(ke.Zn,e),transferPartyOwner:(0,be.DE)(ke.Z7,e),updateInviteTarget:(0,be.DE)(Re.xz,e),getLayerUsers:(0,be.DE)(Ce.mz,e),banUserFromLocation:(0,be.DE)(Pe.hZ,e),changeChannelTypeState:(0,be.DE)(De,e)}}))((function(e){var t,r,a,k,W,q,G,$,Y,K,X,te,re,ne,ae,oe=e.authState,se=e.chatState,ce=e.channelConnectionState,ue=(e.instanceConnectionState,e.getChannels),de=e.getChannelMessages,he=e.createMessage,ve=e.removeMessage,ye=(e.setBottomDrawerOpen,e.setLeftDrawerOpen),be=e.setRightDrawerOpen,we=e.updateChatTarget,xe=e.patchMessage,Se=e.updateMessageScrollInit,ke=e.userState,Ce=e.provisionChannelServer,Pe=e.connectToChannelServer,De=e.resetChannelServer,Ie=e.friendState,Me=e.getFriends,Oe=(e.unfriend,e.groupState),Le=e.getGroups,Ze=(e.createGroup,e.patchGroup,e.removeGroup,e.removeGroupUser,e.partyState),je=(e.getParty,e.createParty,e.detailsType,e.setDetailsType),Fe=(e.groupFormOpen,e.setGroupFormOpen),ze=(e.groupFormMode,e.setGroupFormMode),Ue=(e.groupForm,e.setGroupForm),He=(e.selectedUser,e.setSelectedUser),Ve=e.selectedGroup,We=e.setSelectedGroup,qe=e.locationState,Ge=e.transportState,$e=e.changeChannelTypeState,Ye=e.mediastream,Ke=e.setHarmonyOpen,Xe=e.isHarmonyPage,Qe=S.useRef(),Je=Qe.current,et=oe.get("user"),tt=se.get("channels"),rt=tt.get("channels"),nt=se.get("targetObject"),at=se.get("targetObjectType"),it=se.get("targetChannelId"),ot=se.get("messageScrollInit"),st=(0,S.useState)(!1),ct=st[0],ut=st[1],dt=(0,S.useState)({}),lt=dt[0],pt=dt[1],ft=(0,S.useState)(""),ht=ft[0],mt=ft[1],vt=(0,S.useState)(""),gt=vt[0],yt=vt[1],bt=(0,S.useState)(""),wt=bt[0],_t=bt[1],xt=(0,S.useState)(""),St=xt[0],kt=xt[1],Rt=(0,S.useState)(""),Ct=Rt[0],Pt=Rt[1],Tt=rt.get(it),Et=(0,S.useState)(""),Dt=Et[0],It=Et[1],Mt=(0,S.useState)(""),Ot=Mt[0],Lt=Mt[1],Zt=(0,S.useState)({id:"",audio:!1,video:!1}),jt=Zt[0],At=Zt[1],Nt=(0,S.useState)("friends"),Ft=Nt[0],Bt=Nt[1],zt=(0,S.useState)(0),Ut=zt[0],Ht=(zt[1],(0,S.useState)(!1)),Vt=Ht[0],Wt=Ht[1],qt=(0,S.useState)(!1),Gt=qt[0],$t=qt[1],Yt=(0,S.useState)(!1),Kt=Yt[0],Xt=Yt[1],Qt=(0,S.useState)({height:window.innerHeight,width:window.innerWidth}),Jt=Qt[0],er=Qt[1],tr=(0,S.useState)(!1),rr=tr[0],nr=tr[1],ar=(0,S.useState)(""),ir=ar[0],or=ar[1],sr=null!==(re=ke.get("layerUsers"))&&void 0!==re?re:[],cr=null!==(ne=ke.get("channelLayerUsers"))&&void 0!==ne?ne:[],ur="instance"===(null===(ae=rt.get(Ot))||void 0===ae?void 0:ae.channelType)?sr:cr,dr=Ie.get("friends"),lr=dr.get("friends"),pr=Oe.get("groups"),fr=pr.get("groups"),hr=Ze.get("party"),mr=qe.get("currentLocation").get("location"),vr=(Ve.id&&Ve.id.length>0&&Ve.groupUsers.find((function(e){return e.userId===et.id})),hr&&hr.partyUsers&&hr.partyUsers,hr&&hr.partyUsers&&hr.partyUsers.find((function(e){return e.userId===et.id})),function(e){br.current=e,It(e)}),gr=function(e){wr.current=e,Lt(e)},yr=function(e){xr.current=e,or(e)},br=(0,S.useRef)(Dt),wr=(0,S.useRef)(Ot),_r=(0,S.useRef)(jt),xr=(0,S.useRef)(ir),Sr=!0===Xe||!!mr.locationSettings&&mr.locationSettings.videoEnabled,kr=Ye.get("isCamVideoEnabled"),Rr=Ye.get("isCamAudioEnabled");(0,S.useEffect)((function(){return null!=ie.NL.instance&&(nr(!0),Dr()),window.addEventListener("resize",(function(){er({height:window.innerHeight,width:window.innerWidth})})),function(){var e,t,r;null!=ie.NL.instance&&(nr(!1),null===(e=ie.NL.instance)||void 0===e||e.removeEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD,Er),null===(t=ie.NL.instance)||void 0===t||t.removeEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD_TIMEOUT,(function(e){!0===e.instance&&De()})),null===(r=ie.NL.instance)||void 0===r||r.removeEventListener(ie.NL.EVENTS.LEAVE_WORLD,(function(){De(),0===_r.current.id.length&&Lt("")}))),window.removeEventListener("resize",(function(){er({height:window.innerHeight,width:window.innerWidth})}))}}),[]),(0,S.useEffect)((function(){var e;if("instance"===(null===(e=J.Z.instance.transport)||void 0===e?void 0:e.channelType)){var t=(0,s.Z)(rt.entries()).find((function(e){return null!=e[1].instanceId}));null==t||null==Q.p.instance.camAudioProducer&&null==Q.p.instance.camVideoProducer||gr(t[0])}else gr(Ge.get("channelId"))}),[Ge]),(0,S.useEffect)((function(){var e,t;!1===ce.get("connected")&&(null===(e=null===jt||void 0===jt?void 0:jt.id)||void 0===e?void 0:e.length)>0&&(Ce(null,jt.id),!0===(null===jt||void 0===jt?void 0:jt.audio)&&vr("audio"),!0===(null===jt||void 0===jt?void 0:jt.video)&&vr("video"),t={id:"",audio:!1,video:!1},_r.current=t,At(t))}),[ce]),(0,S.useEffect)((function(){!0===ot&&null!=Je&&null!=Je.scrollTop&&(Je.scrollTop=Je.scrollHeight,Se(!1),ut(!1)),!0===ct&&(ut(!1),null!=Je&&null!=Je.scrollTop&&(Je.scrollTop=lt.offsetTop))}),[se]),(0,S.useEffect)((function(){!0===tt.get("updateNeeded")&&ue()}),[tt]),(0,S.useEffect)((function(){rt.forEach((function(e){var t;!0===se.get("updateMessageScroll")&&(se.set("updateMessageScroll",!1),e.id===it&&null!=Je&&Je.scrollHeight-Je.scrollTop-(null===(t=Je.firstElementChild)||void 0===t?void 0:t.offsetHeight)<=Je.clientHeight+20&&(Je.scrollTop=Je.scrollHeight)),!0===e.updateNeeded&&de(e.id)}))}),[rt]),(0,S.useEffect)((function(){Wt(!kr)}),[kr]),(0,S.useEffect)((function(){$t(!Rr)}),[Rr]);var Cr=function(e){var t=e.target.value;kt(t)},Pr=function(){Ct.length>0&&(he({targetObjectId:nt.id,targetObjectType:at,text:Ct}),Pt(""))},Tr=function(e,t){Se(!0),we(e,t),yt(""),_t(""),kt(""),Pt("")},Er=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xr.current===wr.current){e.next=9;break}return yr(wr.current),e.next=4,Wr(wr.current);case 4:return e.next=6,qr(wr.current);case 6:Ee(),(0,Te.q9)(),(0,Te.hs)();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dr=function(){ie.NL.instance.addEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD,Er),ie.NL.instance.addEventListener(ie.NL.EVENTS.CONNECT_TO_WORLD_TIMEOUT,(function(e){!0===e.instance&&De()})),ie.NL.instance.addEventListener(ie.NL.EVENTS.LEAVE_WORLD,(function(){De(),yr(""),0===_r.current.id.length&&Lt(""),Ee(),(0,Te.q9)(),(0,Te.hs)()}))},Ir=function(){Tt.skip+Tt.limit<Tt.total?de(it,Tt.skip+Tt.limit):ut(!1)},Mr=function(e){var t,r=ge()(e.createdAt).format("MMM D YYYY, h:mm a");return e.senderId!==et.id?"".concat((null===(t=null===e||void 0===e?void 0:e.sender)||void 0===t?void 0:t.name)?e.sender.name:"A former user"," on ").concat(r):r},Or=function(e,t){e.preventDefault(),_t(t.id),kt(t.text),yt("")},Lr=function(e,t){e.preventDefault(),yt(t.id),_t("")},Zr=function(e){e.preventDefault(),yt("")},jr=function(e,t){e.preventDefault(),yt(""),ve(t.id,t.channelId)},Ar=function(e){e.preventDefault(),_t(""),kt("")},Nr=function(e,t){e.preventDefault(),xe(t.id,St),_t(""),kt("")},Fr=function(e,t){e.preventDefault(),t.senderId===et.id&&(ht===t.id&&wt!==t.id?mt(""):mt(t.id))},Br=function(){var e=(0,o.Z)(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=Q.p.instance)||void 0===n?void 0:n.mediaStream){e.next=4;break}return console.log("Configuring media transports",t,r),e.next=4,(0,ee.eb)(t,r);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),zr=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a,o,s,c,u,d,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),null!=(null===(r=Q.p.instance)||void 0===r?void 0:r.camAudioProducer)){e.next=15;break}if(null!=rt.get(it).instanceId){e.next=8;break}return e.next=6,(0,ee.sU)("channel",it);case 6:e.next=10;break;case 8:return e.next=10,(0,ee.sU)("instance");case 10:return $t(!1),e.next=13,(0,ee.dy)(null===(n=Q.p.instance)||void 0===n?void 0:n.camAudioProducer);case 13:e.next=24;break;case 15:if(l=null===(a=Q.p.instance)||void 0===a?void 0:a.toggleAudioPaused(),$t(null===(null===(o=Q.p.instance)||void 0===o?void 0:o.mediaStream)||null==(null===(s=Q.p.instance)||void 0===s?void 0:s.camAudioProducer)||!0===(null===(c=Q.p.instance)||void 0===c?void 0:c.audioPaused)),!0!==l){e.next=22;break}return e.next=20,(0,ee.tM)(null===(u=Q.p.instance)||void 0===u?void 0:u.camAudioProducer);case 20:e.next=24;break;case 22:return e.next=24,(0,ee.dy)(null===(d=Q.p.instance)||void 0===d?void 0:d.camAudioProducer);case 24:(0,Te.hs)();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ur=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a,o,s,c,u,d,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),null!=(null===(r=Q.p.instance)||void 0===r?void 0:r.camVideoProducer)){e.next=15;break}if(null!=rt.get(it).instanceId){e.next=8;break}return e.next=6,(0,ee.iS)("channel",it);case 6:e.next=10;break;case 8:return e.next=10,(0,ee.iS)("instance");case 10:return Wt(!1),e.next=13,(0,ee.dy)(null===(n=Q.p.instance)||void 0===n?void 0:n.camVideoProducer);case 13:e.next=24;break;case 15:if(l=null===(a=Q.p.instance)||void 0===a?void 0:a.toggleVideoPaused(),Wt(null===(null===(o=Q.p.instance)||void 0===o?void 0:o.mediaStream)||null==(null===(s=Q.p.instance)||void 0===s?void 0:s.camVideoProducer)||!0===(null===(c=Q.p.instance)||void 0===c?void 0:c.videoPaused)),!0!==l){e.next=22;break}return e.next=20,(0,ee.tM)(null===(u=Q.p.instance)||void 0===u?void 0:u.camVideoProducer);case 20:e.next=24;break;case 22:return e.next=24,(0,ee.dy)(null===(d=Q.p.instance)||void 0===d?void 0:d.camVideoProducer);case 24:(0,Te.q9)();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hr=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),r=rt.get(it),n=null!=r.instanceId?"instance":"channel",$e(n,it),e.next=6,(0,ee.rj)({});case 6:return e.next=8,(0,ee.Zu)(!1);case 8:if(gr(it),null!=r.instanceId){e.next=13;break}Ce(null,it),e.next=21;break;case 13:return e.next=15,Br("instance");case 15:return e.next=17,(0,ee.iS)("instance");case 17:return e.next=19,(0,ee.sU)("instance");case 19:(0,Te.q9)(),(0,Te.hs)();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vr=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),$e("",""),e.next=4,(0,ee.rj)({});case 4:return e.next=6,(0,ee.Zu)(!1);case 6:gr(""),(0,Te.q9)(),(0,Te.hs)();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wr=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a,o,s,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br("channel",t);case 2:if(null!=(null===(r=Q.p.instance)||void 0===r?void 0:r.camAudioProducer)){e.next=7;break}return e.next=5,(0,ee.sU)("channel",t);case 5:e.next=16;break;case 7:if(d=null===(n=Q.p.instance)||void 0===n?void 0:n.toggleAudioPaused(),$t(null===(null===(a=Q.p.instance)||void 0===a?void 0:a.mediaStream)||null==(null===(o=Q.p.instance)||void 0===o?void 0:o.camAudioProducer)||!0===(null===(s=Q.p.instance)||void 0===s?void 0:s.audioPaused)),!0!==d){e.next=14;break}return e.next=12,(0,ee.tM)(null===(c=Q.p.instance)||void 0===c?void 0:c.camAudioProducer);case 12:e.next=16;break;case 14:return e.next=16,(0,ee.dy)(null===(u=Q.p.instance)||void 0===u?void 0:u.camAudioProducer);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qr=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a,o,s,c,u,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br("channel",t);case 2:if(null!=(null===(r=Q.p.instance)||void 0===r?void 0:r.camVideoProducer)){e.next=7;break}return e.next=5,(0,ee.iS)("channel",t);case 5:e.next=16;break;case 7:if(d=null===(n=Q.p.instance)||void 0===n?void 0:n.toggleVideoPaused(),Wt(null===(null===(a=Q.p.instance)||void 0===a?void 0:a.mediaStream)||null==(null===(o=Q.p.instance)||void 0===o?void 0:o.camVideoProducer)||!0===(null===(s=Q.p.instance)||void 0===s?void 0:s.videoPaused)),!0!==d){e.next=14;break}return e.next=12,(0,ee.tM)(null===(c=Q.p.instance)||void 0===c?void 0:c.camVideoProducer);case 12:e.next=16;break;case 14:return e.next=16,(0,ee.dy)(null===(u=Q.p.instance)||void 0===u?void 0:u.camVideoProducer);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gr=function(e){return function(t,r){Bt(e===Ft?"":e)}},$r=function(e,t){(0,Re.xz)(e,t),ye(!1),be(!0)},Yr=function(e,t,r){e.stopPropagation(),ye(!0),je(t),"user"===t?He(r):"group"===t&&We(r)};function Kr(){return(Kr=(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===J.Z.instance.isInitialized){e.next=6;break}return t=Be(Be({},fe.ZS),{},{transport:pe.h}),r=Be(Be({},le.IG),{},{networking:{schema:t},renderer:{}}),e.next=5,(0,le.cJ)(r);case 5:!1===rr&&Dr();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xr=function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&(0===Ut?dr.get("skip")+dr.get("limit")<dr.get("total")&&Me(dr.get("skip")+dr.get("limit")):1===Ut&&pr.get("skip")+pr.get("limit")<pr.get("total")&&Le(pr.get("skip")+pr.get("limit")))},Qr=function(e,t){var r=(0,s.Z)(rt.entries()),n="instance"===e?r.find((function(e){return e[1].instanceId===t})):"group"===e?r.find((function(e){return e[1].groupId===t})):"friend"===e?r.find((function(e){return e[1].userId1===t||e[1].userId2===t})):r.find((function(e){return e[1].partyId===t}));return null!=n&&n[0]===it},Jr=function(e,t){var r=(0,s.Z)(rt.entries()),n="instance"===e?r.find((function(e){return e[1].instanceId===t})):"group"===e?r.find((function(e){return e[1].groupId===t})):"friend"===e?r.find((function(e){return e[1].userId1===t||e[1].userId2===t})):r.find((function(e){return e[1].partyId===t}));return null!=n&&n[0]===Ot};(0,S.useEffect)((function(){!0===ce.get("instanceProvisioned")&&!0===ce.get("updateNeeded")&&!1===ce.get("instanceServerConnecting")&&!1===ce.get("connected")&&function(){return Kr.apply(this,arguments)}().then((function(){Pe(ce.get("channelId"),Xe),(0,Te.q9)(),(0,Te.hs)()}))}),[ce]);var en=Ne("div",{className:me()((t={},(0,n.Z)(t,_e()["list-container"],!0),(0,n.Z)(t,_e()["chat-selectors"],!0),t))},Ne("div",{className:_e().partyInstanceButtons},Ne("div",{className:me()((r={},(0,n.Z)(r,_e().partyButton,!0),(0,n.Z)(r,_e().activeChat,null!=hr&&Qr("party",hr.id)),r)),onClick:function(e){null!=hr?(Tr("party",hr),(!0===(0,Ae.i)()||Jt.width<=768)&&Xt(!1)):Yr(e,"party",hr)}},Ne(R,{className:_e()["icon-margin-right"]}),Ne("span",null,"Party"),Ne("div",{className:me()((0,n.Z)({},_e().activeAVCall,null!=hr&&Jr("party",hr.id)))}),null!=hr&&null!=hr.id&&""!==hr.id&&Ne(c.Z,{className:_e().groupEdit,onClick:function(e){return Yr(e,"party",hr)}},Ne(I.Z,null))),null!=et.instanceId&&Ne("div",{className:me()((a={},(0,n.Z)(a,_e().instanceButton,!0),(0,n.Z)(a,_e().activeChat,Qr("instance",et.instanceId)),a)),onClick:function(){Tr("instance",{id:et.instanceId}),(!0===(0,Ae.i)()||Jt.width<=768)&&Xt(!1)}},Ne(C,{className:_e()["icon-margin-right"]}),Ne("span",null,"Here"),Ne("div",{className:me()((0,n.Z)({},_e().activeAVCall,Jr("instance",et.instanceId)))}))),"guest"!==et.userRole&&Ne(u.Z,{expanded:"user"===Ft,onChange:Gr("user"),className:_e()["MuiAccordion-root"]},Ne(d.Z,{id:"friends-header",expandIcon:Ne(M.Z,null),"aria-controls":"friends-content"},Ne(O.Z,{className:_e()["icon-margin-right"]}),Ne(l.Z,null,"Friends")),Ne(p.Z,{className:_e()["list-container"]},Ne("div",{className:_e()["flex-center"]},Ne(f.Z,{variant:"contained",color:"primary",startIcon:Ne(L.Z,null),onClick:function(){return $r("user")}},"Invite Friend")),Ne(h.Z,{onScroll:function(e){return Xr(e)}},lr&&lr.length>0&&lr.sort((function(e,t){return e.name-t.name})).map((function(e,t){var r;return Ne("div",{key:e.id},Ne(m.Z,{className:me()((r={},(0,n.Z)(r,_e().selectable,!0),(0,n.Z)(r,_e().activeChat,Qr("user",e.id)),r)),onClick:function(){Tr("user",e),(!0===(0,Ae.i)()||Jt.width<=768)&&Xt(!1)}},Ne(v.Z,null,Ne(g.Z,{src:e.avatarUrl})),Ne(y.Z,{primary:e.name}),Ne("div",{className:me()((0,n.Z)({},_e().activeAVCall,Jr("user",e.id)))}),Ne(c.Z,{className:_e().groupEdit,onClick:function(t){return Yr(t,"user",e)}},Ne(I.Z,null))),t<lr.length-1&&Ne(b.Z,null))}))))),"guest"!==et.userRole&&Ne(u.Z,{expanded:"group"===Ft,onChange:Gr("group"),className:_e()["MuiAccordion-root"]},Ne(d.Z,{id:"groups-header",expandIcon:Ne(M.Z,null),"aria-controls":"groups-content"},Ne(Z.Z,{className:_e()["icon-margin-right"]}),Ne(l.Z,null,"Groups")),Ne(p.Z,{className:_e()["list-container"]},Ne("div",{className:_e()["flex-center"]},Ne(f.Z,{variant:"contained",color:"primary",startIcon:Ne(L.Z,null),onClick:function(){return e="create",ye(!0),Fe(!0),ze(e),void(null!=t&&Ue({id:t.id,name:t.name,groupUsers:t.groupUsers,description:t.description}));var e,t}},"Create Group")),Ne(h.Z,{onScroll:function(e){return Xr(e)}},fr&&fr.length>0&&fr.sort((function(e,t){return e.name-t.name})).map((function(e,t){var r;return Ne("div",{key:e.id},Ne(m.Z,{className:me()((r={},(0,n.Z)(r,_e().selectable,!0),(0,n.Z)(r,_e().activeChat,Qr("group",e.id)),r)),onClick:function(){Tr("group",e),(!0===(0,Ae.i)()||Jt.width<=768)&&Xt(!1)}},Ne(y.Z,{primary:e.name}),Ne("div",{className:me()((0,n.Z)({},_e().activeAVCall,Jr("group",e.id)))}),Ne(c.Z,{className:_e().groupEdit,onClick:function(t){return Yr(t,"group",e)}},Ne(I.Z,null))),t<fr.length-1&&Ne(b.Z,null))}))))),et&&et.instanceId&&Ne(u.Z,{expanded:"layerUsers"===Ft,onChange:Gr("layerUsers")},Ne(d.Z,{id:"layer-user-header",expandIcon:Ne(M.Z,null),"aria-controls":"layer-user-content"},Ne(P,{className:_e()["icon-margin-right"]}),Ne(l.Z,null,"Layer Users")),Ne(p.Z,{className:me()((k={},(0,n.Z)(k,_e().flexbox,!0),(0,n.Z)(k,_e()["flex-column"],!0),(0,n.Z)(k,_e()["flex-center"],!0),k))},Ne("div",{className:_e()["list-container"]},Ne("div",{className:_e().title},"Users on this Layer"),Ne(h.Z,{className:me()((W={},(0,n.Z)(W,_e()["flex-center"],!0),(0,n.Z)(W,_e()["flex-column"],!0),W)),onScroll:function(e){return Xr(e)}},sr&&sr.length>0&&sr.sort((function(e,t){return e.name-t.name})).map((function(e){return Ne(m.Z,{key:e.id},Ne(v.Z,null,Ne(g.Z,{src:e.avatarUrl})),et.id===e.id&&Ne(y.Z,{primary:e.name+" (you)"}),et.id!==e.id&&Ne(y.Z,{primary:e.name}))})))))));return Ne("div",{className:_e()["harmony-component"]},Ne("style",null," ","\n                .Mui-selected {\n                    background-color: rgba(0, 0, 0, 0.4) !important;\n                }\n                .MuiOutlinedInput-notchedOutline {\n                    border-color: rgba(127, 127, 127, 0.7);\n                }\n            "),(!0===(0,Ae.i)()||Jt.width<=768)&&Ne(w.Z,{className:me()((q={},(0,n.Z)(q,_e()["flex-column"],!0),(0,n.Z)(q,_e()["list-container"],!0),q)),BackdropProps:{invisible:!0},anchor:"left",open:!0===Kt,onClose:function(){Xt(!1)},onOpen:function(){Bt("friends")}},en),!0!==(0,Ae.i)()&&Jt.width>768&&en,Ne("div",{className:_e()["chat-window"]},Ne("div",{className:_e()["harmony-header"]},(!0===(0,Ae.i)()||Jt.width<=768)&&Ne("div",{className:me()((G={},(0,n.Z)(G,_e()["chat-toggle"],!0),(0,n.Z)(G,_e().iconContainer,!0),G)),onClick:function(){return Xt(!0)}},Ne(O.Z,null)),(null===it||void 0===it?void 0:it.length)>0&&Ne("header",{className:_e().mediaControls},""===Ot&&Ne("div",{className:me()(($={},(0,n.Z)($,_e().iconContainer,!0),(0,n.Z)($,_e().startCall,!0),$)),onClick:function(e){return Hr(e)}},Ne(T,null)),""!==Ot&&Ne("div",{className:_e().activeCallControls},Ne("div",{className:me()((Y={},(0,n.Z)(Y,_e().iconContainer,!0),(0,n.Z)(Y,_e().endCall,!0),Y)),onClick:function(e){return Vr(e)}},Ne(E,null)),Ne("div",{className:_e().iconContainer+" "+(Gt?_e().off:_e().on)},Ne(j.Z,{id:"micOff",className:_e().offIcon,onClick:function(e){return zr(e)}}),Ne(j.Z,{id:"micOn",className:_e().onIcon,onClick:function(e){return zr(e)}})),Sr&&Ne("div",{className:_e().iconContainer+" "+(Vt?_e().off:_e().on)},Ne(A.Z,{id:"videoOff",className:_e().offIcon,onClick:function(e){return Ur(e)}}),Ne(A.Z,{id:"videoOn",className:_e().onIcon,onClick:function(e){return Ur(e)}})))),0===(null===it||void 0===it?void 0:it.length)&&Ne("div",null),Ne("div",{className:_e().controls},Ne("div",{className:me()((K={},(0,n.Z)(K,_e()["invite-toggle"],!0),(0,n.Z)(K,_e().iconContainer,!0),K)),onClick:function(){return $r()}},Ne(N.Z,null)),!0!==Xe&&Ne("div",{className:me()((X={},(0,n.Z)(X,_e()["harmony-toggle"],!0),(0,n.Z)(X,_e().iconContainer,!0),X)),onClick:function(){return function(){var e=document.getElementById("engine-renderer-canvas");null!=(null===e||void 0===e?void 0:e.style)&&(e.style.width="100%"),Ke(!1)}()}},Ne(D,null)))),""!==Ot&&Ne("div",{className:_e()["video-container"]},Ne("div",{className:_e()["active-chat-plate"]},function(){var e=rt.get(Ot);return e&&"instance"!==e.channelType?"group"===e.channelType?e[e.channelType].name:"party"===e.channelType?"Current party":"user"===e.channelType?e.user1.id===et.id?e.user2.name:e.user1.name:void 0:"Current Layer"}()),Ne(_.Z,{className:_e()["party-user-container"],container:!0,direction:"row"},Ne(_.Z,{item:!0,className:me()((te={},(0,n.Z)(te,_e()["grid-item"],!0),(0,n.Z)(te,_e().single,null==ur.length||ur.length<=1),(0,n.Z)(te,_e().two,2===ur.length),(0,n.Z)(te,_e().four,3===ur.length&&4===ur.length),(0,n.Z)(te,_e().six,5===ur.length&&6===ur.length),(0,n.Z)(te,_e().nine,ur.length>=7&&ur.length<=9),(0,n.Z)(te,_e().many,ur.length>9),te))},Ne(V.Z,{harmony:!0,peerId:"me_cam"})),ur.filter((function(e){return e.id!==et.id})).map((function(e){var t;return Ne(_.Z,{item:!0,key:e.id,className:me()((t={},(0,n.Z)(t,_e()["grid-item"],!0),(0,n.Z)(t,_e().single,null==ur.length||ur.length<=1),(0,n.Z)(t,_e().two,2===ur.length),(0,n.Z)(t,_e().four,3===ur.length&&4===ur.length),(0,n.Z)(t,_e().six,5===ur.length&&6===ur.length),(0,n.Z)(t,_e().nine,ur.length>=7&&ur.length<=9),(0,n.Z)(t,_e().many,ur.length>9),t))},Ne(V.Z,{harmony:!0,peerId:e.id,key:e.id}))})))),Ne("div",{className:_e()["list-container"]},null!=it&&""!==it&&Ne("div",{className:_e()["active-chat-plate"]},function(){var e=rt.get(it);return e&&"instance"!==e.channelType?"group"===e.channelType?e[e.channelType].name:"party"===e.channelType?"Current party":"user"===e.channelType?e.user1.id===et.id?e.user2.name:e.user1.name:void 0:"Current Layer"}()),Ne(h.Z,{ref:Qe,onScroll:function(e){return function(e){0===e.target.scrollTop&&e.target.scrollHeight>e.target.clientHeight&&!0!==ot&&Tt.skip+Tt.limit<Tt.total&&(ut(!0),pt(Je.firstElementChild),Ir())}(e)},className:_e()["message-container"]},null!=Tt&&Tt.messages&&Tt.messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})).map((function(e){var t,r;return Ne(m.Z,{className:me()((t={},(0,n.Z)(t,_e().message,!0),(0,n.Z)(t,_e().self,e.senderId===et.id),(0,n.Z)(t,_e().other,e.senderId!==et.id),t)),key:e.id,onMouseEnter:function(t){return Fr(t,e)},onMouseLeave:function(t){return Fr(t,e)},onTouchEnd:function(t){return Fr(t,e)}},Ne("div",null,e.senderId!==et.id&&Ne(v.Z,null,Ne(g.Z,{src:null===(r=e.sender)||void 0===r?void 0:r.avatarUrl})),wt!==e.id&&Ne(y.Z,{primary:e.text,secondary:Mr(e)}),e.senderId===et.id&&wt!==e.id&&Ne("div",{className:"message-crud"},gt!==e.id&&ht===e.id&&Ne("div",{className:_e()["crud-controls"]},gt!==e.id&&Ne(F.Z,{className:_e().edit,onClick:function(t){return Or(t,e)},onTouchEnd:function(t){return Or(t,e)}}),gt!==e.id&&Ne(B.Z,{className:_e().delete,onClick:function(t){return Lr(t,e)},onTouchEnd:function(t){return Lr(t,e)}})),gt===e.id&&Ne("div",{className:_e()["crud-controls"]},gt===e.id&&Ne(B.Z,{className:_e().delete,onClick:function(t){return jr(t,e)},onTouchEnd:function(t){return jr(t,e)}}),gt===e.id&&Ne(z.Z,{className:_e().cancel,onClick:function(e){return Zr(e)},onTouchEnd:function(e){return Zr(e)}}))),wt===e.id&&Ne("div",{className:_e()["message-edit"]},Ne(x.Z,{variant:"outlined",margin:"normal",multiline:!0,fullWidth:!0,id:"editingMessage",placeholder:"Abc",name:"editingMessage",autoFocus:!0,value:St,inputProps:{maxLength:1e3},onChange:Cr}),Ne("div",{className:_e()["editing-controls"]},Ne(z.Z,{className:_e().cancel,onClick:function(e){return Ar(e)},onTouchEnd:function(e){return Ar(e)}}),Ne(U.Z,{className:_e().save,onClick:function(t){return Nr(t,e)},onTouchEnd:function(t){return Nr(t,e)}})))))})),0===it.length&&null!=nt.id&&Ne("div",{className:_e()["first-message-placeholder"]},Ne("div",null,it),"Start a chat with ","user"===at||"group"===at?nt.name:"instance"===at?"your current layer":"your current party")),null!=nt&&null!=nt.id&&Ne("div",{className:_e()["flex-center"]},Ne("div",{className:_e()["chat-box"]},Ne(x.Z,{variant:"outlined",margin:"normal",multiline:!0,fullWidth:!0,id:"newMessage",placeholder:"Abc",name:"newMessage",autoFocus:!0,value:Ct,inputProps:{maxLength:1e3},onKeyPress:function(e){!1===e.shiftKey&&13===e.charCode&&(e.preventDefault(),Pr())},onChange:function(e){var t=e.target.value;Pt(t)}}),Ne(f.Z,{variant:"contained",color:"primary",className:_e()["send-button"],startIcon:Ne(H.Z,null),onClick:Pr},"Send"))),(null==nt||null==nt.id)&&Ne("div",{className:_e()["no-chat"]},Ne("div",null,"Start a chat with a friend or group from the side panel")))))}))},18662:function(e,t,r){"use strict";r.d(t,{Z:function(){return ye}});var n=r(15194),a=r(48533),i=r.n(a),o=r(58700),s=r(27878),c=r(8804),u=r.n(c),d=r(49348),l=r(5401),p=r(87400),f=r(42380),h=r(68625),m=r(26395),v=r(9531),g=r(10101),y=r(6931),b=r(23868),w=r(31451),_=r(81879),x=r(78806),S=r(71187),k=r(93467),R=r(94106),C=r(75949),P=r(79013),T=r(39051),E=r(19858);function D(e){return Math.round(1e5*e)/1e5}var I=!1,M=null;var O=s.forwardRef((function(e,t){var r=e.arrow,n=void 0!==r&&r,a=e.children,i=e.classes,o=e.disableFocusListener,c=void 0!==o&&o,u=e.disableHoverListener,d=void 0!==u&&u,l=e.disableTouchListener,m=void 0!==l&&l,b=e.enterDelay,w=void 0===b?100:b,D=e.enterNextDelay,O=void 0===D?0:D,L=e.enterTouchDelay,Z=void 0===L?700:L,j=e.id,A=e.interactive,N=void 0!==A&&A,F=e.leaveDelay,B=void 0===F?0:F,z=e.leaveTouchDelay,U=void 0===z?1500:z,H=e.onClose,V=e.onOpen,W=e.open,q=e.placement,G=void 0===q?"bottom":q,$=e.PopperComponent,Y=void 0===$?S.Z:$,K=e.PopperProps,X=e.title,Q=e.TransitionComponent,J=void 0===Q?x.Z:Q,ee=e.TransitionProps,te=(0,h.Z)(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),re=(0,E.Z)(),ne=s.useState(),ae=ne[0],ie=ne[1],oe=s.useState(null),se=oe[0],ce=oe[1],ue=s.useRef(!1),de=s.useRef(),le=s.useRef(),pe=s.useRef(),fe=s.useRef(),he=(0,T.Z)({controlled:W,default:!1,name:"Tooltip",state:"open"}),me=(0,f.Z)(he,2),ve=me[0],ge=me[1],ye=ve,be=(0,R.Z)(j);s.useEffect((function(){return function(){clearTimeout(de.current),clearTimeout(le.current),clearTimeout(pe.current),clearTimeout(fe.current)}}),[]);var we=function(e){clearTimeout(M),I=!0,ge(!0),V&&V(e)},_e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var r=a.props;"mouseover"===t.type&&r.onMouseOver&&e&&r.onMouseOver(t),ue.current&&"touchstart"!==t.type||(ae&&ae.removeAttribute("title"),clearTimeout(le.current),clearTimeout(pe.current),w||I&&O?(t.persist(),le.current=setTimeout((function(){we(t)}),I?O:w)):we(t))}},xe=(0,P.Z)(),Se=xe.isFocusVisible,ke=xe.onBlurVisible,Re=xe.ref,Ce=s.useState(!1),Pe=Ce[0],Te=Ce[1],Ee=function(){Pe&&(Te(!1),ke())},De=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){ae||ie(t.currentTarget),Se(t)&&(Te(!0),_e()(t));var r=a.props;r.onFocus&&e&&r.onFocus(t)}},Ie=function(e){clearTimeout(M),M=setTimeout((function(){I=!1}),800+B),ge(!1),H&&H(e),clearTimeout(de.current),de.current=setTimeout((function(){ue.current=!1}),re.transitions.duration.shortest)},Me=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var r=a.props;"blur"===t.type&&(r.onBlur&&e&&r.onBlur(t),Ee()),"mouseleave"===t.type&&r.onMouseLeave&&t.currentTarget===ae&&r.onMouseLeave(t),clearTimeout(le.current),clearTimeout(pe.current),t.persist(),pe.current=setTimeout((function(){Ie(t)}),B)}},Oe=function(e){ue.current=!0;var t=a.props;t.onTouchStart&&t.onTouchStart(e)},Le=(0,k.Z)(ie,t),Ze=(0,k.Z)(Re,Le),je=s.useCallback((function(e){(0,C.Z)(Ze,v.findDOMNode(e))}),[Ze]),Ae=(0,k.Z)(a.ref,je);""===X&&(ye=!1);var Ne=!ye&&!d,Fe=(0,p.Z)({"aria-describedby":ye?be:null,title:Ne&&"string"===typeof X?X:null},te,a.props,{className:(0,g.Z)(te.className,a.props.className),onTouchStart:Oe,ref:Ae}),Be={};m||(Fe.onTouchStart=function(e){Oe(e),clearTimeout(pe.current),clearTimeout(de.current),clearTimeout(fe.current),e.persist(),fe.current=setTimeout((function(){_e()(e)}),Z)},Fe.onTouchEnd=function(e){a.props.onTouchEnd&&a.props.onTouchEnd(e),clearTimeout(fe.current),clearTimeout(pe.current),e.persist(),pe.current=setTimeout((function(){Ie(e)}),U)}),d||(Fe.onMouseOver=_e(),Fe.onMouseLeave=Me(),N&&(Be.onMouseOver=_e(!1),Be.onMouseLeave=Me(!1))),c||(Fe.onFocus=De(),Fe.onBlur=Me(),N&&(Be.onFocus=De(!1),Be.onBlur=Me(!1)));var ze=s.useMemo((function(){return(0,y.Z)({popperOptions:{modifiers:{arrow:{enabled:Boolean(se),element:se}}}},K)}),[se,K]);return s.createElement(s.Fragment,null,s.cloneElement(a,Fe),s.createElement(Y,(0,p.Z)({className:(0,g.Z)(i.popper,N&&i.popperInteractive,n&&i.popperArrow),placement:G,anchorEl:ae,open:!!ae&&ye,id:Fe["aria-describedby"],transition:!0},Be,ze),(function(e){var t=e.placement,r=e.TransitionProps;return s.createElement(J,(0,p.Z)({timeout:re.transitions.duration.shorter},r,ee),s.createElement("div",{className:(0,g.Z)(i.tooltip,i["tooltipPlacement".concat((0,_.Z)(t.split("-")[0]))],ue.current&&i.touch,n&&i.tooltipArrow)},X,n?s.createElement("span",{className:i.arrow,ref:ce}):null))})))})),L=(0,w.Z)((function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}},tooltip:{backgroundColor:(0,b.U1)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(D(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,b.U1)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(D(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:(0,m.Z)({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:(0,m.Z)({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:(0,m.Z)({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:(0,m.Z)({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}}),{name:"MuiTooltip",flip:!1})(O),Z=r(90858),j=r.n(Z),A=r(81652),N=r(15853),F=(0,N.Z)(s.createElement("path",{d:"M12.99 9.18c0-.06.01-.12.01-.18 0-2.21-1.79-4-4-4-.06 0-.12.01-.18.01l4.17 4.17zm-6.1-3.56L4.27 3 3 4.27l2.62 2.62C5.23 7.5 5 8.22 5 9c0 2.21 1.79 4 4 4 .78 0 1.5-.23 2.11-.62L19.73 21 21 19.73l-8.62-8.62-5.49-5.49zM9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"}),"VoiceOverOff"),B=(0,N.Z)(s.createElement(s.Fragment,null,s.createElement("circle",{cx:"9",cy:"9",r:"4"}),s.createElement("path",{d:"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"})),"RecordVoiceOver"),z=(0,N.Z)(s.createElement("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"}),"VolumeOff"),U=(0,N.Z)(s.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"Launch"),H=(0,N.Z)(s.createElement("path",{d:"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"}),"VolumeDown"),V=(0,N.Z)(s.createElement("path",{d:"M7 9v6h4l5 5V4l-5 5H7z"}),"VolumeMute"),W=r(80692),q=r(26419),G=r(31585),$=r(70157),Y=r(10314),K=r(83052),X=r(61467),Q=r(90038),J=r(25700),ee=r(33859),te=r(22063),re=r(69574),ne=r(94849),ae=r(45822),ie=r(14571),oe=r(21250),se=r(67681),ce=r(20193),ue=r(49182),de=r(39337),le=r(13987),pe=r(29569),fe=r(89306),he=s.createElement;function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,fe.Z)(e);if(t){var a=(0,fe.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,pe.Z)(this,r)}}var ve=function(e){(0,le.Z)(r,e);var t=me(r);function r(){var e;return(0,ue.Z)(this,r),(e=t.apply(this,arguments)).MARGIN=20,e.dragStarted=!1,e.prev={x:0,y:0},e.clamp=function(e,t,r){return t<e?e:t>r?r:t},e.handleMouseDown=function(t){if(0===t.button||"touchstart"===t.type){var r=e.getCoordinates(t);e.dragStarted=!0,e.prev=r,t.currentTarget.style.transition=""}},e.handleMouseMove=function(t){if(e.dragStarted){var r=e.getCoordinates(t),n=t.currentTarget,a=n.getBoundingClientRect();n.style.left=e.clamp(e.MARGIN,a.left+r.x-e.prev.x,window.innerWidth-a.width-e.MARGIN)+"px",n.style.top=e.clamp(e.MARGIN,a.top+r.y-e.prev.y,window.innerHeight-a.height-e.MARGIN)+"px",e.prev=r}},e.handleMouseUp=function(t){e.dragStarted=!1,e.prev={x:0,y:0};var r=t.currentTarget,n=r.getBoundingClientRect(),a=n.left-e.MARGIN<=window.innerWidth-n.left-n.width-e.MARGIN?{x:e.MARGIN,y:n.top}:{x:window.innerWidth-n.width-e.MARGIN,y:n.top};r.style.left=a.x+"px",r.style.top=a.y+"px",r.style.transition="all 0.1s linear"},e.getCoordinates=function(e){return e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}},e.getStyle=function(){return e.props.isPiP?{touchAction:"none",position:"fixed",left:130,top:20,transition:"all 0.1s linear",zIndex:1500}:{position:"initial"}},e}return(0,de.Z)(r,[{key:"render",value:function(){var e=this.props.isPiP?{onTouchStart:this.handleMouseDown,onTouchMove:this.handleMouseMove,onTouchEnd:this.handleMouseUp,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseMove}:[];return he("div",(0,ce.Z)({},e,{style:this.getStyle()}),this.props.children)}}]),r}(s.Component),ge=s.createElement,ye=(0,ie.$j)((function(e){return{appState:(0,J.p_)(e),authState:(0,ee._)(e),locationState:(0,te.T)(e),userState:(0,ae.t)(e),mediastream:(0,re.H)(e)}}),(function(e){return{}}))((function(e){var t,r,a,c,p,f,h,m=(0,s.useState)(null),v=m[0],g=m[1],y=(0,s.useState)(null),b=y[0],w=y[1],_=(0,s.useState)(!1),x=_[0],S=_[1],k=(0,s.useState)(!1),R=k[0],C=k[1],P=(0,s.useState)(!1),T=P[0],E=P[1],D=(0,s.useState)(!1),I=D[0],M=D[1],O=(0,s.useState)(!1),Z=O[0],N=O[1],J=(0,s.useState)(!1),ee=J[0],te=J[1],re=(0,s.useState)([]),ae=re[0],ie=re[1],ce=(0,s.useState)([]),ue=ce[0],de=ce[1],le=(0,s.useState)(100),pe=le[0],fe=le[1],he=e.harmony,me=e.peerId,ye=e.appState,be=e.authState,we=e.locationState,_e=e.userState,xe=e.mediastream,Se=s.createRef(),ke=s.createRef(),Re=(0,s.useRef)(v),Ce=(0,s.useRef)(b),Pe=ye.get("userHasInteracted"),Te=be.get("user"),Ee=we.get("currentLocation").get("location"),De="showroom"===(null===(r=null===Ee||void 0===Ee?void 0:Ee.locationSettings)||void 0===r?void 0:r.locationType)&&null!=(null===(a=null===Te||void 0===Te?void 0:Te.locationAdmins)||void 0===a?void 0:a.find((function(e){return Ee.id===e.locationId}))),Ie=_e.get("layerUsers").find((function(e){return e.id===me})),Me=xe.get("isCamVideoEnabled"),Oe=xe.get("isCamAudioEnabled"),Le=xe.get("consumers"),Ze=function(e){Re.current=e,g(e)},je=function(e){Ce.current=e,w(e)},Ae=function(e){var t,r;e===(null===(t=null===Re||void 0===Re?void 0:Re.current)||void 0===t?void 0:t.id)?E(!0):e===(null===(r=null===Ce||void 0===Ce?void 0:Ce.current)||void 0===r?void 0:r.id)&&M(!0)},Ne=function(e){var t,r;e===(null===(t=null===Re||void 0===Re?void 0:Re.current)||void 0===t?void 0:t.id)?E(!1):e===(null===(r=null===Ce||void 0===Ce?void 0:Ce.current)||void 0===r?void 0:r.id)&&M(!1)},Fe=function(e,t){var r,n;e===(null===(r=null===Re||void 0===Re?void 0:Re.current)||void 0===r?void 0:r.id)&&!0===t?(E(!0),N(!0)):e===(null===(n=null===Ce||void 0===Ce?void 0:Ce.current)||void 0===n?void 0:n.id)&&!0===t&&(M(!0),te(!0))},Be=function(e){var t,r;e===(null===(t=null===Re||void 0===Re?void 0:Re.current)||void 0===t?void 0:t.id)?(E(!1),N(!1)):e===(null===(r=null===Ce||void 0===Ce?void 0:Ce.current)||void 0===r?void 0:r.id)&&(M(!1),te(!1))};(0,s.useEffect)((function(){var e,t,r;"me_cam"===me?(Ze(null===(e=K.p.instance)||void 0===e?void 0:e.camVideoProducer),S(null===(t=K.p.instance)||void 0===t?void 0:t.videoPaused)):"me_screen"===me&&Ze(null===(r=K.p.instance)||void 0===r?void 0:r.screenVideoProducer)}),[Me]),(0,s.useEffect)((function(){var e,t,r;"me_cam"===me?(je(null===(e=K.p.instance)||void 0===e?void 0:e.camAudioProducer),C(null===(t=K.p.instance)||void 0===t?void 0:t.audioPaused)):"me_screen"===me&&je(null===(r=K.p.instance)||void 0===r?void 0:r.screenAudioProducer)}),[Oe]),(0,s.useEffect)((function(){var e,t,r,n;"me_cam"!==me&&"me_screen"!==me&&(Ze(null===(t=null===(e=K.p.instance)||void 0===e?void 0:e.consumers)||void 0===t?void 0:t.find((function(e){return e.appData.peerId===me&&"cam-video"===e.appData.mediaTag}))),je(null===(n=null===(r=K.p.instance)||void 0===r?void 0:r.consumers)||void 0===n?void 0:n.find((function(e){return e.appData.peerId===me&&"cam-audio"===e.appData.mediaTag}))))}),[Le]),(0,s.useEffect)((function(){var e,t;!0===Pe&&"me_cam"!==me&&"me_screen"!==me&&(null===(e=Se.current)||void 0===e||e.play(),null===(t=ke.current)||void 0===t||t.play())}),[Pe]),(0,s.useEffect)((function(){var e,t,r,n;!0===he||!0!==(null===(e=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===e?void 0:e.spatialAudioEnabled)&&1!==(null===(t=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===t?void 0:t.spatialAudioEnabled)||null==ke.current?!1!==(null===(r=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===r?void 0:r.spatialAudioEnabled)&&0!==(null===(n=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===n?void 0:n.spatialAudioEnabled)||null==oe.y.instance||(ke.current.volume=pe/100):ke.current.volume=0}),[Te]),(0,s.useEffect)((function(){var e,t,r,n,a,i,o,s,c,u,d,l,p,f,h,m,v,g,y,b,w,_,x,S,k,R;"instance"===(null===(t=null===(e=X.Z.instance)||void 0===e?void 0:e.transport)||void 0===t?void 0:t.channelType)?(null===(a=null===(n=null===(r=X.Z.instance)||void 0===r?void 0:r.transport)||void 0===n?void 0:n.instanceSocket)||void 0===a||a.on(Q.u.WebRTCPauseConsumer.toString(),Ae),null===(s=null===(o=null===(i=X.Z.instance)||void 0===i?void 0:i.transport)||void 0===o?void 0:o.instanceSocket)||void 0===s||s.on(Q.u.WebRTCResumeConsumer.toString(),Ne),null===(d=null===(u=null===(c=X.Z.instance)||void 0===c?void 0:c.transport)||void 0===u?void 0:u.instanceSocket)||void 0===d||d.on(Q.u.WebRTCPauseProducer.toString(),Fe),null===(f=null===(p=null===(l=X.Z.instance)||void 0===l?void 0:l.transport)||void 0===p?void 0:p.instanceSocket)||void 0===f||f.on(Q.u.WebRTCResumeProducer.toString(),Be)):(null===(v=null===(m=null===(h=X.Z.instance)||void 0===h?void 0:h.transport)||void 0===m?void 0:m.channelSocket)||void 0===v||v.on(Q.u.WebRTCPauseConsumer.toString(),Ae),null===(b=null===(y=null===(g=X.Z.instance)||void 0===g?void 0:g.transport)||void 0===y?void 0:y.channelSocket)||void 0===b||b.on(Q.u.WebRTCResumeConsumer.toString(),Ne),null===(x=null===(_=null===(w=X.Z.instance)||void 0===w?void 0:w.transport)||void 0===_?void 0:_.channelSocket)||void 0===x||x.on(Q.u.WebRTCPauseProducer.toString(),Fe),null===(R=null===(k=null===(S=X.Z.instance)||void 0===S?void 0:S.transport)||void 0===k?void 0:k.channelSocket)||void 0===R||R.on(Q.u.WebRTCResumeProducer.toString(),Be))}),[]),(0,s.useEffect)((function(){var e,t,r,n,a;if(null!=ke.current){if(ke.current.id="".concat(me,"_audio"),ke.current.autoplay=!0,ke.current.setAttribute("playsinline","true"),"me_cam"!==me&&"me_screen"!==me||(ke.current.muted=!0),null!=b){var i=b.track.clone(),o=ae.concat(i);ie(o),ke.current.srcObject=new MediaStream([i])}!0===he||!0!==(null===(e=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===e?void 0:e.spatialAudioEnabled)&&1!==(null===(t=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===t?void 0:t.spatialAudioEnabled)||(ke.current.volume=0),(!1===(null===(r=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===r?void 0:r.spatialAudioEnabled)||0===(null===(n=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===n?void 0:n.spatialAudioEnabled)&&null!=oe.y.instance)&&(ke.current.volume=pe/100,null===(a=oe.y.instance)||void 0===a||a.suspend()),fe(pe)}return function(){ae.forEach((function(e){return e.stop()}))}}),[b]),(0,s.useEffect)((function(){if(null!=Se.current&&(Se.current.id="".concat(me,"_video"),Se.current.autoplay=!0,Se.current.muted=!0,Se.current.setAttribute("playsinline","true"),null!=v)){var e=v.track.clone(),t=ue.concat(e);de(t),Se.current.srcObject=new MediaStream([e])}return function(){ue.forEach((function(e){return e.stop()}))}}),[v]),(0,s.useEffect)((function(){var e;if("me_cam"!==me&&"me_screen"!==me||C(null===(e=K.p.instance)||void 0===e?void 0:e.audioPaused),null!=b&&null!=ke.current){var t=b.track.clone(),r=ae.concat(t);ie(r),ke.current.srcObject=new MediaStream([t])}}),[null===(c=K.p.instance)||void 0===c?void 0:c.audioPaused]),(0,s.useEffect)((function(){var e;if("me_cam"!==me&&"me_screen"!==me||S(null===(e=K.p.instance)||void 0===e?void 0:e.videoPaused),null!=v&&null!=Se.current){var t=v.track.clone(),r=ue.concat(t);de(r),Se.current.srcObject=new MediaStream([t])}}),[null===(p=K.p.instance)||void 0===p?void 0:p.videoPaused]);var ze=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),"me_cam"!==me){e.next=13;break}if(!0!==K.p.instance.toggleVideoPaused()){e.next=8;break}return e.next=6,(0,A.tM)(null===(r=K.p.instance)||void 0===r?void 0:r.camVideoProducer);case 6:e.next=10;break;case 8:return e.next=10,(0,A.dy)(null===(n=K.p.instance)||void 0===n?void 0:n.camVideoProducer);case 10:(0,ne.q9)(),e.next=33;break;case 13:if("me_screen"!==me){e.next=25;break}if(!0!==(a=K.p.instance.toggleScreenShareVideoPaused())){e.next=20;break}return e.next=18,(0,A.tM)(K.p.instance.screenVideoProducer);case 18:e.next=22;break;case 20:return e.next=22,(0,A.dy)(K.p.instance.screenVideoProducer);case 22:S(a),e.next=33;break;case 25:if(!1!==v.paused){e.next=30;break}return e.next=28,(0,A.kn)(v);case 28:e.next=32;break;case 30:return e.next=32,(0,A.Vu)(v);case 32:S(v.paused);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,o.Z)(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),"me_cam"!==me){e.next=13;break}if(!0!==K.p.instance.toggleAudioPaused()){e.next=8;break}return e.next=6,(0,A.tM)(null===(r=K.p.instance)||void 0===r?void 0:r.camAudioProducer);case 6:e.next=10;break;case 8:return e.next=10,(0,A.dy)(null===(n=K.p.instance)||void 0===n?void 0:n.camAudioProducer);case 10:(0,ne.hs)(),e.next=33;break;case 13:if("me_screen"!==me){e.next=25;break}if(!0!==(a=K.p.instance.toggleScreenShareAudioPaused())){e.next=20;break}return e.next=18,(0,A.tM)(K.p.instance.screenAudioProducer);case 18:e.next=22;break;case 20:return e.next=22,(0,A.dy)(K.p.instance.screenAudioProducer);case 22:C(a),e.next=33;break;case 25:if(!1!==b.paused){e.next=30;break}return e.next=28,(0,A.kn)(b);case 28:e.next=32;break;case 30:return e.next=32,(0,A.Vu)(b);case 32:C(b.paused);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!1!==ee){e.next=7;break}return e.next=4,(0,A.dC)({id:b.producerId});case 4:te(!0),e.next=11;break;case 7:if(!0!==ee){e.next=11;break}return e.next=10,(0,A.A7)({id:b.producerId});case 10:te(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=(0,s.useState)(!1),We=Ve[0],qe=Ve[1],Ge="me_cam"===me||"me_screen"===me;return ge(ve,{isPiP:We},ge("div",{tabIndex:0,id:me+"_container",className:j()((t={},(0,n.Z)(t,u()["party-chat-user"],!0),(0,n.Z)(t,u().harmony,!0===he),(0,n.Z)(t,u()["self-user"],Ge),(0,n.Z)(t,u()["no-video"],null==v),(0,n.Z)(t,u()["video-paused"],v&&(!0===T||!0===x)),(0,n.Z)(t,u().pip,We),t))},ge("div",{className:u()["video-wrapper"]},(null==v||1==x||1==T||1==Z)&&ge("img",{src:(0,se.K)(Ge?null===Te||void 0===Te?void 0:Te.avatarId:null===Ie||void 0===Ie?void 0:Ie.avatarId)}),ge("video",{key:me+"_cam",ref:Se})),ge("audio",{key:me+"_audio",ref:ke}),ge("div",{className:u()["user-controls"]},ge("div",{className:u().username},"me_cam"===me?"You":null===Ie||void 0===Ie?void 0:Ie.name),ge("div",{className:u().controls},ge("div",{className:u()["mute-controls"]},v&&!1===T?ge(L,{title:!1===T&&!1===x?"Pause Video":"Resume Video"},ge(d.Z,{color:"secondary",size:"small",className:u()["video-control"],onClick:ze},ge(x?W.Z:q.Z,null))):null,De&&"me_cam"!==me&&"me_screen"!==me&&b&&ge(L,{title:!1===ee?"Mute for everyone":"Unmute for everyone"},ge(d.Z,{color:"secondary",size:"small",className:u()["audio-control"],onClick:He},ge(ee?F:B,null))),b&&!1===I?ge(L,{title:Ge&&!1===(null===b||void 0===b?void 0:b.paused)?"Mute me":Ge&&!0===(null===b||void 0===b?void 0:b.paused)?"Unmute me":"me_cam"!==me&&"me_screen"!==me&&!1===(null===b||void 0===b?void 0:b.paused)?"Mute this person":"Unmute this person"},ge(d.Z,{color:"secondary",size:"small",className:u()["audio-control"],onClick:Ue},ge(Ge?R?G.Z:$.Z:R?z:Y.Z,null))):null,!0!==he&&ge(L,{title:"Open Picture in Picture"},ge(d.Z,{color:"secondary",size:"small",className:u()["audio-control"],onClick:function(){return qe(!We)}},ge(U,{className:u().pipBtn})))),!0===ee&&ge("div",{className:u()["global-mute"]},"Muted by Admin"),b&&!1===I&&!1===ee&&(!0===he||!1===(null===(f=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===f?void 0:f.spatialAudioEnabled)||0===(null===(h=null===Te||void 0===Te?void 0:Te.user_setting)||void 0===h?void 0:h.spatialAudioEnabled))&&ge("div",{className:u()["audio-slider"]},pe>0&&ge(H,null),0===pe&&ge(V,null),ge(l.Z,{value:pe,onChange:function(e,t){"me_cam"===me||"me_screen"===me?K.p.instance.audioGainNode.gain.setValueAtTime(t/100,K.p.instance.audioGainNode.context.currentTime+1):ke.current.volume=t/100,fe(t)},"aria-labelledby":"continuous-slider"}),ge(Y.Z,null))))))}))},67681:function(e,t,r){"use strict";r.d(t,{k:function(){return n},K:function(){return a}});var n={Closed:"",Profile:"Profile",Settings:"Settings",Share:"Share",DeleteAccount:"accountDelete",Login:"login",AvatarUpload:"AvatarUpload",Avatar:"Avatar"},a=function(e){return e?"/static/".concat(e.toLocaleLowerCase(),".png"):"/placeholders/default-silhouette.svg"}},58893:function(e,t,r){"use strict";r.d(t,{l:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("chat")}],(function(e){return e}))},68255:function(e,t,r){"use strict";r.d(t,{tn:function(){return g},nU:function(){return y},Ky:function(){return m},wI:function(){return v},_u:function(){return w},Gd:function(){return b},xN:function(){return _},mU:function(){return x}});var n=r(48533),a=r.n(n),i=r(58700),o=r(92384),s=r(62575);function c(e,t){return{type:s.CP,channel:e,channelType:t}}function u(e){return{type:s.G3,channels:e.data,limit:e.limit,skip:e.skip,total:e.total}}function d(e,t){return{type:s.Sp,messages:t.data,limit:t.limit,skip:t.skip,total:t.total,channelId:e}}function l(e,t,r){return{type:s.O3,targetObjectType:e,targetObject:t,targetChannelId:r}}function p(e){return{type:s.uB,value:e}}var f=r(86887),h=r(73673);function m(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.L.service("channel").find({query:{$limit:null!=t?t:i().get("chat").get("channels").get("channels").get("limit"),$skip:null!=e?e:i().get("chat").get("channels").get("channels").get("skip")}});case 3:s=r.sent,n(u(s)),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0),(0,h.UY)(n,r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()}function v(){return function(){var e=(0,i.Z)(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.L.service("channel").find({query:{channelType:"instance"}});case 3:n=e.sent,t(c(n.data[0],"instance")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,h.UY)(t,e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()}function g(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("message").create({targetObjectId:e.targetObjectId,targetObjectType:e.targetObjectType,text:e.text});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,h.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function y(e,t,r){return function(){var n=(0,i.Z)(a().mark((function n(i,s){var c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.L.service("message").find({query:{channelId:e,$sort:{createdAt:-1},$limit:null!=r?r:s().get("chat").get("channels").get("channels").get(e).limit,$skip:null!=t?t:s().get("chat").get("channels").get("channels").get(e).skip}});case 3:c=n.sent,i(d(e,c)),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0),(0,h.UY)(i,n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()}function b(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("message").remove(e);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,h.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function w(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.L.service("message").patch(e,{text:t});case 3:r.next=9;break;case 5:r.prev=5,r.t0=r.catch(0),console.log(r.t0),(0,h.UY)(n,r.t0.message);case 9:case"end":return r.stop()}}),r,null,[[0,5]])})));return function(e){return r.apply(this,arguments)}}()}function _(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.L.service("channel").find({query:{findTargetId:!0,targetObjectType:e,targetObjectId:t.id}});case 2:i=r.sent,n(l(e,t,i.total>0?i.data[0].id:""));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function x(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(p(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}o.L.service("message").on("created",(function(e){var t=f.Z.getState().get("auth").get("user");f.Z.dispatch(function(e,t){return{type:s.FD,message:e,selfUser:t}}(e.message,t))})),o.L.service("message").on("patched",(function(e){var t;f.Z.dispatch((t=e.message,{type:s.YF,message:t}))})),o.L.service("message").on("removed",(function(e){var t;f.Z.dispatch((t=e.message,{type:s.BM,message:t}))})),o.L.service("channel").on("created",(function(e){var t;f.Z.dispatch((t=e.channel,{type:s.Bv,channel:t}))})),o.L.service("channel").on("patched",(function(e){var t;f.Z.dispatch((t=e.channel,{type:s.tg,channel:t}))})),o.L.service("channel").on("removed",(function(e){var t;f.Z.dispatch((t=e.channel,{type:s.YP,channel:t}))}))},4563:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("friends")}],(function(e){return e}))},18920:function(e,t,r){"use strict";r.d(t,{$:function(){return l},o:function(){return p}});var n=r(48533),a=r.n(n),i=r(58700),o=r(92384),s=r(62575);function c(e){return{type:s.XZ,friends:e.data,total:e.total,limit:e.limit,skip:e.skip}}var u=r(73673),d=r(86887);function l(e,t,r){return function(){var n=(0,i.Z)(a().mark((function n(i,d){var l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i({type:s.gd}),n.prev=1,n.next=4,o.L.service("user").find({query:{action:"friends",$limit:null!=r?r:d().get("friends").get("friends").get("limit"),$skip:null!=t?t:d().get("friends").get("friends").get("skip"),search:e}});case 4:l=n.sent,i(c(l)),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0),(0,u.UY)(i,n.t0.message),i(c({data:[],limit:0,skip:0,total:0}));case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}()}function p(e){return function(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("user-relationship").remove(e);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,u.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}(e)}o.L.service("user-relationship").on("created",(function(e){var t;"friend"===e.userRelationship.userRelationshipType&&d.Z.dispatch((t=e.userRelationship,{type:s.Rt,userRelationship:t}))})),o.L.service("user-relationship").on("patched",(function(e){var t=d.Z.getState().get("auth").get("user");"friend"===e.userRelationship.userRelationshipType&&d.Z.dispatch(function(e,t){return{type:s.FT,userRelationship:e,selfUser:t}}(e.userRelationship,t))})),o.L.service("user-relationship").on("removed",(function(e){var t=d.Z.getState().get("auth").get("user");"friend"===e.userRelationship.userRelationshipType&&d.Z.dispatch(function(e,t){return{type:s.eg,userRelationship:e,selfUser:t}}(e.userRelationship,t))}))},60165:function(e,t,r){"use strict";r.d(t,{w:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("groups")}],(function(e){return e}))},30635:function(e,t,r){"use strict";r.d(t,{sS:function(){return f},jA:function(){return p},QM:function(){return g},ir:function(){return h},BN:function(){return m},lU:function(){return v}});var n=r(48533),a=r.n(n),i=r(58700),o=r(92384),s=r(62575);function c(e){return{type:s.nc,group:e}}function u(e){return{type:s.YL,groups:e.data,total:e.total,limit:e.limit,skip:e.skip}}var d=r(73673),l=r(86887);function p(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:s.dj}),r.prev=1,r.next=4,o.L.service("group").find({query:{$limit:null!=t?t:i().get("groups").get("groups").get("limit"),$skip:null!=e?e:i().get("groups").get("groups").get("skip")}});case 4:c=r.sent,n((a=c,{type:s.xI,groups:a.data,total:a.total,limit:a.limit,skip:a.skip})),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0),(0,d.UY)(n,r.t0.message);case 12:case"end":return r.stop()}var a}),r,null,[[1,8]])})));return function(e,t){return r.apply(this,arguments)}}()}function f(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("group").create({name:e.name,description:e.description});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,d.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function h(e){return function(){var t=(0,i.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},null!=e.name&&(n.name=e.name),null!=e.description&&(n.description=e.description),t.prev=3,t.next=6,o.L.service("group").patch(e.id,n);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0),(0,d.UY)(r,t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}()}function m(e){return function(){var t=(0,i.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("channel").find({query:{groupId:e}});case 3:if(!((n=t.sent).total>0)){t.next=7;break}return t.next=7,o.L.service("channel").remove(n.data[0].id);case 7:return t.next=9,o.L.service("group").remove(e);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),(0,d.UY)(r,t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}function v(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("group-user").remove(e);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,d.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function g(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:s.XQ}),r.prev=1,r.next=4,o.L.service("group").find({query:{invitable:!0,$limit:null!=t?t:i().get("groups").get("groups").get("limit"),$skip:null!=e?e:i().get("groups").get("groups").get("skip")}});case 4:c=r.sent,n(u(c)),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0),(0,d.UY)(n,r.t0.message),n(u({data:[],limit:0,skip:0,total:0}));case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e,t){return r.apply(this,arguments)}}()}o.L.service("group-user").on("created",(function(e){var t;l.Z.dispatch((t=e.groupUser,{type:s.o2,groupUser:t}))})),o.L.service("group-user").on("patched",(function(e){var t;l.Z.dispatch((t=e.groupUser,{type:s.BQ,groupUser:t}))})),o.L.service("group-user").on("removed",(function(e){l.Z.dispatch(function(e,t){return{type:s.I_,groupUser:e,self:t}}(e.groupUser,e.self))})),o.L.service("group").on("created",(function(e){l.Z.dispatch(c(e.group))})),o.L.service("group").on("patched",(function(e){var t;l.Z.dispatch((t=e.group,{type:s.YD,group:t}))})),o.L.service("group").on("removed",(function(e){var t;l.Z.dispatch((t=e.group,{type:s.PD,group:t}))})),o.L.service("group").on("refresh",(function(e){l.Z.dispatch(c(e.group))}))},78880:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("instanceConnection")}],(function(e){return e}))},59395:function(e,t,r){"use strict";r.d(t,{AF:function(){return v},zl:function(){return m}});var n=r(48533),a=r.n(n),i=r(58700),o=r(83052),s=r(61467),c=r(81652),u=r(92384),d=r(86887),l=r(62575);function p(e,t,r){return console.log("Calling instanceServerProvision"),{type:l._L,ipAddress:e.ipAddress,port:e.port,locationId:t,sceneId:r}}var f=r(34452),h=r(41912);function m(e,t,r){return function(){var n=(0,i.Z)(a().mark((function n(i,o){var s,c;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i({type:l.QZ}),s=o().get("auth").get("authUser").accessToken,null==t){n.next=7;break}return n.next=5,u.L.service("instance").find({query:{id:t}});case 5:0===n.sent.total&&(t=null);case 7:return n.next=9,u.L.service("instance-provision").find({query:{locationId:e,instanceId:t,sceneId:r,token:s}});case 9:null!=(c=n.sent).ipAddress&&null!=c.port&&i(p(c,e,r));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function v(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var u,d,p,m,v,g,y,b,w,_,x,S,k,R,C;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n({type:l.r7}),g=i().get("auth"),y=g.get("user"),b=g.get("authUser").accessToken,w=i().get("instanceConnection"),_=w.get("instance"),x=w.get("locationId"),S=i().get("locations"),k=S.get("currentLocation").get("location"),R=k.sceneId,C=null!==o.p&&void 0!==o.p&&(null!=(null===(u=o.p.instance)||void 0===u?void 0:u.camVideoProducer)||null!=(null===(d=o.p.instance)||void 0===d?void 0:d.camAudioProducer)),void 0===s.Z.instance||null===s.Z.instance){r.next=17;break}return r.next=15,(0,c.rj)({endConsumers:!0});case 15:return r.next=17,(0,c.Zu)(!0);case 17:return r.next=19,s.Z.instance.transport.initialize(_.get("ipAddress"),_.get("port"),"instance"===e,{locationId:x,token:b,sceneId:R,startVideo:C,channelType:e,channelId:t,videoEnabled:!0===(null===(p=null===k||void 0===k?void 0:k.locationSettings)||void 0===p?void 0:p.videoEnabled)||!("showroom"===(null===(m=null===k||void 0===k?void 0:k.locationSettings)||void 0===m?void 0:m.locationType)&&null==(null===(v=y.locationAdmins)||void 0===v?void 0:v.find((function(e){return e.locationId===k.id}))))});case 19:s.Z.instance.isInitialized=!0,f.NL.instance.dispatchEvent({type:h.T.EVENTS.CONNECT}),n({type:l.dE}),r.next=27;break;case 24:r.prev=24,r.t0=r.catch(0),console.log(r.t0);case 27:case"end":return r.stop()}}),r,null,[[0,24]])})));return function(e,t){return r.apply(this,arguments)}}()}u.L.service("instance-provision").on("created",(function(e){null!=e.locationId&&d.Z.dispatch(p(e,e.locationId,e.sceneId))}))},68274:function(e,t,r){"use strict";r.d(t,{Ol:function(){return _},dq:function(){return x},eg:function(){return w},OE:function(){return y},A8:function(){return b},yV:function(){return g},xz:function(){return S}});var n=r(48533),a=r.n(n),i=r(58700),o=r(92384),s=r(73673),c=r(62575);function u(e){return{type:c.f3,invites:e.data,total:e.total,limit:e.limit,skip:e.skip}}function d(e){return{type:c.lg,invites:e.data,total:e.total,limit:e.limit,skip:e.skip}}function l(){return{type:c.i_}}function p(e,t){return{type:c.xg,targetObjectId:t,targetObjectType:e}}var f=r(86887),h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,m=/^[0-9]{10}$/,v=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function g(e){return function(){var t=(0,i.Z)(a().mark((function t(r,n){var i,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,"email"===e.identityProviderType&&!0!==h.test(e.token)&&((0,s.UY)(r,"Invalid email address"),i=!1),"sms"===e.identityProviderType&&!0!==m.test(e.token)&&((0,s.UY)(r,"Invalid 10-digit US phone number"),i=!1),null!=e.invitee&&!0!==v.test(e.invitee)&&((0,s.UY)(r,"Invalid user ID"),i=!1),null!=e.token&&0!==e.token.length||null!=e.invitee&&0!==e.invitee.length||((0,s.UY)(r,"Not a valid recipient"),i=!1),!0!==i){t.next=18;break}return t.prev=6,t.next=9,o.L.service("invite").create({inviteType:e.type,token:e.token,targetObjectId:e.targetObjectId,identityProviderType:e.identityProviderType,inviteeId:e.invitee});case 9:u=t.sent,(0,s.kc)(r,"Invite Sent"),r((n=u,{type:c.s,id:n})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),console.log(t.t0),(0,s.UY)(r,t.t0.message);case 18:case"end":return t.stop()}var n}),t,null,[[6,14]])})));return function(e,r){return t.apply(this,arguments)}}()}function y(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:c.Ne}),r.prev=1,r.next=4,o.L.service("invite").find({query:{type:"received",$limit:null!=t?t:i().get("invite").get("receivedInvites").get("limit"),$skip:null!=e?e:i().get("invite").get("receivedInvites").get("skip")}});case 4:u=r.sent,n(d(u)),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0),(0,s.UY)(n,r.t0.message);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e,t){return r.apply(this,arguments)}}()}function b(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var d;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:c.Gf}),r.prev=1,r.next=4,o.L.service("invite").find({query:{type:"sent",$limit:null!=t?t:i().get("invite").get("sentInvites").get("limit"),$skip:null!=e?e:i().get("invite").get("sentInvites").get("skip")}});case 4:d=r.sent,n(u(d)),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),console.log(r.t0),(0,s.UY)(n,r.t0.message);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e,t){return r.apply(this,arguments)}}()}function w(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("invite").remove(e.id);case 3:r(l()),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),(0,s.UY)(r,t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function _(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.L.service("a-i").get(e,{query:{passcode:t}});case 3:n({type:c.T4}),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.log(r.t0),(0,s.UY)(n,r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()}function x(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.L.service("invite").remove(e.id);case 3:r({type:c.hV}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),(0,s.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function S(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n(p(e,t));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}o.L.service("invite").on("created",(function(e){var t=e.invite,r=f.Z.getState().get("auth").get("user");t.userId===r.id?f.Z.dispatch({type:c.$6}):f.Z.dispatch({type:c.FX})})),o.L.service("invite").on("removed",(function(e){var t=e.invite,r=f.Z.getState().get("auth").get("user");t.userId===r.id?f.Z.dispatch(l()):f.Z.dispatch({type:c.P7})}))},22063:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("locations")}],(function(e){return e}))},3877:function(e,t,r){"use strict";r.d(t,{JC:function(){return u},ZF:function(){return d},hZ:function(){return l}});var n=r(48533),a=r.n(n),i=r(58700),o=r(73673),s=r(92384),c=r(88298);function u(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n,i){var u;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.L.service("location").find({query:{$limit:null!=t?t:i().get("locations").get("limit"),$skip:null!=e?e:i().get("locations").get("skip"),joinableLocations:!0}});case 3:u=r.sent,n((0,c.zy)(u)),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0),(0,o.UY)(n,r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()}function d(e){return function(){var t=(0,i.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.L.service("location").find({query:{slugifiedName:e,joinableLocations:!0}}).catch((function(e){console.log("Couldn't get location by name",e)}));case 2:(n=t.sent)&&n.total>0?r((0,c.Uu)(n.data[0])):r((0,c.Bd)());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function l(e,t){return function(){var r=(0,i.Z)(a().mark((function r(n){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.L.service("location-ban").create({userId:e,locationId:t});case 3:n((0,c.Bi)()),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.log(r.t0),(0,o.UY)(n,r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()}},69574:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("mediastream")}],(function(e){return e}))},3614:function(e,t,r){"use strict";r.d(t,{F:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("party")}],(function(e){return e}))},86649:function(e,t,r){"use strict";r.d(t,{ny:function(){return v},Ze:function(){return m},sQ:function(){return g},Zn:function(){return y},Z7:function(){return b}});var n=r(48533),a=r.n(n),i=r(58700),o=r(81652),s=r(73673),c=r(92384),u=r(59395),d=r(86887),l=r(62575);function p(e){return{type:l.YJ,party:e}}function f(e){return{type:l.NW,party:e}}function h(e){return{type:l.cQ,partyUser:e}}function m(){return function(){var e=(0,i.Z)(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.L.service("party").get(null);case 3:n=e.sent,t(p(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,s.UY)(t,e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()}function v(e){return function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("CREATING PARTY"),e.prev=1,e.next=4,c.L.service("party").create({});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0),(0,s.UY)(t,e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}function g(e){return function(){var t=(0,i.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("CALLING FEATHERS REMOVE PARTY"),t.prev=1,t.next=4,c.L.service("channel").find({query:{partyId:e}});case 4:if(!((n=t.sent).total>0)){t.next=8;break}return t.next=8,c.L.service("channel").remove(n.data[0].id);case 8:return t.next=10,c.L.service("party").remove(e);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0),(0,s.UY)(r,t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}function y(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.L.service("party-user").remove(e);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,s.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function b(e){return function(){var t=(0,i.Z)(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.L.service("party-user").patch(e,{isOwner:1});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0),(0,s.UY)(r,t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}c.L.service("party-user").on("created",function(){var e=(0,i.Z)(a().mark((function e(t){var r,n,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.Z.getState().get("auth").get("user"),null==d.Z.getState().get("party").get("party")&&d.Z.dispatch(f(t)),d.Z.dispatch((a=t.partyUser,{type:l.DI,partyUser:a})),t.partyUser.userId!==r.id){e.next=19;break}return e.next=6,c.L.service("party").get(t.partyUser.partyId);case 6:return n=e.sent,e.next=9,c.L.service("user").get(r.id);case 9:if(i=e.sent,null==n.instanceId||n.instanceId===i.instanceId||!1!==d.Z.getState().get("instanceConnection").get("instanceProvisioning")){e.next=19;break}return e.next=13,c.L.service("instance").get(n.instanceId);case 13:return o=e.sent,(s=i).partyId=n.id,d.Z.dispatch(h(s)),e.next=19,(0,u.zl)(o.locationId,o.id)(d.Z.dispatch,d.Z.getState);case 19:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()),c.L.service("party-user").on("patched",(function(e){d.Z.dispatch(h(e.partyUser))})),c.L.service("party-user").on("removed",(function(e){var t,r=d.Z.getState().get("auth").get("user");d.Z.dispatch((t=e.partyUser,{type:l.fC,partyUser:t})),e.partyUser.userId===r.id&&(console.log("Attempting to end video call"),(0,o.rj)({leftParty:!0}))})),c.L.service("party").on("created",(function(e){d.Z.dispatch(f(e.party))})),c.L.service("party").on("patched",(function(e){var t;d.Z.dispatch((t=e.party,{type:l.Rq,party:t}))})),c.L.service("party").on("removed",(function(e){var t;d.Z.dispatch((t=e.party,{type:l.QN,party:t}))}))},45822:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var n=(0,r(62151).P1)([function(e){return e.get("user")}],(function(e){return e}))},680:function(e,t,r){"use strict";r.d(t,{mz:function(){return c}});var n=r(48533),a=r.n(n),i=r(58700),o=r(92384),s=r(22667);function c(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var t=(0,i.Z)(a().mark((function t(r){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.L.service("user").find({query:{$limit:1e3,action:!0===e?"layer-users":"channel-users"}});case 2:n=t.sent,r(!0===e?(0,s.S5)(n.data):(0,s.fD)(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},89628:function(e,t,r){"use strict";var n=r(63256),a=r(64060),i=(0,n.Z)({palette:{primary:{main:"#5151FF"},secondary:{main:"#FFD600"},error:{main:a.Z.A400},background:{default:"#000000"},text:{primary:"#FFFFFF",secondary:"#FFD600"}},typography:{fontFamily:["Roboto","Helvetica","Arial","sans-serif"].join(","),fontSize:14,button:{color:"#FFFFFF"}},overrides:{MuiTypography:{h1:{fontSize:24,margin:"15px 0px",display:"flex",alignItems:"center"},h2:{fontSize:16,fontWeight:"bold",margin:"5px 0px",cursor:"pointer",display:"flex",alignItems:"center","&.MuiTypography-colorSecondary":{color:"#FFD600"}},h3:{fontSize:14,margin:"5px 0px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center","&.MuiTypography-colorSecondary":{color:"#FFD600"}},h4:{fontSize:14,margin:"5px 0px",cursor:"pointer",display:"flex",alignItems:"center","&.MuiTypography-colorSecondary":{color:"#8A8A8E"}},alignRight:{textAlign:"right",justifyContent:"flex-end",alignItems:"right"},alignLeft:{textAlign:"left",justifyContent:"flex-start",alignItems:"left"},alignCenter:{textAlign:"center",justifyContent:"center",alignItems:"center"}},MuiDialog:{paperWidthSm:{maxWidth:"40%",width:"40%",margin:"0 auto",fontSize:16,textAlign:"center","@media (max-width: 768px)":{maxWidth:"90%",width:"90%"}}},MuiDialogTitle:{root:{display:"flex",flexDirection:"row-reverse",alignItems:"center"}},MuiDialogContent:{root:{textAlign:"justify",padding:" 0 24px 24px 24px"}},MuiButtonBase:{root:{backgroundColor:"rgba(0, 0, 0, ,0.9)",color:"#000000",fontSize:16,textAlign:"center"}},MuiIconButton:{root:{color:"#000000","&:hover":{backgroundColor:"transparent"}},colorPrimary:{backgroundColor:"#5151FF",color:"#FFFFFF","&:hover":{backgroundColor:"#5151FF"}},colorSecondary:{backgroundColor:"transparent",color:"#FFFFFF","&:hover":{backgroundColor:"#5151FF"}}},MuiSlider:{root:{color:"#484848"},thumb:{height:"24px",width:"24px",marginTop:"-10px",boxSizing:"border-box"},thumbColorPrimary:{background:"rgba(0, 0, 0, 0.8)",border:"2px solid #A8A8FF"}},MuiMenuItem:{root:{padding:"5px",borderRadius:"8px"}},MuiSnackbar:{root:{maxWidth:"80%",minWidth:"40%",width:"auto",left:"30%",right:"30%",userSelect:"none",borderRadius:"8px",fontSize:16,backgroundColor:"rgba(0,0,0,0.9)",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.2)",padding:"20px",boxSizing:"border-box","@media (max-width: 768px)":{maxWidth:"90%",width:"90%",left:"5%",right:"5%"},MuiSvgIcon:{root:{height:"7em",width:"auto",color:"#000000"}}},anchorOriginTopCenter:{top:"10%"},anchorOriginBottomCenter:{bottom:"60px",left:"50%",transform:"translate(-50%, 20px)"},anchorOriginTopLeft:{left:"0px",top:"24px",width:"52%",maxWidth:"80%","@media (max-width: 768px)":{width:"90%"},"@media (min-width: 600px)":{left:"0px"}}},MuiSnackbarContent:{root:{color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.9)",minWidth:"0px","@media (min-width: 600px)":{minWidth:"0px"}}},MuiDrawer:{paper:{padding:"20px",backgroundColor:"rgba(0,0,0,0.85)"},paperAnchorRight:{width:"25%","@media (max-width: 1280px)":{width:"33%"},"@media (max-width: 1024px)":{width:"40%"},"@media (orientation: portrait)":{width:"100vw"}}},MuiCardMedia:{media:{"&:hover":{backgroundColor:"#A8A8FF"}}},MuiList:{root:{background:"rgba(206,206,206,0.1)",color:"#FFFFFF"}},MuiListItem:{root:{padding:"0px",paddingTop:"0px",margin:"2px 0"}},MuiListItemText:{root:{background:"rgba(0, 0, 0, .5)",borderRadius:"5px",padding:"5px 10px",width:"fit-content",flex:"inherit",wordBreak:"break-all"}},MuiCardContent:{root:{"&:last-child":{paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px"}}},MuiPaper:{root:{backgroundColor:"rgba(0,0,0,0.8)"}},MuiInputBase:{input:{color:"#FFFFFF"}},MuiFormLabel:{root:{color:"#FFFFFF"}},MuiButton:{root:{width:"220px",margin:"10px auto",cursor:"pointer",fontSize:16},label:{textTransform:"capitalize"},outlined:{background:"transparent"},outlinedPrimary:{"&:hover":{boxShadow:"0 0 10px #5151FF"}},outlinedSecondary:{"&:hover":{boxShadow:"0 0 10px #FFFFFF"}}},MuiSvgIcon:{colorPrimary:{color:"#A8A8FF"}},MuiFab:{root:{height:"3em",width:"fit-content",padding:"10px",margin:"0px 5px",display:"flex",alignItems:"center",textTransform:"capitalize",text:{color:"#FFFFFF"}},primary:{backgroundColor:"rgba(0,0,0,0.8)",borderRadius:"8px"}},MuiFormGroup:{root:{display:"flex",flexWrap:"wrap",flexDirection:"row"}},MuiBadge:{anchorOriginTopLeftRectangle:{left:"6px"},dot:{height:"12px",width:"12px",borderRadius:"50%"},colorPrimary:{backgroundColor:"#7AFF64"}}}});t.Z=i},42097:function(e){e.exports={paper:"Left_paper__17j_B",selectable:"Left_selectable__22DjA","flex-center":"Left_flex-center__31ZOd","flex-column":"Left_flex-column__10bk0",details:"Left_details__1cYj6","group-form":"Left_group-form__iTV7B",title:"Left_title__LG846",description:"Left_description__3V6U5","margin-top":"Left_margin-top__2fEPX","list-container":"Left_list-container__2Os4H","details-container":"Left_details-container__ZVUz0",deleteConfirm:"Left_deleteConfirm__1cfNt","background-red":"Left_background-red__eteIF",groupUserDeleteInit:"Left_groupUserDeleteInit__wtDSp",groupUserMakeOwnerInit:"Left_groupUserMakeOwnerInit__15VEg",groupUserDeleteConfirm:"Left_groupUserDeleteConfirm__1xWqA",userConfirmButtons:"Left_userConfirmButtons__3QceX",marginRight5px:"Left_marginRight5px__2TAgb",backButton:"Left_backButton__15wfP"}},7803:function(e){e.exports={paper:"Right_paper__1hWKR",selectable:"Right_selectable__2JVlC","background-red":"Right_background-red__36ys6","flex-center":"Right_flex-center__2RoC0","flex-column":"Right_flex-column__1k5C2",details:"Right_details__iNoFT","group-form":"Right_group-form__1g3ov",title:"Right_title__2GLiy",description:"Right_description__g9sXE","margin-top":"Right_margin-top__3Kpd3","list-container":"Right_list-container__1Ljfd","send-button":"Right_send-button__1G7zn","invite-text":"Right_invite-text__3tsP4",rightDrawerAccordion:"Right_rightDrawerAccordion__3O1wJ","group-select":"Right_group-select__m44wo","friend-select":"Right_friend-select__19ccK","flex-justify-center":"Right_flex-justify-center__1-Otf","sub-header":"Right_sub-header__21AUL",username:"Right_username__2mjfg","location-grid":"Right_location-grid__3Rchk","friend-selector":"Right_friend-selector__KzDtj","target-type":"Right_target-type__3jXqp"}},16189:function(e){e.exports={paper:"Harmony_paper__f5gov",selectable:"Harmony_selectable__1fCEL",highlighted:"Harmony_highlighted__3S-57",activeChat:"Harmony_activeChat__3T57S",activeAVCall:"Harmony_activeAVCall__HMMGp","background-red":"Harmony_background-red___dvvA","flex-center":"Harmony_flex-center__2nSPO","flex-column":"Harmony_flex-column__2VKuD",details:"Harmony_details__V7YoE","group-form":"Harmony_group-form__Lr7DR",title:"Harmony_title__26PRd",description:"Harmony_description__1lBBt","margin-top":"Harmony_margin-top__3Y8bI","list-container":"Harmony_list-container__3-YsJ","no-chat":"Harmony_no-chat__2HvE1",groupEdit:"Harmony_groupEdit__Vt00V","harmony-component":"Harmony_harmony-component__1s3J5","chat-container":"Harmony_chat-container__2Oa5b","message-container":"Harmony_message-container__1yPFG","first-message-placeholder":"Harmony_first-message-placeholder__3Nu0w","crud-controls":"Harmony_crud-controls__zLnE8",edit:"Harmony_edit__1YV40",delete:"Harmony_delete__2NgFA",cancel:"Harmony_cancel__cDLZi","message-edit":"Harmony_message-edit__3z7kS","editing-controls":"Harmony_editing-controls__2bEp6",save:"Harmony_save__1pq3j","chat-box":"Harmony_chat-box__2Ss6N","chat-textfield":"Harmony_chat-textfield__3tga_","send-button":"Harmony_send-button__291Ka",message:"Harmony_message__2rJ_8",self:"Harmony_self__2_McH",other:"Harmony_other__wrAyB","chat-window":"Harmony_chat-window__3Kne_","video-container":"Harmony_video-container__RJ2nA",drawerBox:"Harmony_drawerBox__33Cig",iconContainer:"Harmony_iconContainer__33MTz",on:"Harmony_on__3YAWE",offIcon:"Harmony_offIcon__S3qSR",onIcon:"Harmony_onIcon__3pv4W",off:"Harmony_off__32Mi9","grid-item":"Harmony_grid-item__2gU5m","party-user-container":"Harmony_party-user-container__5D5GB",single:"Harmony_single__Vo1D8",two:"Harmony_two__3V05T",four:"Harmony_four__2vZoI",six:"Harmony_six__2irPU",nine:"Harmony_nine__VTmBA",many:"Harmony_many__1AWnQ","active-chat-plate":"Harmony_active-chat-plate__1bguh",partyInstanceButtons:"Harmony_partyInstanceButtons__36-Yr",partyButton:"Harmony_partyButton__1B17W",instanceButton:"Harmony_instanceButton__3S5H9","harmony-header":"Harmony_harmony-header__1P3-O",mediaControls:"Harmony_mediaControls__AHTfX",startCall:"Harmony_startCall__1nj7L",endCall:"Harmony_endCall__3Br49",activeCallControls:"Harmony_activeCallControls__2BsjI","chat-toggle":"Harmony_chat-toggle__2JpAx",controls:"Harmony_controls__2XJ_C","harmony-toggle":"Harmony_harmony-toggle__2qTEB","invite-toggle":"Harmony_invite-toggle__23zQn","chat-selectors":"Harmony_chat-selectors__i7W-u","icon-margin-right":"Harmony_icon-margin-right__3Frxr"}},8804:function(e){e.exports={"party-chat-user":"PartyParticipantWindow_party-chat-user__2GR8x","video-wrapper":"PartyParticipantWindow_video-wrapper__dmhOt",harmony:"PartyParticipantWindow_harmony__2JeCG","user-controls":"PartyParticipantWindow_user-controls__EkTCr","no-video":"PartyParticipantWindow_no-video__YQ6iw","video-paused":"PartyParticipantWindow_video-paused__1KWIb",controls:"PartyParticipantWindow_controls__1zS-O",username:"PartyParticipantWindow_username__1Rhjv","global-mute":"PartyParticipantWindow_global-mute__hL8Cb","self-user":"PartyParticipantWindow_self-user__upwEd","mute-controls":"PartyParticipantWindow_mute-controls__fJPUH","right-controls":"PartyParticipantWindow_right-controls__Ph7hi",spacer:"PartyParticipantWindow_spacer__3lxtp","audio-slider":"PartyParticipantWindow_audio-slider__3Ga65",slider:"PartyParticipantWindow_slider__3IxyK",pip:"PartyParticipantWindow_pip__2Ja6J",pipBtn:"PartyParticipantWindow_pipBtn__-Xrvb"}}}]);