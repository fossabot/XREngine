(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6779],{77531:function(e,t,n){"use strict";var a=n(87400),r=n(68625),o=n(27878),i=n(10101),l=n(31451),s=n(81879),c=n(68236),u=o.forwardRef((function(e,t){var n=e.classes,l=e.className,u=e.color,d=void 0===u?"primary":u,m=e.position,f=void 0===m?"fixed":m,p=(0,r.Z)(e,["classes","className","color","position"]);return o.createElement(c.Z,(0,a.Z)({square:!0,component:"header",elevation:4,className:(0,i.Z)(n.root,n["position".concat((0,s.Z)(f))],n["color".concat((0,s.Z)(d))],l,"fixed"===f&&"mui-fixed"),ref:t},p))}));t.Z=(0,l.Z)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(u)},56966:function(e,t,n){"use strict";var a=n(87400),r=n(68625),o=n(27878),i=n(10101),l=n(68236),s=n(31451),c=o.forwardRef((function(e,t){var n=e.classes,s=e.className,c=e.raised,u=void 0!==c&&c,d=(0,r.Z)(e,["classes","className","raised"]);return o.createElement(l.Z,(0,a.Z)({className:(0,i.Z)(n.root,s),elevation:u?8:1,ref:t},d))}));t.Z=(0,s.Z)({root:{overflow:"hidden"}},{name:"MuiCard"})(c)},74819:function(e,t,n){"use strict";var a=n(87400),r=n(68625),o=n(27878),i=n(10101),l=n(31451),s=o.forwardRef((function(e,t){var n=e.classes,l=e.className,s=e.component,c=void 0===s?"div":s,u=(0,r.Z)(e,["classes","className","component"]);return o.createElement(c,(0,a.Z)({className:(0,i.Z)(n.root,l),ref:t},u))}));t.Z=(0,l.Z)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(s)},3829:function(e,t,n){"use strict";var a=n(87400),r=n(68625),o=n(27878),i=n(10101),l=n(31451),s=o.forwardRef((function(e,t){var n=e.classes,l=e.className,s=e.row,c=void 0!==s&&s,u=(0,r.Z)(e,["classes","className","row"]);return o.createElement("div",(0,a.Z)({className:(0,i.Z)(n.root,l,c&&n.row),ref:t},u))}));t.Z=(0,l.Z)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(s)},39513:function(e,t,n){"use strict";var a=n(19344),r=n(4155);t.Z=void 0;var o=r(n(27878)),i=(0,a(n(64124)).default)(o.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}),"AccountCircle");t.Z=i},36186:function(e,t,n){"use strict";var a=n(19344),r=n(4155);t.Z=void 0;var o=r(n(27878)),i=(0,a(n(64124)).default)(o.createElement("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle");t.Z=i},6779:function(e,t,n){"use strict";n.d(t,{Z:function(){return sn}});var a=n(18426),r=n(50931),o=n(30573),i=n(23568),l=n(27878),s=n(14571),c=n(69744),u=n(58529),d=n(25700),m=n(33859),f=n(22063),p=n(89628),g=n(10807),h=n(90026),v=n(15194),_=n(64414),b=n(19555),y=n.n(b),C=n(81273),Z=n(65325),E=n(39627),w=n(84724),x=n(93982),S=n(2668),N=n(84135),k=n(52299),M=n(68255),z=n(58893),I=n(54031),F=n(363),T=n(55906),D=n(93879),L=n(12494),O=n(22126),R=n.n(O),U=n(90858),B=n.n(U),P=l.createElement,A=(0,s.$j)((function(e){return{authState:(0,m._)(e),chatState:(0,z.l)(e)}}),(function(e){return{getChannels:(0,c.DE)(M.Ky,e),getChannelMessages:(0,c.DE)(M.nU,e),createMessage:(0,c.DE)(M.tn,e),removeMessage:(0,c.DE)(M.Gd,e),updateChatTarget:(0,c.DE)(M.xN,e),patchMessage:(0,c.DE)(M._u,e),updateMessageScrollInit:(0,c.DE)(M.mU,e)}}))((function(e){var t=e.authState,n=e.chatState,a=e.getChannels,r=e.getChannelMessages,o=e.createMessage,i=e.removeMessage,s=e.bottomDrawerOpen,c=e.setBottomDrawerOpen,u=e.setLeftDrawerOpen,d=e.updateChatTarget,m=e.patchMessage,f=e.updateMessageScrollInit,p=l.useRef(),g=p.current,h=t.get("user"),b=n.get("channels"),M=b.get("channels"),z=n.get("targetObject"),O=n.get("targetObjectType"),U=n.get("targetChannelId"),A=n.get("messageScrollInit"),V=(0,l.useState)(!1),H=V[0],W=V[1],j=(0,l.useState)({}),$=j[0],q=j[1],G=(0,l.useState)(""),Y=G[0],K=G[1],Q=(0,l.useState)(""),X=Q[0],J=Q[1],ee=(0,l.useState)(""),te=ee[0],ne=ee[1],ae=(0,l.useState)(""),re=ae[0],oe=ae[1],ie=(0,l.useState)(""),le=ie[0],se=ie[1],ce=M.get(U);(0,l.useEffect)((function(){!0===A&&null!=g&&null!=g.scrollTop&&(g.scrollTop=g.scrollHeight,f(!1),W(!1)),!0===H&&(W(!1),null!=g&&null!=g.scrollTop&&(g.scrollTop=$.offsetTop))}),[n]),(0,l.useEffect)((function(){!0===b.get("updateNeeded")&&a()}),[b]),(0,l.useEffect)((function(){M.forEach((function(e){var t;!0===n.get("updateMessageScroll")&&(n.set("updateMessageScroll",!1),e.id===U&&null!=g&&g.scrollHeight-g.scrollTop-(null===(t=g.firstElementChild)||void 0===t?void 0:t.offsetHeight)<=g.clientHeight+20&&(g.scrollTop=g.scrollHeight)),!0===e.updateNeeded&&r(e.id)}))}),[M]);var ue=function(e){var t=e.target.value;oe(t)},de=function(){b.get("skip")+b.get("limit")<b.get("total")&&a(b.get("skip")+b.get("limit"))},me=function(){ce.skip+ce.limit<ce.total?r(U,ce.skip+ce.limit):W(!1)},fe=function(e){var t,n=R()(e.createdAt).format("MMM D YYYY, h:mm a");return e.senderId!==h.id?"".concat((null===(t=null===e||void 0===e?void 0:e.sender)||void 0===t?void 0:t.name)?e.sender.name:"A former user"," on ").concat(n):n},pe=function(e,t){e.preventDefault(),ne(t.id),oe(t.text),J("")},ge=function(e,t){e.preventDefault(),J(t.id),ne("")},he=function(e){e.preventDefault(),J("")},ve=function(e,t){e.preventDefault(),J(""),i(t.id,t.channelId)},_e=function(e){e.preventDefault(),ne(""),oe("")},be=function(e,t){e.preventDefault(),m(t.id,re),ne(""),oe("")},ye=function(e,t){e.preventDefault(),t.senderId===h.id&&(Y===t.id&&te!==t.id?K(""):K(t.id))};return P("div",null,P(C.Z,{className:y()["flex-column"],anchor:"bottom",open:!0===s,onClose:function(){c(!1)},onOpen:function(){}},P("div",{className:y()["bottom-container"]},P(Z.Z,{onScroll:function(e){return function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&de()}(e)},className:y()["chat-container"]},M&&M.size>0&&Array.from(M).sort((function(e,t){var n=(0,_.Z)(e,2),a=(n[0],n[1]),r=(0,_.Z)(t,2),o=(r[0],r[1]);return new Date(o.updatedAt).getTime()-new Date(a.updatedAt).getTime()})).map((function(e,t){var n,a,r=(0,_.Z)(e,2),o=r[0],i=r[1];return P(E.Z,{key:o,className:y().selectable,onClick:function(){return function(e){var t,n;f(!0);var a=e.channelType,r="user"===a?(null===(t=e.user1)||void 0===t?void 0:t.id)===h.id?e.user2:(null===(n=e.user2)||void 0===n?void 0:n.id)===h.id?e.user1:{}:"group"===a?e.group:"instance"===a?e.instance:e.party;d(a,r,e.id),J(""),ne(""),oe(""),se("")}(i)},selected:o===U,divider:t<M.size-1},"user"===i.channelType&&P(w.Z,null,P(x.Z,{src:i.userId1===h.id?i.user2.avatarUrl:i.user1.avatarUrl})),P(S.Z,{primary:"user"===i.channelType?(null===(n=i.user1)||void 0===n?void 0:n.id)===h.id?i.user2.name:(null===(a=i.user2)||void 0===a?void 0:a.id)===h.id?i.user1.name:"":"group"===i.channelType?i.group.name:"instance"===i.channelType?"Current layer":"Current party"}))})),null==M||0===M.size&&P(E.Z,{key:"no-chats",disabled:!0},P(S.Z,{primary:"No active chats"}))),P("div",{className:y()["list-container"]},P(Z.Z,{ref:p,onScroll:function(e){return function(e){0===e.target.scrollTop&&e.target.scrollHeight>e.target.clientHeight&&!0!==A&&ce.skip+ce.limit<ce.total&&(W(!0),q(g.firstElementChild),me())}(e)},className:y()["message-container"]},null!=ce&&ce.messages&&ce.messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})).map((function(e){var t,n;return P(E.Z,{className:B()((t={},(0,v.Z)(t,y().message,!0),(0,v.Z)(t,y().self,e.senderId===h.id),(0,v.Z)(t,y().other,e.senderId!==h.id),t)),key:e.id,onMouseEnter:function(t){return ye(t,e)},onMouseLeave:function(t){return ye(t,e)},onTouchEnd:function(t){return ye(t,e)}},P("div",null,e.senderId!==h.id&&P(w.Z,null,P(x.Z,{src:null===(n=e.sender)||void 0===n?void 0:n.avatarUrl})),te!==e.id&&P(S.Z,{primary:e.text,secondary:fe(e)}),e.senderId===h.id&&te!==e.id&&P("div",null,X!==e.id&&Y===e.id&&P("div",{className:y()["crud-controls"]},X!==e.id&&P(I.Z,{className:y().edit,onClick:function(t){return pe(t,e)},onTouchEnd:function(t){return pe(t,e)}}),X!==e.id&&P(F.Z,{className:y().delete,onClick:function(t){return ge(t,e)},onTouchEnd:function(t){return ge(t,e)}})),X===e.id&&P("div",{className:y()["crud-controls"]},X===e.id&&P(F.Z,{className:y().delete,onClick:function(t){return ve(t,e)},onTouchEnd:function(t){return ve(t,e)}}),X===e.id&&P(T.Z,{className:y().cancel,onClick:function(e){return he(e)},onTouchEnd:function(e){return he(e)}}))),te===e.id&&P("div",{className:y()["message-edit"]},P(N.Z,{variant:"outlined",margin:"normal",multiline:!0,fullWidth:!0,id:"editingMessage",label:"Message text",name:"editingMessage",autoFocus:!0,value:re,inputProps:{maxLength:1e3},onChange:ue}),P("div",{className:y()["editing-controls"]},P(T.Z,{className:y().cancel,onClick:function(e){return _e(e)},onTouchEnd:function(e){return _e(e)}}),P(D.Z,{className:y().save,onClick:function(t){return be(t,e)},onTouchEnd:function(t){return be(t,e)}})))))})),0===U.length&&null!=z.id&&P("div",{className:y()["first-message-placeholder"]},P("div",null,U),"Start a chat with ","user"===O||"group"===O?z.name:"instance"===O?"your current layer":"your current party")),null!=z&&null!=z.id&&P("div",{className:y()["flex-center"]},P("div",{className:y()["chat-box"]},P(N.Z,{variant:"outlined",margin:"normal",multiline:!0,fullWidth:!0,id:"newMessage",label:"Message text",name:"newMessage",autoFocus:!0,value:le,inputProps:{maxLength:1e3},onChange:function(e){var t=e.target.value;se(t)}}),P(k.Z,{variant:"contained",color:"primary",startIcon:P(L.Z,null),onClick:function(e){le.length>0&&(o({targetObjectId:z.id,targetObjectType:O,text:le}),se(""))}},"Send"))),(null==z||null==z.id)&&P("div",{className:y()["no-chat"]},P("div",null,"Start a chat with a friend or group from the left drawer"),P(k.Z,{variant:"contained",color:"primary",onClick:function(e){c(!1),u(!0)}},"Open Drawer"))))))})),V=n(29755),H=n(73662),W=n(77866),j=n(36379),$=n.n(j),q=n(56966),G=n(74819),Y=n(87400),K=n(68625),Q=n(10101),X=n(31451),J=n(81879),ee=l.forwardRef((function(e,t){var n=e.anchorOrigin,a=void 0===n?{vertical:"top",horizontal:"right"}:n,r=e.badgeContent,o=e.children,i=e.classes,s=e.className,c=e.color,u=void 0===c?"default":c,d=e.component,m=void 0===d?"span":d,f=e.invisible,p=e.max,g=void 0===p?99:p,h=e.overlap,v=void 0===h?"rectangle":h,_=e.showZero,b=void 0!==_&&_,y=e.variant,C=void 0===y?"standard":y,Z=(0,K.Z)(e,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),E=f;null==f&&(0===r&&!b||null==r&&"dot"!==C)&&(E=!0);var w="";return"dot"!==C&&(w=r>g?"".concat(g,"+"):r),l.createElement(m,(0,Y.Z)({className:(0,Q.Z)(i.root,s),ref:t},Z),o,l.createElement("span",{className:(0,Q.Z)(i.badge,i["".concat(a.horizontal).concat((0,J.Z)(a.vertical),"}")],i["anchorOrigin".concat((0,J.Z)(a.vertical)).concat((0,J.Z)(a.horizontal)).concat((0,J.Z)(v))],"default"!==u&&i["color".concat((0,J.Z)(u))],E&&i.invisible,"dot"===C&&i.dot)},w))})),te=(0,X.Z)((function(e){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorError:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(ee),ne=n(6930),ae=l.forwardRef((function(e,t){var n=e.children,a=e.classes,r=e.className,o=e.color,i=void 0===o?"default":o,s=e.component,c=void 0===s?"button":s,u=e.disabled,d=void 0!==u&&u,m=e.disableFocusRipple,f=void 0!==m&&m,p=e.focusVisibleClassName,g=e.size,h=void 0===g?"large":g,v=e.variant,_=void 0===v?"round":v,b=(0,K.Z)(e,["children","classes","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]);return l.createElement(ne.Z,(0,Y.Z)({className:(0,Q.Z)(a.root,r,"round"!==_&&a.extended,"large"!==h&&a["size".concat((0,J.Z)(h))],d&&a.disabled,{primary:a.primary,secondary:a.secondary,inherit:a.colorInherit}[i]),component:c,disabled:d,focusRipple:!f,focusVisibleClassName:(0,Q.Z)(a.focusVisible,p),ref:t},b),l.createElement("span",{className:a.label},n))})),re=(0,X.Z)((function(e){return{root:(0,Y.Z)({},e.typography.button,{boxSizing:"border-box",minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground},textDecoration:"none"},"&$focusVisible":{boxShadow:e.shadows[6]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},primary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},secondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},extended:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48,"&$sizeSmall":{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"&$sizeMedium":{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},focusVisible:{},disabled:{},colorInherit:{color:"inherit"},sizeSmall:{width:40,height:40},sizeMedium:{width:48,height:48}}}),{name:"MuiFab"})(ae),oe=n(78880),ie=n(15853),le=(0,ie.Z)(l.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Message"),se=n(49903),ce=l.createElement,ue=(0,s.$j)((function(e){return{authState:(0,m._)(e),chatState:(0,z.l)(e),instanceConnectionState:(0,oe.z)(e)}}),(function(e){return{getInstanceChannel:(0,c.DE)(M.wI,e),createMessage:(0,c.DE)(M.tn,e),updateChatTarget:(0,c.DE)(M.xN,e),updateMessageScrollInit:(0,c.DE)(M.mU,e)}}))((function(e){var t,n,a,r,o=e.authState,i=e.chatState,s=e.instanceConnectionState,c=e.getInstanceChannel,u=e.createMessage,d=(e.setBottomDrawerOpen,e.updateChatTarget,e.updateMessageScrollInit,l.useRef()),m=o.get("user"),f=i.get("channels"),p=f.get("channels"),g=(0,l.useState)(""),h=g[0],b=g[1],y=(0,l.useState)(!1),C=y[0],Z=y[1],M=(0,W.Z)(p).find((function(e){return"instance"===(0,_.Z)(e,2)[1].channelType}));M&&M.length>0&&(r=M[1]),(0,l.useEffect)((function(){!0===s.get("connected")&&!0!==f.get("fetchingInstanceChannel")&&c()}),[s]);var z=function(){h.length>0&&(u({targetObjectId:m.instanceId,targetObjectType:"instance",text:h}),b(""))},I=l.useState(!1),F=(0,_.Z)(I,2),T=F[0],D=F[1],O=l.useState(!1),R=(0,_.Z)(O,2),U=R[0],P=R[1],A=l.useState(0),V=(0,_.Z)(A,2),H=V[0],j=V[1],Y=function(){D(!T),T&&Z(!1)},K=function(e){var t,n=null===(t=e.sender)||void 0===t?void 0:t.name;return e.senderId===m.id&&(n+=" (you)"),n+=": "};return(0,l.useEffect)((function(){r&&r.messages&&r.messages.length>0&&!T&&Z(!0)}),[null===r||void 0===r?void 0:r.messages]),(0,l.useEffect)((function(){U&&(d.current.selectionStart=H+1)}),[U]),ce(l.Fragment,null,ce("div",{className:$()["instance-chat-container"]+" "+(!T&&$().messageContainerClosed)},ce("div",{className:$()["list-container"]},ce(q.Z,{square:!0,elevation:0,className:$()["message-wrapper"]},ce(G.Z,{className:$()["message-container"]},null!=r&&r.messages&&r.messages.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})).slice(r.messages.length>=3?(null===(n=r.messages)||void 0===n?void 0:n.length)-3:0,null===(a=r.mesages)||void 0===a?void 0:a.length).map((function(e){var t,n;return ce(E.Z,{className:B()((t={},(0,v.Z)(t,$().message,!0),(0,v.Z)(t,$().self,e.senderId===m.id),(0,v.Z)(t,$().other,e.senderId!==m.id),t)),disableGutters:!0,key:e.id},ce("div",null,!(0,se.i)()&&ce(w.Z,null,ce(x.Z,{src:null===(n=e.sender)||void 0===n?void 0:n.avatarUrl})),ce(S.Z,{primary:ce("p",null,ce("span",{className:$().userName,color:"primary"},K(e)),e.text)})))})))),ce(q.Z,{className:$()["flex-center"]},ce(G.Z,{className:$()["chat-box"]},ce("div",{className:$().iconContainer},ce(le,{onClick:function(){return Y()}})),ce(N.Z,{className:$().messageFieldContainer,margin:"normal",multiline:U,fullWidth:!0,id:"newMessage",label:"World Chat...",name:"newMessage",autoFocus:!0,value:h,inputProps:{maxLength:1e3,"aria-label":"naked"},InputLabelProps:{shrink:!1},onChange:function(e){var t=e.target.value;b(t)},inputRef:d,onClick:function(){var e,t;return null===(t=null===(e=d)||void 0===e?void 0:e.current)||void 0===t?void 0:t.focus()},onKeyDown:function(e){if("Enter"===e.key&&e.ctrlKey){e.preventDefault();var t=e.target.selectionStart;j(t),b(h.substring(0,t)+"\n"+h.substring(t)),!U&&P(!0)}else"Enter"!==e.key||e.ctrlKey||(e.preventDefault(),z(),U&&P(!1),j(0))}}),ce(k.Z,{variant:"contained",color:"primary",className:B()((t={},(0,v.Z)(t,$().iconContainerSend,!0),(0,v.Z)(t,"sendMessage",!0),t)),onClick:z},ce(L.Z,null)))))),!T&&ce("div",{className:$().iconCallChat},ce(te,{color:"primary",variant:"dot",invisible:!C,anchorOrigin:{vertical:"top",horizontal:"left"}},ce(re,{className:"openChat",color:"primary",onClick:function(){return Y()}},ce(le,null),"Chat"))))})),de=n(66012),me=n.n(de),fe=n(18662),pe=(0,ie.Z)(l.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),ge=n(83052),he=function(){var e,t,n=(0,l.useState)(!0),a=n[0],r=n[1];(0,l.useEffect)((function(){function e(){window.innerWidth<768&&r(!0)}return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}}));return l.createElement(l.Fragment,null,l.createElement("div",{className:me().expandMenu},"You",l.createElement("button",{type:"button",className:a?me().expanded:"",onClick:function(){return r(!a)}},l.createElement(pe,null))),a?l.createElement(l.Fragment,null,l.createElement(fe.Z,{containerProportions:{height:135,width:240},peerId:"me_cam"}),((null===(e=ge.p.instance)||void 0===e?void 0:e.screenVideoProducer)||(null===(t=ge.p.instance)||void 0===t?void 0:t.screenAudioProducer))&&l.createElement(fe.Z,{containerProportions:{height:135,width:240},peerId:"me_screen"})):null)},ve=n(24892),_e=n(51813),be=n(17056),ye=n(20193),Ce=n(91394),Ze=n(78806),Ee=n(68236),we=n(71187),xe=n(59838),Se=n(84152),Ne=n(3841),ke=n(64432),Me=n(27674),ze=n(78198),Ie=n(76737),Fe=n(86471),Te=n(15869),De=n(34561),Le=n.n(De),Oe=n(48533),Re=n.n(Oe),Ue=n(58700),Be=n(39513),Pe=l.createElement,Ae=(0,s.$j)(null,(function(e){return{uploadAvatar:(0,c.DE)(ve.gg,e),updateUsername:(0,c.DE)(ve._S,e)}}))((function(e){var t,n,a=e.auth.get("user"),r=(0,l.useState)({}),o=r[0],i=r[1],s=(0,l.useState)(""),c=s[0],u=s[1],d=(0,l.useState)(a.name),m=d[0],f=d[1],p=function(){var t=(0,Ue.Z)(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uploadAvatar(o);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=(0,Ue.Z)(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateUsername(a.id,m);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Pe("div",{className:Le()["user-container"]},Pe("div",{className:Le().username},Pe(N.Z,{variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Your Name",name:"name",autoFocus:!0,defaultValue:a.name,onChange:function(e){return function(e){var t=e.target.value;f(t)}(e)}}),Pe(k.Z,{variant:"contained",color:"primary",onClick:g},"Update")),Pe("div",{className:Le()["user-id"]},Pe("div",null,"User ID: ",a.id)),Pe("div",{className:Le().uploadform},c?Pe("img",{src:URL.createObjectURL(c),className:B()((t={},(0,v.Z)(t,Le().rounded,!0),(0,v.Z)(t,Le()["mx-auto"],!0),(0,v.Z)(t,Le()["d-block"],!0),(0,v.Z)(t,Le()["max-size-200"],!0),t))}):e.avatarUrl?Pe("img",{src:e.avatarUrl,className:B()((n={},(0,v.Z)(n,Le().rounded,!0),(0,v.Z)(n,Le()["mx-auto"],!0),(0,v.Z)(n,Le()["d-block"],!0),(0,v.Z)(n,Le()["max-size-200"],!0),n))}):Pe(Be.Z,{style:{fontSize:150}}),Pe("input",{id:"fileInput",accept:"image/*",name:"file",placeholder:"Upload Product Image",type:"file",className:Le().signup__fileField,onChange:function(e){var t=e.target.files[0],n=new FormData;null!=t?(n.append("file",t,t.type),n.append("name",t.name),n.append("type","user-thumbnail"),i(n),u(t)):(i({}),u(""))}}),Pe("label",{htmlFor:"fileInput"},Pe(k.Z,{variant:"contained",component:"span",color:"secondary"},"Select Avatar")),Pe(k.Z,{disabled:0===c.length,variant:"contained",color:"primary",onClick:p},"Submit")))})),Ve=n(10314),He=n(70157),We=(0,ie.Z)(l.createElement("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}),"Image"),je=n(66226),$e=n(5401),qe=n(42380),Ge=n(3829),Ye=n(93467),Ke=n(39051);var Qe=l.createContext(),Xe=n(94106),Je=l.forwardRef((function(e,t){var n=e.actions,a=e.children,r=e.name,o=e.value,i=e.onChange,s=(0,K.Z)(e,["actions","children","name","value","onChange"]),c=l.useRef(null),u=(0,Ke.Z)({controlled:o,default:e.defaultValue,name:"RadioGroup"}),d=(0,qe.Z)(u,2),m=d[0],f=d[1];l.useImperativeHandle(n,(function(){return{focus:function(){var e=c.current.querySelector("input:not(:disabled):checked");e||(e=c.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var p=(0,Ye.Z)(t,c),g=(0,Xe.Z)(r);return l.createElement(Qe.Provider,{value:{name:g,onChange:function(e){f(e.target.value),i&&i(e,e.target.value)},value:m}},l.createElement(Ge.Z,(0,Y.Z)({role:"radiogroup",ref:p},s),a))})),et=n(17144),tt=n(70607),nt=(0,ie.Z)(l.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),at=(0,ie.Z)(l.createElement("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");var rt=(0,X.Z)((function(e){return{root:{position:"relative",display:"flex","&$checked $layer":{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}},layer:{left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},checked:{}}}),{name:"PrivateRadioButtonIcon"})((function(e){var t=e.checked,n=e.classes,a=e.fontSize;return l.createElement("div",{className:(0,Q.Z)(n.root,t&&n.checked)},l.createElement(nt,{fontSize:a}),l.createElement(at,{fontSize:a,className:n.layer}))})),ot=n(23868),it=n(97724);var lt=l.createElement(rt,{checked:!0}),st=l.createElement(rt,null),ct=l.forwardRef((function(e,t){var n=e.checked,a=e.classes,r=e.color,o=void 0===r?"secondary":r,i=e.name,s=e.onChange,c=e.size,u=void 0===c?"medium":c,d=(0,K.Z)(e,["checked","classes","color","name","onChange","size"]),m=l.useContext(Qe),f=n,p=(0,it.Z)(s,m&&m.onChange),g=i;return m&&("undefined"===typeof f&&(f=m.value===e.value),"undefined"===typeof g&&(g=m.name)),l.createElement(tt.Z,(0,Y.Z)({color:o,type:"radio",icon:l.cloneElement(st,{fontSize:"small"===u?"small":"default"}),checkedIcon:l.cloneElement(lt,{fontSize:"small"===u?"small":"default"}),classes:{root:(0,Q.Z)(a.root,a["color".concat((0,J.Z)(o))]),checked:a.checked,disabled:a.disabled},name:g,checked:f,onChange:p,ref:t},d))})),ut=(0,X.Z)((function(e){return{root:{color:e.palette.text.secondary},checked:{},disabled:{},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,ot.U1)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,ot.U1)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:e.palette.action.disabled}}}}),{name:"MuiRadio"})(ct),dt=n(21595),mt=n(21250),ft=l.createElement,pt=(0,s.$j)((function(e){return{authState:(0,m._)(e)}}),(function(e){return{updateUserSettings:(0,c.DE)(ve.d2,e)}}))((function(e){var t,n,a,r=e.authState,o=e.updateUserSettings,i=r.get("user"),s=(0,l.useState)(null!=(null===(t=null===i||void 0===i?void 0:i.user_setting)||void 0===t?void 0:t.volume)?i.user_setting.volume:30),c=s[0],u=s[1],d=(0,l.useState)(null!=(null===(n=null===i||void 0===i?void 0:i.user_setting)||void 0===n?void 0:n.microphone)?i.user_setting.microphone:30),m=d[0],f=d[1],p=(0,l.useState)("high"),g=p[0],h=p[1],v=(0,l.useState)(null==(null===(a=null===i||void 0===i?void 0:i.user_setting)||void 0===a?void 0:a.spatialAudioEnabled)||i.user_setting.spatialAudioEnabled),_=v[0],b=v[1];return ft("div",{className:Le().root},ft("section",{className:Le().settingRow},ft(je.Z,{variant:"h2",className:Le().settingLabel},ft(Ve.Z,{color:"primary"})," Volume"),ft("span",{className:Le().settingValue},ft($e.Z,{value:c,onChange:function(e,t){u(t)},"aria-labelledby":"continuous-slider"}))),ft("section",{className:Le().settingRow},ft(je.Z,{variant:"h2",className:Le().settingLabel},ft(He.Z,{color:"primary"})," Microphone"),ft("span",{className:Le().settingValue},ft($e.Z,{value:m,onChange:function(e,t){f(t)},"aria-labelledby":"continuous-slider"}))),ft("section",{className:Le().settingRow},ft(je.Z,{variant:"h2",className:Le().settingLabel},ft(We,{color:"primary"})," Resolution"),ft("span",{className:Le().settingValue},ft(Je,{"aria-label":"videoQuality",name:"videoQuality",value:g,onChange:function(e){h(e.target.value)}},ft(et.Z,{className:Le().controlsSvg,value:"high",control:ft(ut,{color:"primary"}),label:"High"}),ft(et.Z,{className:Le().controlsSvg,value:"low",control:ft(ut,{color:"primary"}),label:"Low"})))),ft("section",{className:Le().settingRow},ft(et.Z,{control:ft(dt.Z,{checked:_,onChange:function(e,t){b(t),o(i.user_setting.id,{spatialAudioEnabled:t}),null!=mt.y.instance&&(!0===t?mt.y.instance.resume():!1===t&&mt.y.instance.suspend())}}),label:"Use Spatial Audio"})))})),gt=l.createElement,ht=function(e){return gt(l.Fragment,null,e.value===e.index&&e.children)},vt=function(e){var t,n=(0,l.useState)(0),a=n[0],r=n[1],o=gt(ht,{value:a,index:0},gt(Ae,{avatarUrl:e.avatarUrl,auth:e.auth})),i=gt(ht,{value:a,index:1},gt(pt,null));return gt("div",null,gt(Ne.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:Le().modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:ke.Z,BackdropProps:{timeout:500}},gt(Me.Z,{in:e.open},gt("div",{className:B()((t={},(0,v.Z)(t,Le().paper,!0),(0,v.Z)(t,Le().profile,!0),t))},gt(ze.Z,{value:a,onChange:function(e,t){e.preventDefault(),r(t)},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"Login Configure"},gt(Ie.Z,{icon:gt(Fe.Z,{style:{fontSize:30}}),label:"Profile"}),gt(Ie.Z,{icon:gt(Te.Z,{style:{fontSize:30}}),label:"Settings"})),o,i))))},_t=n(36186),bt=l.createElement,yt=function(e){var t=e.avatarUrl,n=e.logoutUser,a=e.auth,r=(0,l.useState)(!1),o=r[0],s=r[1],c=(0,l.useState)(!1),u=c[0],d=c[1],m=(0,l.useRef)(null),f=function(){d(!0),s(!1)},p=function(e){m.current&&m.current.contains(e.target)||s(!1)},g=function(){n(),s(!1)},h=function(e){"Tab"===e.key&&(e.preventDefault(),s(!1))},v=function(){i.default.push("/admin")},_=(0,l.useRef)(o);return(0,l.useEffect)((function(){_.current&&!o&&m.current.focus(),_.current=o}),[o]),bt("div",null,bt("div",null,bt(k.Z,{ref:m,"aria-controls":o?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){s((function(e){return!e}))}},t?bt(x.Z,{alt:"User Avatar Icon",src:t}):bt(_t.Z,{style:{fontSize:45,color:"white"}})),bt(we.Z,{open:o,anchorEl:m.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,n=e.placement;return bt(Ze.Z,(0,ye.Z)({},t,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),bt(Ee.Z,null,bt(Ce.Z,{onClickAway:p},bt(Se.Z,{autoFocusItem:o,id:"menu-list-grow",onKeyDown:h},bt(xe.Z,{onClick:f},"Profile"),"admin"===a.get("user").userRole&&bt(xe.Z,{onClick:v},"Admin Console"),bt(xe.Z,{onClick:g},"Logout")))))}))),bt(vt,{open:u,handleClose:function(){d(!1)},avatarUrl:t,auth:a}))},Ct=n(30168),Zt=n.n(Ct),Et=l.createElement,wt=(0,s.$j)((function(e){return{auth:(0,m._)(e)}}),(function(e){return{logoutUser:(0,c.DE)(ve.TX,e),showDialog:(0,c.DE)(_e.v,e)}}))((function(e){var t=e.login,n=e.auth,a=e.logoutUser,r=e.showDialog;(0,l.useEffect)((function(){o()}),[]);var o=function(){new URLSearchParams(document.location.search).get("login")===String(!0)&&r({children:Et(be.Z,null)})},i=n.get("isLoggedIn"),s=n.get("user");return Et("div",{className:Zt().userWidget},i&&Et("div",{className:Zt().flex},Et(yt,{avatarUrl:s&&s.avatarUrl,auth:n,logoutUser:a})),!i&&!0===t&&Et(k.Z,{variant:"contained",color:"primary",className:Zt().loginButton,onClick:function(){return r({children:Et(be.Z,null)})}},"Log In"))})),xt=n(77531),St=n(20021),Nt=n.n(St),kt=l.createElement,Mt=function(e){var t=e.login;return kt(xt.Z,{className:Nt().appbar},kt(wt,{login:t}))},zt=n(41610),It=n.n(zt),Ft=n(45822),Tt=n(61467),Dt=n(680),Lt=l.createElement,Ot=(0,s.$j)((function(e){return{authState:(0,m._)(e),userState:(0,Ft.t)(e)}}),(function(e){return{getLayerUsers:(0,c.DE)(Dt.mz,e)}}))((function(e){var t,n,a=e.authState,r=e.userState,o=e.getLayerUsers,i=(0,l.useState)([]),s=i[0],c=i[1],u=a.get("user"),d=null!==(t=r.get("layerUsers"))&&void 0!==t?t:[],m=null!==(n=r.get("channelLayerUsers"))&&void 0!==n?n:[];(0,l.useEffect)((function(){var e,t;"channel"===(null===(t=null===(e=Tt.Z.instance)||void 0===e?void 0:e.transport)||void 0===t?void 0:t.channelType)?c(m.filter((function(e){return e.id!==u.id}))):c(d.filter((function(e){return e.id!==u.id})))}),[d,m]);var f=(0,l.useState)(!0),p=f[0],g=f[1];(0,l.useEffect)((function(){function e(){window.innerWidth<768&&g(!0)}return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}})),(0,l.useEffect)((function(){null!=u.instanceId&&!0===r.get("layerUsersUpdateNeeded")&&o(!0),null!=u.channelInstanceId&&!0===r.get("channelLayerUsersUpdateNeeded")&&o(!1)}),[r]);return Lt(l.Fragment,null,Lt("div",{className:It().expandMenu},"Nearby",Lt("button",{type:"button",className:p?It().expanded:"",onClick:function(){return g(!p)}},Lt(pe,null))),p&&s.map((function(e){return Lt(fe.Z,{peerId:e.id,key:e.id})})))})),Rt=(0,ie.Z)(l.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People"),Ut=(0,ie.Z)(l.createElement("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit"),Bt=(0,ie.Z)(l.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"}),"ZoomOutMap"),Pt=n(50544),At=n(7855),Vt=n(78835),Ht=n.n(Vt),Wt=n(16488),jt=n.n(Wt),$t=l.createElement,qt=function(e){var t=e.messages,n=void 0===t?[]:t,a=e.showAction,r=void 0!==a&&a,o=e.autoHideDuration,i=void 0===o?3e3:o,l=e.insertDirection,s=void 0===l?"top":l,c=e.maxMessagesToShow,u=void 0===c?4:c,d=e.customClass,m=void 0===d?"":d,f=function(e,t){var n=i>0?{animationDelay:"0s, ".concat(i,"ms, ").concat(i,"ms")}:0===i?{animationDelay:"0s, 9999999999s, 9999999999s"}:{};return $t("div",{className:jt().toastMessageContainer,key:t,style:n},$t("div",{className:jt().toastMessage},e),r&&$t("button",{className:jt().toastAction},"X"))};return $t("div",{className:jt().toastContainer+" "+(m||"")},function(){var e=[];if("top"===s.toLowerCase())for(var t=Math.max(n.length-u,0),a=n.length-1;a>=t;a--)e.push(f(n[a],a));else for(var r=Math.max(n.length-u,0);r<n.length;r++)e.push(f(n[r],r));return e}())},Gt=l.createElement,Yt=(0,s.$j)((function(e){return{user:(0,Ft.t)(e)}}))((function(e){var t,n=null===(t=e.user)||void 0===t?void 0:t.get("toastMessages"),a=n?Array.from(n).map((function(e){return e.args.userAdded?Gt("span",null,Gt("span",{className:jt().userAdded},e.user.name)," joined"):e.args.userRemoved?Gt("span",null,Gt("span",{className:jt().userRemoved},e.user.name)," left"):void 0})):[];return Gt(qt,{messages:a,customClass:jt().userToastContainer})})),Kt={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},Qt=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],Xt=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Jt=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],en="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},tn="fullscreenEnabled"in en&&Object.keys(Kt)||Qt[0]in en&&Qt||Xt[0]in en&&Xt||Jt[0]in en&&Jt||[],nn={requestFullscreen:function(e){return e[tn[Kt.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[tn[Kt.requestFullscreen]]},get exitFullscreen(){return en[tn[Kt.exitFullscreen]].bind(en)},get fullscreenPseudoClass(){return":"+tn[Kt.fullscreen]},addEventListener:function(e,t,n){return en.addEventListener(tn[Kt[e]],t,n)},removeEventListener:function(e,t,n){return en.removeEventListener(tn[Kt[e]],t,n)},get fullscreenEnabled(){return Boolean(en[tn[Kt.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return en[tn[Kt.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return en[("on"+tn[Kt.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return en[("on"+tn[Kt.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return en[("on"+tn[Kt.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return en[("on"+tn[Kt.fullscreenerror]).toLowerCase()]=e}};var an=function(e){var t=e.handle,n=e.onChange,a=e.children,r=e.className,o=[];return r&&o.push(r),o.push("fullscreen"),t.active&&o.push("fullscreen-enabled"),(0,l.useEffect)((function(){n&&n(t.active,t)}),[t.active]),l.createElement("div",{className:o.join(" "),ref:t.node,style:t.active?{height:"100%",width:"100%"}:void 0},a)},rn=(0,r.default)().publicRuntimeConfig.siteTitle,on={id:"",name:"",userRole:"",identityProviders:[],relationType:{},inverseRelationType:{},avatarUrl:""},ln={id:"",name:"",groupUsers:[],description:""},sn=(0,s.$j)((function(e){return{appState:(0,d.p_)(e),authState:(0,m._)(e),locationState:(0,f.T)(e),onBoardingStep:(0,d.Z_)(e)}}),(function(e){return{setUserHasInteracted:(0,c.DE)(u.M5,e)}}))((function(e){var t,n,r=(0,i.useRouter)().pathname,s=e.pageTitle,c=e.children,u=e.appState,d=e.authState,m=e.setUserHasInteracted,f=e.login,v=e.locationState,_=(e.onBoardingStep,u.get("userHasInteracted")),b=d.get("authUser"),y=(0,l.useState)(!1),C=y[0],Z=y[1],E=(0,l.useState)(!1),w=E[0],x=E[1],S=(0,l.useState)(!1),N=S[0],k=(S[1],(0,l.useState)(!1)),M=k[0],z=k[1],I=(0,l.useState)(!1),F=I[0],T=I[1],D=(0,l.useState)(!1),L=D[0],O=D[1],R=(0,l.useState)(!0),U=R[0],B=R[1],P=(0,l.useState)(""),W=P[0],j=P[1],$=(0,l.useState)(!1),q=$[0],G=$[1],Y=(0,l.useState)(""),K=Y[0],Q=Y[1],X=(0,l.useState)(ln),J=X[0],ee=X[1],te=(0,l.useState)(on),ne=te[0],ae=te[1],re=(0,l.useState)(ln),oe=re[0],ie=re[1],le=d.get("user"),se=function(){var e=(0,l.useState)(!1),t=e[0],n=e[1],a=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e=function(){n(nn.fullscreenElement===a.current)};return nn.addEventListener("fullscreenchange",e),function(){return nn.removeEventListener("fullscreenchange",e)}}),[]),{active:t,enter:(0,l.useCallback)((function(){return nn.fullscreenElement?nn.exitFullscreen().then((function(){return nn.requestFullscreen(a.current)})):a.current?nn.requestFullscreen(a.current):void 0}),[]),exit:(0,l.useCallback)((function(){return nn.fullscreenElement===a.current?nn.exitFullscreen():Promise.resolve()}),[]),node:a}}(),ce=function e(){m(),window.removeEventListener("click",e),window.removeEventListener("touchend",e)};(0,l.useEffect)((function(){!1===_&&(window.addEventListener("click",ce),window.addEventListener("touchend",ce))}),[]);var de=l.Children.map(c,(function(e){return l.isValidElement(e)?l.Children.map(e.props.children,(function(e){if(l.isValidElement(e))return l.cloneElement(e,{harmonyOpen:F})})):e})),me=(0,l.useCallback)((function(e){O(e)}),[]);(0,l.useEffect)((function(){function e(){window.innerWidth>768&&B(!0)}return window.addEventListener("resize",e),function(t){window.removeEventListener("resize",e)}}));return l.createElement(l.Fragment,null,l.createElement(an,{handle:se,onChange:me},l.createElement(a.Z,{theme:p.Z},l.createElement("section",null,l.createElement(o.default,null,l.createElement("title",null,rn," | ",s)),l.createElement("header",null,"/login"===r&&l.createElement(Mt,{login:f}),!0!==F?l.createElement(l.Fragment,null,U?l.createElement("section",{className:Ht().locationUserMenu},null!=(null===b||void 0===b?void 0:b.accessToken)&&b.accessToken.length>0&&l.createElement(he,null),l.createElement(Ot,null)):null,l.createElement("button",{type:"button",className:Ht().expandMenu+" "+(U?Ht().expanded:""),onClick:function(){return B(!U)}},l.createElement(Rt,null)),l.createElement(Yt,null)):null),L&&!0!==F?l.createElement("button",{type:"button",className:Ht().fullScreen,onClick:se.exit},l.createElement(Ut,null)):l.createElement("button",{type:"button",className:Ht().fullScreen,onClick:se.enter},l.createElement(Bt,null)),!0===F&&l.createElement(At.Z,{setHarmonyOpen:T,detailsType:W,setDetailsType:j,groupFormOpen:q,setGroupFormOpen:G,groupFormMode:K,setGroupFormMode:Q,groupForm:J,setGroupForm:ee,selectedUser:ne,setSelectedUser:ae,selectedGroup:oe,setSelectedGroup:ie,setLeftDrawerOpen:Z,setBottomDrawerOpen:z,setRightDrawerOpen:x}),l.createElement(l.Fragment,null,l.createElement(h.Q,null),l.createElement(g.p,null),de),null!=(null===b||void 0===b?void 0:b.accessToken)&&b.accessToken.length>0&&null!=(null===le||void 0===le?void 0:le.id)&&l.createElement(l.Fragment,null,l.createElement(V.Z,{harmony:!0,detailsType:W,setDetailsType:j,groupFormOpen:q,setGroupFormOpen:G,groupFormMode:K,setGroupFormMode:Q,groupForm:J,setGroupForm:ee,selectedUser:ne,setSelectedUser:ae,selectedGroup:oe,setSelectedGroup:ie,openBottomDrawer:M,leftDrawerOpen:C,setLeftDrawerOpen:Z,setRightDrawerOpen:x,setBottomDrawerOpen:z})),null!=(null===b||void 0===b?void 0:b.accessToken)&&b.accessToken.length>0&&null!=(null===le||void 0===le?void 0:le.id)&&l.createElement(l.Fragment,null,l.createElement(H.Z,{rightDrawerOpen:w,setRightDrawerOpen:x})),null!=(null===b||void 0===b?void 0:b.accessToken)&&b.accessToken.length>0&&null!=(null===le||void 0===le?void 0:le.id)&&l.createElement(l.Fragment,null,l.createElement(A,{bottomDrawerOpen:M,setBottomDrawerOpen:z,setLeftDrawerOpen:Z})),l.createElement("footer",null,(null===(n=null===(t=v.get("currentLocation"))||void 0===t?void 0:t.get("location"))||void 0===n?void 0:n.id)&&null!=d.get("authUser")&&!0===d.get("isLoggedIn")&&null!=(null===le||void 0===le?void 0:le.instanceId)&&!C&&!w&&!N&&!M&&l.createElement(ue,{setBottomDrawerOpen:z}),"guest"!==(null===le||void 0===le?void 0:le.userRole)&&!1===F&&l.createElement("div",{className:Ht()["harmony-toggle"],onClick:function(){return function(){var e=document.getElementById("engine-renderer-canvas");null!=(null===e||void 0===e?void 0:e.style)&&(e.style.width="0px"),T(!0)}()}},l.createElement(Pt.Z,null)))))))}))},19555:function(e){e.exports={paper:"Bottom_paper__3bNuO",selectable:"Bottom_selectable__1D1R6",highlighted:"Bottom_highlighted__1-y3_","background-red":"Bottom_background-red__cpxUv","flex-center":"Bottom_flex-center__3xFHp","flex-column":"Bottom_flex-column__3SqgW",details:"Bottom_details__ajuck","group-form":"Bottom_group-form__3dbQA",title:"Bottom_title__NpIru",description:"Bottom_description__1IwVl","margin-top":"Bottom_margin-top__3m7o1","list-container":"Bottom_list-container__1tI3p","no-chat":"Bottom_no-chat__2JYpX","bottom-container":"Bottom_bottom-container__3K41E","chat-container":"Bottom_chat-container__3Oaas","message-container":"Bottom_message-container__1ge_X","first-message-placeholder":"Bottom_first-message-placeholder__fgWfN","crud-controls":"Bottom_crud-controls__lt0zi",edit:"Bottom_edit__2sMg2",delete:"Bottom_delete__2RCKL",cancel:"Bottom_cancel__28ZKy","message-edit":"Bottom_message-edit__2LAMM","editing-controls":"Bottom_editing-controls__2B3lL",save:"Bottom_save__2EowV","chat-box":"Bottom_chat-box__3C6oG",message:"Bottom_message__14_53",self:"Bottom_self__1jjS0",other:"Bottom_other__9jFvF"}},36379:function(e){e.exports={iconCallChat:"InstanceChat_iconCallChat__107vm","instance-chat-container":"InstanceChat_instance-chat-container__g3OjR",messageContainerClosed:"InstanceChat_messageContainerClosed__3pVZ6","chat-box":"InstanceChat_chat-box__MPX9B",iconContainer:"InstanceChat_iconContainer__3MjSi",messageFieldContainer:"InstanceChat_messageFieldContainer__10OJM","PrivateNotchedOutline-root-1":"InstanceChat_PrivateNotchedOutline-root-1__39lQ3","MuiFormLabel-filled":"InstanceChat_MuiFormLabel-filled__31XmQ","Mui-focused":"InstanceChat_Mui-focused__3F_hQ",iconContainerSend:"InstanceChat_iconContainerSend__2m9qH","list-container":"InstanceChat_list-container__xxmE-",message:"InstanceChat_message__akeD2",userName:"InstanceChat_userName__6PcDy",self:"InstanceChat_self__1P40L",other:"InstanceChat_other__1fMQY","message-wrapper":"InstanceChat_message-wrapper__3_P0o","message-container":"InstanceChat_message-container__1sz0h","first-message-placeholder":"InstanceChat_first-message-placeholder__36TIv"}},78835:function(e){e.exports={container:"Layout_container__1m3ur",box:"Layout_box__8fPp_","harmony-toggle":"Layout_harmony-toggle__3-83r",fullScreen:"Layout_fullScreen__2Aoxz",locationUserMenu:"Layout_locationUserMenu__3AGQP",expandMenu:"Layout_expandMenu__1EHim",expanded:"Layout_expanded__8YpjO","invite-toggle":"Layout_invite-toggle__1WFJt"}},66012:function(e){e.exports={expandMenu:"Me_expandMenu__38ECX",expanded:"Me_expanded__24fKY"}},20021:function(e){e.exports={gap:"NavMenu_gap__2t8my",appbar:"NavMenu_appbar__UJGUd",logo:"NavMenu_logo__2Uum2"}},30168:function(e){e.exports={userWidget:"NavUserWidget_userWidget__3_F94",flex:"NavUserWidget_flex__3Fuee",loginButton:"NavUserWidget_loginButton__3ZXlN",logoutButton:"NavUserWidget_logoutButton__3zRO2"}},41610:function(e){e.exports={expandMenu:"PartyVideoWindows_expandMenu__28pqK",expanded:"PartyVideoWindows_expanded__2IX5Z"}},34561:function(e){e.exports={root:"Profile_root__2fyhz",paper:"Profile_paper__1xQ8A",signup__fileField:"Profile_signup__fileField__3SuUE",profile:"Profile_profile__1OOzM",uploadform:"Profile_uploadform__1zBqZ","max-size-200":"Profile_max-size-200__1Tt6D","hover-icon":"Profile_hover-icon__1F4UB",username:"Profile_username__2PGyA","user-container":"Profile_user-container__1-yI1",modal:"Profile_modal__1tFF_","flex-center":"Profile_flex-center__1mKKt","flex-column":"Profile_flex-column__354ir","user-id":"Profile_user-id__1zE9i",settingRow:"Profile_settingRow__CVUhl",settingLabel:"Profile_settingLabel__3suGZ",settingValue:"Profile_settingValue__3EmjK",controlsSvg:"Profile_controlsSvg__3MyrS"}},16488:function(e){e.exports={toastContainer:"toast_toastContainer__2gUjD",toastMessageContainer:"toast_toastMessageContainer__3p1Yp",toastMessage:"toast_toastMessage__2G8px",toastAction:"toast_toastAction__2lqqP",fadeIn:"toast_fadeIn__3nlsn",fadeOut:"toast_fadeOut__2QSjc",hide:"toast_hide__38R7N",userAdded:"toast_userAdded__YTyrM",userRemoved:"toast_userRemoved__2qZeY",userToastContainer:"toast_userToastContainer__3OFYN"}}}]);