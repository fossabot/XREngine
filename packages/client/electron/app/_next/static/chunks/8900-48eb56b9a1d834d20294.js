(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8900],{88334:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288),c=n(4635),l=n(13385);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var h=function(e){(0,i.Z)(n,e);var t=f(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).loaded=!1,e.url="",e.assetType=null,e.assetClass=null,e.receiveShadow=!1,e.castShadow=!1,e.envMapOverride=null,e.append=!0,e.onLoaded=[],e.parent=null,e.entityIdFromScenaLoader=null,e}return n}(s.w);h._schema={assetType:{default:l.h.glTF,type:u.Yk.Number},assetClass:{default:c.e,type:u.Yk.Number},url:{default:"",type:u.Yk.Number},loaded:{default:!1,type:u.Yk.Boolean},receiveShadow:{default:!1,type:u.Yk.Boolean},castShadow:{default:!1,type:u.Yk.Boolean},envMapOverride:{default:null,type:u.Yk.Ref},append:{default:!0,type:u.Yk.Boolean},onLoaded:{default:[],type:u.Yk.Ref},parent:{default:null,type:u.Yk.Ref},entityIdFromScenaLoader:{default:null,type:u.Yk.Ref}}},60773:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},91365:function(e,t,n){"use strict";var r,i,o=n(36595);n(47396).C||n.e(2516).then(n.t.bind(n,72516,23)).then((function(e){r=e.createDecoderModule().then((function(e){i=e,console.log("Decoder Module Initialized!")}))})).catch((function(e){return console.error("Error loading module")}));var a=function(e){this.timeLoaded=0,this.manager=e||o.tEQ,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=o.WwZ,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}};a.prototype={constructor:a,load:function(e,t,n,i){console.log("******* DECODING. Decoder is"),console.log(r);var a=this,s=new o.hH6(a.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.load(e,(function(e){a.decodeDracoFile(e,t)}),n,i)},setPath:function(e){return this.path=e,this},setVerbosity:function(e){return this.verbosity=e,this},setDrawMode:function(e){return this.drawMode=e,this},setSkipDequantization:function(e,t){var n=!0;return"undefined"!==typeof t&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this},decodeDracoFile:function(e,t,n,i){this.decodeDracoFileInternal(e,r,t,n,i)},decodeDracoFileInternal:function(e,t,n,r,o){var a=new i.DecoderBuffer;a.Init(new Int8Array(e),e.byteLength);var s=new i.Decoder,u=s.GetEncodedGeometryType(a);if(u==i.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(u!=i.POINT_CLOUD){var c="NodeDRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(t,s,u,a,r,o))},addAttributeToGeometry:function(e,t,n,r,a,s,u,c){if(0===s.ptr){var l="NodeDRACOLoader: No attribute "+r;throw console.error(l),new Error(l)}var f,h,d=s.num_components(),p=n.num_points()*d;switch(a){case Float32Array:f=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,s,f),c[r]=new Float32Array(p),h=o.a$l;break;case Int8Array:f=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,s,f),c[r]=new Int8Array(p),h=o.RNb;break;case Int16Array:f=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,s,f),c[r]=new Int16Array(p),h=o.aVm;break;case Int32Array:f=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,s,f),c[r]=new Int32Array(p),h=o.j87;break;case Uint8Array:f=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,s,f),c[r]=new Uint8Array(p),h=o.WTc;break;case Uint16Array:f=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,s,f),c[r]=new Uint16Array(p),h=o.qlB;break;case Uint32Array:f=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,s,f),c[r]=new Uint32Array(p),h=o.lCJ;break;default:var v="NodeDRACOLoader: Unexpected attribute type.";throw console.error(v),new Error(v)}for(var m=0;m<p;m++)c[r][m]=f.GetValue(m);u.addAttribute(r,new h(c[r],d)),i.destroy(f)},convertDracoGeometryTo3JS:function(e,t,n,r,a,s){var u,c,l;if(!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(i.POSITION),n===i.TRIANGULAR_MESH?(u=new i.Mesh,c=t.DecodeBufferToMesh(r,u)):(u=new i.PointCloud,c=t.DecodeBufferToPointCloud(r,u)),!c.ok()||0==u.ptr){var f="NodeDRACOLoader: Decoding failed: ";throw f+=c.error_msg(),console.error(f),i.destroy(t),i.destroy(u),new Error(f)}i.destroy(r),n==i.TRIANGULAR_MESH?(l=u.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+l.toString())):l=0;var h=u.num_points(),d=u.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+h.toString()),console.log("Number of attributes loaded: "+d.toString()));var p=t.GetAttributeId(u,i.POSITION);if(-1==p){var v="NodeDRACOLoader: No position attribute found.";throw console.error(v),i.destroy(t),i.destroy(u),new Error(v)}var m=t.GetAttribute(u,p),y={},g=new o.u9r;if(a)for(var b in a){var w=s[b],R=a[b],T=t.GetAttributeByUniqueId(u,R);this.addAttributeToGeometry(i,t,u,b,w,T,g,y)}else for(var E in this.nativeAttributeMap){var A=t.GetAttributeId(u,e[this.nativeAttributeMap[E]]);if(-1!==A){this.verbosity>0&&console.log("Loaded "+E+" attribute.");var x=t.GetAttribute(u,A);this.addAttributeToGeometry(i,t,u,E,Float32Array,x,g,y)}}if(n==i.TRIANGULAR_MESH)if(this.drawMode===o.UlW){var S=new i.DracoInt32Array;t.GetTriangleStripsFromMesh(u,S);y.indices=new Uint32Array(S.size());for(var _=0;_<S.size();++_)y.indices[_]=S.GetValue(_);e.destroy(S)}else{var P=3*l;y.indices=new Uint32Array(P);for(var k=new i.DracoInt32Array,O=0;O<l;++O){t.GetFaceFromMesh(u,O,k);var M=3*O;y.indices[M]=k.GetValue(0),y.indices[M+1]=k.GetValue(1),y.indices[M+2]=k.GetValue(2)}i.destroy(k)}g.drawMode=this.drawMode,n==i.TRIANGULAR_MESH&&g.setIndex(new(y.indices.length>65535?o.lCJ:o.qlB)(y.indices,1));var I=new i.AttributeQuantizationTransform;if(I.InitFromAttribute(m)){g.attributes.position.isQuantized=!0,g.attributes.position.maxRange=I.range(),g.attributes.position.numQuantizationBits=I.quantization_bits(),g.attributes.position.minValues=new Float32Array(3);for(var C=0;C<3;++C)g.attributes.position.minValues[C]=I.min_value(C)}return i.destroy(I),i.destroy(t),i.destroy(u),g},isVersionSupported:function(e,t){t(r.isVersionSupported(e))},getAttributeOptions:function(e){return"undefined"===typeof this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},t.Z=a},4635:function(e,t,n){"use strict";var r;n.d(t,{e:function(){return r}}),function(e){e[e.Model=0]="Model",e[e.Image=1]="Image",e[e.Video=2]="Video",e[e.Audio=3]="Audio",e[e.Document=4]="Document",e[e.Text=5]="Text",e[e.Script=6]="Script"}(r||(r={}))},13385:function(e,t,n){"use strict";var r;n.d(t,{h:function(){return r}}),function(e){e[e.glTF=0]="glTF",e[e.FBX=1]="FBX",e[e.OBJ=2]="OBJ",e[e.VRM=3]="VRM",e[e.PNG=4]="PNG",e[e.JPEG=5]="JPEG",e[e.MP4=6]="MP4",e[e.TS=7]="TS",e[e.MKV=8]="MKV",e[e.MP3=9]="MP3",e[e.OGG=10]="OGG",e[e.AAC=11]="AAC",e[e.CSV=12]="CSV",e[e.PlainText=13]="PlainText",e[e.DOC=14]="DOC",e[e.XLS=15]="XLS",e[e.Script=16]="Script"}(r||(r={}))},38936:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={value:{type:u.Yk.Ref,default:null}}},77213:function(e,t,n){"use strict";n.d(t,{M:function(){return d}});var r=n(49182),i=n(39337),o=n(94780),a=n(42828),s=n(13987),u=n(29569),c=n(89306),l=n(65648),f=n(52288);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var d=function(e){(0,s.Z)(n,e);var t=h(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).followTarget=null,e.entity=null,n.instance=(0,o.Z)(e),e}return(0,i.Z)(n,[{key:"dispose",value:function(){(0,a.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),n.instance=null}}]),n}(l.w);d.instance=null,d._schema={entity:{type:f.Yk.Ref,default:null},followTarget:{type:f.Yk.Ref,default:null}}},95070:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(47509),u=n(36595),c=n(65648),l=n(52288),f=n(74203);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var d=function(e){(0,i.Z)(n,e);var t=h(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).rayResult=new s.Fv,e.rayHasHit=!1,e}return n}(c.w);d._schema={mode:{type:l.Yk.String,default:f.r.ThirdPerson},distance:{type:l.Yk.Number,default:3},minDistance:{type:l.Yk.Number,default:1},maxDistance:{type:l.Yk.Number,default:10},raycastBoxOn:{type:l.Yk.Boolean,default:!0},rx1:{type:l.Yk.Number,default:-.1},ry1:{type:l.Yk.Number,default:-.1},rx2:{type:l.Yk.Number,default:.1},ry2:{type:l.Yk.Number,default:.1},farDistance:{type:l.Yk.Number,default:5},offset:{type:l.Yk.Vector3Type,default:new u.Pa4(0,1,0)},theta:{type:l.Yk.Number,default:0},phi:{type:l.Yk.Number,default:0},shoulderSide:{type:l.Yk.Boolean,default:!0},locked:{type:l.Yk.Boolean,default:!0},rayResult:{type:l.Yk.Ref,default:new s.Fv},rayHasHit:{type:l.Yk.Boolean,default:!1}}},74203:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var r={FirstPerson:"firstPerson",ShoulderCam:"shoulderCam",ThirdPerson:"thirdPerson",TopDown:"topDown"}},79559:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(){(0,r.Z)(this,e),this._listeners={}}return(0,i.Z)(e,[{key:"reset",value:function(){var e=this;Object.keys(this._listeners).forEach((function(t){delete e._listeners[t]}))}},{key:"addEventListener",value:function(e,t){var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"removeAllListenersForEvent",value:function(e,t){t&&delete this._listeners[e],this._listeners[e]=[]}},{key:"dispatchEvent",value:function(e){var t=this._listeners[e.type];if(void 0!==t){for(var n=t.slice(0),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];for(var a=0;a<n.length;a++){var s;(s=n[a]).call.apply(s,[this,e].concat(i))}}}}]),e}()},80850:function(e,t,n){"use strict";n.d(t,{V:function(){return f}});var r=n(49182),i=n(39337),o=n(13987),a=n(29569),s=n(89306),u=n(65648),c=n(52288);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var f=function(e){(0,o.Z)(n,e);var t=l(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this,!1)).lastData=new Map,e.data=new Map,e.data=new Map,e}return(0,i.Z)(n,[{key:"copy",value:function(e){return this.schema=e.schema,this.data=new Map(e.data),this}},{key:"reset",value:function(){this.data.clear()}}]),n}(u.w);f._schema={schema:{type:c.Yk.Ref,default:null},data:{type:c.Yk.Ref,default:null}}},77094:function(e,t,n){"use strict";var r;n.d(t,{E:function(){return r}}),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(r||(r={}))},97762:function(e,t,n){"use strict";var r;n.d(t,{q:function(){return r}}),function(e){e[e.STARTED=0]="STARTED",e[e.CONTINUED=1]="CONTINUED",e[e.ENDED=2]="ENDED",e[e.CHANGED=3]="CHANGED",e[e.UNCHANGED=4]="UNCHANGED"}(r||(r={}))},56633:function(e,t,n){"use strict";n.d(t,{uZ:function(){return c},A4:function(){return a},t7:function(){return o},on:function(){return u},WW:function(){return s}});var r=3.14159265359,i=6.28318530718,o=function(e,t,n){return e+(t-e)*n},a=function(e,t,n){var r,i=t-e;return i<-180?(r=o(e,t+=360,n))>=360&&(r-=360):i>180?(r=o(e,t-=360,n))<0&&(r+=360):r=o(e,t,n),r},s=function(e,t,n){var a,s=t-e;return s<-r?(a=o(e,t+=i,n))>=i&&(a-=i):s>r?(a=o(e,t-=i,n))<0&&(a+=i):a=o(e,t,n),a},u=function(e,t,n){var r={x:0,y:0,z:0,w:1},i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(Math.abs(i)>=1)return r.w=e.w,r.x=e.x,r.y=e.y,r.z=e.z,r;var o=Math.acos(i),a=Math.sqrt(1-i*i);if(Math.abs(a)<.001)return r.w=.5*e.w+.5*t.w,r.x=.5*e.x+.5*t.x,r.y=.5*e.y+.5*t.y,r.z=.5*e.z+.5*t.z,r;var s=Math.sin((1-n)*o)/a,u=Math.sin(n*o)/a;return r.w=e.w*s+t.w*u,r.x=e.x*s+t.x*u,r.y=e.y*s+t.y*u,r.z=e.z*s+t.z*u,r},c=function(e,t,n){return e<t?t:e>n?n:e}},57971:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var r=n(36595);function i(e,t){return new r.Pa4(e.x*t.z+e.z*t.x,t.y,e.z*t.z+-e.x*t.x)}},47396:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var r=n(33221);var i=!("object"===typeof r&&"object"===typeof r.versions&&"undefined"!==typeof r.versions.node)},35490:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(33221);var i="object"===typeof r&&"object"===typeof r.versions&&"undefined"!==typeof r.versions.node},65648:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(t){if((0,r.Z)(this,e),this._typeId=-1,this.name="",this.entity="",this.name=this.constructor.name,!1!==t){var n=this.constructor._schema;for(var i in n)if(t&&void 0!=t.key)this[i]=t[i];else{var o=n[i];if(void 0!==o.default)this[i]=o.type.clone(o.default);else{var a=o.type;this[i]=a.clone(a.default)}}0}this._pool=null}return(0,i.Z)(e,[{key:"copy",value:function(e){var t=this.constructor._schema;for(var n in t)void 0!==e[n]&&(this[n]=t[n].type.copy(e[n],this[n]));return this}},{key:"clone",value:function(){return this.constructor.prototype.copy(this)}},{key:"reset",value:function(){var e=this.constructor._schema;for(var t in e){var n=e[t];if(void 0!==n.default)this[t]=n.type.copy(n.default,this[t]);else{var r=n.type;this[t]=r.copy(r.default,this[t])}}}},{key:"dispose",value:function(){this._pool&&this._pool.release(this)}},{key:"checkUndefinedAttributes",value:function(e){var t=this,n=this.constructor._schema;Object.keys(e).forEach((function(e){n[e]||console.warn("Trying to set attribute '".concat(e,"' not defined in the '").concat(t.constructor.name,"' schema. Please fix the schema, the attribute value won't be set"))}))}}],[{key:"getName",value:function(){return this.constructor.getName()}}]),e}();o._schema={},o.getName=function(){return this.name}},73601:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(49182),i=n(39337),o=n(16090),a=n(483),s=function(){function e(){(0,r.Z)(this,e),this.componentTypes=[],this.components={},this.componentTypesToRemove=[],this.componentsToRemove={},this.queries=[],this.numStateComponents=0,this.id=a.D4.nextEntityId++,this.componentTypes=[],this.components={},this.componentsToRemove={},this.queries=[],this.componentTypesToRemove=[],this.numStateComponents=0}return(0,i.Z)(e,[{key:"copy",value:function(e){for(var t in e.components){var n=e.components[t];(0,o.Tk)(this,n.constructor),(0,o.Xr)(this,n.constructor).copy(n)}return this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"reset",value:function(){for(var e in this.id=a.D4.nextEntityId++,this.componentTypes.length=0,this.queries.length=0,this.components)delete this.components[e]}}]),e}()},85602:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(){(0,r.Z)(this,e),this._listeners={},this.stats={fired:0,handled:0}}return(0,i.Z)(e,[{key:"reset",value:function(){var e=this;Object.keys(this._listeners).forEach((function(t){delete e._listeners[t]})),this.resetCounters()}},{key:"addEventListener",value:function(e,t){var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"dispatchEvent",value:function(e,t,n){this.stats.fired++;var r=this._listeners[e];if(void 0!==r)for(var i=r.slice(0),o=0;o<i.length;o++)i[o].call(this,t,n)}},{key:"resetCounters",value:function(){this.stats.fired=this.stats.handled=0}}]),e}()},87227:function(e,t,n){"use strict";n.d(t,{n:function(){return f}});var r=n(49182),i=n(39337),o=n(13987),a=n(29569),s=n(89306),u=n(57473),c=n(483);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var f=function(e){(0,o.Z)(n,e);var t=l(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e,c.D4.options.entityPoolSize)).freeList=[],i}return(0,i.Z)(n,[{key:"expand",value:function(e){for(var t=0;t<e;t++){var n=new this.type;n._pool=this,this.freeList.push(n)}this.poolSize+=e}}]),n}(u.L)},57473:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(t,n){(0,r.Z)(this,e),this.freeList=[],this.poolSize=0,this.type=t,"undefined"!==typeof n&&this.expand(n)}return(0,i.Z)(e,[{key:"acquire",value:function(){return this.freeList.length<=0&&this.expand(Math.round(.2*this.poolSize)+1),this.freeList.pop()}},{key:"release",value:function(e){e&&e.reset(),this.freeList.push(e)}},{key:"expand",value:function(e){for(var t=0;t<e;t++){var n=new this.type;n._pool=this,this.freeList.push(n)}this.poolSize+=e}}]),e}()},88203:function(e,t,n){"use strict";n.d(t,{x:function(){return h}});var r=n(49182),i=n(39337),o=n(73731),a=n(86463),s=n(17356),u=n(483),c=n(85602),l=n(16090),f=function(){function e(t){var n=this;if((0,r.Z)(this,e),this.components=[],this.notComponents=[],t.forEach((function(e){"object"===typeof e?n.notComponents.push(e.Component):n.components.push(e)})),0===this.components.length)throw new Error("Can't create a query without components");this.entities=[],this.eventDispatcher=new c.H,this.reactive=!1,this.key=(0,a.El)(t);for(var i=0;i<u.D4.entities.length;i++){var o=u.D4.entities[i];this.match(o)&&(o.queries.push(this),this.entities.push(o))}}return(0,i.Z)(e,[{key:"addEntity",value:function(e){e.queries.push(this),this.entities.push(e),this.eventDispatcher.dispatchEvent(o.Cb,e)}},{key:"removeEntity",value:function(e){var t=this.entities.indexOf(e);~t&&(this.entities.splice(t,1),t=e.queries.indexOf(this),e.queries.splice(t,1),this.eventDispatcher.dispatchEvent(o.bA,e))}},{key:"match",value:function(e){return(0,l.Qe)(e,this.components)&&!(0,l.af)(e,this.notComponents)}},{key:"toJSON",value:function(){return{key:this.key,reactive:this.reactive,components:{included:this.components.map((function(e){return e.name})),not:this.notComponents.map((function(e){return e.name}))},numEntities:this.entities.length}}},{key:"stats",value:function(){return{numComponents:this.components.length,numEntities:this.entities.length}}}]),e}(),h=function(){function e(t){var n=this;if((0,r.Z)(this,e),this.updateType=s.V.Free,this.queryResults={},this._queries={},this.enabled=!0,this._queries={},this.queryResults={},this.priority=0,this.executeTime=0,t&&t.priority&&(this.priority=t.priority),this._mandatoryQueries=[],this.initialized=!0,this.constructor.queries){var i=function(e){var t=n.constructor.queries[e],r=t.components;if(!r||0===r.length)throw new Error("'components' attribute can't be empty in a query");var i=r.filter((function(e){return!(0,a.fh)(e)}));i.length>0&&i.forEach((function(e){(0,a.Ub)(e)||(0,a.RM)(e)}));var s=n.getQuery(r);n._queries[e]=s,!0===t.mandatory&&n._mandatoryQueries.push(s),n.queryResults[e]={all:s.entities};var c={added:o.Cb,removed:o.bA,changed:o.eE},l=t;l.listen&&["added","removed","changed"].forEach((function(t){if(l.listen[t]){var r=l.listen[t];if("changed"===t){if(s.reactive=!0,!0===r){var i=n.queryResults[e][t]=[];s.eventDispatcher.addEventListener(o.eE,(function(e){i.includes(e)||i.push(e)}))}else if(Array.isArray(r)){var a=n.queryResults[e][t]=[];s.eventDispatcher.addEventListener(o.eE,(function(e,t){r.includes(t.constructor)&&!a.includes(e)&&a.push(e)}))}}else{var u=n.queryResults[e][t]=[];s.eventDispatcher.addEventListener(c[t],(function(e){u.includes(e)||u.push(e)}))}}})),u.D4.queries.push(s)};for(var c in this.constructor.queries)i(c)}this.constructor.prototype.order=u.D4.systems.length}return(0,i.Z)(e,[{key:"getQuery",value:function(e){var t=(0,a.El)(e),n=this._queries[t];return n||(this._queries[t]=n=new f(e)),n}},{key:"stop",value:function(){this.executeTime=0,this.enabled=!1}},{key:"play",value:function(){this.enabled=!0}},{key:"clearEventQueues",value:function(){for(var e in this.queryResults){var t=this.queryResults[e];if(t.added&&(t.added.length=0),t.removed&&(t.removed.length=0),t.changed)if(Array.isArray(t.changed))t.changed.length=0;else for(var n in t.changed)t.changed[n].length=0}}},{key:"dispose",value:function(){}},{key:"toJSON",value:function(){var e=this,t={name:this.name,enabled:this.enabled,executeTime:this.executeTime,priority:this.priority,queries:{}};if(this.queryResults){var n=this.constructor.queries,r=function(r){var i=e.queryResults[r],o=n[r],a=t.queries[r]={key:e._queries[r].key},s=a;if(s.mandatory=!0===o.mandatory,s.reactive=o.listen&&(!0===o.listen.added||!0===o.listen.removed||!0===o.listen.changed||Array.isArray(o.listen.changed)),a.reactive){var u=a;u.listen={};["added","removed","changed"].forEach((function(e){i[e]&&(u.listen[e]={entities:i[e].length})}))}};for(var i in n)r(i)}return t}}],[{key:"getName",value:function(){return this.constructor.getName()}}]),e}();h.queries={},h.isSystem=!0,h.getName=function(){return this.name}},8603:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w);u.isSystemStateComponent=!0},73731:function(e,t,n){"use strict";n.d(t,{Cb:function(){return r},bA:function(){return i},eE:function(){return o},yP:function(){return a},tm:function(){return s},NR:function(){return u},ub:function(){return c}});var r="Query#ENTITY_ADDED",i="Query#ENTITY_REMOVED",o="Query#COMPONENT_CHANGED",a="Entity#ENTITY_CREATE",s="Entity#ENTITY_REMOVED",u="Entity#COMPONENT_ADDED",c="Entity#COMPONENT_REMOVE"},86463:function(e,t,n){"use strict";n.d(t,{yo:function(){return o},RM:function(){return a},Ub:function(){return s},El:function(){return u},fh:function(){return c}});var r=n(57473),i=n(483);new WeakMap;function o(e){return{type:"not",Component:e}}function a(e,t){if(i.D4.components.includes(e))console.warn("Component type: '".concat(l(e),"' already registered."));else{var n=e._schema;if(!n&&void 0!==e.type&&"not"!==e.type)throw new Error('Component "'.concat(l(e),'" has no schema property.'));for(var o in n){if(!n[o].type)throw new Error('Invalid schema for component "'.concat(l(e),'". Missing type for "').concat(o,'" property.'))}e._typeId=i.D4.nextComponentId++,i.D4.components.push(e),i.D4.componentsMap[e._typeId]=e,i.D4.numComponents[e._typeId]=0,void 0===t?t=new r.L(e):!1===t&&(t=void 0),i.D4.componentPool[e._typeId]=t}}function s(e){return i.D4.components.includes(e)}function u(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!c(r))throw new Error("Tried to create a query with an unregistered component");if("object"===typeof r){var i="not"===r.operator?"!":r.operator;t.push(i+r.Component._typeId)}else t.push(r._typeId)}return t.sort().join("-")}function c(e){return"object"===typeof e&&void 0!==e.Component._typeId||void 0!==e._typeId}function l(e){return e.getName()}},80375:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(44978),i=n(76207),o=function(e,t){return r.n2?document.createElement(e,t):(0,i.rR)(document.createElement(e),t)}},52288:function(e,t,n){"use strict";n.d(t,{Yk:function(){return l}});var r=n(64414),i=n(77866),o=function(e,t){return e,e},a=function(e){return e},s=function(e,t){return e?t?t.copy(e):e.clone():e},u=function(e){return e&&e.clone()};function c(e){var t=["name","copy","clone"].filter((function(t){return!e[t]}));if(t.length>0)throw new Error("createType expects a type definition with the following properties: ".concat(t.join(", ")));return e.isType=!0,e}var l={Number:c({name:"Number",default:0,copy:o,clone:a}),Boolean:c({name:"Boolean",default:!1,copy:o,clone:a}),String:c({name:"String",default:"",copy:o,clone:a}),Array:c({name:"Array",default:[],copy:function(e,t){return(0,i.Z)(e)},clone:function(e){return e&&e.slice()}}),Ref:c({name:"Ref",default:void 0,copy:o,clone:a}),JSON:c({name:"JSON",default:null,copy:function(e,t){return JSON.parse(JSON.stringify(e))},clone:function(e){return JSON.parse(JSON.stringify(e))}}),Vector3Type:c({name:"Vector3",default:[0,0,0],copy:s,clone:u}),Vector2Type:c({name:"Vector2",default:[0,0],copy:s,clone:u}),QuaternionType:c({name:"Quaternion",default:[0,0,0],copy:s,clone:u})};Object.fromEntries},46597:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=["application/x-mpegurl","application/vnd.apple.mpegurl"];function i(e,t){return!(!t||!r.includes(t.toLowerCase()))||!!(e&&e.toLowerCase().indexOf(".m3u8")>0)}},7331:function(e,t,n){"use strict";n.d(t,{I:function(){return h}});var r=n(15194),i=n(49182),o=n(39337),a=n(42828),s=n(13987),u=n(29569),c=n(89306);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var h=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this)).prevData=new Map,e}return(0,o.Z)(n,[{key:"reset",value:function(){(0,a.Z)((0,c.Z)(n.prototype),"reset",this).call(this),this.prevData.clear()}}]),n}(n(80850).V);h._schema=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h._schema)},93228:function(e,t,n){"use strict";n.d(t,{$:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},5450:function(e,t,n){"use strict";var r;n.d(t,{Q:function(){return r}}),function(e){e[e.PRIMARY=0]="PRIMARY",e[e.SECONDARY=1]="SECONDARY",e[e.FORWARD=2]="FORWARD",e[e.BACKWARD=3]="BACKWARD",e[e.UP=4]="UP",e[e.DOWN=5]="DOWN",e[e.LEFT=6]="LEFT",e[e.RIGHT=7]="RIGHT",e[e.INTERACT=8]="INTERACT",e[e.CROUCH=9]="CROUCH",e[e.JUMP=10]="JUMP",e[e.WALK=11]="WALK",e[e.RUN=12]="RUN",e[e.SPRINT=13]="SPRINT",e[e.SNEAK=14]="SNEAK",e[e.SCREENXY=15]="SCREENXY",e[e.SCREENXY_START=16]="SCREENXY_START",e[e.ROTATION_START=17]="ROTATION_START",e[e.MOVEMENT_PLAYERONE=18]="MOVEMENT_PLAYERONE",e[e.LOOKTURN_PLAYERONE=19]="LOOKTURN_PLAYERONE",e[e.MOVEMENT_PLAYERTWO=20]="MOVEMENT_PLAYERTWO",e[e.LOOKTURN_PLAYERTWO=21]="LOOKTURN_PLAYERTWO",e[e.ALTERNATE=22]="ALTERNATE",e[e.MOUSE_MOVEMENT=23]="MOUSE_MOVEMENT",e[e.SWITCH_CAR=24]="SWITCH_CAR",e[e.POINTER_LOCK=25]="POINTER_LOCK",e[e.CAMERA_SCROLL=26]="CAMERA_SCROLL",e[e.SWITCH_CAMERA=27]="SWITCH_CAMERA",e[e.LOCKING_CAMERA=28]="LOCKING_CAMERA",e[e.POINTER1_POSITION=29]="POINTER1_POSITION",e[e.POINTER2_POSITION=30]="POINTER2_POSITION",e[e.GAMEPAD_STICK_LEFT=31]="GAMEPAD_STICK_LEFT",e[e.GAMEPAD_STICK_RIGHT=32]="GAMEPAD_STICK_RIGHT",e[e.FACE_EXPRESSION=33]="FACE_EXPRESSION",e[e.FACE_EXPRESSION_HAPPY=34]="FACE_EXPRESSION_HAPPY",e[e.FACE_EXPRESSION_SAD=35]="FACE_EXPRESSION_SAD",e[e.SWITCH_SHOULDER_SIDE=36]="SWITCH_SHOULDER_SIDE"}(r||(r={}))},45744:function(e,t,n){"use strict";var r,i,o,a,s;n.d(t,{kT:function(){return r},Md:function(){return i},ez:function(){return a},p6:function(){return s},fw:function(){return u}}),function(e){e[e.LeftButton=0]="LeftButton",e[e.MiddleButton=1]="MiddleButton",e[e.RightButton=2]="RightButton",e[e.MousePosition=3]="MousePosition",e[e.MouseClickDownPosition=4]="MouseClickDownPosition",e[e.MouseClickDownTransformRotation=5]="MouseClickDownTransformRotation",e[e.MouseMovement=6]="MouseMovement",e[e.MouseScroll=7]="MouseScroll",e[e.MouseClickDownMovement=8]="MouseClickDownMovement"}(r||(r={})),function(e){e[e.Touch=10]="Touch",e[e.DoubleTouch=11]="DoubleTouch",e[e.LongTouch=12]="LongTouch",e[e.Touch1Position=13]="Touch1Position",e[e.Touch2Position=14]="Touch2Position",e[e.Touch1Movement=15]="Touch1Movement",e[e.Touch2Movement=16]="Touch2Movement",e[e.SwipeLeft=17]="SwipeLeft",e[e.SwipeRight=18]="SwipeRight",e[e.SwipeUp=19]="SwipeUp",e[e.SwipeDown=20]="SwipeDown",e[e.Scale=21]="Scale"}(i||(i={})),function(e){e[e.HEAD=22]="HEAD",e[e.CONTROLLER_LEFT=23]="CONTROLLER_LEFT",e[e.CONTROLLER_RIGHT=24]="CONTROLLER_RIGHT"}(o||(o={})),function(e){e[e.Left=28]="Left",e[e.Right=29]="Right"}(a||(a={})),function(e){e[e.A=30]="A",e[e.B=31]="B",e[e.X=32]="X",e[e.Y=33]="Y",e[e.LBumper=34]="LBumper",e[e.RBumper=35]="RBumper",e[e.LTrigger=36]="LTrigger",e[e.RTrigger=37]="RTrigger",e[e.Back=38]="Back",e[e.Start=39]="Start",e[e.LStick=40]="LStick",e[e.RString=41]="RString",e[e.DPad1=42]="DPad1",e[e.DPad2=43]="DPad2",e[e.DPad3=44]="DPad3",e[e.DPad4=45]="DPad4"}(s||(s={}));var u={Neutral:100,Angry:101,Disgusted:102,Fearful:103,Happy:104,Surprised:105,Sad:106,Pucker:107,Widen:108,Open:109}},5418:function(e,t,n){"use strict";var r;n.d(t,{n:function(){return r}}),function(e){e[e.BUTTON=0]="BUTTON",e[e.ONEDIM=1]="ONEDIM",e[e.TWODIM=2]="TWODIM",e[e.THREEDIM=3]="THREEDIM",e[e.SIXDOF=4]="SIXDOF"}(r||(r={}))},81924:function(e,t,n){"use strict";n.d(t,{k:function(){return f}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(36595),u=n(65648),c=n(52288);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var f=function(e){(0,i.Z)(n,e);var t=l(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(u.w);f._schema={box:{type:c.Yk.Ref,default:new s.ZzF},boxArray:{type:c.Yk.Array,default:[]},dynamic:{type:c.Yk.Boolean,default:!1}}},17158:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).interactionParts=[],e.interactionPartsPosition=[],e}return n}(s.w);l._schema={interactiveDistance:{type:u.Yk.Number,default:1/0},onInteractionCheck:{type:u.Yk.Ref},onInteractionFocused:{type:u.Yk.Ref},onInteraction:{type:u.Yk.Ref},interactionParts:{type:u.Yk.Array},interactionPartsPosition:{type:u.Yk.Array},data:{type:u.Yk.Ref}}},913:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={subFocusedArray:{type:u.Yk.Array,default:[]}}},50760:function(e,t,n){"use strict";n.d(t,{Pf:function(){return G},pV:function(){return j}});var r=n(15194),i=n(49182),o=n(39337),a=n(42828),s=n(13987),u=n(29569),c=n(89306),l=n(63290),f=n(77866),h=n(53500),d=n(86693),p=n(82552),v=n(36595),m=n(95070),y=n(47396);var g=n(483),b=n(34452),w=n(88203),R=n(86463),T=n(16090),E=n(17356),A=n(93228),x=n(77301),S=n(35926),_=n(52020),P=n(95812),k=n(40654),O=n(81924),M=n(17158),I=n(65648),C=n(52288);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var L=function(e){(0,s.Z)(n,e);var t=D(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return n}(I.w);L._schema={interacts:{type:C.Yk.Ref}};var F=n(913);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var N=function(e){(0,s.Z)(n,e);var t=Z(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return n}(I.w);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}N._schema={subInteracts:{type:C.Yk.Ref}};var j=function(e,t,n){for(var r=[],i=function(t){var n=g.D4.entities[t];if((0,T.tu)(n,M.R)){var i=(0,T.Xr)(n,M.R),o=(0,T.Xr)(n,p.U).position,a=(0,T.Xr)(n,p.U).rotation,s=(0,T.Xr)(e,p.U).position;i.interactionPartsPosition.length>0?i.interactionPartsPosition.forEach((function(e,t){var i=(0,l.Z)(v.Pa4,(0,f.Z)(e)).applyQuaternion(a).add(o);s.distanceTo(i)<3&&r.push([n,s.distanceTo(i),t])})):s.distanceTo(o)<3&&r.push([n,s.distanceTo(o),null])}},o=0;o<g.D4.entities.length;o++)i(o);if(!((r=r.sort((function(e,t){return e[1]-t[1]}))).length<1)){var a=(0,T.Xr)(r[0][0],M.R);"function"===typeof a.onInteractionCheck&&a.onInteractionCheck(e,r[0][0],r[0][2])&&a.onInteraction(e,{currentFocusedPart:r[0][2]},n,r[0][0])}},U=function(e,t,n){if((0,T.tu)(e,M.R)){var r=(0,T.tu)(e,N);r?(0,T.Tk)(e,S.o):(0,T.aT)(e,S.o)}else console.error("Attempted to call interact behavior, but target does not have Interactive component")},B=function(e,t,n){if((0,T.tu)(e,M.R)){var r=(0,T.tu)(e,L),i=(0,T.Xr)(e,M.R);if(i&&"function"===typeof i.onInteractionFocused){var o=r?(0,T.Xr)(e,L).interacts:null;i.onInteractionFocused(o,{focused:r},n,e)}}else console.error("Attempted to call interact behavior, but target does not have Interactive component")},G=function(e){(0,s.Z)(n,e);var t=z(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).updateType=E.V.Fixed,r.previousEntity=null,r.previousEntity2DPosition=null,r.focused=new Set,r.newFocused=new Set,r}return(0,o.Z)(n,[{key:"dispose",value:function(){var e,t;(0,a.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),this.previousEntity=null,this.previousEntity2DPosition=null,null===(e=this.focused)||void 0===e||e.clear(),null===(t=this.newFocused)||void 0===t||t.clear()}},{key:"execute",value:function(e,t){var i,o,a,s,u,c,l,f=this;if(this.newFocused.clear(),y.C){var w=g.D4.renderer.domElement,R=w.width,E=w.height;null===(i=this.queryResults.local_user)||void 0===i||i.all.forEach((function(e){var t,i,o,a=g.D4.camera,s=(0,T.Xr)(e,p.U),u=(0,T.Xr)(e,P.rl),c=null===(i=null===(t=f.queryResults.network_user.all)||void 0===t?void 0:t.filter((function(e){var t=(0,T.Xr)(e,p.U).position.clone().sub(s.position).normalize();return u.viewVector.dot(t)>.7})))||void 0===i?void 0:i.reduce((function(e,t){if(!e)return t;var n=(0,T.Xr)(e,p.U);return(0,T.Xr)(t,p.U).position.distanceTo(s.position)<n.position.distanceTo(s.position)?t:e}),null);if(c){var l=null===(o=(0,T.Xr)(c,x.H))||void 0===o?void 0:o.ownerId,h=(0,T.Xr)(c,p.U).position.clone();h.y=2;var d=function(e,t,n,r){var i=e.clone(),o=n/2,a=r/2;return i.project(t),i.x=i.x*o+o,i.y=-i.y*a+a,i}(h,a,R,E),v={userId:l,position:{x:d.x,y:d.y,z:d.z},focused:!0};f.previousEntity2DPosition&&d.equals(f.previousEntity2DPosition)||(c!==f.previousEntity?(f.previousEntity=c,f.previousEntity2DPosition=d):s.position.distanceTo(h)>=5&&(v.focused=!1),b.NL.instance.dispatchEvent(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:n.EVENTS.USER_HOVER},v)))}else f.previousEntity&&(b.NL.instance.dispatchEvent({type:n.EVENTS.USER_HOVER,focused:!1}),f.previousEntity=null,f.previousEntity2DPosition=null)})),null===(o=this.queryResults.interactors)||void 0===o||o.all.forEach((function(e){var t,n;if(null===(t=f.queryResults.interactive)||void 0===t?void 0:t.all.length){!function(e,t,n){var r=t.raycastList;if(!(0,T.tu)(e,m.F)){var i=(0,T.Ei)(e,F.Q);return i.subFocusedArray=[],i.BoxHitResult=null,void(i.focusedInteractive=null)}var o=(0,T.Xr)(e,m.F);if(o.raycastBoxOn){var a=(0,T.Xr)(e,p.U);if(r.length){var s=(new v.yGw).makePerspective(o.rx1,o.rx2,o.ry1,o.ry2,g.D4.camera.near,o.farDistance);g.D4.camera.updateMatrixWorld(),g.D4.camera.matrixWorldInverse.copy(g.D4.camera.matrixWorld).invert();var u=(new v.yGw).multiplyMatrices(s,g.D4.camera.matrixWorldInverse),c=(new v.iWj).setFromProjectionMatrix(u),l=r.map((function(t){var n=(0,T.Xr)(t,O.k),r=(0,T.Xr)(t,M.R);if(!n.boxArray.length){if(n.dynamic){var i=(0,T.Xr)(t,_.S),o=new v.ZzF;return o.copy(n.box),o.applyMatrix4(i.value.matrixWorld),[t,c.intersectsBox(o),o.distanceToPoint(a.position)]}return[t,c.intersectsBox(n.box),n.box.distanceToPoint(a.position)]}if(n.dynamic){var s=n.boxArray.map((function(n,i){if(r.onInteractionCheck(e,t,i)){var o=new v.ZzF;return o.setFromObject(n),[t,c.intersectsBox(o),o.distanceToPoint(a.position),i]}return[t,!1,null,i]})).filter((function(e){return e[1]})).sort((function(e,t){return e[2]-t[2]}));return s.length?s[0]:[null,!1]}})).filter((function(e){return e[1]})),f=l.sort((function(e,t){return e[2]-t[2]})),h=(0,T.Ei)(e,F.Q);h.subFocusedArray=l.map((function(e){return[(0,T.Xr)(e[0],_.S).value,e[3]]}));var d=f.length?f[0]:null;h.BoxHitResult=d,h.focusedInteractive=d?d[0]:null}}}(e,{raycastList:f.queryResults.boundingBox.all});var r=(0,T.Xr)(e,F.Q);r.focusedInteractive&&(f.newFocused.add(r.focusedInteractive),(0,T.tu)(r.focusedInteractive,L)||(0,T.Tk)(r.focusedInteractive,L,{interacts:e})),null===(n=f.queryResults.interactive)||void 0===n||n.all.forEach((function(e){!(0,T.tu)(e,O.k)&&(0,T.tu)(e,_.S)&&(0,T.tu)(e,p.U)&&(0,T.Tk)(e,O.k,{dynamic:(0,T.tu)(e,h.i)||(0,T.tu)(e,d.t)}),e!==r.focusedInteractive&&(0,T.tu)(e,L)&&(0,T.aT)(e,L),r.subFocusedArray.some((function(t){return t[0].entity===e}))?(0,T.tu)(e,N)||(0,T.Tk)(e,N):(0,T.aT)(e,N)}))}})),null===(a=this.queryResults.boundingBox.added)||void 0===a||a.forEach((function(e){var t=(0,T.Ei)(e,M.R),n=(0,T.Ei)(e,O.k),r=(0,T.Ei)(e,_.S),i=(0,T.Xr)(e,p.U);if(r.value.position.copy(i.position),r.value.rotation.setFromQuaternion(i.rotation),n.dynamic||r.value.updateMatrixWorld(),t.interactionParts.length){var o=t.interactionParts.map((function(t){return(0,T.Xr)(e,_.S).value.children[0].getObjectByName(t)}));(0,T.Ei)(e,O.k).boxArray=o}else{var a=new v.ZzF,s=(0,T.Xr)(e,_.S).value;s instanceof v.xsS&&(s=s.children[0]),s instanceof v.Kj0?(null==s.geometry.boundingBox&&s.geometry.computeBoundingBox(),a.copy(s.geometry.boundingBox),n.dynamic||a.applyMatrix4(s.matrixWorld)):s instanceof v.Tme&&a.setFromCenterAndSize((0,T.Xr)(e,p.U).position,new v.Pa4(.5,.5,.5)),n.box=a}})),null===(s=this.queryResults.focus.removed)||void 0===s||s.forEach((function(t){B(t,0,e)})),null===(u=this.queryResults.focus.added)||void 0===u||u.forEach((function(t){B(t,0,e)})),null===(c=this.queryResults.subfocus.added)||void 0===c||c.forEach((function(e){U(e)})),null===(l=this.queryResults.subfocus.removed)||void 0===l||l.forEach((function(e){U(e)})),this.focused.clear(),this.newFocused.forEach((function(e){return f.focused.add(e)}))}}}]),n}(w.x);G.EVENTS={USER_HOVER:"INTERACTIVE_SYSTEM_USER_HOVER",OBJECT_HOVER:"INTERACTIVE_SYSTEM_OBJECT_HOVER",OBJECT_ACTIVATION:"INTERACTIVE_SYSTEM_OBJECT_ACTIVATION"},G.queries={interactors:{components:[F.Q]},interactive:{components:[M.R]},boundingBox:{components:[O.k],listen:{added:!0,removed:!0}},focus:{components:[M.R,L],listen:{added:!0,removed:!0}},subfocus:{components:[M.R,N],listen:{added:!0,removed:!0}},local_user:{components:[A.$,P.rl,p.U],listen:{added:!0,removed:!0}},network_user:{components:[(0,R.yo)(A.$),k.M,P.rl,p.U],listen:{added:!0,removed:!0}}}},61467:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(49182),i=n(39337),o=function(){function e(t){if((0,r.Z)(this,e),this.buffer=[],this.pos=0,t<0)throw new RangeError("The size does not allow negative values.");this.size=t}return(0,i.Z)(e,[{key:"copy",value:function(){var t=new e(this.getBufferLength());return t.buffer=this.buffer,t}},{key:"clone",value:function(){var t=new e(this.getBufferLength());return t.buffer=this.buffer,t}},{key:"getSize",value:function(){return this.size}},{key:"getPos",value:function(){return this.pos}},{key:"getBufferLength",value:function(){return this.buffer.length}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.buffer[e.pos]=t,e.pos=(e.pos+1)%e.size}))}},{key:"get",value:function(e){if(e<0&&(e+=this.buffer.length),!(e<0||e>this.buffer.length))return this.buffer.length<this.size?this.buffer[e]:this.buffer[(this.pos+e)%this.size]}},{key:"getFirst",value:function(){return this.get(0)}},{key:"getLast",value:function(){return this.get(-1)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e<0&&(e+=this.buffer.length),e<0||e>this.buffer.length)return[];var n=this.toArray(),r=n.splice(e,t);return this.fromArray(n),r}},{key:"pop",value:function(){return this.remove(0)[0]}},{key:"popLast",value:function(){return this.remove(-1)[0]}},{key:"toArray",value:function(){return this.buffer.slice(this.pos).concat(this.buffer.slice(0,this.pos))}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))throw new TypeError("Input value is not an array.");t&&this.resize(e.length),0!==this.size&&(this.buffer=e.slice(-this.size),this.pos=this.buffer.length%this.size)}},{key:"clear",value:function(){this.buffer=[],this.pos=0}},{key:"resize",value:function(e){if(e<0)throw new RangeError("The size does not allow negative values.");if(0===e)this.clear();else if(e!==this.size){var t=this.toArray();this.fromArray(t.slice(-e)),this.pos=this.buffer.length%e}this.size=e}},{key:"full",value:function(){return this.buffer.length===this.size}},{key:"empty",value:function(){return 0===this.buffer.length}}],[{key:"fromArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new e(n);return r.fromArray(t,0===n),r}}]),e}(),a=function(){function e(){(0,r.Z)(this,e),this.packetCompression=!0,this.timeSnaphotCorrection=Date.now(),this.transports=[],this.clients={},this.clientsConnected=[],this.clientsDisconnected=[],this.dataProducers=new Map,this.dataConsumers=new Map,this.createObjects=[],this.editObjects=[],this.destroyObjects=[],this.networkObjects={},this.localClientEntity=null,this.incomingMessageQueue=new o(100),this.worldState={tick:e.tick,transforms:[],time:0,inputs:[],states:[],clientsConnected:[],clientsDisconnected:[],createObjects:[],editObjects:[],destroyObjects:[]}}return(0,i.Z)(e,[{key:"dispose",value:function(){this.clients={},this.transport=null,e.availableNetworkId=0,e.instance=null,e.tick=0,e.sceneId="default"}}],[{key:"getNetworkId",value:function(){return++this.availableNetworkId}}]),e}();a.instance=new a,a.availableNetworkId=0,a._schemas=new Map,a.sceneId="547Y45f7",a.tick=0},30999:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(){(0,r.Z)(this,e),this.vault=[],this.vaultSize=2e3}return(0,i.Z)(e,[{key:"getById",value:function(e){var t;return null===(t=this.vault.filter((function(t){return t.id===e})))||void 0===t?void 0:t[0]}},{key:"test",value:function(e){return e}},{key:"get",value:function(e,t){var n=this.vault.sort((function(e,t){return t.time-e.time}));if("undefined"===typeof e)return n[0];for(var r=0;r<n.length;r++){if(n[r].time<=e){var i={older:n[r],newer:n[r-1]};if(t){var o=Math.abs(e-i.older.time);return void 0===i.newer||Math.abs(e-i.newer.time)<=o?this.test(i.older):this.test(i.newer)}return i}}}},{key:"add",value:function(e){this.vault.length>this.vaultSize-1&&this.vault.sort((function(e,t){return e.time-t.time})).shift(),this.vault.push(e)}},{key:"setMaxSize",value:function(e){this.vaultSize=e}},{key:"getMaxSize",value:function(){return this.vaultSize}},{key:"size",get:function(){return this.vault.length}}]),e}();o.instance=new o},77301:function(e,t,n){"use strict";n.d(t,{H:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={ownerId:{type:u.Yk.String},networkId:{type:u.Yk.Number},componentMap:{type:u.Yk.Ref},snapShotTime:{type:u.Yk.Number}}},90038:function(e,t,n){"use strict";var r;n.d(t,{u:function(){return r}}),function(e){e[e.Heartbeat=0]="Heartbeat",e[e.ClientConnected=1]="ClientConnected",e[e.ClientDisconnected=2]="ClientDisconnected",e[e.Initialization=3]="Initialization",e[e.JoinWorld=4]="JoinWorld",e[e.LeaveWorld=5]="LeaveWorld",e[e.WebRTCTransportCreate=6]="WebRTCTransportCreate",e[e.WebRTCTransportConnect=7]="WebRTCTransportConnect",e[e.WebRTCTransportClose=8]="WebRTCTransportClose",e[e.WebRTCSendTrack=9]="WebRTCSendTrack",e[e.WebRTCReceiveTrack=10]="WebRTCReceiveTrack",e[e.WebRTCPauseConsumer=11]="WebRTCPauseConsumer",e[e.WebRTCResumeConsumer=12]="WebRTCResumeConsumer",e[e.WebRTCCloseConsumer=13]="WebRTCCloseConsumer",e[e.WebRTCPauseProducer=14]="WebRTCPauseProducer",e[e.WebRTCResumeProducer=15]="WebRTCResumeProducer",e[e.WebRTCCloseProducer=16]="WebRTCCloseProducer",e[e.WebRTCMuteOtherProducer=17]="WebRTCMuteOtherProducer",e[e.WebRTCUnmuteOtherProducer=18]="WebRTCUnmuteOtherProducer",e[e.WebRTCConsumerSetLayers=19]="WebRTCConsumerSetLayers",e[e.WebRTCConsumeData=20]="WebRTCConsumeData",e[e.WebRTCProduceData=21]="WebRTCProduceData",e[e.ReliableMessage=22]="ReliableMessage",e[e.WebRTCCreateProducer=23]="WebRTCCreateProducer",e[e.Authorization=24]="Authorization",e[e.Kick=26]="Kick",e[e.Ban=27]="Ban",e[e.ConnectToWorld=28]="ConnectToWorld",e[e.WebRTCRequestCurrentProducers=29]="WebRTCRequestCurrentProducers",e[e.Synchronization=100]="Synchronization",e[e.ClientInput=101]="ClientInput",e[e.StateUpdate=102]="StateUpdate",e[e.Test=250]="Test"}(r||(r={}))},5957:function(e,t,n){"use strict";n.d(t,{eW:function(){return h},TK:function(){return p},Ox:function(){return f}});var r=n(15194),i=n(56633);var o=n(49182),a=n(39337),s=function(){function e(){(0,o.Z)(this,e),this.vault=[],this.vaultSize=200,this.timeOffset=25,this.checkCount=0,this.checkDelay=0,this.serverTimePrev=0,this._interpolationBuffer=128,this.serverTime=0}return(0,a.Z)(e,[{key:"getById",value:function(e){var t;return null===(t=this.vault.filter((function(t){return t.id===e})))||void 0===t?void 0:t[0]}},{key:"get",value:function(e,t){var n=this.vault.sort((function(e,t){return t.time-e.time}));if("undefined"===typeof e)return n[0];for(var r=0;r<n.length;r++){if(n[r].time<=e){var i={older:n[r],newer:n[r-1]};if(t){var o=Math.abs(e-i.older.time);return void 0===i.newer?n[0]:Math.abs(e-i.newer.time)<=o?i.older:i.newer}return i}}}},{key:"add",value:function(e){this.vault.length>this.vaultSize-1&&this.vault.sort((function(e,t){return e.time-t.time})).shift(),this.vault.push(e)}},{key:"setMaxSize",value:function(e){this.vaultSize=e}},{key:"getMaxSize",value:function(){return this.vaultSize}},{key:"interpolationBuffer",get:function(){var e=this;return{get:function(){return e._interpolationBuffer},set:function(t){e._interpolationBuffer=t}}}},{key:"size",get:function(){return this.vault.length}}]),e}();s.instance=new s;var u=n(61467);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return function(e){if(!Array.isArray(e))throw new Error("You have to pass an Array to createSnapshot()");if(e.filter((function(e){return"string"!==typeof e.networkId&&"number"!==typeof e.networkId})).length>0)throw new Error("Each Entity needs to have a id")}(e),{id:Math.random().toString(36).substr(2,6),time:Date.now(),state:e,timeCorrection:0}}function h(e){if(s.instance.checkCount!=e.time){var t=Date.now()-e.time,n=t%s.instance._interpolationBuffer;t-n>s.instance.timeOffset||s.instance.checkDelay>500?(s.instance.timeOffset=t-n,s.instance.checkDelay=0):s.instance.checkDelay+=1,s.instance.checkCount=e.time,s.instance.add(e)}}function d(e,t,n,r,o){var a=[e,t].sort((function(e,t){return t.time-e.time})),c=r.trim().replace(/\W+/," ").split(" "),f=a[0],h=a[1],d=f.time,p=h.time,v=n,m=n<=1?n:(v-p)/(d-p);s.instance.serverTime=(0,i.t7)(p,d,m);var y=function(e,t,n,r){if("undefined"!==typeof t&&"undefined"!==typeof n){if("string"===typeof t||"string"===typeof n)throw new Error("Can't interpolate string!");if("number"===typeof t&&"number"===typeof n){if("linear"===e)return(0,i.t7)(t,n,r);if("deg"===e)return(0,i.A4)(t,n,r);if("rad"===e)return(0,i.WW)(t,n,r)}if("object"===typeof t&&"object"===typeof n&&"quat"===e)return(0,i.on)(t,n,r);throw new Error('No lerp method "'.concat(e,'" found!'))}};if(!Array.isArray(f.state)&&""===o)throw new Error('You forgot to add the "deep" parameter.');if(Array.isArray(f.state)&&""!==o)throw new Error('No "deep" needed it state is an array.');var g=Array.isArray(f.state)?f.state:f.state[o],b=Array.isArray(h.state)?h.state:h.state[o],w=JSON.parse(JSON.stringify(l(l({},f),{},{state:g})));return g.forEach((function(e,t){var n=b.find((function(t){return t.networkId===e.networkId}));e.networkId!=u.Z.instance.localAvatarNetworkId&&n&&c.forEach((function(r){if("quat"===r){var i={x:e.qX,y:e.qY,z:e.qZ,w:e.qW},o={x:n.qX,y:n.qY,z:n.qZ,w:n.qW},a=y("quat",o,i,m),s=-1*a.x,u=-1*a.y,c=-1*a.z,l=a.w,f=e.x,h=e.y,p=e.z,g=n.x,b=n.y,R=n.z,T=y("linear",g,f,m),E=y("linear",b,h,m),A=y("linear",R,p,m),x=e.x-T,S=e.y-E,_=e.z-A,P=l*(x=16.666666666666668*x/(d-v))+u*(_=16.666666666666668*_/(d-v))-c*(S=16.666666666666668*S/(d-v)),k=l*S+c*x-s*_,O=l*_+s*S-u*x,M=-s*x-u*S-c*_;x=P*l+M*-s+k*-c-O*-u,S=k*l+M*-u+O*-s-P*-c,_=O*l+M*-c+P*-u-k*-s,Array.isArray(w.state)&&(w.state[t].x=T,w.state[t].y=E,w.state[t].z=A,w.state[t].qX=a.x,w.state[t].qY=a.y,w.state[t].qZ=a.z,w.state[t].qW=a.w,w.state[t].vX=x,w.state[t].vY=S,w.state[t].vZ=_)}}))})),{state:w.state,percentage:m,newer:f.id,older:h.id}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Date.now()-s.instance.timeOffset-s.instance._interpolationBuffer,r=s.instance.get(n);if(r){var i=r.older,o=r.newer;if(i&&o)return d(o,i,n,e,t)}}},49026:function(e,t,n){"use strict";n.d(t,{K:function(){return f}});var r=n(36595),i=n(34452),o=n(16090),a=n(98847),s=n(82552),u=n(61467),c=n(77301);function l(e,t,n){null===t||void 0===t||t.forEach((function(t){var r;(0,o.Tk)(e,t.type);var i=null!==(r=t.data)&&void 0!==r?r:{};if(n.has(t.type)){var a=n.get(t.type);Object.keys(a).forEach((function(e){return i[e]=a[e]}))}if("object"===typeof i&&0!==Object.keys(i).length){var s=(0,o.Ei)(e,t.type);Object.keys(i).forEach((function(e){s[e]=i[e]}))}}))}function f(e,t,n,f,h){var d=function(e,t,n){var r,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=(0,o.JP)();(0,o.Tk)(s,c.H,{ownerId:t,networkId:n}),null===(r=e.onBeforeCreate)||void 0===r||r.forEach((function(e){(e.networked||t===u.Z.instance.userId)&&e.behavior(s,e.args)}));var f={localClientComponents:new Map,networkComponents:new Map,serverComponents:new Map};return a&&(a.localClientComponents.forEach((function(e){f.localClientComponents.set(e.type,e.data)})),a.networkComponents.forEach((function(e){f.networkComponents.set(e.type,e.data)})),a.serverComponents.forEach((function(e){f.serverComponents.set(e.type,e.data)}))),console.log(t,u.Z.instance.userId),t===u.Z.instance.userId&&e.localClientComponents&&l(s,e.localClientComponents,f.localClientComponents),u.Z.instance.transport.isServer&&l(s,e.serverComponents,f.serverComponents),l(s,e.networkComponents,f.networkComponents),null===(i=e.onAfterCreate)||void 0===i||i.forEach((function(e){(e.networked||t===u.Z.instance.userId)&&e.behavior(s,e.args)})),s}(u.Z.instance.schema.prefabs[n],e,t,{localClientComponents:[],networkComponents:[{type:s.U,data:{position:f?f.clone():new r.Pa4,rotation:h?h.clone():new r._fP}}],serverComponents:[]}),p=(0,o.Xr)(d,c.H);return u.Z.instance.networkObjects[t]={ownerId:e,prefabType:n,component:p,uniqueId:""},n===a.s0.Player&&e===u.Z.instance.userId&&(u.Z.instance.localClientEntity=d,i.NL.instance.dispatchEvent({type:i.NL.EVENTS.CLIENT_ENTITY_LOAD,id:d.id})),p}},64922:function(e,t,n){"use strict";n.d(t,{C:function(){return g}});var r=n(11742),i=n(15194),o=n(49182),a=n(39337),s=n(97157),u=n(61467);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=new s.Schema({userId:s.string,name:s.string}),h=new s.Schema({userId:s.string}),d=new s.Schema({networkId:s.uint32,snapShotTime:s.uint32,x:s.float32,y:s.float32,z:s.float32,qX:s.float32,qY:s.float32,qZ:s.float32,qW:s.float32}),p=new s.Schema({networkId:s.uint32,ownerId:s.string,prefabType:s.uint8,uniqueId:s.string,x:s.float32,y:s.float32,z:s.float32,qX:s.float32,qY:s.float32,qZ:s.float32,qW:s.float32}),v=new s.Schema({networkId:s.uint32,ownerId:s.string,component:s.string,state:s.string,currentId:s.uint32,value:s.uint32,whoIsItFor:s.string}),m=new s.Schema({networkId:s.uint32}),y=new s.Schema({clientsConnected:[f],clientsDisconnected:[h],createObjects:[p],editObjects:[v],destroyObjects:[m],tick:s.uint32,timeFP:s.uint32,timeSP:s.uint32,transforms:[d]}),g=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,null,[{key:"toBuffer",value:function(t,n){if("Reliable"===n){var r={clientsConnected:t.clientsConnected,clientsDisconnected:t.clientsDisconnected,createObjects:t.createObjects,editObjects:t.editObjects,destroyObjects:t.destroyObjects,tick:0,timeFP:0,timeSP:0,transforms:[],states:[]};return u.Z.instance.packetCompression?e.model.toBuffer(r):r}if("Unreliable"===n){var i=Date.now().toString(),o={clientsConnected:[],clientsDisconnected:[],createObjects:[],editObjects:[],destroyObjects:[],tick:t.tick,timeFP:Number(i.slice(0,6)),timeSP:Number(i.slice(6)),transforms:t.transforms.map((function(e){return l(l({},e),{},{snapShotTime:e.snapShotTime})})),states:[]};return u.Z.instance.packetCompression?e.model.toBuffer(o):o}}},{key:"fromBuffer",value:function(t){try{var n=u.Z.instance.packetCompression?e.model.fromBuffer(t):t;return n.transforms?l(l({},n),{},{tick:Number(n.tick),time:1e7*n.timeFP+n.timeSP,transforms:n.transforms.map((function(e){var t=e.snapShotTime;return l(l({},(0,r.Z)(e,["snapShotTime"])),{},{snapShotTime:Number(t)})}))}):void console.warn("Packet not from this, will ignored",n)}catch(i){console.warn("Couldn't deserialize buffer",t,i)}}}]),e}();g.model=new s.Model(y)},46104:function(e,t,n){"use strict";n.d(t,{bz:function(){return s}});var r=n(47509),i=n(94223),o=n(73505);n(72044);function a(e){if(void 0==e)return console.error("Scale is  null");var t=new r.xu(new r.AO(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z))),n=new r.uT({mass:0});return n.addShape(t),n}function s(e,t,n,s,u){var c;switch(e.type){case"box":c=a(s);break;case"ground":c=function(){var e=new r.JO,t=new r.uT({mass:0});return t.quaternion.setFromAxisAngle(new r.AO(1,0,0),-Math.PI/2),t.addShape(e),t}();break;case"cylinder":c=function(e){if(void 0==e)return console.error("Scale is  null");var t=new r.Ab(e.x,e.z,2*e.y,10),n=new r.uT({mass:0});return n.addShape(t),n}(s);break;case"sphere":c=function(e){var t=new r.aL(Math.abs(e.x)),n=new r.uT({mass:0});return n.addShape(t),n}(s);break;case"trimesh":return;default:console.warn("create Collider undefined type !!!"),c=a(s||{x:1,y:1,z:1})}return t&&c.position.set(t.x,t.y,t.z),n&&c.quaternion.set(n.x,n.y,n.z,n.w),"portal"==e.action?c=function(e,t){return e.collisionFilterGroup=o.p.ActiveCollider,e.link=t.link,e}(c,e):c.collisionFilterGroup=o.p.Default,i.F.physicsWorld.addBody(c),c}},93834:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(49182),i=n(39337),o=function(){function e(t,n,i){(0,r.Z)(this,e),this.mass=n,this.damping=i,this.frameTime=1/t,this.offset=0}return(0,i.Z)(e,[{key:"setFPS",value:function(e){this.frameTime=1/e}},{key:"lastFrame",value:function(){return this.cache[this.cache.length-1]}},{key:"generateFrames",value:function(e){var t=this.offset+e,n=Math.floor(t/this.frameTime);if(this.offset=t%this.frameTime,n>0){for(var r=0;r<n;r++)this.cache.push(this.getFrame(r+1===n));this.cache=this.cache.slice(-2)}}}]),e}()},31110:function(e,t,n){"use strict";n.d(t,{L:function(){return d}});var r=n(49182),i=n(39337),o=n(13987),a=n(29569),s=n(89306),u=n(36595),c=n(93834),l=function e(t,n){(0,r.Z)(this,e),this.position=t,this.velocity=n};function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}function h(e,t,n,r,i){var o=t-e;return n+=o/=r,new l(e+(n*=i),n)}var d=function(e){(0,o.Z)(n,e);var t=f(n);function n(e,i,o){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,r.Z)(this,n),(a=t.call(this,e,i,o)).position=s,a.velocity=u,a.target=0,a.lastLerp=0,a.cache=[];for(var c=0;c<2;c++)a.cache.push({position:s,velocity:u});return a}return(0,i.Z)(n,[{key:"simulate",value:function(e){this.generateFrames(e);var t=u.M8C.lerp(0,this.cache[1].position,this.offset/this.frameTime);this.position=t-this.lastLerp,this.lastLerp=t,this.velocity=u.M8C.lerp(this.cache[0].velocity,this.cache[1].velocity,this.offset/this.frameTime)}},{key:"getFrame",value:function(e){var t=Object.assign({},this.lastFrame());return e&&(t.position=0,this.lastLerp=this.lastLerp-this.lastFrame().position),h(t.position,this.target,t.velocity,this.mass,this.damping)}}]),n}(c.h)},43396:function(e,t,n){"use strict";n.d(t,{z:function(){return h}});var r=n(39337),i=n(13987),o=n(29569),a=n(89306),s=n(49182),u=n(36595),c=n(93834);function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var f=function e(t,n){(0,s.Z)(this,e),this.position=t,this.velocity=n},h=function(e){(0,i.Z)(n,e);var t=l(n);function n(e,r,i){var o;return(0,s.Z)(this,n),(o=t.call(this,e,r,i)).init(),o}return(0,r.Z)(n,[{key:"init",value:function(){this.position=new u.Pa4,this.velocity=new u.Pa4,this.target=new u.Pa4,this.cache=[];for(var e=0;e<2;e++)this.cache.push(new f(new u.Pa4,new u.Pa4))}},{key:"simulate",value:function(e){this.generateFrames(e),this.position.lerpVectors(this.cache[0].position,this.cache[1].position,this.offset/this.frameTime),this.velocity.lerpVectors(this.cache[0].velocity,this.cache[1].velocity,this.offset/this.frameTime)}},{key:"getFrame",value:function(e){var t=new f(this.lastFrame().position.clone(),this.lastFrame().velocity.clone()),n=(new u.Pa4).subVectors(this.target,t.position);return n.divideScalar(this.mass),t.velocity.add(n),t.velocity.multiplyScalar(this.damping),t.position.add(t.velocity),t}}]),n}(c.h)},72044:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(47509),i=n(36595),o=function(){var e,t,n,r,o,a,s,u,c,l,f,h,d,p,v,m,y,g,b,w=[],R=[];var T=function(){var e=new i.Pa4,t=new i.Pa4,n=new i.Pa4;return function(r,i,o){return e.subVectors(o,r),t.subVectors(i,r),n.crossVectors(e,t),n.normalize()}}();function E(e,t){if(void 0!==e.normal)return e.normal;var n=t[e[0]],r=t[e[1]],i=t[e[2]];return l.subVectors(r,n),f.subVectors(i,n),p.crossVectors(f,l),p.normalize(),e.normal=p.clone()}function A(e,t,n){var r=n[e[0]],i=[],o=E(e,n);t.sort((function(e,t){return i[e.x/3]=void 0!==i[e.x/3]?i[e.x/3]:o.dot(h.subVectors(e,r)),i[t.x/3]=void 0!==i[t.x/3]?i[t.x/3]:o.dot(d.subVectors(t,r)),i[e.x/3]-i[t.x/3]}));var a=t.length;for(1===a&&(i[t[0].x/3]=o.dot(h.subVectors(t[0],r)));a-- >0&&i[t[a].x/3]>0;)a+1<t.length&&i[t[a+1].x/3]>0&&(e.visiblePoints=t.splice(a+1))}function x(e,t){for(var n,r=w.length,i=[e],o=t.indexOf(e.visiblePoints.pop());r-- >0;)(n=w[r])!==e&&E(n,t).dot(v.subVectors(t[o],t[n[0]]))>0&&i.push(n);var a,s,u,c,l=r=i.length,f=1===r,h=[],d=0,p=[];i[0][0],i[0][1],i[0][1],i[0][2],i[0][2],i[0][0];if(1===i.length)h=[(n=i[0])[0],n[1],n[1],n[2],n[2],n[0]],R.indexOf(n)>-1&&R.splice(R.indexOf(n),1),n.visiblePoints&&(p=p.concat(n.visiblePoints)),w.splice(w.indexOf(n),1);else for(;r-- >0;){n=i[r],R.indexOf(n)>-1&&R.splice(R.indexOf(n),1),n.visiblePoints&&(p=p.concat(n.visiblePoints)),w.splice(w.indexOf(n),1);var m=void 0;for(b=0;b<3;){for(m=!1,l=i.length,u=n[b],c=n[(b+1)%3];l-- >0&&!m;)if(d=0,(a=i[l])!==n)for(;d<3&&!m;)s=d+1,m=a[d]===u&&a[s%3]===c||a[d]===c&&a[s%3]===u,d++;m&&!f||(h.push(u),h.push(c)),b++}}r=0;for(var y,g=h.length/2;r<g;)A(y=[h[2*r+1],o,h[2*r]],p,t),w.push(y),void 0!==y.visiblePoints&&R.push(y),r++}var S=function(){var e=new i.Pa4,t=new i.Pa4,n=new i.Pa4;return function(r,i,o){e.subVectors(i,r),t.subVectors(o,r),n.subVectors(o,i);var a=t.dot(e);if(a<0)return t.dot(t);var s=e.dot(e);return a>=s?n.dot(n):t.dot(t)-a*a/s}}();return function(b){var E,_,P,k;l=new i.Pa4,f=new i.Pa4,new i.Pa4,h=new i.Pa4,d=new i.Pa4,p=new i.Pa4,v=new i.Pa4,m=new i.Pa4,y=new i.Pa4,g=new i.Pa4;var O=b.getAttribute("position");w=[],R=[];var M=e=O.count,I=new Array(6),C=new Array(6);for(M=0;M<I.length;M++)I[M]=O.array[M];for(var D=0;M-- >0;)O[M].x<I[0].x&&(I[0]=O[M],C[0]=M),O[M].x>I[1].x&&(I[1]=O[M],C[1]=M),O[M].y<I[2].y&&(I[2]=O[M],C[2]=M),O[M].y<I[3].y&&(I[3]=O[M],C[3]=M),O[M].z<I[4].z&&(I[4]=O[M],C[4]=M),O[M].z<I[5].z&&(I[5]=O[M],C[6]=M);for(n=M=6;M-- >0;)for(n=M-1;n-- >0;)D<(t=I[M].distanceToSquared(I[n]))&&(D=t,r=I[M],o=I[n],E=C[M],_=C[n]);for(M=6,D=0;M-- >0;)D<(t=S(r,o,I[M]))&&(D=t,a=I[M],P=C[M]);for(u=T(r,o,a),c=u.dot(r),D=0,M=e;M-- >0;)D<(t=Math.abs(O[M].dot(u)-c))&&(D=t,s=O[M],k=C[M]);var L=[[P,_,E],[_,k,E],[P,k,_],[E,k,P]];m.subVectors(o,r).normalize(),y.subVectors(a,r).normalize(),g.subVectors(s,r).normalize(),g.dot((new i.Pa4).crossVectors(y,m))<0&&(L[0].reverse(),L[1].reverse(),L[2].reverse(),L[3].reverse());for(var F=new i.TlE(new Uint16Array(O.count-4),1),Z=0,N=0;N<O.count;N++)N!==E&&N!==_&&N!=P&&N!==k?F[N]=O[N-Z]:Z++;for(var H=L.length;H-- >0;)A(L[H],F,O),void 0!==L[H].visiblePoints&&R.push(L[H]),w.push(L[H]);!function(e){for(;R.length>0;)x(R.shift(),e)}(O);for(var z=w.length,j=new i.TlE(new Uint16Array(3*w.length),1);z-- >0;)j[z-1]=w[z][0],j[z-2]=w[z][1],j[z-3]=w[z][2];return b.setIndex(j),b}}(),a=Math.PI/2,s={BOX:"Box",CYLINDER:"Cylinder",SPHERE:"Sphere",HULL:"ConvexPolyhedron",MESH:"Trimesh"},u=function(e,t){var n;if((t=t||{}).type===s.BOX)return l(e);if(t.type===s.CYLINDER)return function(e,t){var n=new i.ZzF,o=["x","y","z"],s=t.cylinderAxis||"y",u=o.splice(o.indexOf(s),1)&&o;if(n.setFromObject(e),!isFinite(n.min.lengthSq()))return null;var c=n.max[s]-n.min[s],l=.5*Math.max(n.max[u[0]]-n.min[u[0]],n.max[u[1]]-n.min[u[1]]),f=new r.Ab(l,l,c,12);return f._type=r.bn.types.CYLINDER,f.radiusTop=l,f.radiusBottom=l,f.height=c,f.numSegments=12,f.orientation=new r._f,f.orientation.setFromEuler("y"===s?a:0,"z"===s?a:0,0,"XYZ").normalize(),f}(e,t);if(t.type===s.SPHERE)return function(e,t){if(t.sphereRadius)return new r.aL(t.sphereRadius);var n=f(e);return n?(n.computeBoundingSphere(),new r.aL(n.boundingSphere.radius)):null}(e,t);if(t.type===s.HULL)return function(e){var t,n=1e-4,i=f(e);if(!i||!i.attributes.position.count)return null;for(t=0;t<i.attributes.position.count;t++)i.attributes.position[t].x+=(Math.random()-.5)*n,i.attributes.position[t].y+=(Math.random()-.5)*n,i.attributes.position[t].z+=(Math.random()-.5)*n;var a=o(i),s=a.getAttribute("position"),u=new Array(s.count),c=a.getIndex();for(t=0;t<s.count/3;t++)u[t]=new r.AO(s[3*t],s[3*t+1],s[3*t+2]);var l=new Array(c.count);for(t=0;t<c.count/3;t++)l[t]=[c[3*t],c[3*t+1],c[3*t+2]];return new r.YD({vertices:u,faces:l})}(e);if(t.type===s.MESH)return(n=f(e))?function(e){var t=h(e),n=t.vertices,i=t.indices;return n.length?new r.np(n,i):null}(n):null;if(t.type)throw new Error(t.type);if(!(n=f(e)))return null;switch(n.metadata?n.metadata.type:n.type){case"BoxGeometry":case"BoxBufferGeometry":return c(n);case"CylinderGeometry":case"CylinderBufferGeometry":return function(e){var t=e.metadata?e.metadata.parameters:e.parameters,n=new r.Ab(t.radiusTop,t.radiusBottom,t.height,t.radialSegments);return n._type=r.bn.types.CYLINDER,n.radiusTop=t.radiusTop,n.radiusBottom=t.radiusBottom,n.height=t.height,n.numSegments=t.radialSegments,n.orientation=new r._f,n.orientation.setFromEuler(i.M8C.degToRad(90),0,0,"XYZ").normalize(),n}(n);case"PlaneGeometry":case"PlaneBufferGeometry":return function(e){e.computeBoundingBox();var t=e.boundingBox;return new r.xu(new r.AO((t.max.x-t.min.x)/2||.1,(t.max.y-t.min.y)/2||.1,(t.max.z-t.min.z)/2||.1))}(n);case"SphereGeometry":case"SphereBufferGeometry":return function(e){var t=e.metadata?e.metadata.parameters:e.parameters;return new r.aL(t.radius)}(n);case"TubeGeometry":case"Geometry":case"BufferGeometry":return l(e);default:return console.warn('Unrecognized geometry: "%s". Using bounding box as shape.',n.type),c(n)}};function c(e){if(!h(e).vertices.length)return null;e.computeBoundingBox();var t=e.boundingBox;return new r.xu(new r.AO((t.max.x-t.min.x)/2,(t.max.y-t.min.y)/2,(t.max.z-t.min.z)/2))}function l(e){var t=new i.ZzF,n=e.clone();if(n.quaternion.set(0,0,0,1),n.updateMatrixWorld(),t.setFromObject(n),!isFinite(t.min.lengthSq()))return null;var o=new r.xu(new r.AO((t.max.x-t.min.x)/2,(t.max.y-t.min.y)/2,(t.max.z-t.min.z)/2)),a=t.translate(n.position.negate()).getCenter(new i.Pa4);return a.lengthSq()&&(o.offset=a),o}function f(e){var t,n=new i.u9r,r=function(e){var t=[];return e.traverse((function(e){"Mesh"===e.type&&t.push(e)})),t}(e),o=new i.u9r;if(0===r.length)return null;if(1===r.length){var a=new i.Pa4,s=new i._fP,u=new i.Pa4;return r[0].geometry.isBufferGeometry?r[0].geometry.attributes.position&&r[0].geometry.attributes.position.itemSize>2&&(n=r[0].geometry):n=r[0].geometry.clone(),r[0].updateMatrixWorld(),r[0].matrixWorld.decompose(a,s,u),n.scale(u.x,u.y,u.z)}for(;t=r.pop();)if(t.updateMatrixWorld(),t.geometry.isBufferGeometry){if(t.geometry.attributes.position&&t.geometry.attributes.position.itemSize>2){var c=t.geometry;o.merge(c,t.matrixWorld),c.dispose()}}else o.merge(t.geometry,t.matrixWorld);var l=new i.yGw;return l.scale(e.scale),o.applyMatrix4(l),o}function h(e){var t,n=(e.attributes.position||{}).array||[];return{vertices:n,indices:(null===(t=e.index)||void 0===t?void 0:t.array)||Object.keys(n).map(Number)}}u.Type=s},62589:function(e,t,n){"use strict";n.d(t,{z:function(){return v}});var r=n(49182),i=n(39337),o=n(42828),a=n(13987),s=n(29569),u=n(89306),c=n(47509),l=n(65648),f=n(35231);var h=n(52288),d=n(73505);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var v=function(e){(0,a.Z)(n,e);var t=p(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).moreRaysIchTurn=0,i.reapplyOptions(e),i}return(0,i.Z)(n,[{key:"copy",value:function(e){var t=(0,o.Z)((0,u.Z)(n.prototype),"copy",this).call(this,e);return t.reapplyOptions(e),t}},{key:"reapplyOptions",value:function(e){e=function(e,t){return f.defaults({},f.clone(e),t)}(e,{mass:0,position:{x:0,y:1,z:0},height:.5,radius:.3,segments:8,friction:0}),this.options=e;var t=new c.F5("capsuleMat");t.friction=e.friction;var n=new c.uT({mass:e.mass}),r=new c.aL(e.radius),i=new c.Ab(.237,.005,.5,20);n.material=t,n.addShape(r,new c.AO(0,0,0)),n.addShape(r,new c.AO(0,e.height/2,0)),n.addShape(i,new c.AO(0,-e.height/3,0)),n.angularDamping=0,n.linearDamping=0,n.collisionFilterGroup=d.p.Characters,n.collisionFilterMask=d.p.Default|d.p.Characters|d.p.Car|d.p.TrimeshColliders,n.position.set(e.position.x,e.position.y,e.position.z),this.body=n}}]),n}(l.w);v._schema={mass:{type:h.Yk.Number,default:0},position:{type:h.Yk.Ref,default:new c.AO(0,0,0)},height:{type:h.Yk.Number,default:.5},radius:{type:h.Yk.Number,default:.3},segments:{type:h.Yk.Number,default:8},friction:{type:h.Yk.Number,default:.3}}},10579:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={collider:{type:u.Yk.Ref,default:null},type:{type:u.Yk.String,default:"box"},mass:{type:u.Yk.Number,default:0},position:{type:u.Yk.Ref,default:null},quaternion:{type:u.Yk.Ref,default:{x:0,y:0,z:0,w:0}},scale:{type:u.Yk.Ref,default:{x:1,y:1,z:1}},mesh:{type:u.Yk.Ref,default:null}}},30307:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).lastUpdate=0,e.updateDaley=1e3,e}return n}(s.w);l._schema={lastUpdate:{type:u.Yk.Number,default:0}}},12665:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={state:{type:u.Yk.Ref,default:null},networkCarId:{type:u.Yk.Number,default:null},currentFocusedPart:{type:u.Yk.Number,default:null},animationSpeed:{type:u.Yk.Number,default:.1},currentFrame:{type:u.Yk.Number,default:0},timeOut:{type:u.Yk.Number,default:30},angel:{type:u.Yk.Number,default:Math.PI/3.5}}},53500:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).isKinematic=0,e}return n}(s.w);l._schema={isKinematic:{type:u.Yk.Number,default:0}}},86693:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).maxSteerVal=.5,e.maxForce=300,e.brakeForce=1e6,e}return n}(s.w);l._schema={wantsExit:{type:u.Yk.Ref,default:[null,null]},passenger:{type:u.Yk.Number,default:null},driver:{type:u.Yk.Number,default:null},seatPlane:{type:u.Yk.Ref,default:["driver","passenger"]},vehicleMesh:{type:u.Yk.Ref,default:null},vehiclePhysics:{type:u.Yk.Ref,default:null},vehicleCollider:{type:u.Yk.Ref,default:null},vehicleSphereColliders:{type:u.Yk.Ref,default:[]},vehicleDoorsArray:{type:u.Yk.Ref,default:[]},startPosition:{type:u.Yk.Ref,default:[0,0,0]},suspensionRestLength:{type:u.Yk.Number,default:.3},colliderTrimOffset:{type:u.Yk.Ref,default:[0,0,0]},collidersSphereOffset:{type:u.Yk.Ref,default:[0,0,0]},arrayWheelsMesh:{type:u.Yk.Ref,default:[]},arrayWheelsPosition:{type:u.Yk.Ref,default:[]},wheelRadius:{type:u.Yk.Number,default:.4},entrancesArray:{type:u.Yk.Ref,default:[]},seatsArray:{type:u.Yk.Ref,default:[]},isMoved:{type:u.Yk.Boolean,default:!1},mass:{type:u.Yk.Number,default:150},maxSteerVal:{type:u.Yk.Number,default:.5},maxForce:{type:u.Yk.Number,default:500},brakeForce:{type:u.Yk.Number,default:1e6},vehicle:{type:u.Yk.Ref,default:null}}},73505:function(e,t,n){"use strict";var r;n.d(t,{p:function(){return r}}),function(e){e[e.Default=1]="Default",e[e.Characters=2]="Characters",e[e.Car=4]="Car",e[e.TrimeshColliders=8]="TrimeshColliders",e[e.ActiveCollider=16]="ActiveCollider"}(r||(r={}))},94223:function(e,t,n){"use strict";n.d(t,{F:function(){return oe}});var r=n(49182),i=n(39337),o=n(42828),a=n(13987),s=n(29569),u=n(89306),c=n(47509),l=n(36595),f=n(35490),h=n(86463),d=n(483),p=n(34452),v=n(88203),m=n(16090),y=n(17356),g=n(93228),b=n(61467),w=n(30999),R=n(77301),T=n(5957),E=n(95812),A=n(62589),x=n(82552),S=n(86693),_={x:0,y:0,z:0},P=180,k=n(10579),O=n(30307),M=function(e,t){var n=(0,m.Xr)(e,R.H).networkId;return null!=t?t.state.find((function(e){return e.networkId==n})):n},I=n(63290),C=n(77866),D=n(95070),L=n(12665),F=n(99010),Z=n(61306),N=n(74203),H=n(41264);var z=function(e,t,n,r){var i=(0,m.Xr)(e,R.H).networkId,o=(0,m.Ei)(t,S.t);o[o.seatPlane[n]]=i;var a=(0,m.Ei)(e,E.rl);oe.physicsWorld.removeBody(a.actorCapsule.body);var s=function(e,t,n){var r=(0,m.Ei)(e,x.U),i=(0,m.Xr)(t,S.t),o=(0,m.Xr)(t,x.U),a=(0,I.Z)(l.Pa4,(0,C.Z)(i.entrancesArray[n])).applyQuaternion(o.rotation).add(o.position).setY(r.position.y);return r.position.set(a.x,a.y,a.z),r.rotation.setFromRotationMatrix((new l.yGw).multiplyMatrices((new l.yGw).makeRotationFromQuaternion(o.rotation),(new l.yGw).makeRotationY(-Math.PI/2))),(new l.USm).setFromQuaternion(o.rotation).y}(e,t,n);(0,m.Ei)(e,L.I).state="onAddEnding",f.s||((0,F.I)(e,{state:Z.F.DRIVING}),(0,H.VQ)(e,{animationId:Z.F.ENTERING_VEHICLE,transitionDuration:.3}),b.Z.instance.localAvatarNetworkId==i&&((0,m.Tk)(t,g.$),(0,m.Tk)(t,D.F,{distance:7,locked:!1,mode:N.r.ThirdPerson,theta:Math.round(270/Math.PI*(s/3*2)+180),phi:20})))};var j=function(e,t,n,r){var i=(0,m.Ei)(e,L.I),o=i.timeOut;i.currentFrame+=i.animationSpeed,function(e,t,n,r,i){var o=(0,m.Xr)(e,S.t).vehicleDoorsArray[t],a=i/(r/2);n>r/2?o.quaternion.setFromRotationMatrix((new l.yGw).makeRotationY(o.position.x>0?-(r-n)*a:(r-n)*a)):o.quaternion.setFromRotationMatrix((new l.yGw).makeRotationY(o.position.x>0?-n*a:n*a))}(t,n,i.currentFrame,o,i.angel),function(e,t,n){var r=(0,m.Ei)(e,x.U),i=(0,m.Xr)(t,S.t),o=(0,m.Xr)(t,x.U),a=(0,I.Z)(l.Pa4,(0,C.Z)(i.entrancesArray[n])).applyQuaternion(o.rotation).add(o.position).setY(r.position.y);r.position.set(a.x,a.y,a.z),r.rotation.setFromRotationMatrix((new l.yGw).multiplyMatrices((new l.yGw).makeRotationFromQuaternion(o.rotation),(new l.yGw).makeRotationY(-Math.PI/2)))}(e,t,n);var a=!1;i.currentFrame>o&&(i.currentFrame=0,a=!0,(0,m.Ei)(e,L.I).state="onUpdate"),f.s||a&&(0,H.VQ)(e,{animationId:Z.F.DRIVING,transitionDuration:.3})};function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var B=function(e){(0,a.Z)(n,e);var t=U(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w),G=function(e,t,n,r){var i=(0,m.Ei)(t,S.t),o=null;if((0,m.tu)(e,R.H))o=(0,m.Xr)(e,R.H).networkId;else for(var a=0;a<i.seatPlane.length;a++)null==i[i.seatPlane[a]]||b.Z.instance.networkObjects[i[i.seatPlane[a]]]||(o=i[i.seatPlane[a]],n=a);i[i.seatPlane[n]]=null,i.wantsExit=[null,null],f.s||((0,m.aT)(e,B),(0,F.I)(e,{state:Z.F.DEFAULT}),b.Z.instance.localAvatarNetworkId==o&&((0,m.aT)(t,g.$),(0,m.aT)(t,D.F),(0,m.Tk)(e,g.$),(0,m.Tk)(e,D.F,{distance:3,mode:N.r.ThirdPerson})))};var q=function(e,t,n,r){var i=(0,m.Ei)(e,x.U),o=(0,m.Xr)(t,S.t),a=(0,m.Xr)(t,x.U),s=(0,m.Ei)(e,L.I);s.currentFrame+=s.animationSpeed;var u=s.timeOut;if(function(e,t,n,r,i){var o=(0,m.Xr)(e,S.t).vehicleDoorsArray[t],a=i/(r/2);n>r/2?o.quaternion.setFromRotationMatrix((new l.yGw).makeRotationY(o.position.x>0?-(r-n)*a:(r-n)*a)):o.quaternion.setFromRotationMatrix((new l.yGw).makeRotationY(o.position.x>0?-n*a:n*a))}(t,n,s.currentFrame,u,s.angel),s.currentFrame>u)!function(e,t,n){var r=(0,m.Ei)(e,x.U),i=(0,m.Ei)(e,E.rl),o=(0,m.Xr)(t,S.t),a=(0,m.Xr)(t,x.U),s=(0,I.Z)(l.Pa4,(0,C.Z)(o.entrancesArray[n])).applyQuaternion(a.rotation).add(a.position).setY(r.position.y);i.actorCapsule.body.position.set(s.x,s.y,s.z),r.position.set(s.x,s.y,s.z),oe.physicsWorld.addBody(i.actorCapsule.body)}(e,t,n),(0,m.aT)(e,L.I);else{var c=(0,I.Z)(l.Pa4,(0,C.Z)(o.seatsArray[n])).applyQuaternion(a.rotation).add(a.position).setY(i.position.y);i.position.set(c.x,c.y,c.z),i.rotation.setFromRotationMatrix((new l.yGw).multiplyMatrices((new l.yGw).makeRotationFromQuaternion(a.rotation),(new l.yGw).makeRotationX(0)))}f.s||s.currentFrame==s.animationSpeed&&(0,H.VQ)(e,{animationId:Z.F.EXITING_VEHICLE,transitionDuration:.3})},V=function(e,t,n,r){var i=(0,m.Ei)(e,x.U),o=(0,m.Xr)(t,S.t),a=(0,m.Xr)(t,x.U);if(!function(e){return null==(0,m.Xr)(e,E.rl).actorCapsule.body.world}(e)){var s=(0,m.Xr)(e,E.rl);oe.physicsWorld.removeBody(s.actorCapsule.body)}var u=(0,I.Z)(l.Pa4,(0,C.Z)(o.seatsArray[n])).applyQuaternion(a.rotation).add(a.position).setY(i.position.y);i.position.set(u.x,u.y,u.z),i.rotation.setFromRotationMatrix((new l.yGw).multiplyMatrices((new l.yGw).makeRotationFromQuaternion(a.rotation),(new l.yGw).makeRotationX(-.35)))},W=n(47396),Y=n(73505),X=function(e,t){var n=(0,m.Ei)(e,A.z),r=(0,m.Xr)(e,x.U),i=(0,m.Ei)(e,E.rl);if("onAdded"!=t.phase)if("onRemoved"!=t.phase){if(void 0!=i&&i.initialized){isNaN(n.body.position.x)&&n.body.position.set(0,1,0),r.position.set(n.body.position.x,n.body.position.y,n.body.position.z);var o={collisionFilterMask:Y.p.Default|Y.p.Car,skipBackfaces:!0},a={collisionFilterMask:Y.p.Default|Y.p.Car|Y.p.ActiveCollider,skipBackfaces:!0},s=.17,u=new c.AO(n.body.position.x,n.body.position.y,n.body.position.z),l=new c.AO(n.body.position.x,n.body.position.y-i.rayCastLength-i.raySafeOffset,n.body.position.z),f=new c.AO(n.body.position.x+s,n.body.position.y,n.body.position.z),h=new c.AO(n.body.position.x+s,n.body.position.y-i.rayCastLength-i.raySafeOffset,n.body.position.z),d=new c.AO(n.body.position.x,n.body.position.y,n.body.position.z+s),p=new c.AO(n.body.position.x,n.body.position.y-i.rayCastLength-i.raySafeOffset,n.body.position.z+s),v=new c.AO(n.body.position.x-s,n.body.position.y,n.body.position.z),y=new c.AO(n.body.position.x-s,n.body.position.y-i.rayCastLength-i.raySafeOffset,n.body.position.z),g=new c.AO(n.body.position.x,n.body.position.y,n.body.position.z-s),b=new c.AO(n.body.position.x,n.body.position.y-i.rayCastLength-i.raySafeOffset,n.body.position.z-s),w=oe.physicsWorld.raycastClosest(u,l,a,i.rayResult),R=oe.physicsWorld.raycastClosest(f,h,o,i.rayDontStuckX),T=oe.physicsWorld.raycastClosest(d,p,o,i.rayDontStuckZ),S=oe.physicsWorld.raycastClosest(v,y,o,i.rayDontStuckXm),_=oe.physicsWorld.raycastClosest(g,b,o,i.rayDontStuckZm);if(i.rayHasHit=R||T||S||_,i.rayHasHit){i.playerStuck=0;var P=[i.rayDontStuckX.hitPointWorld.y,i.rayDontStuckZ.hitPointWorld.y,i.rayDontStuckXm.hitPointWorld.y,i.rayDontStuckZm.hitPointWorld.y];i.rayGroundY=P.sort()[0]}else i.playerStuck+=1;W.C&&w&&i.rayResult.body.collisionFilterGroup==Y.p.ActiveCollider?(i.playerInPortal+=1,i.playerInPortal>120&&(i.playerInPortal=0)):i.playerInPortal=0,i.rayGroundHit=w}}else{var k=(0,m.Xr)(e,A.z,!0);k&&oe.physicsWorld.removeBody(k.body)}},Q=n(52020),K=n(72044);function J(e,t,n){e=e.clone();var r=(0,K.J)(e,{type:K.J.Type.MESH});r.collisionFilterGroup=Y.p.TrimeshColliders;var i=new c.uT({mass:n});return i.addShape(r,t),i}function $(e){var t=(0,m.Xr)(e,k.o),n=(0,m.Xr)(e,x.U),r=new c.xu(new c.AO(t.scale.x,t.scale.y,t.scale.z)),i=new c.uT({mass:t.mass});return t.position?i.position.set(t.position.x,t.position.y,t.position.z):i.position.set(n.position.x,n.position.y,n.position.z),t.quaternion&&i.quaternion.set(t.quaternion.x,t.quaternion.y,t.quaternion.z,t.quaternion.w),i.addShape(r),i}var ee=function(e,t){if("onRemoved"!==t.phase){var n,r=(0,m.Ei)(e,k.o);if((0,m.tu)(e,Q.S)){var i=(0,m.Xr)(e,Q.S).value;i instanceof l.Kj0&&i.geometry.computeBoundingBox()}switch(console.log("Adding collider of type",r.type),r.type){case"box":n=$(e);break;case"ground":n=function(e){var t=(0,m.Xr)(e,k.o),n=(0,m.Xr)(e,x.U),r=new c.JO,i=new c.uT({mass:0});return i.quaternion.setFromAxisAngle(new c.AO(1,0,0),-Math.PI/2),t.position?i.position.set(t.position.x,t.position.y,t.position.z):i.position.set(n.position.x,n.position.y,n.position.z),i.addShape(r),i}(e);break;case"cylinder":n=function(e){var t=(0,m.Xr)(e,k.o),n=((0,m.Xr)(e,x.U),new c.Ab(t.scale.x,t.scale.y,2*t.scale.z,20)),r=new c.uT({mass:t.mass});return r.addShape(n),t.position,r.position.set(t.position.x,t.position.y,t.position.z),t.quaternion&&r.quaternion.set(t.quaternion.x,t.quaternion.y,t.quaternion.z,t.quaternion.w),r}(e);break;case"sphere":n=function(e){var t=(0,m.Xr)(e,k.o),n=(0,m.Xr)(e,x.U),r=new c.aL(t.scale.x),i=new c.uT({mass:t.mass});return i.addShape(r),t.position?i.position.set(t.position.x,t.position.y,t.position.z):i.position.set(n.position.x,n.position.y,n.position.z),i.angularDamping=.5,i}(e);break;case"trimesh":n=J(r.mesh,new c.AO,r.mass);break;default:n=$(e)}oe.physicsWorld.addBody(n),r.collider=n}else{var o=(0,m.Xr)(e,k.o,!0);o&&oe.physicsWorld.removeBody(o.collider)}},te=function(e,t){var n=(0,m.Xr)(e,k.o),r=(0,m.Xr)(e,x.U);"onAdded"!=t.phase&&"onRemoved"!=t.phase&&(r.position.set(n.collider.position.x,n.collider.position.y,n.collider.position.z),r.rotation.set(n.collider.quaternion.x,n.collider.quaternion.y,n.collider.quaternion.z,n.collider.quaternion.w))};var ne=function(e,t){if("onAdded"==t.phase){var n=(0,m.Ei)(e,S.t),r=function(e){var t,n,r,i,o,a=(0,m.Ei)(e,S.t),s=((t=new c.AO).set.apply(t,(0,C.Z)(a.colliderTrimOffset)),(n=new c.AO).set.apply(n,(0,C.Z)(a.collidersSphereOffset))),u=a.arrayWheelsPosition,l=a.wheelRadius,f=a.vehicleCollider,h=a.vehicleSphereColliders,d=a.mass;i=f?J(f,new c.AO,d):new c.uT({mass:d});for(var p=0;p<h.length;p++){var v=new c.aL(h[p].scale.x);i.addShape(v,(o=h[p].position,new c.AO(o.x,o.y,o.z)).vadd(s))}i.collisionFilterGroup=Y.p.Car,(r=i.position).set.apply(r,(0,C.Z)(a.startPosition));var y={radius:l,directionLocal:new c.AO(0,-1,0),suspensionStiffness:30,suspensionRestLength:a.suspensionRestLength,frictionSlip:5,dampingRelaxation:2.3,dampingCompression:1.4,maxSuspensionForce:1e5,rollInfluence:.01,axleLocal:new c.AO(-1,0,0),chassisConnectionPointLocal:new c.AO,maxSuspensionTravel:.3,customSlidingRotationalSpeed:-30,useCustomSlidingRotationalSpeed:!0},g=new c._C({chassisBody:i,indexUpAxis:1,indexRightAxis:0,indexForwardAxis:2});return y.chassisConnectionPointLocal.set(u[0].x,u[0].y,u[0].z),g.addWheel(y),y.chassisConnectionPointLocal.set(u[1].x,u[1].y,u[1].z),g.addWheel(y),y.chassisConnectionPointLocal.set(u[2].x,u[2].y,u[2].z),g.addWheel(y),y.chassisConnectionPointLocal.set(u[3].x,u[3].y,u[3].z),g.addWheel(y),g.addToWorld(oe.physicsWorld),g}(e);n.vehiclePhysics=r}else if("onUpdate"==t.phase){var i=(0,m.Ei)(e,x.U),o=(0,m.Xr)(e,S.t);if(null!=o.vehiclePhysics){var a=o.vehiclePhysics,s=o.isMoved,u=a.chassisBody,l=o.arrayWheelsMesh,h=a.currentVehicleSpeedKmHour;if(f.s&&(!s&&(h>1||h<-1)?(a.applyEngineForce(2*h,2),a.applyEngineForce(2*h,3)):!s&&h<.1&&h>-.1?(a.setBrake(.3,0),a.setBrake(.3,1),a.applyEngineForce(-1,2),a.applyEngineForce(-1,3)):!s&&h<1&&h>-1&&(a.setBrake(2,0),a.setBrake(2,1),a.applyEngineForce(-3,2),a.applyEngineForce(-3,3))),i.position.set(u.position.x,u.position.y,u.position.z),i.rotation.set(u.quaternion.x,u.quaternion.y,u.quaternion.z,u.quaternion.w),f.s)for(var d=0;d<l.length;d++)a.updateWheelTransform(d)}else console.warn("User data for vehicle not found")}else t.phase},re=n(53500);function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}new l.Pa4;var oe=function(e){(0,a.Z)(n,e);var t=ie(n);function n(){var e;(0,r.Z)(this,n),(e=t.call(this)).updateType=y.V.Fixed,e.diffSpeed=d.D4.physicsFrameRate/d.D4.networkFramerate,e.freezeTimes=0,e.clientSnapshotFreezeTime=0,e.serverSnapshotFreezeTime=0,e.groundMaterial=new c.F5("groundMaterial"),e.wheelMaterial=new c.F5("wheelMaterial"),e.trimMeshMaterial=new c.F5("trimMeshMaterial"),e.wheelGroundContactMaterial=new c.kp(e.wheelMaterial,e.groundMaterial,{friction:.3,restitution:.3,contactEquationStiffness:1e8,contactEquationRelaxation:3,frictionEquationStiffness:1e8}),e.physicsFrameRate=d.D4.physicsFrameRate,e.physicsFrameTime=1/e.physicsFrameRate,e.physicsMaxPrediction=e.physicsFrameRate,n.serverOnlyRigidBodyCollides=!1,n.simulate=f.s,n.frame=0,n.physicsWorld=new c.q3,n.physicsWorld.allowSleep=!1,n.physicsWorld.gravity.set(0,-9.81,0),n.physicsWorld.broadphase=new c.BQ(n.physicsWorld),e.parallelPairs=[];return p.NL.instance.addEventListener(p.NL.EVENTS.ENABLE_SCENE,(function(e){n.simulate=e.enable})),e}return(0,i.Z)(n,[{key:"dispose",value:function(){(0,o.Z)((0,u.Z)(n.prototype),"dispose",this).call(this),this.groundMaterial=null,this.wheelMaterial=null,this.trimMeshMaterial=null,this.wheelGroundContactMaterial=null,n.frame=0,n.physicsWorld.broadphase=null,n.physicsWorld=null}},{key:"execute",value:function(e){var t,r,i,o,a,s,u,c,f,h,d,p,v,y=this;if(null===(t=this.queryResults.collider.added)||void 0===t||t.forEach((function(e){ee(e,{phase:"onAdded"})})),null===(r=this.queryResults.collider.removed)||void 0===r||r.forEach((function(e){ee(e,{phase:"onRemoved"})})),null===(i=this.queryResults.capsuleCollider.all)||void 0===i||i.forEach((function(e){X(e,{phase:"onAdded"})})),null===(o=this.queryResults.capsuleCollider.all)||void 0===o||o.forEach((function(e){X(e,{phase:"onUpdate"})})),null===(a=this.queryResults.capsuleCollider.removed)||void 0===a||a.forEach((function(e){X(e,{phase:"onRemoved"})})),null===(s=this.queryResults.rigidBody.added)||void 0===s||s.forEach((function(e){te(e,{phase:"onAdded"})})),null===(u=this.queryResults.rigidBody.all)||void 0===u||u.forEach((function(e){te(e,{phase:"onUpdate"})})),null===(c=this.queryResults.vehicleBody.added)||void 0===c||c.forEach((function(e){ne(e,{phase:"onAdded"})})),null===(f=this.queryResults.vehicleBody.all)||void 0===f||f.forEach((function(e){var t,n,r,i=(0,m.Xr)(e,R.H).networkId;ne(e,{phase:"onUpdate"}),null===(t=y.queryResults.playerInCar.added)||void 0===t||t.forEach((function(t){var n=(0,m.Xr)(t,L.I);n.networkCarId==i&&z(t,e,n.currentFocusedPart,y.diffSpeed)})),null===(n=y.queryResults.playerInCar.all)||void 0===n||n.forEach((function(t){var n=(0,m.Xr)(t,L.I);if(n.networkCarId==i)switch(n.state){case"onAddEnding":j(t,e,n.currentFocusedPart,y.diffSpeed);break;case"onUpdate":V(t,e,n.currentFocusedPart,y.diffSpeed);break;case"onStartRemove":q(t,e,n.currentFocusedPart,y.diffSpeed)}})),null===(r=y.queryResults.playerInCar.removed)||void 0===r||r.forEach((function(t){var n,r=(0,m.Xr)(e,S.t);if((0,m.tu)(t,R.H))n=(0,m.Xr)(t,R.H).networkId;else for(var i=0;i<r.seatPlane.length;i++)null==r[r.seatPlane[i]]||b.Z.instance.networkObjects[r[r.seatPlane[i]]]||(n=r[r.seatPlane[i]]);for(var o=0;o<r.seatPlane.length;o++)n==r[r.seatPlane[o]]&&G(t,e,o,y.diffSpeed)}))})),null===(h=this.queryResults.vehicleBody.removed)||void 0===h||h.forEach((function(e){ne(e,{phase:"onRemoved"})})),this.queryResults.serverCorrection.all.length>0&&void 0!=b.Z.instance.snapshot){var g={interpolation:(0,T.TK)("x y z quat velocity"),correction:null===(d=w.j.instance)||void 0===d?void 0:d.get(b.Z.instance.snapshot.timeCorrection,!0),new:[]};null===(p=this.queryResults.serverCorrection.all)||void 0===p||p.forEach((function(e){!function(e,t){if((0,m.tu)(e,A.z)){var n=(0,m.Xr)(e,A.z);t.state.push({networkId:t.networkId,x:n.body.position.x,y:n.body.position.y,z:n.body.position.z,qX:n.body.quaternion.x,qY:n.body.quaternion.y,qZ:n.body.quaternion.z,qW:n.body.quaternion.w})}else if((0,m.tu)(e,S.t)){var r=(0,m.Xr)(e,S.t),i=r.vehiclePhysics.chassisBody;r.driver==b.Z.instance.localAvatarNetworkId&&t.state.push({networkId:t.networkId,x:i.position.x,y:i.position.y,z:i.position.z,qX:i.quaternion.x,qY:i.quaternion.y,qZ:i.quaternion.z,qW:i.quaternion.w})}}(e,{state:g.new,networkId:M(e,null)}),function(e,t){if((0,m.tu)(e,A.z)){var n=(0,m.Xr)(e,A.z),r=(0,m.Xr)(e,x.U),i=(0,m.Ei)(e,E.rl);if(!i.initialized)return;var o=n.body.position.x-_.x,a=n.body.position.y-_.y,s=n.body.position.z-_.z;if(isNaN(o))return void(i.animationVelocity=new l.Pa4(0,1,0));_.x=n.body.position.x,_.y=n.body.position.y,_.z=n.body.position.z;var u=(new l._fP).copy(r.rotation).invert();i.animationVelocity=new l.Pa4(o,a,s).applyQuaternion(u)}if(null!=t.correction&&null!=t.snapshot)if((0,m.tu)(e,A.z)){var c=(0,m.Xr)(e,A.z),f=((0,m.Xr)(e,x.U),(0,m.Ei)(e,E.rl));if(!f.initialized)return;P=180/(f.animationVelocity.length()+1);var h=t.correction.x-t.snapshot.x,d=t.correction.y-t.snapshot.y,p=t.correction.z-t.snapshot.z;Math.abs(h)+Math.abs(d)+Math.abs(p)>3?c.body.position.set(t.snapshot.x,t.snapshot.y,t.snapshot.z):c.body.position.set(c.body.position.x-h/P,c.body.position.y-d/P,c.body.position.z-p/P)}else if((0,m.tu)(e,S.t)){var v,y,g,w=(0,m.Xr)(e,S.t),R=w.vehiclePhysics,T=R.chassisBody,k=w.isMoved,O=w.arrayWheelsMesh,M=(w.driver,b.Z.instance.localAvatarNetworkId,R.currentVehicleSpeedKmHour),I=180-M/4;v=t.correction.x-t.snapshot.x,y=t.correction.y-t.snapshot.y,g=t.correction.z-t.snapshot.z;var C=Math.abs(v)+Math.abs(y)+Math.abs(g);C>15?(T.position.x=t.snapshot.x,T.position.y=t.snapshot.y,T.position.z=t.snapshot.z,T.quaternion.x=t.snapshot.qX,T.quaternion.y=t.snapshot.qY,T.quaternion.z=t.snapshot.qZ,T.quaternion.w=t.snapshot.qW):C>.01&&(T.position.x-=v/I,T.position.y-=y/I,T.position.z-=g/I);var D,L,F,Z=null,N=null;L=(new l.USm).setFromQuaternion((new l._fP).set(t.correction.qX,t.correction.qY,t.correction.qZ,t.correction.qW)),F=(new l.USm).setFromQuaternion((new l._fP).set(t.snapshot.qX,t.snapshot.qY,t.snapshot.qZ,t.snapshot.qW)),L.x,F.x,D=L.y-F.y,L.z,F.z,Math.abs(D)>.001&&(Z=(new l.USm).setFromQuaternion((new l._fP).set(T.quaternion.x,T.quaternion.y,T.quaternion.z,T.quaternion.w)),N=(new l._fP).setFromEuler((new l.USm).set(Z.x,Z.y-D/I,Z.z)),T.quaternion.set(N.x,N.y,N.z,N.w)),!k&&(M>1||M<-1)?(R.applyEngineForce(2*M,2),R.applyEngineForce(2*M,3)):!k&&M<.1&&M>-.1?(R.setBrake(.3,0),R.setBrake(.3,1),R.applyEngineForce(-1,2),R.applyEngineForce(-1,3)):!k&&M<1&&M>-1&&(R.setBrake(2,0),R.setBrake(2,1),R.applyEngineForce(-3,2),R.applyEngineForce(-3,3));for(var H=0;H<O.length;H++)O[H].position.set(R.wheelInfos[H].worldTransform.position.x,R.wheelInfos[H].worldTransform.position.y,R.wheelInfos[H].worldTransform.position.z),O[H].quaternion.set(R.wheelInfos[H].worldTransform.quaternion.x,R.wheelInfos[H].worldTransform.quaternion.y,R.wheelInfos[H].worldTransform.quaternion.z,R.wheelInfos[H].worldTransform.quaternion.w)}}(e,{correction:M(e,g.correction),snapshot:M(e,b.Z.instance.snapshot)})})),w.j.instance.add((0,T.Ox)(g.new)),null===(v=this.queryResults.networkInterpolation.all)||void 0===v||v.forEach((function(e){!function(e,t){if(null!=t.snapshot){var n=(0,m.Xr)(e,x.U);if((0,m.tu)(e,E.rl)){var r=(0,m.Ei)(e,E.rl),i=(0,m.Ei)(e,A.z);if(isNaN(t.snapshot.vX))return;r.animationVelocity.set(t.snapshot.vX,t.snapshot.vY,t.snapshot.vZ),i.body.velocity.set(0,0,0),i.body.position.set(t.snapshot.x,t.snapshot.y,t.snapshot.z),n.rotation.set(t.snapshot.qX,t.snapshot.qY,t.snapshot.qZ,t.snapshot.qW)}else if((0,m.tu)(e,k.o)){var o=(0,m.Xr)(e,k.o),a=(0,m.Ei)(e,O.e);a.lastUpdate+a.updateDaley<Date.now()&&void 0!=t.snapshot.qX&&(o.collider.position.set(t.snapshot.x,t.snapshot.y,t.snapshot.z),o.collider.quaternion.set(t.snapshot.qX,t.snapshot.qY,t.snapshot.qZ,t.snapshot.qW),a.lastUpdate=Date.now())}else if((0,m.tu)(e,S.t)){var s=(0,m.Xr)(e,S.t),u=s.vehiclePhysics,c=u.chassisBody,l=s.arrayWheelsMesh;if(s.driver!=b.Z.instance.localAvatarNetworkId&&void 0!=t.snapshot.qX){c.position.set(t.snapshot.x,t.snapshot.y,t.snapshot.z),c.quaternion.set(t.snapshot.qX,t.snapshot.qY,t.snapshot.qZ,t.snapshot.qW);for(var f=0;f<l.length;f++)u.updateWheelTransform(f),l[f].position.set(u.wheelInfos[f].worldTransform.position.x,u.wheelInfos[f].worldTransform.position.y,u.wheelInfos[f].worldTransform.position.z),l[f].quaternion.set(u.wheelInfos[f].worldTransform.quaternion.x,u.wheelInfos[f].worldTransform.quaternion.y,u.wheelInfos[f].worldTransform.quaternion.z,u.wheelInfos[f].worldTransform.quaternion.w)}}}}(e,{snapshot:M(e,g.interpolation)})}))}n.simulate&&(n.frame++,n.physicsWorld.step(this.physicsFrameTime))}}]),n}(v.x);oe.serverCorrectionForRigidBodyTick=1e3,oe.queries={character:{components:[E.rl,R.H]},serverCorrection:{components:[g.$,O.e,R.H]},networkInterpolation:{components:[(0,h.yo)(g.$),O.e,R.H]},capsuleCollider:{components:[A.z,x.U],listen:{added:!0,removed:!0}},collider:{components:[k.o,x.U],listen:{added:!0,removed:!0}},rigidBody:{components:[re.i,x.U],listen:{added:!0}},vehicleBody:{components:[S.t,x.U],listen:{added:!0,removed:!0}},playerInCar:{components:[L.I],listen:{added:!0,removed:!0}}}},35926:function(e,t,n){"use strict";n.d(t,{o:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w);u._schema={}},67200:function(e,t,n){"use strict";n.d(t,{o:function(){return w}});var r=n(13987),i=n(49135),o=n(36595),a=n(52020),s=n(17209),u=n(16090),c=n(49182),l=n(29569),f=n(89306),h=n(65648),d=n(52288);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var i=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var v=function(e){(0,r.Z)(n,e);var t=p(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return n}(h.w);v._schema={value:{type:d.Yk.Ref,default:null}};var m=n(483),y=n(24374),g=n(41091);function b(e,t){b=function(e,t){return new s(e,void 0,t)};var n=(0,i.Z)(RegExp),o=RegExp.prototype,a=new WeakMap;function s(e,t,r){var i=n.call(this,e,t);return a.set(i,r||a.get(e)),i}function u(e,t){var n=a.get(t);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return(0,r.Z)(s,n),s.prototype.exec=function(e){var t=o.exec.call(this,e);return t&&(t.groups=u(t,this)),t},s.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=a.get(this);return o[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"===typeof t){var r=this;return o[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,r)),t.apply(this,e)}))}return o[Symbol.replace].call(this,e,t)},b.apply(this,arguments)}var w=function(e,t){var n,r="object"===typeof t.obj3d,i=function e(t,n,r){var i;if(t){var a=null===(i=n.match(b(/((?:(?!\.)[\s\S])+)(\.(.*))?/,{property:1,nextPath:3})))||void 0===i?void 0:i.groups;if(a){var s=a.property,u=a.nextPath;if(s)return u?e(t[s],u,r):void(t[s]instanceof o.Ilk&&("number"===typeof r||"string"===typeof r)?t[s]=new o.Ilk(r):t[s]=r)}}else console.warn("subj is not an object",t)};n=r?t.obj3d:new t.obj3d,"object"===typeof t.objArgs&&Object.keys(t.objArgs).forEach((function(e){i(n,e,t.objArgs[e])})),t.parentEntity&&(0,u.tu)(t.parentEntity,y.Z)&&(0,g.Q)(e,{objArgs:(0,u.Ei)(t.parentEntity,y.Z)});var c=(0,u.Ei)(e,y.Z);n.traverse((function(e){var n,r,i;e.castShadow=Boolean((null===c||void 0===c?void 0:c.castShadow)||(null===(n=t.objArgs)||void 0===n?void 0:n.castShadow)),e.receiveShadow=Boolean((null===c||void 0===c?void 0:c.receiveShadow)||(null===(r=t.objArgs)||void 0===r?void 0:r.receiveShadow)),e.material&&(null===(i=m.D4.csm)||void 0===i||i.setupMaterial(e.material))})),(0,u.Tk)(e,a.S,{value:n});var l=[];return"Audio"===n.type&&void 0!==n.panner&&l.push(s.iy),"Audio"===n.type&&void 0!==n.panner?l.push(s.iy):"Audio"===n.type?l.push(s.yD):"AudioListener"===n.type?l.push(s.mU):n.isCamera?(l.push(s.q4),n.isOrthographicCamera?l.push(s.ej):n.isPerspectiveCamera&&l.push(s.eK),n.isArrayCamera?l.push(s.uT):"CubeCamera"===n.type?l.push(s.ZX):n.isImmediateRenderObject&&l.push(s.Tu)):n.isLight?(l.push(s.ci),n.isAmbientLight?l.push(s.Y6):n.isDirectionalLight?l.push(s.tA):n.isHemisphereLight?l.push(s.Vi):n.isPointLight?l.push(s.PH):n.isRectAreaLight?l.push(s.cd):n.isSpotLight&&l.push(s.cC)):n.isLightProbe?(l.push(s.CI),n.isAmbientLightProbe?l.push(s.es):n.isHemisphereLightProbe&&l.push(s.AE)):n.isBone?l.push(s.zu):n.isGroup?l.push(s.D2):n.isLOD?l.push(s.rG):n.isMesh?(l.push(s.fc),n.isInstancedMesh?l.push(s.RL):n.isSkinnedMesh&&l.push(s.W9)):n.isLine?(l.push(s.KZ),n.isLineLoop?l.push(s.AE):n.isLineSegments&&l.push(s.Nm)):n.isPoints?l.push(s.Gc):n.isSprite?l.push(s.yW):n.isScene?l.push(s.j0):n.isSky&&l.push(v),l.forEach((function(t){(0,u.Tk)(e,t)})),t.parentEntity&&(0,u.tu)(t.parentEntity,a.S)?(0,u.Xr)(t.parentEntity,a.S).value.add(n):m.D4.scene.add(n),n.entity=e,e}},41091:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var r=n(16090),i=n(24374),o=function(e,t){(0,r.Tk)(e,i.Z);var n=(0,r.Ei)(e,i.Z);n.castShadow=t.objArgs.castShadow||!1,n.receiveShadow=t.objArgs.receiveShadow||!1}},59346:function(e,t,n){"use strict";n.d(t,{q:function(){return h}});var r=n(49182),i=n(39337),o=n(42828),a=n(13987),s=n(29569),u=n(89306),c=n(36595),l=function(){function e(t){(0,r.Z)(this,e),this.width=window?window.width:512,this.height=window?window.height:512,this.camera=new c.iKG(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.scene=new c.xsS,this.shader=this.getShader(),this.cubeLods=t;var n=4*t[0].width,i=t[0].texture,o={format:i.format,magFilter:i.magFilter,minFilter:i.minFilter,type:i.type,generateMipmaps:i.generateMipmaps,anisotropy:i.anisotropy,encoding:i.encoding===c.KC9?c.Inb:i.encoding};o.encoding===c.Inb&&(o.magFilter=c.wem,o.minFilter=c.wem),this.CubeUVRenderTarget=new c.dd2(n,n,o),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=c.g8_,this.objects=[];var a=new c.BKK(1,1),s=[];s.push(new c.FM8(0,0)),s.push(new c.FM8(1,0)),s.push(new c.FM8(2,0)),s.push(new c.FM8(0,1)),s.push(new c.FM8(1,1)),s.push(new c.FM8(2,1));var u=n;n=t[0].width;var l=0,f=4;this.numLods=Math.min(t.length,Math.log(t[0].width)/Math.log(2)-2);for(var h=0;h<this.numLods;h++){var d=.5*(u-u/f);n>16&&(f*=2);for(var p=n>16?6:1,v=0,m=0,y=n,g=0;g<p;g++){for(var b=0;b<6;b++){var w=this.shader.clone();w.uniforms.envMap.value=this.cubeLods[h].texture,w.envMap=this.cubeLods[h].texture,w.uniforms.faceIndex.value=b,w.uniforms.mapSize.value=y;var R=new c.Kj0(a,w);R.position.x=s[b].x*y-d+v,R.position.y=s[b].y*y-d+l+m,R.material.side=c._Li,R.scale.setScalar(y),this.objects.push(R)}m+=1.75*y,v+=1.25*y,y/=2}l+=2*n,n>16&&(n/=2)}}return(0,i.Z)(e,[{key:"update",value:function(e){var t=4*this.cubeLods[0].width;this.camera.left=.5*-t,this.camera.right=.5*t,this.camera.top=.5*-t,this.camera.bottom=.5*t,this.camera.near=0,this.camera.far=1,this.camera.updateProjectionMatrix();for(var n=0;n<this.objects.length;n++)this.scene.add(this.objects[n]);var r=e.toneMapping,i=e.toneMappingExposure,o=e.getRenderTarget();e.toneMapping=c.EoG,e.toneMappingExposure=1,this.CubeUVRenderTarget&&(this.CubeUVRenderTarget.texture.encoding=c.pMV),e.setRenderTarget(this.CubeUVRenderTarget),e.render(this.scene,this.camera),o&&(o.texture.encoding=c.pMV),e.setRenderTarget(o),e.toneMapping=r,e.toneMappingExposure=i,this.CubeUVRenderTarget.texture.encoding=c.pMV;for(var a=0;a<this.objects.length;a++)this.scene.remove(this.objects[a])}},{key:"dispose",value:function(){for(var e=0,t=this.objects.length;e<t;e++)this.objects[e].material.dispose();this.objects[0].geometry.dispose()}},{key:"getShader",value:function(){var e=new c.jyz({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new c.Pa4(1,1,1)}},vertexShader:"precision highp float;\t\t\tvarying vec2 vUv;\t\t\tvoid main() {\t\t\t  vUv = uv;\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t}",fragmentShader:"precision highp float;\t\t\tvarying vec2 vUv;\t\t\tuniform samplerCube envMap;\t\t\tuniform float mapSize;\t\t\tuniform vec3 testColor;\t\t\tuniform int faceIndex;\t\t\t\t\t\tvoid main() {\t\t\t  vec3 sampleDirection;\t\t\t  vec2 uv = vUv;\t\t\t  uv = uv * 2.0 - 1.0;\t\t\t  uv.y *= -1.0;\t\t\t  if(faceIndex == 0) {\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t  } else if(faceIndex == 1) {\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t  } else if(faceIndex == 2) {\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t  } else if(faceIndex == 3) {\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t  } else if(faceIndex == 4) {\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t  } else {\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t  }\t\t\t  vec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t  gl_FragColor = linearToOutputTexel( color );\t\t\t}",blending:c.jFi});return e.type="PMREMCubeUVPacker",e}}]),e}();function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=f(n);function n(){var e;return(0,r.Z)(this,n),e=t.call(this),n.material=new c.jyz({fragmentShader:n.shader.fragmentShader,vertexShader:n.shader.vertexShader,uniforms:c.rDY.clone(n.shader.uniforms),side:c._Li,fog:!0}),e.skyScene=new c.xsS,e.cubeCamera=new c._am(1,1e5,new c.oAp(512)),e.skyScene.add(e.cubeCamera),e.sky=new c.Kj0(n.geometry,n.material),e.sky.name="Sky",e.add(e.sky),e._inclination=0,e._azimuth=.15,e._distance=8e3,e.updateSunPosition(),e}return(0,i.Z)(n,[{key:"updateSunPosition",value:function(){var e=Math.PI*(this._inclination-.5),t=2*Math.PI*(this._azimuth-.5),n=this._distance,r=n*Math.cos(t),i=n*Math.sin(t)*Math.sin(e),o=n*Math.sin(t)*Math.cos(e);this.sky.material.uniforms.sunPosition.value.set(r,i,o).normalize(),this.sky.scale.set(n,n,n)}},{key:"generateEnvironmentMap",value:function(e){this.skyScene.add(this.sky),this.cubeCamera.update(e,this.skyScene),this.add(this.sky);var t=new c.anP(e),n=t.fromCubemap(this.cubeCamera.renderTarget.texture),r=new l([n]),i=r.CubeUVRenderTarget.texture;return r.update(e),t.dispose(),r.dispose(),i}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&this.remove(this.sky),(0,o.Z)((0,u.Z)(n.prototype),"copy",this).call(this,e,t),t){var r=e.children.indexOf(e.sky);-1!==r&&(this.sky=this.children[r])}return this.turbidity=e.turbidity,this.rayleigh=e.rayleigh,this.luminance=e.luminance,this.mieCoefficient=e.mieCoefficient,this.mieDirectionalG=e.mieDirectionalG,this.inclination=e.inclination,this.azimuth=e.azimuth,this.distance=e.distance,this}},{key:"turbidity",get:function(){return this.sky.material.uniforms.turbidity.value},set:function(e){this.sky.material.uniforms.turbidity.value=e}},{key:"rayleigh",get:function(){return this.sky.material.uniforms.rayleigh.value},set:function(e){this.sky.material.uniforms.rayleigh.value=e}},{key:"luminance",get:function(){return this.sky.material.uniforms.luminance.value},set:function(e){this.sky.material.uniforms.luminance.value=e}},{key:"mieCoefficient",get:function(){return this.sky.material.uniforms.mieCoefficient.value},set:function(e){this.sky.material.uniforms.mieCoefficient.value=e}},{key:"mieDirectionalG",get:function(){return this.sky.material.uniforms.mieDirectionalG.value},set:function(e){this.sky.material.uniforms.mieDirectionalG.value=e}},{key:"inclination",get:function(){return this._inclination},set:function(e){this._inclination=e,this.updateSunPosition()}},{key:"azimuth",get:function(){return this._azimuth},set:function(e){this._azimuth=e,this.updateSunPosition()}},{key:"distance",get:function(){return this._distance},set:function(e){this._distance=e,this.updateSunPosition()}}]),n}(c.Tme);h.shader={uniforms:c.rDY.merge([c.rBU.fog,{luminance:{value:1},turbidity:{value:10},rayleigh:{value:2},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new c.Pa4}}]),vertexShader:"\n#include <common>\n#include <fog_pars_vertex>\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\nvoid main() {\n  #include <begin_vertex>\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n  #include <project_vertex>\n  vSunDirection = normalize( sunPosition );\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n  #include <fog_vertex>\n}\n",fragmentShader:"\n#include <common>\n#include <fog_pars_fragment>\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nuniform float luminance;\nuniform float mieDirectionalG;\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n  gl_FragColor = vec4( retColor, 1.0 );\n  #include <fog_fragment>\n}\n"},h.geometry=new c.nvb(1,1,1)},52020:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={value:{type:u.Yk.Ref,default:null}}},17209:function(e,t,n){"use strict";n.d(t,{yD:function(){return c},mU:function(){return l},iy:function(){return f},uT:function(){return h},q4:function(){return d},ZX:function(){return p},ej:function(){return v},eK:function(){return m},Tu:function(){return y},Y6:function(){return g},es:function(){return b},tA:function(){return w},Vi:function(){return R},AE:function(){return T},ci:function(){return E},CI:function(){return A},PH:function(){return x},cd:function(){return S},cC:function(){return _},zu:function(){return P},D2:function(){return k},RL:function(){return O},rG:function(){return M},KZ:function(){return I},Nm:function(){return C},fc:function(){return D},Gc:function(){return L},W9:function(){return F},yW:function(){return Z},j0:function(){return N},i9:function(){return H}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var c=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);c.isObject3DTagComponent=!0;var l=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l.isObject3DTagComponent=!0;var f=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);f.isObject3DTagComponent=!0;var h=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);h.isObject3DTagComponent=!0;var d=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);d.isObject3DTagComponent=!0;var p=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);p.isObject3DTagComponent=!0;var v=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);v.isObject3DTagComponent=!0;var m=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);m.isObject3DTagComponent=!0;var y=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);y.isObject3DTagComponent=!0;var g=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);g.isObject3DTagComponent=!0;var b=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);b.isObject3DTagComponent=!0;var w=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);w.isObject3DTagComponent=!0;var R=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);R.isObject3DTagComponent=!0;var T=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);T.isObject3DTagComponent=!0;var E=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);E.isObject3DTagComponent=!0;var A=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);A.isObject3DTagComponent=!0;var x=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);x.isObject3DTagComponent=!0;var S=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);S.isObject3DTagComponent=!0;var _=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);_.isObject3DTagComponent=!0;var P=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);P.isObject3DTagComponent=!0;var k=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);k.isObject3DTagComponent=!0;var O=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);O.isObject3DTagComponent=!0;var M=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);M.isObject3DTagComponent=!0;var I=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);I.isObject3DTagComponent=!0,(function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w)).isObject3DTagComponent=!0;var C=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);C.isObject3DTagComponent=!0;var D=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);D.isObject3DTagComponent=!0;var L=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);L.isObject3DTagComponent=!0;var F=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);F.isObject3DTagComponent=!0;var Z=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);Z.isObject3DTagComponent=!0;var N=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);N.isObject3DTagComponent=!0;var H=function(e){(0,i.Z)(n,e);var t=u(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);H.isObject3DTagComponent=!0},24374:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},96808:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},53516:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},17405:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var r={Disabled:"disabled",Linear:"linear",Exponential:"exponential"}},39614:function(e,t,n){"use strict";n.d(t,{Xn:function(){return Ae}});var r=n(35490),i=n(483),o=n(16090),a=n(77301),s=(n(49026),n(46104)),u=(n(10579),n(53500),n(86693)),c=(n(94223),n(98847),n(82552)),l=n(36595),f=n(88334),h=n(47396),d=n(7331),p=n(17158),v=n(61467),m=n(10651),y=n(52020),g=n(34452),b=n(50760);var w,R=n(12665),T=n(15194),E=n(5450),A=n(97762),x=n(45744),S=n(5418),_=function(e,t){var n=(0,o.Ei)(e,u.t);if(!h.C||n.driver==v.Z.instance.localAvatarNetworkId){var r=n.vehiclePhysics;r.setBrake(0,0),r.setBrake(0,1),r.setBrake(0,2),r.setBrake(0,3),r.applyEngineForce(n.maxForce*t.direction*-1,2),r.applyEngineForce(n.maxForce*t.direction*-1,3),n.isMoved=!0}},P=function(e,t){var n=(0,o.Ei)(e,u.t);n.isMoved=!1},k=function(e,t){var n=(0,o.Xr)(e,d.I).data.get(t.input),r=(0,o.Ei)(e,u.t);if(!h.C||r.driver==v.Z.instance.localAvatarNetworkId){var i=r.vehiclePhysics;i.setBrake(0,0),i.setBrake(0,1),i.setBrake(0,2),i.setBrake(0,3),n.type===S.n.TWODIM&&(i.applyEngineForce(r.maxForce*n.value[0]*-1,2),i.applyEngineForce(r.maxForce*n.value[0]*-1,3),i.setSteeringValue(r.maxSteerVal*n.value[1],0),i.setSteeringValue(r.maxSteerVal*n.value[1],1)),r.isMoved=!0}},O=function(e,t){var n=(0,o.Ei)(e,u.t);if(!h.C||n.driver==v.Z.instance.localAvatarNetworkId){var r=n.vehiclePhysics;r.setBrake(t.on?10:0,0),r.setBrake(t.on?10:0,1),r.setBrake(t.on?10:0,2),r.setBrake(t.on?10:0,3)}},M=function(e,t){var n=(0,o.Ei)(e,u.t);if(!h.C||n.driver==v.Z.instance.localAvatarNetworkId){var r=n.vehiclePhysics;r.setSteeringValue(n.maxSteerVal*t.direction,0),r.setSteeringValue(n.maxSteerVal*t.direction,1)}},I=(function(){var e=new Map;e.set(x.kT.LeftButton,E.Q.PRIMARY),e.set(x.kT.RightButton,E.Q.SECONDARY),e.set(x.kT.MiddleButton,E.Q.INTERACT),e.set(x.kT.MouseMovement,E.Q.MOUSE_MOVEMENT),e.set(x.kT.MousePosition,E.Q.SCREENXY),e.set(x.kT.MouseClickDownPosition,E.Q.SCREENXY_START),e.set(x.kT.MouseClickDownTransformRotation,E.Q.ROTATION_START),e.set(x.kT.MouseClickDownMovement,E.Q.LOOKTURN_PLAYERONE),e.set(x.kT.MouseScroll,E.Q.CAMERA_SCROLL),e.set(x.p6.A,E.Q.JUMP),e.set(x.p6.B,E.Q.CROUCH),e.set(x.p6.X,E.Q.WALK),e.set(x.p6.Y,E.Q.INTERACT),e.set(x.p6.DPad1,E.Q.FORWARD),e.set(x.p6.DPad2,E.Q.BACKWARD),e.set(x.p6.DPad3,E.Q.LEFT),e.set(x.p6.DPad4,E.Q.RIGHT),e.set(x.ez.Left,E.Q.MOVEMENT_PLAYERONE),e.set(x.ez.Right,E.Q.LOOKTURN_PLAYERONE),e.set("w",E.Q.FORWARD),e.set("a",E.Q.LEFT),e.set("s",E.Q.BACKWARD),e.set("d",E.Q.RIGHT),e.set("e",E.Q.INTERACT),e.set(" ",E.Q.JUMP),e.set("shift",E.Q.CROUCH),e.set("p",E.Q.POINTER_LOCK),e.set("c",E.Q.SECONDARY)}(),w={},(0,T.Z)(w,E.Q.SECONDARY,{ended:[]}),(0,T.Z)(w,E.Q.INTERACT,{started:[{behavior:function(e){var t=null,n=(0,o.Xr)(e,u.t),i=null;r.s?(i=n.wantsExit.filter((function(e){return null!=e}))[0],console.warn("wantsExit: "+n.wantsExit)):i=v.Z.instance.localAvatarNetworkId;for(var s=0;s<n.seatPlane.length;s++)i==n[n.seatPlane[s]]&&(t=v.Z.instance.networkObjects[i].component.entity);(0,o.Ei)(t,R.I).state="onStartRemove",function(e,t,n){if(!h.C){var r=(0,o.Xr)(e,a.H);v.Z.instance.worldState.editObjects.push({networkId:r.networkId,ownerId:r.ownerId,component:t,state:n.state,currentId:n.networkCarId,value:n.currentFocusedPart,whoIsItFor:n.whoIsItFor})}}(t,"PlayerInCar",{state:"onStartRemove",whoIsItFor:"otherPlayers"})},args:{phase:A.q.STARTED}}]}),(0,T.Z)(w,E.Q.FORWARD,{started:[{behavior:_,args:{direction:1}}],continued:[{behavior:_,args:{direction:1}}],ended:[{behavior:P,args:{direction:0}}]}),(0,T.Z)(w,E.Q.BACKWARD,{started:[{behavior:_,args:{direction:-1}}],continued:[{behavior:_,args:{direction:-1}}],ended:[{behavior:P,args:{direction:0}}]}),(0,T.Z)(w,E.Q.LEFT,{started:[{behavior:M,args:{direction:1}}],continued:[{behavior:M,args:{direction:1}}],ended:[{behavior:M,args:{direction:0}}]}),(0,T.Z)(w,E.Q.RIGHT,{started:[{behavior:M,args:{direction:-1}}],continued:[{behavior:M,args:{direction:-1}}],ended:[{behavior:M,args:{direction:0}}]}),(0,T.Z)(w,E.Q.JUMP,{started:[{behavior:O,args:{on:!0}}],continued:[{behavior:O,args:{on:!0}}],ended:[{behavior:O,args:{on:!1}}]}),(0,T.Z)({},E.Q.MOVEMENT_PLAYERONE,{started:[{behavior:k,args:{input:E.Q.MOVEMENT_PLAYERONE,inputType:S.n.TWODIM}}],changed:[{behavior:k,args:{input:E.Q.MOVEMENT_PLAYERONE,inputType:S.n.TWODIM}}]}),n(67200)),C=function(e,t){console.warn(t.objArgs),(0,s.bz)({type:t.objArgs.type},t.objArgs.position,t.objArgs.quaternion,t.objArgs.scale,t.objArgs.mesh)},D={infoBox:function(e,t){return{action:"infoBox",payload:{name:e.interactionText,url:e.payloadUrl,buyUrl:e.payloadBuyUrl,learnMoreUrl:e.payloadLearnMoreUrl,modelUrl:e.payloadModelUrl,htmlContent:e.payloadHtmlContent},interactionText:e.interactionText}},link:function(e,t){return{action:"link",payload:{name:e.interactionText,url:e.payloadUrl},interactionText:e.interactionText}}},L=function(e,t,n,r,i){var a=(0,o.Xr)(r,p.R),s={type:b.Pf.EVENTS.OBJECT_ACTIVATION};a.data&&"undefined"!==typeof a.data.action&&(s.action=a.data.action,s.payload=a.data.payload,s.interactionText=a.data.interactionText),g.NL.instance.dispatchEvent(s)},F=function(e,t,n,r,i){var a=t.focused,s=(0,o.Xr)(r,p.R),u={type:b.Pf.EVENTS.OBJECT_HOVER,focused:a};s.data&&("undefined"!==typeof s.data.action&&(u.action=s.data.action,u.payload=s.data.payload),u.interactionText=s.data.interactionText),g.NL.instance.dispatchEvent(u),(0,o.tu)(r,y.S)},Z=n(99887),N=n(31345),H=n(44978),z=n(49182),j=n(39337),U=function(){function e(t){if((0,z.Z)(this,e),this.values=[],this.pos=0,console.log("Constructing ring buffer"),t<0)throw new RangeError("The size does not allow negative values.");this.size=t}return(0,j.Z)(e,[{key:"getSize",value:function(){return this.size}},{key:"getPos",value:function(){return this.pos}},{key:"getBufferLength",value:function(){return this.values.length}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.values[e.pos]=t,e.pos=(e.pos+1)%e.size}))}},{key:"addSingle",value:function(e){this.values[this.pos]=e,this.pos=(this.pos+1)%this.size}},{key:"get",value:function(e){if(e<0&&(e+=this.values.length),!(e<0||e>this.values.length))return this.values.length<this.size?this.values[e]:this.values[(this.pos+e)%this.size]}},{key:"getFirst",value:function(){return this.get(0)}},{key:"getLast",value:function(){return this.get(-1)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e<0&&(e+=this.values.length),e<0||e>this.values.length)return[];var n=this.toArray(),r=n.splice(e,t);return this.fromArray(n),r}},{key:"pop",value:function(){return this.remove(0)[0]}},{key:"popLast",value:function(){return this.remove(-1)[0]}},{key:"toArray",value:function(){return this.values.slice(this.pos).concat(this.values.slice(0,this.pos))}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))throw new TypeError("Input value is not an array.");t&&this.resize(e.length),0!==this.size&&(this.values=e.slice(-this.size),this.pos=this.values.length%this.size)}},{key:"clear",value:function(){this.values=[],this.pos=0}},{key:"resize",value:function(e){if(e<0)throw new RangeError("The size does not allow negative values.");if(0===e)this.clear();else if(e!==this.size){var t=this.toArray();this.fromArray(t.slice(-e)),this.pos=this.values.length%e}this.size=e}},{key:"full",value:function(){return this.values.length===this.size}},{key:"empty",value:function(){return 0===this.values.length}}],[{key:"fromArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new e(n);return r.fromArray(t,0===n),r}}]),e}();function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,T.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(){function e(t){var r=this,o=t.scene,a=t.renderer,s=t.meshFilePath,u=t.videoFilePath,c=t.frameRate,f=void 0===c?25:c,h=t.loop,d=void 0===h||h,p=t.autoplay,v=void 0===p||p,m=t.scale,y=void 0===m?1:m,b=t.keyframesToBufferBeforeStart,w=void 0===b?200:b;(0,z.Z)(this,e),this.frameRate=30,this.speed=1,this._scale=1,this._prevFrame=0,this.currentKeyframe=0,this._video=null,this._videoTexture=null,this._loop=!0,this._isinitialized=!1,this.tempBufferObject={frameNumber:0,keyframeNumber:0,bufferGeometry:null},this.numberOfKeyframes=0,this.numberOfIframes=0;var R=new Worker(new URL(n.p+n.u(3290),n.b));this._worker=R;R.onmessage=function(e){switch(e.data.type){case"initialized":console.log("Worker initialized");break;case"framedata":!function(e){var t=new l.u9r;t.setIndex(new l.lCJ(e.keyframeBufferObject.bufferGeometry.index,1)),t.setAttribute("position",new l.a$l(e.keyframeBufferObject.bufferGeometry.position,3)),t.setAttribute("uv",new l.a$l(e.keyframeBufferObject.bufferGeometry.uv,2)),r.meshBuffer.add(G(G({},e.keyframeBufferObject),{},{bufferGeometry:t}))}(e.data.payload)}},this.keyframesToBufferBeforeStart=w,this.scene=o,this.renderer=a,this.meshFilePath=s,this.manifestFilePath=s.replace("drcs","manifest"),this._loop=d,this._scale=y,this._video=i.D4.createElement("video",{crossorigin:"anonymous",loop:!0,src:u,style:{position:"fixed",zIndex:"-1",top:"0",left:"0",width:"1px"},playbackRate:1}),this._videoTexture=new i.fO(this._video),this._videoTexture.encoding=l.knz,this.frameRate=f,this.videoUpdateHandler=this.videoUpdateHandler.bind(this),this._video.requestVideoFrameCallback(this.videoUpdateHandler),this.material=new l.vBJ({map:this._videoTexture}),this.mesh=new l.Kj0(new l.BKK(1e-5,1e-5),this.material),this.mesh.scale.set(this._scale,this._scale,this._scale),this.scene.add(this.mesh);var T=new XMLHttpRequest;T.onreadystatechange=function(){var e;if(4===T.readyState){r.fileHeader=JSON.parse(T.responseText),r.frameRate=r.fileHeader.frameRate;var t=r.fileHeader.frameData.filter((function(e){return e.keyframeNumber!==e.frameNumber})).length,n=r.fileHeader.frameData.filter((function(e){return e.keyframeNumber===e.frameNumber})).length;if(r.numberOfIframes=t,r.numberOfKeyframes=n,r.meshBuffer=new U(n),r.iframeVertexBuffer=new U(t),v)if(i.D4.hasUserEngaged)r.play();else{null===(e=g.NL.instance)||void 0===e||e.addEventListener(g.NL.EVENTS.USER_ENGAGE,(function e(){var t;r.play(),null===(t=g.NL.instance)||void 0===t||t.removeEventListener(g.NL.EVENTS.USER_ENGAGE,e)}))}R.postMessage({type:"initialize",payload:{meshFilePath:s,numberOfKeyframes:r.numberOfKeyframes,fileHeader:r.fileHeader}}),r._isinitialized=!0}},T.open("GET",this.manifestFilePath,!0),T.send()}return(0,j.Z)(e,[{key:"videoUpdateHandler",value:function(e,t){if(!this._isinitialized)return console.warn("Not inited");var n=Math.round(25*t.mediaTime),r=this.fileHeader.frameData[n].keyframeNumber;if(n!==this._prevFrame){if(this._prevFrame=n,r!==this.currentKeyframe){this.currentKeyframe=r;var i=this.getPositionInKeyframeBuffer(r);this.mesh.geometry=this.meshBuffer.get(i).bufferGeometry}else{var o=this.getPositionInIFrameBuffer(n);void 0!==this.iframeVertexBuffer.get(o)?this.mesh.geometry=this.iframeVertexBuffer.get(o).vertexBuffer:console.warn("Skipped iframe playback, not in buffer")}this.mesh.material.needsUpdate=!0}this._video.requestVideoFrameCallback(this.videoUpdateHandler)}},{key:"play",value:function(){var e=this,t=setInterval((function(){e.meshBuffer&&e.meshBuffer.getBufferLength()>=e.keyframesToBufferBeforeStart&&(clearInterval(t),e._video.play(),e.mesh.visible=!0)}),1e3/60);this._bufferingTimer=t}},{key:"getPositionInKeyframeBuffer",value:function(e){for(var t=this.meshBuffer.getBufferLength();t>=0;t--)if(this.meshBuffer.get(t)&&e==this.meshBuffer.get(t).frameNumber&&e==this.meshBuffer.get(t).keyframeNumber)return t;return-1}},{key:"getPositionInIFrameBuffer",value:function(e){for(var t=this.iframeVertexBuffer.getBufferLength();t>=0;t--)if(this.iframeVertexBuffer.get(t)&&e==this.iframeVertexBuffer.get(t).frameNumber)return t;return-1}},{key:"dispose",value:function(){var e,t;if(this._isinitialized=!1,null===(e=this._worker)||void 0===e||e.terminate(),this._video&&(this._video=null,this._videoTexture.dispose(),this._videoTexture=null),this.meshBuffer){for(var n=0;n<this.meshBuffer.getBufferLength();n++){var r=this.meshBuffer.get(n);r&&r.bufferGeometry instanceof l.u9r&&(null===(t=r.bufferGeometry)||void 0===t||t.dispose())}this.meshBuffer.clear()}this._bufferingTimer&&clearInterval(this._bufferingTimer)}},{key:"currentFrame",get:function(){return this.currentKeyframe}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}}]),e}(),V=n(13987),W=n(29569),Y=n(89306),X=n(65648);function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var K=function(e){(0,V.Z)(n,e);var t=Q(n);function n(){return(0,z.Z)(this,n),t.apply(this,arguments)}return n}(X.w),J=function(e){return H.n2?null===e||void 0===e?void 0:e._isPlaying:e&&!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)},$=function(e,t,n,r,i){if(!(0,o.Xr)(r,K)){var a=(0,o.Xr)(r,y.S).value;J(a.el)?null===a||void 0===a||a.pause():null===a||void 0===a||a.play()}},ee=function(e,t,n,r,i){var a=t.focused,s=(0,o.Xr)(r,y.S).value.el;g.NL.instance.dispatchEvent({type:b.Pf.EVENTS.OBJECT_HOVER,focused:a,action:"mediaSource",interactionText:J(s)?"pause video":"play video"})};function te(e,t){(0,I.o)(e,{obj3d:new l.Tme,objArgs:t.objArgs}),ne(e)}function ne(e){var t={onInteraction:$,onInteractionFocused:ee,data:{action:"mediaSource"}};(0,o.Tk)(e,p.R,t);var n=function(e){g.NL.instance.dispatchEvent({type:b.Pf.EVENTS.OBJECT_HOVER,focused:!0,action:"mediaSource",interactionText:e?"pause media":"play media"})},r=(0,o.Xr)(e,y.S).value.el;r&&(r.addEventListener("play",(function(){n(!0)})),r.addEventListener("pause",(function(){n(!1)})))}var re=n(77213),ie=n(75275),oe=n(41091),ae=n(59346),se=n(77866);function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var ce=[1,1,1],le=function(e){(0,V.Z)(n,e);var t=ue(n);function n(){var e;return(0,z.Z)(this,n),(e=t.call(this)).scale=[].concat(ce),e.scale=[].concat(ce),e}return(0,j.Z)(n,[{key:"copy",value:function(e){return this.scale=(0,se.Z)(e.scale),this}},{key:"reset",value:function(){this.scale=[].concat(ce)}}]),n}(X.w);var fe=n(52288);function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var de=function(e){(0,V.Z)(n,e);var t=he(n);function n(){return(0,z.Z)(this,n),t.apply(this,arguments)}return n}(X.w);de._schema={type:{type:fe.Yk.String,default:"disabled"},color:{type:fe.Yk.String,default:"#FFFFFF"},density:{type:fe.Yk.Number,default:.0025},near:{type:fe.Yk.Number,default:1},far:{type:fe.Yk.Number,default:1e3}};var pe=n(17405);function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var me=function(e){(0,V.Z)(n,e);var t=ve(n);function n(){return(0,z.Z)(this,n),t.apply(this,arguments)}return n}(X.w),ye=n(17209);function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var be=function(e){(0,V.Z)(n,e);var t=ge(n);function n(){return(0,z.Z)(this,n),t.apply(this,arguments)}return n}(X.w),we=n(96808);function Re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Y.Z)(e);if(t){var i=(0,Y.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,W.Z)(this,n)}}var Te=function(e){(0,V.Z)(n,e);var t=Re(n);function n(){return(0,z.Z)(this,n),t.apply(this,arguments)}return n}(X.w);n(30307);function Ee(e,t){(0,o.Tk)(e,t.component)}var Ae={"ambient-light":{behaviors:[{behavior:I.o,args:{obj3d:l.Mig},values:[{from:"color",to:"color"},{from:"intensity",to:"intensity"}]}],components:[{type:ye.ci}]},collidable:{components:[{type:me}]},"floor-plan":{},"gltf-model":{behaviors:[{behavior:function(e,t){(0,o.Tk)(e,t.component,t.objArgs)},args:{component:f.g},values:[{from:"src",to:"url"}]},{behavior:function(e){console.log("*********** ADDING WORLD COLLIDERS TO ONLOADED")}}]},interact:{behaviors:[{behavior:function(e,t){if(t.objArgs.interactable){var n=D[t.objArgs.interactionType](t.objArgs,e);if(n){var r={onInteraction:L,onInteractionFocused:F,data:n};(0,o.Tk)(e,p.R,r)}else console.error("unsupported interactionType",t.objArgs.interactionType)}},values:[{from:"interactable",to:"interactable"},{from:"interactionType",to:"interactionType"},{from:"interactionText",to:"interactionText"},{from:"payloadName",to:"payloadName"},{from:"payloadUrl",to:"payloadUrl"},{from:"payloadBuyUrl",to:"payloadBuyUrl"},{from:"payloadLearnMoreUrl",to:"payloadLearnMoreUrl"},{from:"payloadHtmlContent",to:"payloadHtmlContent"},{from:"payloadModelUrl",to:"payloadModelUrl"}]}]},"ground-plane":{behaviors:[{behavior:I.o,args:{obj3d:new l.Kj0(new l.trn(1e3,32).rotateX(-Math.PI/2),new l.xoR({color:new l.Ilk(.3134105533361435,.31341053336143493,.30206481294706466)})),objArgs:{receiveShadow:!0}},values:[{from:"color",to:"material.color"}]}]},"hemisphere-light":{behaviors:[{behavior:I.o,args:{obj3d:l.vmT},values:[{from:"skyColor",to:"skyColor"},{from:"groundColor",to:"groundColor"},{from:"intensity",to:"intensity"}]}]},"point-light":{behaviors:[{behavior:I.o,args:{obj3d:l.cek},values:[{from:"color",to:"color"},{from:"intensity",to:"intensity"},{from:"distance",to:"distance"},{from:"decay",to:"decay"}]}]},skybox:{behaviors:[{behavior:function(e,t){if(h.C){var n=i.D4.renderer,r=new l.anP(n);if("cubemap"===t.objArgs.skytype)i.D4.scene.background=(new l.cBK).setPath(t.objArgs.texture).load(["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"],(function(e){var t=r.fromCubemap(e).texture;i.D4.scene.background=t,i.D4.scene.environment=t,e.dispose(),r.dispose()}));else if("equirectangular"===t.objArgs.skytype)(new l.dpR).load(t.objArgs.texture,(function(e){var t=r.fromEquirectangular(e).texture;i.D4.scene.background=t,i.D4.scene.environment=t,i.D4.scene.background.encoding=l.knz,i.D4.scene.background.mapping=l.dSO,e.dispose(),r.dispose()}));else{(0,I.o)(e,{obj3d:ae.q,objArgs:t.objArgs}),(0,o.Tk)(e,le);var a=(0,o.Xr)(e,y.S).value;(0,o.Ei)(e,le).scale=[t.objArgs.distance,t.objArgs.distance,t.objArgs.distance];var s=ae.q.material.uniforms,u=new l.Pa4,c=Math.PI*(t.objArgs.inclination-.5),f=2*Math.PI*(t.objArgs.azimuth-.5);u.x=Math.cos(f),u.y=Math.sin(f)*Math.sin(c),u.z=Math.sin(f)*Math.cos(c),s.mieCoefficient.value=t.objArgs.mieCoefficient,s.mieDirectionalG.value=t.objArgs.mieDirectionalG,s.rayleigh.value=t.objArgs.rayleigh,s.turbidity.value=t.objArgs.turbidity,s.sunPosition.value=u,i.D4.csm&&i.D4.csm.lightDirection.set(-u.x,-u.y,-u.z);var d=a.generateEnvironmentMap(n);i.D4.scene.background=d,i.D4.scene.environment=d}}},values:[{from:"texture",to:"texture"},{from:"skytype",to:"skytype"},{from:"distance",to:"distance"},{from:"inclination",to:"inclination"},{from:"azimuth",to:"azimuth"},{from:"mieCoefficient",to:"mieCoefficient"},{from:"mieDirectionalG",to:"mieDirectionalG"},{from:"rayleigh",to:"rayleigh"},{from:"turbidity",to:"turbidity"}]}]},image:{behaviors:[{behavior:function(e,t){},values:[{from:"src",to:"src"},{from:"projection",to:"projection"},{from:"controls",to:"controls"},{from:"alphaMode",to:"alphaMode"},{from:"alphaCutoff",to:"alphaCutoff"}]}]},video:{behaviors:[{behavior:h.C?function(e,t){(0,I.o)(e,{obj3d:new Z.Z(i.D4.audioListener),objArgs:t.objArgs}),ne(e)}:te,values:[{from:"src",to:"src"},{from:"projection",to:"projection"},{from:"controls",to:"controls"},{from:"autoPlay",to:"autoPlay"},{from:"loop",to:"loop"},{from:"audioType",to:"audioType"},{from:"volume",to:"volume"},{from:"distanceModel",to:"distanceModel"},{from:"rolloffFactor",to:"rolloffFactor"},{from:"refDistance",to:"refDistance"},{from:"maxDistance",to:"maxDistance"},{from:"coneInnerAngle",to:"coneInnerAngle"},{from:"coneOuterAngle",to:"coneOuterAngle"},{from:"coneOuterGain",to:"coneOuterGain"}]}]},audio:{behaviors:[{behavior:h.C?function(e,t){(0,I.o)(e,{obj3d:new N.ZP(i.D4.audioListener),objArgs:t.objArgs}),ne(e)}:te,values:[{from:"src",to:"src"},{from:"projection",to:"projection"},{from:"controls",to:"controls"},{from:"autoPlay",to:"autoPlay"},{from:"loop",to:"loop"},{from:"audioType",to:"audioType"},{from:"volume",to:"volume"},{from:"distanceModel",to:"distanceModel"},{from:"rolloffFactor",to:"rolloffFactor"},{from:"refDistance",to:"refDistance"},{from:"maxDistance",to:"maxDistance"},{from:"coneInnerAngle",to:"coneInnerAngle"},{from:"coneOuterAngle",to:"coneOuterAngle"},{from:"coneOuterGain",to:"coneOuterGain"}]}]},volumetric:{behaviors:[{behavior:h.C?function(e,t){(0,o.Tk)(e,K);var n=(0,o.Ei)(e,K),r=new l.Tme,a=new q({scene:r,renderer:i.D4.renderer,meshFilePath:t.objArgs.src,videoFilePath:t.objArgs.src.replace(".drcs",".mp4"),loop:t.objArgs.loop,autoplay:t.objArgs.autoPlay,scale:1,frameRate:25,keyframesToBufferBeforeStart:250});n.player=a,(0,I.o)(e,{obj3d:r}),ne(e)}:te,values:[{from:"src",to:"src"},{from:"controls",to:"controls"},{from:"autoPlay",to:"alphaMode"},{from:"loop",to:"loop"},{from:"audioType",to:"audioType"},{from:"volume",to:"volume"},{from:"distanceModel",to:"distanceModel"},{from:"rolloffFactor",to:"rolloffFactor"},{from:"refDistance",to:"refDistance"},{from:"maxDistance",to:"maxDistance"},{from:"coneInnerAngle",to:"coneInnerAngle"},{from:"coneOuterAngle",to:"coneOuterAngle"},{from:"coneOuterGain",to:"coneOuterGain"}]}]},"spot-light":{behaviors:[{behavior:I.o,args:{obj3d:l.PMe},values:["color","intensity","distance","angle","penumbra","decay"]}]},transform:{behaviors:[{behavior:function(e,t){var n=t.objArgs,r=n.position,i=n.rotation,a=n.scale,s={};if(r&&(s.position=new l.Pa4(r.x,r.y,r.z)),i){var u=new l.Pa4(i.x,i.y,i.z);s.rotation=(new l._fP).setFromEuler((new l.USm).setFromVector3(u,"XYZ"))}a&&(s.scale=new l.Pa4(a.x,a.y,a.z)),(0,o.Tk)(e,c.U,s)},values:["position","rotation","scale"]}]},visible:{behaviors:[{behavior:Ee,args:{component:ye.i9}}]},walkable:{behaviors:[{behavior:Ee,args:{component:Te}}]},fog:{behaviors:[{behavior:function(e,t){var n;t.type!==pe.f.Disabled&&(t.type===pe.f.Linear?n=new l.ybr(t.color,t.near,t.far):t.type===pe.f.Exponential&&(n=new l.yo9(t.color,t.density)),(0,o.Tk)(e,de,{type:t.type,color:t.color,density:t.density,near:t.near,far:t.far}),i.D4.scene.fog=n)},values:["color","density","far","near","type"]}]},background:{behaviors:[{behavior:function(e,t){},values:["color"]}]},"audio-settings":{behaviors:[{behavior:function(e,t){},values:["avatarDistanceModel","avatarMaxDistance","avatarRefDistance","avatarRolloffFactor","mediaConeInnerAngle","mediaConeOuterAngle","mediaConeOuterGain","mediaDistanceModel","mediaMaxDistance","mediaRefDistance","mediaRolloffFactor","mediaVolume","overrideAudioSettings"]}]},"spawn-point":{behaviors:[{behavior:Ee,args:{component:we.Z}}]},"scene-preview-camera":{behaviors:[{behavior:Ee,args:{component:be}},{behavior:function(e){var t;r.s||(null===(t=re.M.instance)||void 0===t?void 0:t.entity)&&(0,o.Tk)(re.M.instance.entity,ie.z,{input:e})}}]},shadow:{behaviors:[{behavior:oe.Q,values:[{from:"cast",to:"castShadow"},{from:"receive",to:"receiveShadow"}]}]},group:{behaviors:[{behavior:function(e,t){}}]},"box-collider":{behaviors:[{behavior:C,values:["type","position","quaternion","scale"]}]},"mesh-collider":{behaviors:[{behavior:C,values:["type","position","quaternion","scale","vertices"]}]},"trigger-volume":{behaviors:[{behavior:function(e,t){}}]},link:{behaviors:[{behavior:function(e,t){(0,I.o)(e,{obj3d:new l.Tme,objArgs:t.objArgs});var n={onInteraction:function(){window.open(t.objArgs.url)},onInteractionFocused:function(e,n,r,i,o){var a=n.focused;g.NL.instance.dispatchEvent({type:b.Pf.EVENTS.OBJECT_HOVER,focused:a,interactionText:"go to "+t.objArgs.url})},data:{action:"link"}};(0,o.Tk)(e,p.R,n)},values:[{from:"href",to:"url"}]}]},"particle-emitter":{behaviors:[{behavior:m.Et,values:["ageRandomness","angularVelocity","colorCurve","endColor","endOpacity","endSize","endVelocity","lifetime","lifetimeRandomness","middleColor","middleOpacity","particleCount","sizeCurve","sizeRandomness","src","startColor","startOpacity","startSize","startVelocity","velocityCurve"]}]}}},99010:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r,i=n(97762),o=n(16090),a=n(55881);!function(e){e[e.DISCRETE=0]="DISCRETE",e[e.ONED=1]="ONED",e[e.TWOD=2]="TWOD",e[e.THREED=3]="THREED"}(r||(r={}));var s=function(e,t){var n=(0,o.Xr)(e,a.Z);if(void 0===n)return console.warn("WARNING: State component is undefined");n.data.clear(),n.data.set(t.state,{state:t.state,type:r.DISCRETE,lifecycleState:i.q.STARTED})}},55881:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(80850).V)},32053:function(e,t,n){"use strict";n.d(t,{rG:function(){return s},jB:function(){return u},_h:function(){return c}});var r,i=n(15194),o=n(61306),a=n(36595),s=(r={},(0,i.Z)(r,o.F.IDLE,{name:"idle"}),(0,i.Z)(r,o.F.JUMP,{name:"jump"}),(0,i.Z)(r,o.F.FALLING,{name:"falling"}),(0,i.Z)(r,o.F.FALLING_LONG,{name:"falling"}),(0,i.Z)(r,o.F.DROP,{name:"falling_to_land"}),(0,i.Z)(r,o.F.DROP_ROLLING,{name:"falling_to_roll"}),(0,i.Z)(r,o.F.WALK_FORWARD,{name:"walking"}),(0,i.Z)(r,o.F.WALK_BACKWARD,{name:"walking_backward"}),(0,i.Z)(r,o.F.WALK_STRAFE_RIGHT,{name:"walk_right"}),(0,i.Z)(r,o.F.WALK_STRAFE_LEFT,{name:"walk_left"}),(0,i.Z)(r,o.F.RUN_FORWARD,{name:"run_forward"}),(0,i.Z)(r,o.F.RUN_BACKWARD,{name:"run_backward"}),(0,i.Z)(r,o.F.RUN_STRAFE_RIGHT,{name:"run_right"}),(0,i.Z)(r,o.F.RUN_STRAFE_LEFT,{name:"run_left"}),(0,i.Z)(r,o.F.DRIVING,{name:"driving"}),(0,i.Z)(r,o.F.ENTERING_VEHICLE,{name:"entering_car",loop:a.jAl}),(0,i.Z)(r,o.F.EXITING_VEHICLE,{name:"exiting_car",loop:a.jAl}),r),u=[{id:"Allison",title:"Allison",src:"/models/avatars/Allison.glb",animations:s},{id:"Andy",title:"Andy",src:"/models/avatars/Andy.glb"},{id:"Erik",title:"Erik",src:"/models/avatars/Erik.glb"},{id:"Geoff",title:"Geoff",src:"/models/avatars/Geoff.glb"},{id:"Jace",title:"Jace",src:"/models/avatars/Jace.glb"},{id:"Rose",title:"Rose",src:"/models/avatars/Rose.glb"},{id:"VRMAvatar",title:"VRMAvatar",src:"/models/vrm/three-vrm-girl.vrm",animationsSource:"vrm"}],c=u[0].id},81537:function(e,t,n){"use strict";n.d(t,{M:function(){return F}});var r,i,o,a=n(15194),s=n(95070),u=n(16090),c=n(7331),l=n(5450),f=n(77213),h=n(74203),d=n(97762),p=n(45744),v=n(5418),m=n(17158),y=n(913),g=n(52020),b=n(50760),w=n(34151),R=n(95812),T=n(35490),E=n(86693),A=n(49903),x=function(e,t){e.visible!==t&&(e.visible=t,e.tiltContainer.traverse((function(e){var n=e.material;n&&(n.visible=t)})))},S=void 0,_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pointerLock:!1,mode:h.r.ThirdPerson};if(void 0===S){S=setTimeout((function(){clearTimeout(S),S=void 0}),250);var n=(0,u.Ei)(e,R.rl),r=(0,u.Ei)(e,s.F);switch(r.mode=t.mode,t.mode){case h.r.FirstPerson:r.offset.set(0,1,0),r.phi=0,r.locked=!0,x(n,!1);break;case h.r.ShoulderCam:r.offset.set(r.shoulderSide?-.25:.25,1,0),x(n,!0);break;default:case h.r.ThirdPerson:r.offset.set(r.shoulderSide?-.25:.25,1,0),x(n,!0);break;case h.r.TopDown:r.offset.set(0,1,0),x(n,!0)}}},P=0,k=function(e,t){var n,r,i=t.input,o=(t.inputType,(0,u.Xr)(e,c.I));if(o.data.has(i)){var a=(0,u.Ei)(e,s.F);if(void 0!==a){var l=null!==(r=null===(n=o.prevData.get(i))||void 0===n?void 0:n.value)&&void 0!==r?r:0,f=o.data.get(i).value,d=Math.min(1,Math.max(-1,f-l))*((0,A.i)()?.25:1);if(a.mode===h.r.ThirdPerson||d!==P)switch(P=d,a.mode){case h.r.FirstPerson:d>0&&_(e,{mode:h.r.ShoulderCam});break;case h.r.ShoulderCam:d>0&&(_(e,{mode:h.r.ThirdPerson}),a.distance=a.minDistance+1),d<0&&_(e,{mode:h.r.FirstPerson});break;default:case h.r.ThirdPerson:var p=a.distance+d;a.distance=Math.max(a.minDistance,Math.min(a.maxDistance,p)),a.distance>=a.maxDistance?d>0&&_(e,{mode:h.r.TopDown}):a.distance<=a.minDistance&&d<0&&_(e,{mode:h.r.ShoulderCam});break;case h.r.TopDown:d<0&&_(e,{mode:h.r.ThirdPerson})}}}},O=(r={},(0,a.Z)(r,l.Q.FACE_EXPRESSION_HAPPY,"Smile"),(0,a.Z)(r,l.Q.FACE_EXPRESSION_SAD,"Frown"),r),M=function(e,t){var n,r=null===(n=(0,u.Xr)(e,g.S).value)||void 0===n?void 0:n.getObjectByName("Body");if(null===r||void 0===r?void 0:r.isMesh){var i=(0,u.Xr)(e,c.I),o=null===i||void 0===i?void 0:i.data.get(t.input);if(o){var a=o.value,s=O[t.input],l=r.morphTargetDictionary[s];"number"===typeof l&&s&&null!==a&&"number"===typeof a&&(r.morphTargetInfluences[l]=a)}}},I=Math.PI/2,C=function(e,t,n){var r,i=(0,u.Ei)(e,R.rl),o=(0,u.Xr)(e,c.I).data.get(t.input);o.type===v.n.TWODIM?(i.localMovementDirection.z=o.value[0],i.localMovementDirection.x=o.value[1],i.changedViewAngle=(r=o.value[2])<3*I?r-=I:r-5*I):o.type===v.n.THREEDIM&&(i.localMovementDirection.z=o.value[2],i.localMovementDirection.x=o.value[0])},D=function(e,t){var n,r,i,o=(0,u.Ei)(e,R.rl);o.localMovementDirection.z=null!==(n=t.z)&&void 0!==n?n:o.localMovementDirection.z,o.localMovementDirection.x=null!==(r=t.x)&&void 0!==r?r:o.localMovementDirection.x,o.localMovementDirection.y=null!==(i=t.y)&&void 0!==i?i:o.localMovementDirection.y,o.localMovementDirection.normalize()},L=function(e,t,n){var r,i=(0,u.Ei)(e,c.I),o=i.data.get(t.input),a=null!==(r=t.multiplier)&&void 0!==r?r:1,s=1e-7*(Math.random()>.5?1:-1),l=1e-7*(Math.random()>.5?1:-1);if(o.type===v.n.TWODIM)0===Math.abs(o.value[0])&&0===Math.abs(o.value[1])||i.data.set(t.output,{type:o.type,value:[o.value[0]*a+s,o.value[1]*a+l],lifecycleState:d.q.CHANGED});else if(o.type===v.n.THREEDIM){0===Math.abs(o.value[0])&&0===Math.abs(o.value[2])||i.data.set(t.output,{type:o.type,value:[o.value[0]*a+s,o.value[2]*a+l],lifecycleState:d.q.CHANGED})}},F={onAdded:[],onRemoved:[],inputMap:function(){var e=new Map;return e.set(p.kT.LeftButton,l.Q.PRIMARY),e.set(p.kT.RightButton,l.Q.SECONDARY),e.set(p.kT.MiddleButton,l.Q.INTERACT),e.set(p.kT.MouseMovement,l.Q.MOUSE_MOVEMENT),e.set(p.kT.MousePosition,l.Q.SCREENXY),e.set(p.kT.MouseClickDownPosition,l.Q.SCREENXY_START),e.set(p.kT.MouseClickDownTransformRotation,l.Q.ROTATION_START),e.set(p.kT.MouseClickDownMovement,l.Q.LOOKTURN_PLAYERONE),e.set(p.kT.MouseScroll,l.Q.CAMERA_SCROLL),e.set(p.Md.Touch,l.Q.INTERACT),e.set(p.Md.DoubleTouch,l.Q.JUMP),e.set(p.Md.Touch1Position,l.Q.SCREENXY),e.set(p.Md.Touch1Movement,l.Q.LOOKTURN_PLAYERONE),e.set(p.Md.Scale,l.Q.CAMERA_SCROLL),e.set(p.p6.A,l.Q.INTERACT),e.set(p.p6.B,l.Q.JUMP),e.set(p.p6.DPad1,l.Q.FORWARD),e.set(p.p6.DPad2,l.Q.BACKWARD),e.set(p.p6.DPad3,l.Q.LEFT),e.set(p.p6.DPad4,l.Q.RIGHT),e.set(p.ez.Left,l.Q.MOVEMENT_PLAYERONE),e.set(p.ez.Right,l.Q.GAMEPAD_STICK_RIGHT),e.set("w",l.Q.FORWARD),e.set("a",l.Q.LEFT),e.set("s",l.Q.BACKWARD),e.set("d",l.Q.RIGHT),e.set("e",l.Q.INTERACT),e.set(" ",l.Q.JUMP),e.set("shift",l.Q.WALK),e.set("p",l.Q.POINTER_LOCK),e.set("v",l.Q.SWITCH_CAMERA),e.set("c",l.Q.SWITCH_SHOULDER_SIDE),e.set("f",l.Q.LOCKING_CAMERA),e.set(p.fw.Happy,l.Q.FACE_EXPRESSION_HAPPY),e.set(p.fw.Sad,l.Q.FACE_EXPRESSION_SAD),e}(),inputButtonBehaviors:(i={},(0,a.Z)(i,l.Q.SWITCH_CAMERA,{started:[{behavior:function(e,t){var n=(0,u.Ei)(e,s.F);switch(null===n||void 0===n?void 0:n.mode){case h.r.FirstPerson:_(e,{mode:h.r.ShoulderCam});break;case h.r.ShoulderCam:_(e,{mode:h.r.ThirdPerson}),n.distance=n.minDistance+1;break;case h.r.ThirdPerson:_(e,{mode:h.r.TopDown});break;case h.r.TopDown:_(e,{mode:h.r.FirstPerson})}},args:{}}]}),(0,a.Z)(i,l.Q.LOCKING_CAMERA,{started:[{behavior:function(e,t,n){var r=(0,u.Ei)(e,s.F);f.M.instance&&r&&r.mode!==h.r.FirstPerson&&(r.locked=!r.locked)},args:{}}]}),(0,a.Z)(i,l.Q.SWITCH_SHOULDER_SIDE,{started:[{behavior:function(e,t,n){var r=(0,u.Ei)(e,s.F);r&&(r.shoulderSide=!r.shoulderSide,r.offset.x=-r.offset.x)},args:{}}]}),(0,a.Z)(i,l.Q.INTERACT,{started:[{behavior:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(T.s)(0,b.pV)(e);else if((0,u.tu)(e,y.Q)){var r=(0,u.Xr)(e,y.Q),i=r.focusedInteractive,o=(0,u.Xr)(e,c.I);o.data.get(l.Q.SCREENXY);if(i)if((0,u.tu)(i,m.R)){var a=(0,u.Xr)(i,m.R);a&&"function"===typeof a.onInteraction?(0,u.tu)(i,E.t)?console.log("Interaction with cars must work only from server"):a.onInteraction(e,t,n,i):console.warn("onInteraction is not a function")}else console.error("Attempted to call interact behavior, but target does not have Interactive component")}else console.error("Attempted to call interact behavior, but actor does not have Interactor component")},args:{phase:d.q.STARTED}}]}),(0,a.Z)(i,l.Q.JUMP,{started:[{behavior:D,args:{y:1}}],ended:[{behavior:D,args:{y:0}},{behavior:w.J,args:{}}]}),(0,a.Z)(i,l.Q.WALK,{started:[{behavior:w.J,args:{}}],ended:[{behavior:w.J,args:{}}]}),(0,a.Z)(i,l.Q.FORWARD,{started:[{behavior:D,args:{z:1}}],continued:[{behavior:D,args:{z:1}}],ended:[{behavior:D,args:{z:0}},{behavior:w.J,args:{}}]}),(0,a.Z)(i,l.Q.BACKWARD,{started:[{behavior:D,args:{z:-1}}],continued:[{behavior:D,args:{z:-1}}],ended:[{behavior:D,args:{z:0}},{behavior:w.J,args:{}}]}),(0,a.Z)(i,l.Q.LEFT,{started:[{behavior:D,args:{x:1}}],continued:[{behavior:D,args:{x:1}}],ended:[{behavior:D,args:{x:0}},{behavior:w.J,args:{}}]}),(0,a.Z)(i,l.Q.RIGHT,{started:[{behavior:D,args:{x:-1}}],continued:[{behavior:D,args:{x:-1}}],ended:[{behavior:D,args:{x:0}},{behavior:w.J,args:{}}]}),i),inputAxisBehaviors:(o={},(0,a.Z)(o,l.Q.FACE_EXPRESSION_HAPPY,{started:[{behavior:M,args:{input:l.Q.FACE_EXPRESSION_HAPPY}}],changed:[{behavior:M,args:{input:l.Q.FACE_EXPRESSION_HAPPY}}]}),(0,a.Z)(o,l.Q.FACE_EXPRESSION_SAD,{started:[{behavior:M,args:{input:l.Q.FACE_EXPRESSION_SAD}}],changed:[{behavior:M,args:{input:l.Q.FACE_EXPRESSION_SAD}}]}),(0,a.Z)(o,l.Q.CAMERA_SCROLL,{started:[{behavior:k,args:{input:l.Q.CAMERA_SCROLL,inputType:v.n.ONEDIM}}],changed:[{behavior:k,args:{input:l.Q.CAMERA_SCROLL,inputType:v.n.ONEDIM}}],unchanged:[{behavior:k,args:{input:l.Q.CAMERA_SCROLL,inputType:v.n.ONEDIM}}]}),(0,a.Z)(o,l.Q.MOVEMENT_PLAYERONE,{started:[{behavior:C,args:{input:l.Q.MOVEMENT_PLAYERONE,inputType:v.n.TWODIM}}],changed:[{behavior:C,args:{input:l.Q.MOVEMENT_PLAYERONE,inputType:v.n.TWODIM}},{behavior:w.J}]}),(0,a.Z)(o,l.Q.GAMEPAD_STICK_RIGHT,{started:[{behavior:L,args:{input:l.Q.GAMEPAD_STICK_RIGHT,output:l.Q.LOOKTURN_PLAYERONE,multiplier:.1,inputType:v.n.TWODIM}}],changed:[{behavior:L,args:{input:l.Q.GAMEPAD_STICK_RIGHT,output:l.Q.LOOKTURN_PLAYERONE,multiplier:.1,inputType:v.n.TWODIM}}],unchanged:[{behavior:L,args:{input:l.Q.GAMEPAD_STICK_RIGHT,output:l.Q.LOOKTURN_PLAYERONE,multiplier:.1,inputType:v.n.TWODIM}}]}),o)}},5969:function(e,t,n){"use strict";n.d(t,{s:function(){return B}});var r=n(15194),i=n(61306),o=n(36595),a=n(47509),s=n(57971);function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e-4,r=e.dot(t);return r>1-n?0:r<-1+n?Math.PI:Math.acos(r)}var c=n(56633),l=n(16090),f=n(7331),h=n(77094),d=n(5450),p=n(62589),v=n(95812),m=n(82552),y=n(35490),g=n(93228),b=n(30307),w=new o.Pa4(0,0,1),R=new o.Pa4(0,1,0);function T(e,t){return e<0!==t<0}var E,A=n(34151),x=n(41264),S=i.F.IDLE,_=i.F.WALK_FORWARD,P=i.F.WALK_BACKWARD,k=i.F.WALK_STRAFE_LEFT,O=i.F.WALK_STRAFE_RIGHT,M=i.F.RUN_FORWARD,I=i.F.RUN_BACKWARD,C=i.F.RUN_STRAFE_LEFT,D=i.F.RUN_STRAFE_RIGHT,L=(i.F.JUMP,i.F.FALLING),F=i.F.DROP,Z=(i.F.DROP_ROLLING,[{type:[S],name:"idle",axis:"xyz",speed:1,customProperties:["weight","dontHasHit"],value:[-.5,0,.5],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[L],name:"falling",axis:"xyz",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,0,1],weight:[0,0,0],dontHasHit:[1,1,1]},{type:[F],name:"falling_to_land",axis:"y",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,0],weight:[1,0],dontHasHit:[1,0]},{type:[_],name:"walking",axis:"z",speed:.5,customProperties:["weight","dontHasHit"],value:[0,.5,1],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[O],name:"walk_right",axis:"x",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,-.5,0],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[k],name:"walk_left",axis:"x",speed:.5,customProperties:["weight","dontHasHit"],value:[0,.5,1],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[P],name:"walking_backward",axis:"z",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,-.5,0],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[M],name:"run_forward",axis:"z",speed:.45,customProperties:["weight","dontHasHit"],value:[.5,1],weight:[0,1],dontHasHit:[0,.5]},{type:[D],name:"run_right",axis:"x",speed:.45,customProperties:["weight","dontHasHit"],value:[-1,-.5],weight:[1,0],dontHasHit:[.5,0]},{type:[C],name:"run_left",axis:"x",speed:.45,customProperties:["weight","dontHasHit"],value:[.5,1],weight:[0,1],dontHasHit:[0,.5]},{type:[I],name:"run_backward",axis:"z",speed:.45,customProperties:["weight","dontHasHit"],value:[-1,-.5],weight:[1,0],dontHasHit:[.5,0]}]),N=new o.Pa4(0,0,0),H={componentProperties:[{component:v.rl,properties:(0,r.Z)({},"canEnterVehicles",!0)}],onEntry:[{behavior:function(e,t){var n,r,i,o=(0,l.Ei)(e,v.rl);o.initialized&&(void 0===o.velocitySimulator&&o.velocitySimulator.init(),void 0===o.vactorAnimSimulator&&o.vactorAnimSimulator.init(),void 0===o.moveVectorSmooth&&o.moveVectorSmooth.init(),o.velocitySimulator.damping=o.defaultVelocitySimulatorDamping,o.velocitySimulator.mass=o.defaultVelocitySimulatorMass,o.vactorAnimSimulator.damping=.5,o.vactorAnimSimulator.mass=35,o.moveVectorSmooth.damping=.7,o.moveVectorSmooth.mass=35,o.rotationSimulator.damping=o.defaultRotationSimulatorDamping,o.rotationSimulator.mass=o.defaultRotationSimulatorMass,o.canEnterVehicles=!1,o.canLeaveVehicles=!0,o.canFindVehiclesToEnter=!0,o.arcadeVelocityIsAdditive=!1,o.arcadeVelocityInfluence.set(1,0,1),o.timer=0,o.velocityTarget.z=null!==(n=null===t||void 0===t?void 0:t.z)&&void 0!==n?n:0,o.velocityTarget.x=null!==(r=null===t||void 0===t?void 0:t.x)&&void 0!==r?r:0,o.velocityTarget.y=null!==(i=null===t||void 0===t?void 0:t.y)&&void 0!==i?i:0)}},{behavior:x.xo,args:{animationsSchema:Z}}],onUpdate:[{behavior:A.J},{behavior:function(e,t,n){var r,i=(0,l.Ei)(e,v.rl);if(i.initialized){var E=(0,l.Ei)(e,m.U),A=(0,l.Ei)(e,p.z);if(y.s){var x=new o.Pa4(i.viewVector.x,0,i.viewVector.z).normalize();i.orientation.copy((0,s.H)(x,w)),E.rotation.setFromUnitVectors(w,i.orientation.clone().setY(0))}if(!(0,l.tu)(e,b.e)||(0,l.tu)(e,g.$)){var S=A.body;(null===(r=(0,l.Xr)(e,f.I).data.get(d.Q.WALK))||void 0===r?void 0:r.value)===h.E.ON&&(i.localMovementDirection.x=.8*i.localMovementDirection.x,i.localMovementDirection.z=.8*i.localMovementDirection.z);var _=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.Pa4(0,1,0),r=u(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e-4),i=(new o.Pa4).crossVectors(e,t);return n.dot(i)<0&&(r=-r),r}(i.orientation,i.orientationTarget);i.rotationSimulator.target=_,i.rotationSimulator.simulate(n);var P=i.rotationSimulator.position;i.orientation.applyAxisAngle(R,P),i.angularVelocity=i.rotationSimulator.velocity,i.localMovementDirection.y>0&&i.rayHasHit&&(i.wantsToJump=!0),i.velocityTarget.copy(i.localMovementDirection),i.velocitySimulator.target.copy(i.velocityTarget),i.velocitySimulator.simulate(n),i.velocity.copy(i.velocitySimulator.position),i.acceleration.copy(i.velocitySimulator.velocity);var k,O=new o.Pa4,M=new o.Pa4,I=new o.Pa4;if(I.set(S.velocity.x,S.velocity.y,S.velocity.z),M.copy(i.velocity).multiplyScalar(i.moveSpeed),M.copy((0,s.H)(i.orientation,M)),i.arcadeVelocityIsAdditive){O.copy(I);(0,s.H)(i.orientation,i.velocityTarget);var C=(new o.Pa4).copy(M).multiply(i.arcadeVelocityInfluence);T(I.x,M.x)&&(O.x+=C.x),T(I.y,M.y)&&(O.y+=C.y),T(I.z,M.z)&&(O.z+=C.z)}else O.set((0,c.t7)(I.x,M.x,i.arcadeVelocityInfluence.x),(0,c.t7)(I.y,M.y,i.arcadeVelocityInfluence.y),(0,c.t7)(I.z,M.z,i.arcadeVelocityInfluence.z));if(i.wantsToJump&&!i.alreadyJumped)O.y+=5,S.position.y+=2*i.raySafeOffset,i.wantsToJump=!1,i.alreadyJumped=!0,i.arcadeVelocityIsAdditive=!0;else if(i.rayHasHit){if(O.y=0,i.rayGroundHit&&i.rayResult.body.mass>0){var D=new a.AO;i.rayResult.body.getVelocityAtWorldPoint(i.rayResult.hitPointWorld,D),O.add((k=D,new o.Pa4(k.x,k.y,k.z)))}if(i.rayGroundHit){var L=new o.Pa4(i.rayResult.hitNormalWorld.x,i.rayResult.hitNormalWorld.y,i.rayResult.hitNormalWorld.z),F=(new o._fP).setFromUnitVectors(R,L),Z=(new o.yGw).makeRotationFromQuaternion(F);O.applyMatrix4(Z)}S.position.y=i.rayGroundY+i.rayCastLength,i.arcadeVelocityIsAdditive=!1,i.alreadyJumped=!1}S.velocity.x=O.x,S.velocity.y=O.y,S.velocity.z=O.z}}}},{behavior:x.Fr,args:{animationsSchema:Z,updateAnimationsValues:function(e,t,n){var r=(0,l.Xr)(e,v.rl);r.moveVectorSmooth.target.copy(r.animationVelocity),r.moveVectorSmooth.simulate(n);var i=r.moveVectorSmooth.position;N.setY(r.rayHasHit?0:1),r.vactorAnimSimulator.target.copy(N),r.vactorAnimSimulator.simulate(n);var o=r.vactorAnimSimulator.position.y;return o<1e-5&&(o=0),{actorVelocity:i,dontHasHit:o=Math.min(o,1)}}}}]},z=[{type:[i.F.DRIVING],name:"driving",axis:"xyz",speed:1,customProperties:["weight","dontHasHit"],value:[-.5,0,.5],weight:[0,1,0],dontHasHit:[0,0,0]},{type:[i.F.ENTERING_VEHICLE],name:"entering_car",axis:"xyz",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,0,1],weight:[0,0,0],dontHasHit:[1,1,1]},{type:[i.F.EXITING_VEHICLE],name:"exiting_car",axis:"y",speed:.5,customProperties:["weight","dontHasHit"],value:[-1,0],weight:[1,0],dontHasHit:[1,0]}],j={componentProperties:[{component:v.rl,properties:{}}],onEntry:[{behavior:function(e,t){var n,r,i,o=(0,l.Ei)(e,v.rl);o.initialized&&(o.timer=0,o.velocityTarget.z=null!==(n=null===t||void 0===t?void 0:t.z)&&void 0!==n?n:0,o.velocityTarget.x=null!==(r=null===t||void 0===t?void 0:t.x)&&void 0!==r?r:0,o.velocityTarget.y=null!==(i=null===t||void 0===t?void 0:t.y)&&void 0!==i?i:0)}},{behavior:x.xo,args:{animationsSchema:z}}],onUpdate:[{behavior:x.Fr,args:{animationsSchema:z,updateAnimationsValues:function(e,t,n){return{values:1}}}}]},U=(E={},(0,r.Z)(E,i.F.DEFAULT,H),(0,r.Z)(E,i.F.DRIVING,j),E),B={default:i.F.DEFAULT,states:U}},61306:function(e,t,n){"use strict";var r;n.d(t,{F:function(){return r}}),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.JUMP=1]="JUMP",e[e.FALLING=2]="FALLING",e[e.DROP=3]="DROP",e[e.WALK=4]="WALK",e[e.SPRINT=5]="SPRINT",e[e.INTERACTING=6]="INTERACTING",e[e.DROP_IDLE=7]="DROP_IDLE",e[e.DROP_ROLLING=8]="DROP_ROLLING",e[e.DROP_RUNNING=9]="DROP_RUNNING",e[e.DRIVING=10]="DRIVING",e[e.ENTERING_VEHICLE=11]="ENTERING_VEHICLE",e[e.EXITING_VEHICLE=12]="EXITING_VEHICLE",e[e.IDLE=13]="IDLE",e[e.FALLING_LONG=14]="FALLING_LONG",e[e.WALK_FORWARD=15]="WALK_FORWARD",e[e.WALK_STRAFE_RIGHT=16]="WALK_STRAFE_RIGHT",e[e.WALK_STRAFE_LEFT=17]="WALK_STRAFE_LEFT",e[e.RUN_FORWARD=18]="RUN_FORWARD",e[e.RUN_BACKWARD=19]="RUN_BACKWARD",e[e.RUN_STRAFE_RIGHT=20]="RUN_STRAFE_RIGHT",e[e.RUN_STRAFE_LEFT=21]="RUN_STRAFE_LEFT",e[e.WALK_BACKWARD=22]="WALK_BACKWARD"}(r||(r={}))},34151:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var r=n(36595),i=n(95070),o=n(74203),a=n(57971),s=n(49903),u=n(16090),c=n(95812),l=new r.Pa4(0,0,1),f=new r.Pa4,h=s.i,d=function(e,t,n){var s=(0,u.Ei)(e,c.rl);if(!s.initialized)return console.warn("Actor no initialized");s.timer+=n;var d=s.localMovementDirection;if(h){var p=Math.atan2(s.viewVector.z,s.viewVector.x);s.viewVector.x=Math.cos(p-.2*s.changedViewAngle),s.viewVector.z=Math.sin(p-.2*s.changedViewAngle)}var v=new r.Pa4(s.viewVector.x,0,s.viewVector.z).normalize(),m=d.length()?(0,a.H)(v,l):f.setScalar(0),y=(0,u.Xr)(e,i.F);y&&y.mode===o.r.FirstPerson||0===m.x&&0===m.y&&0===m.z?s.orientationTarget.copy((new r.Pa4).copy(s.orientation).setY(0).normalize()):s.orientationTarget.copy((new r.Pa4).copy(m).setY(0).normalize())}},41264:function(e,t,n){"use strict";n.d(t,{Fr:function(){return c},xo:function(){return l},VQ:function(){return f}});var r=n(36595),i=n(16090),o=n(32053),a=n(95812),s=n(35490);function u(e,t,n,i){return r.M8C.mapLinear(e,t[0+i],t[1+i],n[0+i],n[1+i])}var c=function(e,t,n){var c,l;if(!s.s){var f=(0,i.Ei)(e,a.rl);if(f&&f.initialized&&f.mixer&&(f.mixer&&f.mixer.update(n),3!=t.animationsSchema.length)){new Map;var h=f.avatarId,d=null!==(l=null===(c=o.jB.find((function(e){return e.id===h})))||void 0===c?void 0:c.animations)&&void 0!==l?l:o.rG,p=f.modelContainer.children[0],v=t.updateAnimationsValues(e,t.animationsSchema,n);(function(e,t,n,r){var i=n.actorVelocity,o=n.dontHasHit,s=[],c=60*i.length()/a.CT;c<1e-5&&(c=0),c=Math.min(c,1);for(var l=Math.abs(i.x)+Math.abs(i.y)+Math.abs(i.z),f=0;f<t.length;f++){var h=t[f],d=h.customProperties.length,p=i[h.axis]<0?-1*c:c,v=0,m=0;"xyz"!=h.axis&&(m=l<1e-5?1:Math.abs(i[h.axis])/l);for(var y=0;y<h.value.length-1;y++)if(h.value[y]<=p&&p<=h.value[y+1])for(var g=0;g<d;g++)v+=u(p,h.value,h[h.customProperties[g]],y)*(0==g?1-o:o);"xyz"!=h.axis&&(v*=m),v<1e-4&&(v=0),s.push({type:h.type,name:h.name,weight:v,time:h.speed?h.speed:.5})}return s})(0,t.animationsSchema,v).forEach((function(e){var t=d[e.type],n=r.m7l.findByName(f.animations,t.name),i=f.mixer.existingAction(n,p);i||null!==(i=f.mixer.clipAction(n,p))?("undefined"!==typeof t.loop&&i.setLoop(t.loop,1/0),f.currentAnimationAction.includes(i)||f.currentAnimationAction.push(i),i.setEffectiveWeight(e.weight),i.setEffectiveTimeScale(e.time),e.weight>0&&!i.isRunning()?i.play():0===e.weight&&i.isRunning()&&i.stop()):console.warn("setActorAnimation [",t.name,"], not found")}))}}},l=function(e,t,n){var r,s,u=(0,i.Xr)(e,a.rl);if(u&&u.initialized&&u.mixer){null!==(s=null===(r=o.jB.find((function(e){return e.id===u.avatarId})))||void 0===r?void 0:r.animations)&&void 0!==s||o.rG;var c=t.animationsSchema.map((function(e){return e.name}));u.currentAnimationAction.forEach((function(e){c.filter((function(t){return t===e.getClip().name})).length}))}},f=function(e,t,n){var s,u,c,l=(0,i.Ei)(e,a.rl);if(l.initialized&&l.mixer){var f=t.animationId,h=t.transitionDuration,d=null===(s=(0,i.Xr)(e,a.rl))||void 0===s?void 0:s.avatarId,p=(null!==(c=null===(u=o.jB.find((function(e){return e.id===d})))||void 0===u?void 0:u.animations)&&void 0!==c?c:o.rG)[f],v=l.modelContainer.children[0],m=r.m7l.findByName(l.animations,p.name),y=l.mixer.existingAction(m,v);y||(y=l.mixer.clipAction(m,v))?(y.fadeIn(h),"undefined"!==typeof p.loop&&y.setLoop(p.loop,1/0),l.currentAnimationAction.forEach((function(e){e.getClip().name!==y.getClip().name&&(console.log("Fading out current animation action"),e.fadeOut(h),e.setEffectiveWeight(0))})),y.reset().setEffectiveWeight(1).setEffectiveTimeScale(1).fadeIn(.01).play(),console.log("New action is ",y),l.currentAnimationAction=[y],l.currentAnimationLength=y.getClip().duration):console.warn("setActorAnimation",p.name,", not found")}}},40654:function(e,t,n){"use strict";n.d(t,{M:function(){return u}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306);function s(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var u=function(e){(0,i.Z)(n,e);var t=s(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w)},98847:function(e,t,n){"use strict";n.d(t,{ZS:function(){return b},s0:function(){return y}});var r=n(15194),i=n(90038),o=n(5297),a=n(67200),s=n(36595),u=n(10579),c=n(53500),l=n(82552),f=new s.nvb(1,1,1),h=new s.xoR({color:new s.Ilk(.8134105533361435,.813410533361435,.8020648129470647)}),d=new s.Kj0(f,h);d.name="simpleBox";var p,v={networkComponents:[{type:l.U},{type:u.o,data:{type:"box",scale:{x:1,y:1,z:1},mass:1}},{type:c.i}],localClientComponents:[],serverComponents:[],onAfterCreate:[{behavior:a.o,args:{obj3d:d}}],onBeforeDestroy:[]},m={networkComponents:[{type:l.U}],localClientComponents:[],serverComponents:[],onAfterCreate:[],onBeforeDestroy:[]},y={Player:0,worldObject:1,Vehicle:2},g=(p={},(0,r.Z)(p,y.Player,o.NK),(0,r.Z)(p,y.worldObject,m),(0,r.Z)(p,y.Vehicle,v),p),b={transport:null,messageTypes:Object.assign({},i.u),prefabs:g,defaultClientPrefab:y.Player}},75275:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(49182),i=n(13987),o=n(29569),a=n(89306),s=n(65648),u=n(52288);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var i=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,i.Z)(n,e);var t=c(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return n}(s.w);l._schema={input:{default:[],type:u.Yk.Ref}}},82552:function(e,t,n){"use strict";n.d(t,{U:function(){return h}});var r=n(49182),i=n(39337),o=n(13987),a=n(29569),s=n(89306),u=n(65648),c=n(36595),l=n(52288);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var h=function(e){(0,o.Z)(n,e);var t=f(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).reset(),e}return(0,i.Z)(n,[{key:"copy",value:function(e){return e.position&&this.position.copy(e.position),e.rotation&&this.rotation.copy(e.rotation),e.velocity&&this.velocity.copy(e.velocity),e.scale&&this.scale.copy(e.scale),this}},{key:"reset",value:function(){this.position=new c.Pa4,this.rotation=new c._fP,this.velocity=new c.Pa4,this.scale=new c.Pa4(1,1,1)}}]),n}(u.w);h._schema={position:{default:new c.Pa4,type:l.Yk.Ref},rotation:{default:new c._fP,type:l.Yk.Ref},velocity:{default:new c.Pa4,type:l.Yk.Ref},scale:{default:new c.Pa4(1,1,1),type:l.Yk.Ref}}},57227:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var r=n(49182),i=n(39337),o=n(13987),a=n(29569),s=n(89306),u=n(36595);function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var l=function(e){(0,o.Z)(n,e);var t=c(n);function n(e,i,o,a,s,c,l,f){var h;(0,r.Z)(this,n),(h=t.call(this,e.video,i,o,a,s,c,u.wk1,l,f)).isVideoTexture=!0,h.videoProxy=e,h.minFilter=void 0!==c?c:u.wem,h.magFilter=void 0!==s?s:u.wem,h.generateMipmaps=!1,h.flipY=!0;return"_requestVideoFrameCallback"in e&&e._requestVideoFrameCallback((function t(){h.image=h.videoProxy.video,h.needsUpdate=!0,e._requestVideoFrameCallback(t)})),h}return(0,i.Z)(n,[{key:"clone",value:function(){return new n(this.videoProxy).copy(this)}},{key:"update",value:function(){!this.videoProxy._requestVideoFrameCallback&&this.videoProxy.readyState>=2&&(this.image=this.videoProxy.video,this.needsUpdate=!0)}}]),n}(u.ROQ)},58365:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var r=n(49182),i=n(39337),o=n(36595),a=function e(){(0,r.Z)(this,e),this.transform=new o.Tme,this.upperArm=new o.Tme,this.lowerArm=new o.Tme,this.hand=new o.Tme,this.thumb0=new o.Tme,this.thumb1=new o.Tme,this.thumb2=new o.Tme,this.indexFinger1=new o.Tme,this.indexFinger2=new o.Tme,this.indexFinger3=new o.Tme,this.middleFinger1=new o.Tme,this.middleFinger2=new o.Tme,this.middleFinger3=new o.Tme,this.ringFinger1=new o.Tme,this.ringFinger2=new o.Tme,this.ringFinger3=new o.Tme,this.littleFinger1=new o.Tme,this.littleFinger2=new o.Tme,this.littleFinger3=new o.Tme,this.transform.add(this.upperArm),this.upperArm.add(this.lowerArm),this.lowerArm.add(this.hand),this.hand.add(this.thumb0),this.thumb0.add(this.thumb1),this.thumb1.add(this.thumb2),this.hand.add(this.indexFinger1),this.indexFinger1.add(this.indexFinger2),this.indexFinger2.add(this.indexFinger3),this.hand.add(this.middleFinger1),this.middleFinger1.add(this.middleFinger2),this.middleFinger2.add(this.middleFinger3),this.hand.add(this.ringFinger1),this.ringFinger1.add(this.ringFinger2),this.ringFinger2.add(this.ringFinger3),this.hand.add(this.littleFinger1),this.littleFinger1.add(this.littleFinger2),this.littleFinger2.add(this.littleFinger3)},s=new o.Pa4,u=new o.Pa4,c=function(e,t){return t.setFromMatrixPosition(e.matrixWorld)},l=function(e,t){return e.matrixWorld.decompose(s,t,u),t},f=function(e){e.matrix.compose(e.position,e.quaternion,e.scale)},h=function(e){e.matrixWorld.multiplyMatrices(e.parent.matrixWorld,e.matrix)},d=function(e){e.matrix.compose(e.position,e.quaternion,e.scale),e.matrixWorld.multiplyMatrices(e.parent.matrixWorld,e.matrix)},p=new o.Pa4(1,0,0),v=(new o._fP).setFromAxisAngle(new o.Pa4(0,1,0),Math.PI),m=new o.Pa4,y=new o.Pa4,g=new o._fP,b=new o._fP,w=new o._fP,R=new o.USm,T=function(){function e(t,n){(0,r.Z)(this,e),this.rig=t,this.shoulder=n,this.poseManager=t.poseManager,this.vrTransforms=this.poseManager.vrTransforms}return(0,i.Z)(e,[{key:"Update",value:function(){this.shoulder.proneFactor=this.getProneFactor(),this.shoulder.prone=this.shoulder.proneFactor>0,this.shoulder.prone?this.shoulder.lastProneTimestamp=Date.now():this.shoulder.lastStandTimestamp=Date.now(),this.shoulder.spine.quaternion.set(0,0,0,1),this.updateHips(),this.shoulder.leftShoulderAnchor.quaternion.set(0,0,0,1),this.shoulder.rightShoulderAnchor.quaternion.set(0,0,0,1),this.rotateShoulderBase(),this.updateNeck()}},{key:"updateHips",value:function(){var e,t,n=g.copy(this.vrTransforms.head.quaternion).multiply(v),r=R.setFromQuaternion(n,"YXZ");r.x=0,r.z=0;var i=b.setFromEuler(r);i.multiply(w.setFromAxisAngle(p,this.shoulder.proneFactor*Math.PI/2));var o=m.copy(this.vrTransforms.head.position).sub(y.copy(this.shoulder.eyes.position).applyQuaternion(n)).sub(y.copy(this.shoulder.head.position).applyQuaternion(n)).sub(y.copy(this.shoulder.neck.position).applyQuaternion(i)).sub(y.copy(this.shoulder.transform.position).applyQuaternion(i)).sub(y.copy(this.shoulder.spine.position).applyQuaternion(i));this.shoulder.hips.position.copy(o),(null===(t=null===(e=this.rig)||void 0===e?void 0:e.legsManager)||void 0===t?void 0:t.enabled)&&this.shoulder.hips.quaternion.copy(i),f(this.shoulder.hips),this.shoulder.hips.matrixWorld.copy(this.shoulder.hips.matrix),h(this.shoulder.spine),h(this.shoulder.transform)}},{key:"updateNeck",value:function(){var e=g.copy(this.vrTransforms.head.quaternion).multiply(v),t=R.setFromQuaternion(e,"YXZ");t.x=0,t.z=0;var n=b.setFromEuler(t);this.shoulder.neck.quaternion.copy(n).premultiply(l(this.shoulder.neck.parent,w).invert()),d(this.shoulder.neck),this.shoulder.head.quaternion.copy(e).premultiply(l(this.shoulder.head.parent,w).invert()),d(this.shoulder.head),h(this.shoulder.eyes)}},{key:"rotateShoulderBase",value:function(){var e=this.getCombinedDirectionAngleUp();this.shoulder.transform.quaternion.setFromEuler(R.set(0,e,0,"YXZ")).premultiply(g.copy(this.shoulder.hips.quaternion).multiply(v)),this.shoulder.transform.quaternion.premultiply(l(this.shoulder.transform.parent,g).invert()),d(this.shoulder.transform),h(this.shoulder.leftShoulderAnchor),h(this.shoulder.rightShoulderAnchor)}},{key:"getCombinedDirectionAngleUp",value:function(){var e=g.copy(this.shoulder.hips.quaternion).multiply(v),t=b.copy(e).invert(),n=m.copy(this.vrTransforms.leftHand.position).sub(this.vrTransforms.head.position).applyQuaternion(t),r=y.copy(this.vrTransforms.rightHand.position).sub(this.vrTransforms.head.position).applyQuaternion(t);n.y=0,r.y=0;var i=n.z>0,o=r.z>0;i&&(n.z*=o?-2:-1),o&&(r.z*=i?-2:-1);var a=m.addVectors(n.normalize(),r.normalize());return Math.atan2(a.x,a.z)}},{key:"getProneFactor",value:function(){return 1-Math.min(Math.max((this.vrTransforms.head.position.y-this.vrTransforms.floorHeight-.3*this.rig.height)/(.3*this.rig.height),0),1)}}]),e}(),E=n(64414);function A(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=new o.Pa4,_=new o.Pa4(0,0,1),P=(new o._fP).setFromAxisAngle(new o.Pa4(0,1,0),Math.PI/2),k=(new o._fP).setFromAxisAngle(new o.Pa4(0,1,0),-Math.PI/2),O=(new o._fP).setFromAxisAngle(new o.Pa4(0,0,1),Math.PI/2),M=(new o._fP).setFromAxisAngle(new o.Pa4(0,0,1),-Math.PI/2),I=(new o._fP).setFromAxisAngle(new o.Pa4(0,1,0),Math.PI),C=new o.Pa4,D=new o.Pa4,L=new o.Pa4,F=new o.Pa4,Z=new o.Pa4,N=new o.Pa4,H=new o._fP,z=new o._fP,j=new o._fP,U=new o.USm,B=new o.yGw,G=[[2,"thumb0"],[3,"thumb1"],[4,"thumb2"],[7,"indexFinger1"],[8,"indexFinger2"],[9,"indexFinger3"],[12,"middleFinger1"],[13,"middleFinger2"],[14,"middleFinger3"],[17,"ringFinger1"],[18,"ringFinger2"],[19,"ringFinger3"],[22,"littleFinger1"],[23,"littleFinger2"],[24,"littleFinger3"]],q=function(){function e(t,n,i,o,a){(0,r.Z)(this,e),this.arm=t,this.shoulder=n,this.shoulderPoser=i,this.target=o,this.left=a,this.upperArmLength=0,this.lowerArmLength=0,this.armLength=0}return(0,i.Z)(e,[{key:"Start",value:function(){this.upperArmLength=c(this.arm.lowerArm,C).distanceTo(c(this.arm.upperArm,D)),this.lowerArmLength=c(this.arm.hand,C).distanceTo(c(this.arm.lowerArm,D)),this.armLength=this.upperArmLength+this.lowerArmLength}},{key:"Update",value:function(){h(this.arm.transform),h(this.arm.upperArm);var e=c(this.arm.upperArm,C),t=this.target.quaternion,n=D.copy(this.target.position),r=l(this.shoulder.transform,H),i=z.copy(r).invert(),o=this.upperArmLength,a=e.distanceTo(n)/2,s=o>a?Math.sqrt(o*o-a*a):0,u=L.copy(n).sub(e).normalize().cross(F.set(-1,0,0).applyQuaternion(r)),f=U.setFromQuaternion(j.multiplyQuaternions(t,i).premultiply(I),"XYZ");if(this.left){var p=Math.min(Math.max((f.y+.1*Math.PI)/(Math.PI/2),0),1);f.z=Math.min(Math.max(f.z,-Math.PI/2),0),f.z=f.z*(1-p)+-Math.PI/2*p}else{var v=Math.min(Math.max((-f.y-.1*Math.PI)/(Math.PI/2),0),1);f.z=Math.min(Math.max(f.z,0),Math.PI/2),f.z=f.z*(1-v)+Math.PI/2*v}u.applyQuaternion(i).applyAxisAngle(_,f.z).applyQuaternion(r);var m=F.copy(e).add(n).divideScalar(2).add(Z.copy(u).multiplyScalar(s)),y=Z.set(this.left?-1:1,0,0).applyQuaternion(r);this.arm.upperArm.quaternion.setFromRotationMatrix(B.lookAt(S,N.copy(m).sub(e),y)).multiply(this.left?k:P).premultiply(l(this.arm.upperArm.parent,j).invert()),d(this.arm.upperArm),this.arm.lowerArm.quaternion.setFromRotationMatrix(B.lookAt(S,N.copy(n).sub(m),y)).multiply(this.left?k:P).premultiply(l(this.arm.lowerArm.parent,j).invert()),d(this.arm.lowerArm),this.arm.hand.quaternion.copy(this.target.quaternion).multiply(this.left?M:O).premultiply(l(this.arm.hand.parent,j).invert()),d(this.arm.hand);var g,b=A(G);try{for(b.s();!(g=b.n()).done;){var w=g.value,R=(0,E.Z)(w,2),T=R[0],x=R[1];this.arm[x].quaternion.copy(this.target.fingers[T].quaternion),d(this.arm[x])}}catch(q){b.e(q)}finally{b.f()}}}]),e}(),V=function(){function e(t){(0,r.Z)(this,e),this.transform=new o.Tme,this.hips=new o.Tme,this.spine=new o.Tme,this.neck=new o.Tme,this.head=new o.Tme,this.eyes=new o.Tme,this.hips.add(this.spine),this.spine.add(this.transform),this.transform.add(this.neck),this.neck.add(this.head),this.head.add(this.eyes),this.leftShoulderAnchor=new o.Tme,this.transform.add(this.leftShoulderAnchor),this.rightShoulderAnchor=new o.Tme,this.transform.add(this.rightShoulderAnchor),this.leftArm=new a,this.rightArm=new a,this.leftShoulderAnchor.add(this.leftArm.transform),this.rightShoulderAnchor.add(this.rightArm.transform),this.prone=!1,this.proneFactor=0;var n=Date.now();this.lastStandTimestamp=n,this.lastProneTimestamp=n,this.shoulderPoser=new T(t,this),this.leftArmIk=new q(this.leftArm,this,this.shoulderPoser,this.shoulderPoser.vrTransforms.leftHand,!0),this.rightArmIk=new q(this.rightArm,this,this.shoulderPoser,this.shoulderPoser.vrTransforms.rightHand,!1),this.handsEnabled=[!0,!0],this.enabled=!0}return(0,i.Z)(e,[{key:"Start",value:function(){this.leftArmIk.Start(),this.rightArmIk.Start()}},{key:"Update",value:function(){this.enabled&&(this.shoulderPoser.Update(),this.handsEnabled[0]&&this.leftArmIk.Update(),this.handsEnabled[1]&&this.rightArmIk.Update())}}]),e}()},9819:function(e,t){"use strict";t.Z='["Armature",[0,0,0,0,0,0,1,1,1,1],[["Hips",[-4.764560328305439e-22,0.9901136159896851,0.040974393486976624,1,-1.9958527221869936e-15,1.1920922560193503e-7,-9.735359896012596e-8,1,0.9999999403953552,0.9999999403953552],[["Spine",[8.881776256067372e-16,-1.2409380190092634e-7,-7.450584149637507e-9,0.9997583031654358,-3.4153149197635457e-9,1.1921520126634277e-7,0.021985134109854698,1,1.0000001192092896,1.0000735521316528],[["Chest",[-2.8913337305627534e-16,0.08727944642305374,-1.5612890535976476e-8,-0.05003303661942482,1.1906852392939982e-7,-5.966564575743405e-9,0.9987475872039795,1,0.9999998807907104,0.9999999403953552],[["Neck",[-7.525669201854067e-15,0.1973666548728943,1.130800697524137e-8,0.07688746601343155,-1.1883879835750122e-7,9.171047921086029e-9,0.9970398545265198,1,0.9999996423721313,0.9999999403953552],[["Head",[-1.268057280792193e-19,0.06861116737127304,2.575603064158827e-10,-0.004925626330077648,-2.6168825786876404e-11,-3.042392997688187e-13,0.9999879002571106,1,1.0000001192092896,1.000000238418579],[["Eye_R",[-0.02648639865219593,0.05120223015546799,0.019837098196148872,-0.160249263048172,0.6969521045684814,0.6969586610794067,0.05316544696688652,1,1.0000001192092896,0.9999999403953552],[]],["Eye_L",[0.02648639865219593,0.05120223015546799,0.019837098196148872,-0.160249263048172,-0.6969521045684814,-0.6969586610794067,0.05316544696688652,1,1.0000001192092896,0.9999999403953552],[]],["StandingEars1_R",[-0.04328959435224533,0.13830988109111786,-0.017249949276447296,0.1357475221157074,0.04495804384350777,0.044957272708415985,0.9887012839317322,1.0000001192092896,0.9999998807907104,0.9999999403953552],[["StandingEars2_R",[3.2651956693996453e-9,0.029600219801068306,-1.0180473708487625e-7,-0.0003664675750769675,-0.01292889378964901,-0.009843501262366772,0.9998679161071777,0.9999998211860657,1,0.9999998211860657],[["StandingEars3_R",[3.868987352717568e-9,0.046097323298454285,-3.8355018716629274e-8,0.09286198019981384,-0.05294885113835335,-0.03466515615582466,0.9936656355857849,0.9999998807907104,0.9999998807907104,0.9999998211860657],[]]]]]],["StandingEars1_L",[0.04328959435224533,0.13830988109111786,-0.017249949276447296,0.1357475221157074,-0.04495804384350777,-0.044957272708415985,0.9887012839317322,1.0000001192092896,0.9999998807907104,0.9999999403953552],[["StandingEars2_L",[-3.2651956693996453e-9,0.029600219801068306,-1.0180473708487625e-7,-0.0003664675750769675,0.01292889378964901,0.009843501262366772,0.9998679161071777,0.9999998211860657,1,0.9999998211860657],[["StandingEars3_L",[-3.868987352717568e-9,0.046097323298454285,-3.8355018716629274e-8,0.09286198019981384,0.05294885113835335,0.03466515615582466,0.9936656355857849,0.9999998807907104,0.9999998807907104,0.9999998211860657],[]]]]]],["Hair1_R",[-0.05674159526824951,0.14185218513011932,0.004379991441965103,-0.9789010286331177,0.14186254143714905,0.14183951914310455,0.038852352648973465,1.0000029802322388,1.0000003576278687,1],[["Hair2_R",[-3.67872416973114e-8,0.07205186039209366,-3.725290298461914e-9,0.06192794442176819,0.027937548235058784,-0.04899432510137558,0.9964858293533325,0.9999998807907104,0.9999998807907104,0.9999999403953552],[["Hair3_R",[-3.529947889546747e-8,0.10827109217643738,6.058744617121192e-9,0.10654902458190918,-0.10275916755199432,0.10163572430610657,0.9837469458580017,0.9999998211860657,0.9999998211860657,0.9999999403953552],[["Hair5_R",[-4.922059559930858e-8,0.2657814919948578,-1.1666276833466327e-7,0.0902017205953598,0.09775179624557495,-0.20269449055194855,0.9701666831970215,1.0000001192092896,1.0000001192092896,1],[["Hair6_R",[-1.862645149230957e-9,0.09898854792118073,-4.6566128730773926e-8,-0.23959340155124664,0.12270104140043259,-0.20550969243049622,0.9409065842628479,1.0000003576278687,1.0000001192092896,1.000000238418579],[["Hair7_R",[3.166496753692627e-8,0.09518476575613022,1.1175870895385742e-8,-0.10351262986660004,-0.14494562149047852,0.13637173175811768,0.9745146036148071,0.9999998807907104,0.9999997615814209,0.9999997615814209],[["Hair8_R",[3.725290298461914e-9,0.09951279312372208,1.7695128917694092e-8,0.13740508258342743,-0.01385509967803955,0.008886626921594143,0.9903782606124878,0.9999999403953552,0.9999998807907104,1],[]]]]]]]]]]]]]],["Hair1_L",[0.06208624690771103,0.14414384961128235,-0.01495930552482605,-0.978900671005249,-0.14185091853141785,-0.14185169339179993,0.03885859623551369,0.9999966025352478,0.9999997019767761,0.9999999403953552],[["Hair2_L",[-1.6298145055770874e-9,0.07205165177583694,2.7939677238464355e-9,0.06192799285054207,-0.0279371440410614,0.04899446293711662,0.9964858293533325,1,0.9999998807907104,0.9999999403953552],[["Hair3_L",[-1.257285475730896e-8,0.10827106237411499,-1.862645149230957e-8,0.10654883086681366,0.10275834798812866,-0.10163601487874985,0.9837470054626465,1,1.0000001192092896,1],[["Hair5_L",[-1.1175870895385742e-8,0.26578161120414734,1.4901161193847656e-8,0.09020152688026428,-0.0977509468793869,0.20269547402858734,0.9701665043830872,0.9999998807907104,0.9999997615814209,0.9999999403953552],[["Hair6_L",[1.862645149230957e-9,0.09898875653743744,-5.587935447692871e-9,-0.2395932972431183,-0.12270071357488632,0.20550943911075592,0.940906822681427,0.9999998807907104,0.9999996423721313,0.9999997615814209],[["Hair7_L",[3.725290298461914e-9,0.0951850414276123,7.450580596923828e-9,-0.10351207852363586,0.14494460821151733,-0.1363714635372162,0.9745148420333862,1.0000001192092896,0.9999998211860657,0.9999998807907104],[["Hair8_L",[-2.7939677238464355e-9,0.09951331466436386,-1.3504177331924438e-8,0.13740453124046326,0.013855460099875927,-0.008887086994946003,0.9903782606124878,0.9999998807907104,1.0000001192092896,0.9999997615814209],[]]]]]]]]]]]]]],["Hair21_R",[-0.024621548131108284,0.14939874410629272,-0.0411190427839756,-0.971066415309906,0.11676698923110962,0.11678998917341232,0.1724979430437088,0.9999992251396179,0.9999998807907104,0.9999991655349731],[["Hair22_R",[-1.7080894920695755e-8,0.07549650222063065,-2.1185213583407858e-8,0.042726077139377594,-0.02246226742863655,0.01964012160897255,0.9986411929130554,0.9999997615814209,0.9999998211860657,0.9999998807907104],[["Hair23_R",[1.30385160446167e-8,0.11306732892990112,1.862645149230957e-9,-0.006093519274145365,0.037633929401636124,-0.05706079304218292,0.9976426362991333,0.9999999403953552,0.9999998807907104,0.9999998211860657],[["Hair24_R",[7.450580596923828e-9,0.21121430397033691,1.1175870895385742e-8,0.04010539874434471,-0.0758029893040657,0.10839971154928207,0.9904014468193054,1.0000001192092896,0.9999998211860657,1],[["Hair25_R",[7.450580596923828e-9,0.1725718230009079,3.725290298461914e-8,-0.17603935301303864,0.029646748676896095,0.04157049581408501,0.9830580353736877,1,1.0000001192092896,1.0000001192092896],[["Hair26_R",[2.9802322387695312e-8,0.1238829717040062,-2.2351741790771484e-8,0.03691902384161949,0.28326982259750366,-0.3386003077030182,0.8965182900428772,0.9999998807907104,1,0.9999998211860657],[["Hair27_R",[0,0.11360013484954834,3.725290298461914e-9,0.18678219616413116,0.03417342156171799,0.01253802701830864,0.9817267656326294,1.0000001192092896,1,1],[["Hair28_R",[4.470348358154297e-8,0.12201113998889923,-2.0489096641540527e-8,-0.110519178211689,-0.1095462366938591,0.16148608922958374,0.9745293259620667,1,1.000000238418579,1],[]]]]]]]]]]]]]]]],["Hair21_L",[0.024621548131108284,0.14939874410629272,-0.0411190427839756,-0.971066415309906,-0.11676698923110962,-0.11678998917341232,0.1724979430437088,0.9999992251396179,0.9999998807907104,0.9999991655349731],[["Hair22_L",[1.7080894920695755e-8,0.07549650222063065,-2.1185213583407858e-8,0.042726077139377594,0.02246226742863655,-0.01964012160897255,0.9986411929130554,0.9999997615814209,0.9999998211860657,0.9999998807907104],[["Hair23_L",[-1.30385160446167e-8,0.11306732892990112,1.862645149230957e-9,-0.006093519274145365,-0.037633929401636124,0.05706079304218292,0.9976426362991333,0.9999999403953552,0.9999998807907104,0.9999998211860657],[["Hair24_L",[-7.450580596923828e-9,0.21121430397033691,1.1175870895385742e-8,0.04010539874434471,0.0758029893040657,-0.10839971154928207,0.9904014468193054,1.0000001192092896,0.9999998211860657,1],[["Hair25_L",[-7.450580596923828e-9,0.1725718230009079,3.725290298461914e-8,-0.17603935301303864,-0.029646748676896095,-0.04157049581408501,0.9830580353736877,1,1.0000001192092896,1.0000001192092896],[["Hair26_L",[-2.9802322387695312e-8,0.1238829717040062,-2.2351741790771484e-8,0.03691902384161949,-0.28326982259750366,0.3386003077030182,0.8965182900428772,0.9999998807907104,1,0.9999998211860657],[["Hair27_L",[0,0.11360013484954834,3.725290298461914e-9,0.18678219616413116,-0.03417342156171799,-0.01253802701830864,0.9817267656326294,1.0000001192092896,1,1],[["Hair28_L",[-4.470348358154297e-8,0.12201113998889923,-2.0489096641540527e-8,-0.110519178211689,0.1095462366938591,-0.16148608922958374,0.9745293259620667,1,1.000000238418579,1],[]]]]]]]]]]]]]]]],["Hair31_R",[-0.0006344257271848619,0.14939913153648376,-0.07985317707061768,-0.9843132495880127,0.06418239325284958,0.06423899531364441,0.15126599371433258,1.000000238418579,1.0000001192092896,1.0000004768371582],[["Hair32_R",[-1.210719347000122e-8,0.0727984756231308,-1.979060471057892e-8,0.056747280061244965,0.01272169966250658,-0.02604222483932972,0.9979678988456726,1,0.9999999403953552,0.9999998211860657],[["Hair33_R",[1.3969838619232178e-8,0.10768461972475052,-1.2898817658424377e-7,0.026520270854234695,0.010424706153571606,-0.019086375832557678,0.9994117617607117,1,1,1],[["Hair34_R",[-3.725290298461914e-9,0.21081344783306122,1.3154931366443634e-8,0.06844703108072281,-0.052156127989292145,0.07988469302654266,0.9930827021598816,0.9999999403953552,1.000000238418579,1.0000001192092896],[["Hair35_R",[0,0.1719989776611328,4.0978193283081055e-8,-0.1205706000328064,-0.04455515742301941,0.12126009166240692,0.984263002872467,1,0.9999998807907104,0.9999999403953552],[["Hair36_R",[-4.470348358154297e-8,0.12351469695568085,-3.725290298461914e-9,-0.037015192210674286,0.20051102340221405,-0.27156707644462585,0.9405725002288818,1,0.9999999403953552,0.9999999403953552],[["Hair37_R",[1.4901161193847656e-8,0.11350540816783905,1.210719347000122e-8,0.17390818893909454,0.06217547133564949,-0.05911845713853836,0.981017529964447,0.9999998807907104,1,1.0000001192092896],[["Hair38_R",[1.4901161193847656e-8,0.12201984971761703,-7.450580596923828e-9,-0.11115529388189316,-0.12800024449825287,0.21284005045890808,0.9622679352760315,1,0.9999998211860657,0.9999997019767761],[]]]]]]]]]]]]]]]],["Hair31_L",[0.0006344257271848619,0.14939913153648376,-0.07985317707061768,-0.9843132495880127,-0.06418239325284958,-0.06423899531364441,0.15126599371433258,1.000000238418579,1.0000001192092896,1.0000004768371582],[["Hair32_L",[1.210719347000122e-8,0.0727984756231308,-1.979060471057892e-8,0.056747280061244965,-0.01272169966250658,0.02604222483932972,0.9979678988456726,1,0.9999999403953552,0.9999998211860657],[["Hair33_L",[-1.3969838619232178e-8,0.10768461972475052,-1.2898817658424377e-7,0.026520270854234695,-0.010424706153571606,0.019086375832557678,0.9994117617607117,1,1,1],[["Hair34_L",[3.725290298461914e-9,0.21081344783306122,1.3154931366443634e-8,0.06844703108072281,0.052156127989292145,-0.07988469302654266,0.9930827021598816,0.9999999403953552,1.000000238418579,1.0000001192092896],[["Hair35_L",[0,0.1719989776611328,4.0978193283081055e-8,-0.1205706000328064,0.04455515742301941,-0.12126009166240692,0.984263002872467,1,0.9999998807907104,0.9999999403953552],[["Hair36_L",[4.470348358154297e-8,0.12351469695568085,-3.725290298461914e-9,-0.037015192210674286,-0.20051102340221405,0.27156707644462585,0.9405725002288818,1,0.9999999403953552,0.9999999403953552],[["Hair37_L",[-1.4901161193847656e-8,0.11350540816783905,1.210719347000122e-8,0.17390818893909454,-0.06217547133564949,0.05911845713853836,0.981017529964447,0.9999998807907104,1,1.0000001192092896],[["Hair38_L",[-1.4901161193847656e-8,0.12201984971761703,-7.450580596923828e-9,-0.11115529388189316,0.12800024449825287,-0.21284005045890808,0.9622679352760315,1,0.9999998211860657,0.9999997019767761],[]]]]]]]]]]]]]]]],["Sideburn1_R",[-0.08463571220636368,0.059588078409433365,0.027148611843585968,0.9995024800300598,0.019347738474607468,0.017921678721904755,0.017299650236964226,1.0000600814819336,1.0000001192092896,1.000059962272644],[["Sideburn2_R",[-3.14321368932724e-9,0.05695805698633194,1.1641532182693481e-9,0.0010487505933269858,0.07849115133285522,-0.0757785215973854,0.9940301179885864,0.9999999403953552,1,0.9999998211860657],[]]]],["Sideburn1_L",[0.08316104114055634,0.05958808586001396,0.02714860998094082,0.999524712562561,-0.018206028267741203,-0.017917050048708916,0.017257805913686752,1.0000168085098267,1,1.0000168085098267],[["Sideburn2_L",[3.958120942115784e-9,0.056958332657814026,-9.313225746154785e-10,0.001054661814123392,-0.07849068194627762,0.07578069716691971,0.9940298795700073,0.9999999403953552,0.9999999403953552,0.9999997019767761],[]]]],["FrontHair1",[-0.0801674947142601,0.12183096259832382,0.06070006638765335,0.9904160499572754,-0.09750665724277496,-0.09754859656095505,0.007277561351656914,1.0000026226043701,1.0000001192092896,1],[["FrontHair1_2",[-1.4901161193847656e-8,0.06380410492420197,-1.5832483768463135e-8,0.07633671164512634,0.10690629482269287,-0.12024792283773422,0.9840143322944641,1.0000001192092896,1,0.9999999403953552],[]]]],["FrontHair2",[-0.003160707652568817,0.1368127316236496,0.09830453991889954,0.9842233657836914,0.07744413614273071,0.07740821689367294,0.13897834718227386,1,1,1.0000004768371582],[["FrontHair2_2",[7.08916516600766e-8,0.05305123329162598,-3.7533936847466975e-8,0.19803227484226227,-0.012096422724425793,0.03645673021674156,0.9794427156448364,1,0.9999999403953552,1.0000001192092896],[]]]],["FrontHair3",[0.07869279384613037,0.12183097004890442,0.060700077563524246,0.9904158711433411,0.09750817716121674,0.09754922240972519,0.007277223747223616,1.000002384185791,1,1],[["FrontHair3_2",[2.421438694000244e-8,0.06380397081375122,-1.862645149230957e-9,0.0763363465666771,-0.10690655559301376,0.12024860084056854,0.9840142726898193,0.9999998807907104,1,0.9999998211860657],[]]]],["LeftEye",[0.028106696903705597,0.04913211241364479,0.02728760987520218,-3.7235006744573695e-11,-4.789836638484455e-15,-8.845238583866293e-21,1,1,1,1.0000001192092896],[]],["RightEye",[-0.028988290578126907,0.04911495000123978,0.02688763290643692,-3.7235006744573695e-11,-4.789836638484455e-15,-8.845238583866293e-21,1,1,1,1.0000001192092896],[]]]]]],["Right_shoulder",[-0.01879039779305458,0.1747818887233734,-0.000242409689235501,-0.5975834727287292,0.4451692998409271,0.5144044160842896,0.4243896007537842,0.9999998211860657,0.9999998211860657,0.9999996423721313],[["Right_arm",[5.98272009710854e-8,0.06950049847364426,-1.0726226662427507e-7,-0.17996826767921448,0.1933135837316513,-0.08750152587890625,0.9605127573013306,1.0000001192092896,1,1],[["Right_elbow",[8.39414795450466e-8,0.21507789194583893,-4.481635684783214e-8,-0.007842862978577614,-0.001910681719891727,0.013383752666413784,0.9998778700828552,0.9999998807907104,1,0.9999998807907104],[["Right_wrist",[-4.8142922537408595e-8,0.1890689581632614,-1.6776754208081002e-8,0.0038253096863627434,0.0192723385989666,-0.03635840117931366,0.9991456866264343,0.9999529123306274,0.9999997615814209,0.9999743700027466],[["Thumb0_R",[-0.0015274710021913052,0.013934989459812641,-0.01448698528110981,-0.3260788023471832,0.172303706407547,0.11251583695411682,0.9226723313331604,1.0000003576278687,1.0000004768371582,1.0000001192092896],[["Thumb1_R",[-4.6566128730773926e-8,0.04147572070360184,1.862645149230957e-9,0.13270437717437744,-0.0907953605055809,-0.03271203488111496,0.9864460825920105,1.0000001192092896,0.9999995827674866,0.9999997615814209],[["Thumb2_R",[-5.9600079538313366e-8,0.018970059230923653,2.214782846010621e-8,0.027074433863162994,-0.02721540257334709,0.001372111844830215,0.9992619156837463,1.0000001192092896,1.0000001192092896,1.0000003576278687],[]]]]]],["LittleFinger1_R",[0.019163303077220917,0.064740851521492,0.011390747502446175,-0.030019935220479965,0.001478685182519257,0.03402372822165489,0.9989690184593201,1.0000001192092896,1,1.0000001192092896],[["LittleFinger2_R",[1.4120120184202278e-8,0.027081796899437904,1.6113239098558552e-7,0.034664399921894073,-0.04437341168522835,0.024598155170679092,0.9981104731559753,0.9999998807907104,0.9999995827674866,0.9999997615814209],[["LittleFinger3_R",[3.079840027453429e-8,0.01231003925204277,4.4105231467028716e-8,-0.07590803503990173,0.07809292525053024,-0.021812133491039276,0.9938127994537354,0.9999999403953552,0.9999998807907104,0.9999999403953552],[]]]]]],["RingFinger1_R",[0.0054548936896026134,0.06837297230958939,0.006870504934340715,-0.0357401967048645,0.014316110871732235,0.01984764076769352,0.9990614652633667,1.0000001192092896,1.0000003576278687,1.000000238418579],[["RingFinger2_R",[6.366883553710068e-8,0.033084455877542496,-4.110254536726643e-8,0.00818269606679678,-0.007274249568581581,0.0013416421134024858,0.9999392628669739,0.9999997615814209,0.9999998807907104,0.9999998211860657],[["RingFinger3_R",[3.671115322845253e-8,0.017962312325835228,1.2718248854071135e-7,-0.01127212680876255,-0.01896950602531433,0.04194747284054756,0.99887615442276,1,0.9999998807907104,0.9999999403953552],[]]]]]],["MiddleFinger1_R",[-0.007915524765849113,0.07169001549482346,-0.0021115546114742756,-0.02076011896133423,0.01734338141977787,-0.0033277312759310007,0.9996285438537598,1.000000238418579,1.0000001192092896,1.000000238418579],[["MiddleFinger2_R",[5.722484708314823e-9,0.035151466727256775,7.455829376112888e-8,-0.006091028917580843,-0.005398651584982872,0.015210472047328949,0.9998512268066406,1,0.9999999403953552,0.9999998807907104],[["MiddleFinger3_R",[6.05359673500061e-8,0.019062386825680733,-5.960464477539063e-8,0.005041174590587616,-0.038143955171108246,0.051979146897792816,0.9979067444801331,1,1,0.9999998807907104],[]]]]]],["IndexFinger1_R",[-0.017795158550143242,0.07101564109325409,-0.014736505225300789,-0.01829482987523079,0.006327447015792131,0.011805253103375435,0.9997429251670837,1.0000001192092896,1.000000238418579,1.000000238418579],[["IndexFinger2_R",[8.187744526821916e-8,0.031378790736198425,1.3781348684460681e-7,-0.005569496192038059,-0.005402309820055962,0.014982388354837894,0.9998576641082764,0.9999997615814209,0.9999998807907104,0.9999998211860657],[["IndexFinger3_R",[-3.167941997617163e-8,0.015219328925013542,1.4340538712076523e-7,0.02257685363292694,-0.0029471623711287975,-0.02278923988342285,0.9994810223579407,1,0.9999995827674866,0.9999998807907104],[]]]]]]]]]]]]]],["Left_shoulder",[0.018790405243635178,0.1747818887233734,-0.0002424004633212462,-0.5975832939147949,-0.4451693594455719,-0.5144046545028687,0.42438948154449463,0.9999998807907104,0.9999998807907104,0.9999995827674866],[["Left_arm",[1.3969838619232178e-9,0.06950058043003082,-1.0337680578231812e-7,-0.17996826767921448,-0.19331371784210205,0.08750160038471222,0.9605127573013306,1.0000003576278687,0.9999999403953552,1.0000001192092896],[["Left_elbow",[-2.5659550928480712e-8,0.21507783234119415,1.0907623959610646e-7,-0.007842880673706532,0.0019107592524960637,-0.013383783400058746,0.9998778700828552,0.9999998807907104,0.9999999403953552,1.0000001192092896],[["Left_wrist",[-1.5220155802353474e-8,0.1890687644481659,-4.7414722814664856e-8,0.003825301770120859,-0.019272271543741226,0.03635850548744202,0.9991456866264343,0.9999527931213379,0.9999997019767761,0.9999744296073914],[["Thumb0_L",[0.0015275380574166775,0.013934840448200703,-0.014487024396657944,-0.3351394832134247,-0.17010395228862762,-0.12714055180549622,0.9179223775863647,0.9999998807907104,0.9999998807907104,0.9999998211860657],[["Thumb1_L",[-1.6947907965914055e-8,0.04145832359790802,5.602798580639501e-8,0.16773849725723267,0.07295140624046326,0.07105859369039536,0.9805572628974915,1.0000003576278687,1.0000001192092896,1.0000004768371582],[["Thumb2_L",[-6.332993507385254e-8,0.019382163882255554,2.60770320892334e-8,0.006650859955698252,0.037380147725343704,-0.031075097620487213,0.9987958073616028,0.9999998807907104,0.9999998211860657,0.9999997615814209],[]]]]]],["LittleFinger1_L",[-0.01916319690644741,0.06474068760871887,0.011390762403607368,-0.030019866302609444,-0.0014784729573875666,-0.03402400389313698,0.9989689588546753,0.9999997615814209,1,0.9999995231628418],[["LittleFinger2_L",[2.514570951461792e-8,0.027081817388534546,2.8870999813079834e-8,0.03466673940420151,0.04437600448727608,-0.024599377065896988,0.9981101751327515,0.9999999403953552,1,1.0000001192092896],[["LittleFinger3_L",[8.014277597112596e-8,0.012310044839978218,3.073186150004403e-8,-0.07591863721609116,-0.0781082957983017,0.021822672337293625,0.9938104748725891,1,1.0000003576278687,1.000000238418579],[]]]]]],["RingFinger1_L",[-0.005454880651086569,0.06837291270494461,0.0068704127334058285,-0.0357399582862854,-0.014315797947347164,-0.019847838208079338,0.9990614652633667,0.9999997019767761,1,0.9999999403953552],[["RingFinger2_L",[2.394732412369649e-8,0.03308451548218727,-2.8065223034445808e-8,0.008181936107575893,0.0072730788961052895,-0.001341068185865879,0.9999392628669739,0.9999997615814209,0.9999998807907104,0.9999998211860657],[["RingFinger3_L",[-1.004644190061299e-8,0.01796233281493187,-3.7867677882275075e-9,-0.011276206001639366,0.01896512135863304,-0.04194345325231552,0.9988764524459839,1.0000001192092896,1,1.000000238418579],[]]]]]],["MiddleFinger1_L",[0.007915681228041649,0.07168976217508316,-0.002111495938152075,-0.02076040767133236,-0.017343644052743912,0.003328082850202918,0.999628484249115,0.9999997019767761,0.9999998807907104,0.9999998807907104],[["MiddleFinger2_L",[7.450580596923828e-9,0.03515138849616051,-1.30385160446167e-7,-0.006087168585509062,0.00540324067696929,-0.015214309096336365,0.9998511672019958,1.0000001192092896,1.000000238418579,1.0000001192092896],[["MiddleFinger3_L",[-6.839679400627574e-8,0.019062433391809464,-5.216803344865184e-8,0.0050251055508852005,0.03812279924750328,-0.05196557566523552,0.997908353805542,0.9999999403953552,0.9999999403953552,1.000000238418579],[]]]]]],["IndexFinger1_L",[0.01779543049633503,0.07101528346538544,-0.014736324548721313,-0.01829489879310131,-0.0063277240842580795,-0.011805121786892414,0.9997429847717285,0.9999997615814209,0.9999998807907104,0.9999998807907104],[["IndexFinger2_L",[-5.397573588084015e-8,0.031378962099552155,-1.8634620957413972e-8,-0.0055688172578811646,0.0054030949249863625,-0.014982689172029495,0.9998576641082764,0.9999999403953552,1.0000001192092896,0.9999999403953552],[["IndexFinger3_L",[5.59308048764251e-8,0.015219523571431637,-1.0254986904101315e-7,0.022577444091439247,0.0029488063883036375,0.022788310423493385,0.9994810223579407,1.0000001192092896,1.0000001192092896,1],[]]]]]]]]]]]]]]]]]],["Right_leg",[-0.07171519845724106,0.11545264720916748,0.013953566551208496,1,-3.3001185012921383e-15,7.549787994776125e-8,4.371138473402425e-8,1,1,1],[["Right_knee",[-0.005757778882980347,-0.38112956285476685,-0.02434052713215351,-0.9978883862495422,0.00334024615585804,0.0032219490967690945,0.06478682905435562,1,1,1.000006079673767],[["Right_ankle",[-1.04482751339674e-8,0.41037216782569885,-5.238689482212067e-10,-0.5227291584014893,0.003925474360585213,-0.001032647560350597,0.8524892330169678,1,1.0000063180923462,1.0000017881393433],[["Right_toe",[1.4420045157947925e-9,0.13481487333774567,2.1529187321789323e-9,-0.014249805361032486,-0.9540945291519165,0.295349657535553,0.04763595014810562,1.000000238418579,0.9999997615814209,1.000000238418579],[]]]]]],["Right_leg_2",[-1.2538918348070638e-8,1.2243042135651194e-7,4.406330855744045e-9,-0.9994344711303711,0.007606137543916702,0.007319035939872265,0.031929031014442444,1.000003695487976,0.9999999403953552,1.0000666379928589],[]]]],["Left_leg",[0.07171519845724106,0.11545264720916748,0.013953600078821182,1,-3.3001185012921383e-15,7.549787994776125e-8,4.371138473402425e-8,1,1,1],[["Left_knee",[0.005757778882980347,-0.38112956285476685,-0.02434053272008896,-0.997888445854187,-0.0033341345842927694,-0.003221433609724045,0.0647864118218422,1.0000001192092896,1,0.9999916553497314],[["Left_ankle",[4.71482053399086e-9,0.41037219762802124,-8.498318493366241e-9,-0.5227322578430176,-0.003925326745957136,0.0010325344046577811,0.8524872660636902,1,1.000006914138794,1.0000017881393433],[["Left_toe",[5.078697018490175e-9,0.13481630384922028,3.6854230778260444e-9,-0.00705345906317234,0.9549729228019714,-0.2956053912639618,0.024385549128055573,1.0000001192092896,0.9999997615814209,1],[]]]]]],["Left_leg_2",[1.7263394269662058e-8,1.2243042135651194e-7,3.0436120290744384e-9,-0.9994344711303711,-0.0076051512733101845,-0.007318862713873386,0.031929049640893936,1.000003695487976,0.9999998211860657,1.0000663995742798],[]]]],["ButtTail1",[-1.1981897252155704e-8,-0.02092289924621582,0.050255756825208664,0.5375427007675171,-1.0052156085293973e-7,6.408001951285769e-8,0.8432365655899048,1,1.000000238418579,1.0000001192092896],[["ButtTail2",[1.0191943551065174e-21,0.0586438924074173,-7.127986201282965e-9,-0.12333579361438751,6.8843801339713625e-15,9.183842075222767e-15,0.9923650026321411,1,0.9999998807907104,1],[["ButtTail3",[4.235164736271502e-22,0.10357242822647095,-2.2351741790771484e-8,-0.03757038712501526,1.1912510444744839e-7,-4.478739157320888e-9,0.9992939829826355,0.9999998807907104,0.9999999403953552,1],[["ButtTail4",[-5.4619776109214764e-15,0.11008850485086441,7.876878527213194e-8,-0.1003396213054657,-1.186076019621396e-7,-1.1961430068652135e-8,0.9949532747268677,1.000000238418579,0.9999998211860657,1],[["ButtTail5",[2.010920699710984e-21,0.09006699919700623,-1.0566629526920224e-7,0.105939120054245,-7.351681011191508e-15,1.4716131891095822e-14,0.9943727254867554,0.9999998807907104,1.0000001192092896,1.0000001192092896],[["ButtTail6",[-1.6940658945086007e-21,0.07949180901050568,-1.4901161193847656e-8,0.14714114367961884,-5.748782119828835e-15,-1.0824529435703059e-15,0.9891155958175659,1.0000001192092896,1,0.9999998807907104],[["ButtTail7",[1.6940658945086007e-21,0.08018326759338379,4.470348358154297e-8,0.06513970345258713,-2.4075060758713736e-15,-1.014999792453065e-15,0.9978761672973633,0.9999998807907104,0.9999999403953552,0.9999998211860657],[]]]]]]]]]]]]]]]],["Body",[0,0,0,0,0,0,1,1,1,1],[["Ia body.007_0",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_1",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_2",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_3",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_4",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_5",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_6",[0,0,0,0,0,0,1,1,1,1],[]],["Ia body.007_7",[0,0,0,0,0,0,1,1,1,1],[]]]]]]'},77020:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(36595);function i(e,t){if(a(e,t=t||{}),t.exclude){var n=[e];e.traverse((function(e){return n.push(e)})),n.forEach((function(e){(~t.exclude.indexOf(e.id)||~t.exclude.indexOf(e.name))&&delete t.averagedDirs[e.id]}))}return function(e,t){t&&t.worldPos||a(e,t=t||{});return u(e,t.worldPos,t.averagedDirs,t.preRotations),t}(e,t)}var o=new r._fP;new r.Pa4(0,1,0);function a(e,t){return(t=t||e).worldPos=t.worldPos||{},t.averagedDirs=t.averagedDirs||{},t.preRotations=t.preRotations||{},c(e,t.worldPos),s(e,t.worldPos,t.averagedDirs),t}function s(e,t,n){var i=new r.Pa4,o=e.children.filter((function(e){return e.isBone}));o.forEach((function(e){var n=t[e.id][0];i.add(n)})),i.multiplyScalar(1/o.length),n[e.id]=i,o.forEach((function(e){s(e,t,n)}))}function u(e,t,n,r){n[e.id]&&(e.quaternion.copy(o),e.updateMatrixWorld());var i=r[e.id]||r[e.name];i&&e.quaternion.multiply(i),e.updateMatrixWorld();var a=e.children.filter((function(e){return e.isBone}));a.forEach((function(n){var r=t[n.id][0].clone();e.worldToLocal(r),n.position.copy(r)})),a.forEach((function(e){u(e,t,n,r)}))}new r.Pa4,new r.Pa4,new r.Pa4,new r.yGw;function c(e,t){var n=e.getWorldPosition(new r.Pa4);t[e.id]=[n],e.children.forEach((function(e){e.isBone&&c(e,t)}))}},17751:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(49182),i=n(36595),o=function(){for(var e=Array(25),t=0;t<e.length;t++)e[t]=new i.Tme;return e},a=function e(){(0,r.Z)(this,e),this.head=new i.Tme,this.leftHand=new i.Tme,this.leftHand.pointer=0,this.leftHand.grip=0,this.leftHand.fingers=o(),this.leftHand.leftThumb0=this.leftHand.fingers[1],this.leftHand.leftThumb1=this.leftHand.fingers[2],this.leftHand.leftThumb2=this.leftHand.fingers[3],this.leftHand.leftIndexFinger1=this.leftHand.fingers[6],this.leftHand.leftIndexFinger2=this.leftHand.fingers[7],this.leftHand.leftIndexFinger3=this.leftHand.fingers[8],this.leftHand.leftMiddleFinger1=this.leftHand.fingers[11],this.leftHand.leftMiddleFinger2=this.leftHand.fingers[12],this.leftHand.leftMiddleFinger3=this.leftHand.fingers[13],this.leftHand.leftRingFinger1=this.leftHand.fingers[16],this.leftHand.leftRingFinger2=this.leftHand.fingers[17],this.leftHand.leftRingFinger3=this.leftHand.fingers[18],this.leftHand.leftLittleFinger1=this.leftHand.fingers[21],this.leftHand.leftLittleFinger2=this.leftHand.fingers[22],this.leftHand.leftLittleFinger3=this.leftHand.fingers[23],this.rightHand=new i.Tme,this.rightHand.pointer=0,this.rightHand.grip=0,this.rightHand.fingers=o(),this.rightHand.rightThumb0=this.rightHand.fingers[1],this.rightHand.rightThumb1=this.rightHand.fingers[2],this.rightHand.rightThumb2=this.rightHand.fingers[3],this.rightHand.rightIndexFinger1=this.rightHand.fingers[6],this.rightHand.rightIndexFinger2=this.rightHand.fingers[7],this.rightHand.rightIndexFinger3=this.rightHand.fingers[8],this.rightHand.rightMiddleFinger1=this.rightHand.fingers[11],this.rightHand.rightMiddleFinger2=this.rightHand.fingers[12],this.rightHand.rightMiddleFinger3=this.rightHand.fingers[13],this.rightHand.rightRingFinger1=this.rightHand.fingers[16],this.rightHand.rightRingFinger2=this.rightHand.fingers[17],this.rightHand.rightRingFinger3=this.rightHand.fingers[18],this.rightHand.rightLittleFinger1=this.rightHand.fingers[21],this.rightHand.rightLittleFinger2=this.rightHand.fingers[22],this.rightHand.rightLittleFinger3=this.rightHand.fingers[23],this.floorHeight=0},s=function e(){(0,r.Z)(this,e),this.vrTransforms=new a,this.referencePlayerHeightHmd=1.7,this.referencePlayerWidthWrist=1.39,this.playerHeightHmd=1.7,this.playerWidthWrist=1.39}},97680:function(e,t,n){"use strict";n.d(t,{Fp:function(){return s},Eq:function(){return c},oM:function(){return l},tV:function(){return f},jh:function(){return p},fU:function(){return v},GN:function(){return m},Dm:function(){return y},vt:function(){return g},s_:function(){return b},ll:function(){return w},hN:function(){return R},MX:function(){return A}});var r=n(64414),i=(n(68920),n(36595)),o=(new i.Pa4,new i.Pa4,new i._fP,new i.USm,new i.yGw,(new i._fP).setFromAxisAngle(new i.Pa4(1,0,0),.5*Math.PI),(new i._fP).setFromAxisAngle(new i.Pa4(0,1,0),.5*Math.PI),(new i._fP).setFromAxisAngle(new i.Pa4(0,1,0),.5*-Math.PI),function e(t){t.matrix.copy(t.matrixWorld),t.parent&&t.matrix.premultiply(t.parent.matrixWorld.clone().invert()),t.matrix.decompose(t.position,t.quaternion,t.scale);for(var n=0;n<t.children.length;n++)e(t.children[n])}),a=function e(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(i.name===n)return i;var o=e(i.children,n);if(o)return o}return null},s=function(e,t){for(var n=0;n<e.bones.length;n++){var r=e.bones[n];a(t.bones,r.name).matrixWorld.copy(r.matrixWorld)}var i=t.bones[0].parent;o(i),t.calculateInverses()},u=new i._3(.05,.2,3).applyMatrix4((new i.yGw).makeRotationFromQuaternion((new i._fP).setFromUnitVectors(new i.Pa4(0,1,0),new i.Pa4(0,0,1)))),c=(u.attributes.position.array.length,function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];0===i.children.length?t.includes(i)||t.push(i):e(i.children)}}(e.bones),t}),l=function(e,t){for(;e;e=e.parent)if(t(e))return e;return null},f=function(e,t){for(var n=null;e;e=e.parent)t(e)&&(n=e);return n},h=function(e,t){for(var n=0;e;e=e.parent,n++)if(e===t)return n;return 1/0},d=function(e,t){return function e(n){if(t(n))return n;for(var r=0;r<n.children.length;r++){var i=e(n.children[r]);if(i)return i}return null}(e)},p=function(e,t){for(var n=0,r=0;r<e.length;r++)t.test(e[r])&&n++;return n},v=function(e){return e.bones.find((function(e){return/hip|rootx/i.test(e.name)}))},m=function(e){var t=e.map((function(e){var t=f(e,(function(e){return/head/i.test(e.name)}));return t||null})).filter((function(e){return e})),n=t.length>0?t[0]:null;return n||null},y=function(e,t){var n=t?/l/i:/r/i,r=e.map((function(e){var t=f(e,(function(e){return/eye/i.test(e.name)&&n.test(e.name.replace(/eye/gi,""))}));return t||null})).filter((function(e){return e})).sort((function(e,n){var r=e.name.replace(/shoulder/gi,""),i=p(r,/l/i)-p(r,/r/i),o=n.name.replace(/shoulder/gi,""),a=p(o,/l/i)-p(o,/r/i);return t?a-i:i-a})),i=r.length>0?r[0]:null;return i||null},g=function(e,t){for(var n=e;n;n=n.parent)if(n.parent===t)return n;return null},b=function(e,t){var n=t?/l/i:/r/i,r=e.map((function(e){var t=l(e,(function(e){return/shoulder/i.test(e.name)&&n.test(e.name.replace(/shoulder/gi,""))}));if(t){var r=h(e,t);return r>=3?{bone:t,distance:r}:null}return null})).filter((function(e){return e})).sort((function(e,n){var r=n.distance-e.distance;if(0!==r)return r;var i=e.bone.name.replace(/shoulder/gi,""),o=p(i,/l/i)-p(i,/r/i),a=n.bone.name.replace(/shoulder/gi,""),s=p(a,/l/i)-p(a,/r/i);return t?s-o:o-s})),i=r.length>0?r[0].bone:null;return i||null},w=function(e){return d(e,(function(e){return/hand|wrist/i.test(e.name)}))},R=function(e){for(;;e=e.parent)if(!e.isBone)return e;return null},T=function e(t,n,i){var o=(0,r.Z)(t,3),a=o[0],s=o[1],u=o[2],c=new n;c.name=a,c.position.fromArray(s,0),c.quaternion.fromArray(s,3),c.scale.fromArray(s,7);for(var l=0;l<u.length;l++)c.add(e(u[l],i,i));return c},E=function(e){return T(e,i.Tme,i.N$j)},A=function(e){var t=E(JSON.parse(e));return new i.OdW(t.children)}},25730:function(e,t,n){"use strict";function r(e){return e}function i(e){return e*e}function o(e){return e*(2-e)}function a(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}function s(e){return e*e*e}function u(e){return--e*e*e+1}function c(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}function l(e){return e*e*e*e}function f(e){return 1- --e*e*e*e}function h(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}function d(e){return e*e*e*e*e}function p(e){return--e*e*e*e*e+1}function v(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function m(e){return 1-Math.cos(e*Math.PI/2)}function y(e){return Math.sin(e*Math.PI/2)}function g(e){return.5*(1-Math.cos(Math.PI*e))}function b(e){return 0===e?0:Math.pow(1024,e-1)}function w(e){return 1===e?1:1-Math.pow(2,-10*e)}function R(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}function T(e){return 1-Math.sqrt(1-e*e)}function E(e){return Math.sqrt(1- --e*e)}function A(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}function x(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)}function S(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1}function _(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}function P(e){var t=1.70158;return e*e*((t+1)*e-t)}function k(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}function O(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}function M(e){return 1-I(1-e)}function I(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function C(e){return e<.5?.5*M(2*e):.5*I(2*e-1)+.5}n.r(t),n.d(t,{linear:function(){return r},quadraticIn:function(){return i},quadraticOut:function(){return o},quadraticInOut:function(){return a},cubicIn:function(){return s},cubicOut:function(){return u},cubicInOut:function(){return c},quarticIn:function(){return l},quarticOut:function(){return f},quarticInOut:function(){return h},quinticIn:function(){return d},quinticOut:function(){return p},quinticInOut:function(){return v},sinusoidalIn:function(){return m},sinusoidalOut:function(){return y},sinusoidalInOut:function(){return g},exponentialIn:function(){return b},exponentialOut:function(){return w},exponentialInOut:function(){return R},circularIn:function(){return T},circularOut:function(){return E},circularInOut:function(){return A},elasticIn:function(){return x},elasticOut:function(){return S},elasticInOut:function(){return _},backIn:function(){return P},backOut:function(){return k},backInOut:function(){return O},bounceIn:function(){return M},bounceOut:function(){return I},bounceInOut:function(){return C}})},664:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(36595),i=function(e){r.aNw.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};i.prototype=Object.assign(Object.create(r.aNw.prototype),{constructor:i,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,i){var o=this,a=new r.hH6(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:o.defaultAttributeIDs,attributeTypes:o.defaultAttributeTypes,useUniqueIDs:!1};o.decodeGeometry(e,n).then(t).catch(i)}),n,i)},decodeDracoFile:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)},decodeGeometry:function(e,t){var n=this;for(var r in t.attributeTypes){var o=t.attributeTypes[r];void 0!==o.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=o.name)}var a,s=JSON.stringify(t);if(i.taskCache.has(e)){var u=i.taskCache.get(e);if(u.key===s)return u.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var c=this.workerNextTaskID++,l=e.byteLength,f=this._getWorker(c,l).then((function(n){return a=n,new Promise((function(n,r){a._callbacks[c]={resolve:n,reject:r},a.postMessage({type:"decode",id:c,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return f.catch((function(){return!0})).then((function(){a&&c&&n._releaseTask(a,c)})),i.taskCache.set(e,{key:s,promise:f}),f},_createGeometry:function(e){var t=new r.u9r;e.index&&t.setIndex(new r.TlE(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],o=i.name,a=i.array,s=i.itemSize;t.setAttribute(o,new r.TlE(a,s))}return t},_loadLibrary:function(e,t){var n=new r.hH6(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var o=i.DRACOWorker.toString(),a=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending},_getWorker:function(e,t){var n=this;return this._initDecoder().then((function(){var r;n.workerPool.length<n.workerLimit?((r=new Worker(n.workerSourceURL))._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)):n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(r=n.workerPool[n.workerPool.length-1])._taskCosts[e]=t,r._taskLoad+=t,r}))},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),i.DRACOWorker=function(){var e,t;function n(e,t,n,r,i,o){var a=o.num_components(),s=n.num_points()*a,u=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),l=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,o,c,u,l);var f=new i(e.HEAPF32.buffer,l,s).slice();return e._free(l),{name:r,array:f,itemSize:a}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=i.buffer,a=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var u=function(e,t,r,i){var o,a,s=i.attributeIDs,u=i.attributeTypes,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var l={index:null,attributes:[]};for(var f in s){var h,d,p=self[u[f]];if(i.useUniqueIDs)d=s[f],h=t.GetAttributeByUniqueId(o,d);else{if(-1===(d=t.GetAttributeId(o,e[s[f]])))continue;h=t.GetAttribute(o,d)}l.attributes.push(n(e,t,o,f,p,h))}c===e.TRIANGULAR_MESH&&(l.index=function(e,t,n){var r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);var a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o));return e.destroy(o),l}(t,r,s,a),c=u.attributes.map((function(e){return e.array.buffer}));u.index&&c.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},c)}catch(l){console.error(l),self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(s),t.destroy(r)}}))}}},i.taskCache=new WeakMap,i.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},i.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},i.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},i.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},80620:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(36595),i=function(){function e(e){r.aNw.call(this,e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new a(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new s(e)})),this.register((function(e){return new i(e)})),this.register((function(e){return new l(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(r.aNw.prototype),{constructor:e,load:function(e,t,n,i){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.Zp0.extractUrlBase(e),this.manager.itemStart(e);var s=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},u=new r.hH6(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,(function(n){try{a.parse(n,o,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(r){s(r)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,i,a){var s,u={},c={};if("string"===typeof e)s=e;else if(r.Zp0.decodeText(new Uint8Array(e,0,4))===f){try{u[n.KHR_BINARY_GLTF]=new p(e)}catch(T){return void(a&&a(T))}s=u[n.KHR_BINARY_GLTF].content}else s=r.Zp0.decodeText(new Uint8Array(e));var l=JSON.parse(s);if(void 0===l.asset||l.asset.version[0]<2)a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var h=new G(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(var d=0;d<this.pluginCallbacks.length;d++){var y=this.pluginCallbacks[d](h);c[y.name]=y,u[y.name]=!0}if(l.extensionsUsed)for(d=0;d<l.extensionsUsed.length;++d){var w=l.extensionsUsed[d],R=l.extensionsRequired||[];switch(w){case n.KHR_MATERIALS_UNLIT:u[w]=new o;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[w]=new g;break;case n.KHR_DRACO_MESH_COMPRESSION:u[w]=new v(l,this.dracoLoader);break;case n.KHR_TEXTURE_TRANSFORM:u[w]=new m;break;case n.KHR_MESH_QUANTIZATION:u[w]=new b;break;default:R.indexOf(w)>=0&&void 0===c[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}h.setExtensions(u),h.setPlugins(c),h.parse(i,a)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};function i(e){this.parser=e,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function o(){this.name=n.KHR_MATERIALS_UNLIT}function a(e){this.parser=e,this.name=n.KHR_MATERIALS_CLEARCOAT}function s(e){this.parser=e,this.name=n.KHR_MATERIALS_TRANSMISSION}function u(e){this.parser=e,this.name=n.KHR_TEXTURE_BASISU}function c(e){this.parser=e,this.name=n.EXT_TEXTURE_WEBP,this.isSupported=null}function l(e){this.name=n.EXT_MESHOPT_COMPRESSION,this.parser=e}i.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}},i.prototype._loadLight=function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var o,a=t.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],u=new r.Ilk(16777215);void 0!==s.color&&u.fromArray(s.color);var c=void 0!==s.range?s.range:0;switch(s.type){case"directional":(o=new r.Ox3(u)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new r.cek(u)).distance=c;break;case"spot":(o=new r.PMe(u)).distance=c,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(o),t.cache.add(n,i),i},i.prototype.createNodeAttachment=function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))},o.prototype.getMaterialType=function(){return r.vBJ},o.prototype.extendParams=function(e,t,n){var i=[];e.color=new r.Ilk(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(i)},a.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null},a.prototype.extendMaterialParams=function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.FM8(s,-s)}return Promise.all(o)},s.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.EJi:null},s.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)},u.prototype.loadTexture=function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)},c.prototype.loadTexture=function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var o=i.extensions[t],a=r.images[o.source],s=n.textureLoader;if(a.uri){var u=n.options.manager.getHandler(a.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))},c.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported},l.prototype.loadBufferView=function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,a=r.byteStride,s=new ArrayBuffer(i*a),u=new Uint8Array(e[0],t,n);return o.decodeGltfBuffer(new Uint8Array(s),i,a,u,r.mode,r.filter),s}))}return null};var f="glTF",h=1313821514,d=5130562;function p(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:r.Zp0.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==f)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,o=new DataView(e,12),a=0;a<i;){var s=o.getUint32(a,!0);a+=4;var u=o.getUint32(a,!0);if(a+=4,u===h){var c=new Uint8Array(e,12+a,s);this.content=r.Zp0.decodeText(c)}else if(u===d){var l=12+a;this.body=e.slice(l,l+s)}a+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function v(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function m(){this.name=n.KHR_TEXTURE_TRANSFORM}function y(e){r.Wid.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new r.Ilk).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var r in s)e.uniforms[r]=s[r];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function g(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return y},extendParams:function(e,t,n){var i=t.extensions[this.name];e.color=new r.Ilk(1,1,1),e.opacity=1;var o=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==i.diffuseTexture&&o.push(n.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new r.Ilk(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new r.Ilk(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",s)),o.push(n.assignTexture(e,"specularMap",s))}return Promise.all(o)},createMaterial:function(e){var t=new y(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=r.IOt,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function b(){this.name=n.KHR_MESH_QUANTIZATION}function w(e,t,n,i){r._C8.call(this,e,t,n,i)}v.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(var c in o){var l=I[c]||c.toLowerCase();a[l]=o[c]}for(c in e.attributes){l=I[c]||c.toLowerCase();if(void 0!==o[c]){var f=n.accessors[e.attributes[c]],h=P[f.componentType];u[l]=h,s[l]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),a,u)}))}))},m.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},y.prototype=Object.create(r.Wid.prototype),y.prototype.constructor=y,y.prototype.copy=function(e){return r.Wid.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},w.prototype=Object.create(r._C8.prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-t,l=(n-t)/c,f=l*l,h=f*l,d=e*u,p=d-u,v=-2*h+3*f,m=h-f,y=1-v,g=m-f+l,b=0;b!==a;b++){var w=o[p+b+a],R=o[p+b+s]*c,T=o[d+b+a],E=o[d+b]*c;i[b]=y*w+g*R+v*T+m*E}return i};var R=0,T=1,E=2,A=3,x=4,S=5,_=6,P={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},k={9728:r.TyD,9729:r.wem,9984:r.YLQ,9985:r.qyh,9986:r.aH4,9987:r.D1R},O={33071:r.uWy,33648:r.OoA,10497:r.rpg},M={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},I={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},C={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},D={CUBICSPLINE:void 0,LINEAR:r.NMF,STEP:r.Syv},L="OPAQUE",F="MASK",Z="BLEND";function N(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function H(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function z(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function U(e){var t=e.extensions&&e.extensions[n.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+B(t.attributes):e.indices+":"+B(e.attributes)+":"+e.mode}function B(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function G(e,n){this.json=e||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new r.QRU(this.options.manager):this.textureLoader=new r.dpR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.hH6(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function q(e,t,n){var i=t.attributes,o=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var s in i){var u=I[s]||s.toLowerCase();u in e.attributes||o.push(a(i[s],u))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(c)}return z(e,t),function(e,t,n){var i=t.attributes,o=new r.ZzF;if(void 0!==i.POSITION){var a=(d=n.json.accessors[i.POSITION]).min,s=d.max;if(void 0!==a&&void 0!==s){o.set(new r.Pa4(a[0],a[1],a[2]),new r.Pa4(s[0],s[1],s[2]));var u=t.targets;if(void 0!==u){for(var c=new r.Pa4,l=new r.Pa4,f=0,h=u.length;f<h;f++){var d,p=u[f];if(void 0!==p.POSITION)a=(d=n.json.accessors[p.POSITION]).min,s=d.max,void 0!==a&&void 0!==s?(l.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),l.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),l.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),c.max(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}o.expandByVector(c)}e.boundingBox=o;var v=new r.aLr;o.getCenter(v.center),v.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=v}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a&&(void 0!==(c=t[o]).POSITION&&(r=!0),void 0!==c.NORMAL&&(i=!0),!r||!i);o++);if(!r&&!i)return Promise.resolve(e);var s=[],u=[];for(o=0,a=t.length;o<a;o++){var c=t[o];if(r){var l=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(l)}i&&(l=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal,u.push(l))}return Promise.all([Promise.all(s),Promise.all(u)]).then((function(t){var n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function V(e,t){var n=e.getIndex();if(null===n){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)i.push(a);e.setIndex(i),n=e.getIndex()}var s=n.count-2,u=[];if(t===r.z$h)for(a=1;a<=s;a++)u.push(n.getX(0)),u.push(n.getX(a)),u.push(n.getX(a+1));else for(a=0;a<s;a++)a%2===0?(u.push(n.getX(a)),u.push(n.getX(a+1)),u.push(n.getX(a+2))):(u.push(n.getX(a+2)),u.push(n.getX(a+1)),u.push(n.getX(a)));u.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(u),c}return G.prototype.setExtensions=function(e){this.extensions=e},G.prototype.setPlugins=function(e){this.plugins=e},G.prototype.parse=function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};H(i,o,r),z(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)},G.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var o=t[r].joints,a=0,s=o.length;a<s;a++)e[o[a]].isBone=!0;for(var u=0,c=e.length;u<c;u++){var l=e[u];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}},G.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},G.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r},G.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}},G.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n},G.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},G.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},G.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,n){r.load(N(t.uri,i.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},G.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},G.prototype.loadAccessor=function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,a,s=e[0],u=M[i.type],c=P[i.componentType],l=c.BYTES_PER_ELEMENT,f=l*u,h=i.byteOffset||0,d=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;if(d&&d!==f){var v=Math.floor(h/d),m="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count,y=t.cache.get(m);y||(o=new c(s,v*d,i.count*d/l),y=new r.vpT(o,d/l),t.cache.add(m,y)),a=new r.kB5(y,u,h%d/l,p)}else o=null===s?new c(i.count*u):new c(s,h,i.count*u),a=new r.TlE(o,u,p);if(void 0!==i.sparse){var g=M.SCALAR,b=P[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,R=i.sparse.values.byteOffset||0,T=new b(e[1],w,i.sparse.count*g),E=new c(e[2],R,i.sparse.count*u);null!==s&&(a=new r.TlE(a.array.slice(),a.itemSize,a.normalized));for(var A=0,x=T.length;A<x;A++){var S=T[A];if(a.setX(S,E[A*u]),u>=2&&a.setY(S,E[A*u+1]),u>=3&&a.setZ(S,E[A*u+2]),u>=4&&a.setW(S,E[A*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},G.prototype.loadTexture=function(e){var t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source],o=this.textureLoader;if(i.uri){var a=n.manager.getHandler(i.uri);null!==a&&(o=a)}return this.loadTextureImage(e,i,o)},G.prototype.loadTextureImage=function(e,t,n){var i=this,o=this.json,a=this.options,s=o.textures[e],u=self.URL||self.webkitURL,c=t.uri,l=!1,f=!0;if("image/jpeg"===t.mimeType&&(f=!1),void 0!==t.bufferView)c=i.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);f=6===n||4===n||3===n}l=!0;var r=new Blob([e],{type:t.mimeType});return c=u.createObjectURL(r)}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");return Promise.resolve(c).then((function(e){return new Promise((function(t,i){var o=t;!0===n.isImageBitmapLoader&&(o=function(e){t(new r.ROQ(e))}),n.load(N(e,a.path),o,void 0,i)}))})).then((function(t){!0===l&&u.revokeObjectURL(c),t.flipY=!1,s.name&&(t.name=s.name),f||(t.format=r.UCm);var n=(o.samplers||{})[s.sampler]||{};return t.magFilter=k[n.magFilter]||r.wem,t.minFilter=k[n.minFilter]||r.D1R,t.wrapS=O[n.wrapS]||r.rpg,t.wrapT=O[n.wrapT]||r.rpg,i.associations.set(t,{type:"textures",index:e}),t}))},G.prototype.assignTexture=function(e,t,r){var i=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=i.associations.get(o);o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),i.associations.set(o,s)}}e[t]=o}))},G.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,i=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,u=Object.keys(t.morphAttributes).length>0,c=u&&void 0!==t.morphAttributes.normal;if(e.isPoints){var l="PointsMaterial:"+n.uuid,f=this.cache.get(l);f||(f=new r.UY4,r.F5T.prototype.copy.call(f,n),f.color.copy(n.color),f.map=n.map,f.sizeAttenuation=!1,this.cache.add(l,f)),n=f}else if(e.isLine){l="LineBasicMaterial:"+n.uuid;var h=this.cache.get(l);h||(h=new r.nls,r.F5T.prototype.copy.call(h,n),h.color.copy(n.color),this.cache.add(l,h)),n=h}if(i||o||a||s||u){l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),s&&(l+="skinning:"),i&&(l+="vertex-tangents:"),o&&(l+="vertex-colors:"),a&&(l+="flat-shading:"),u&&(l+="morph-targets:"),c&&(l+="morph-normals:");var d=this.cache.get(l);d||(d=n.clone(),s&&(d.skinning=!0),o&&(d.vertexColors=!0),a&&(d.flatShading=!0),u&&(d.morphTargets=!0),c&&(d.morphNormals=!0),i&&(d.vertexTangents=!0,d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(l,d),this.associations.set(d,this.associations.get(n))),n=d}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n},G.prototype.getMaterialType=function(){return r.Wid},G.prototype.loadMaterial=function(e){var t,i=this,o=this.json,a=this.extensions,s=o.materials[e],u={},c=s.extensions||{},l=[];if(c[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var f=a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=f.getMaterialType(),l.push(f.extendParams(u,s,i))}else if(c[n.KHR_MATERIALS_UNLIT]){var h=a[n.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),l.push(h.extendParams(u,s,i))}else{var d=s.pbrMetallicRoughness||{};if(u.color=new r.Ilk(1,1,1),u.opacity=1,Array.isArray(d.baseColorFactor)){var p=d.baseColorFactor;u.color.fromArray(p),u.opacity=p[3]}void 0!==d.baseColorTexture&&l.push(i.assignTexture(u,"map",d.baseColorTexture)),u.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,u.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(i.assignTexture(u,"metalnessMap",d.metallicRoughnessTexture)),l.push(i.assignTexture(u,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,u)}))))}!0===s.doubleSided&&(u.side=r.ehD);var v=s.alphaMode||L;return v===Z?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,v===F&&(u.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==r.vBJ&&(l.push(i.assignTexture(u,"normalMap",s.normalTexture)),u.normalScale=new r.FM8(1,-1),void 0!==s.normalTexture.scale&&u.normalScale.set(s.normalTexture.scale,-s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==r.vBJ&&(l.push(i.assignTexture(u,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(u.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==r.vBJ&&(u.emissive=(new r.Ilk).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==r.vBJ&&l.push(i.assignTexture(u,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var o;return o=t===y?a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(u):new t(u),s.name&&(o.name=s.name),o.map&&(o.map.encoding=r.knz),o.emissiveMap&&(o.emissiveMap.encoding=r.knz),z(o,s),i.associations.set(o,{type:"materials",index:e}),s.extensions&&H(a,o,s),o}))},G.prototype.createUniqueName=function(e){for(var t=r.iUV.sanitizeNodeName(e||""),n=t,i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n},G.prototype.loadGeometries=function(e){var t=this,i=this.extensions,o=this.primitiveCache;function a(e){return i[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return q(n,e,t)}))}for(var s=[],u=0,c=e.length;u<c;u++){var l,f=e[u],h=U(f),d=o[h];if(d)s.push(d.promise);else l=f.extensions&&f.extensions[n.KHR_DRACO_MESH_COMPRESSION]?a(f):q(new r.u9r,f,t),o[h]={primitive:f,promise:l},s.push(l)}return Promise.all(s)},G.prototype.loadMesh=function(e){for(var t,n=this,i=this.json,o=this.extensions,a=i.meshes[e],s=a.primitives,u=[],c=0,l=s.length;c<l;c++){var f=void 0===s[c].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new r.Wid({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.Wl3})),t.DefaultMaterial):this.getDependency("material",s[c].material);u.push(f)}return u.push(n.loadGeometries(s)),Promise.all(u).then((function(t){for(var i=t.slice(0,t.length-1),u=t[t.length-1],c=[],l=0,f=u.length;l<f;l++){var h,d=u[l],p=s[l],v=i[l];if(p.mode===x||p.mode===S||p.mode===_||void 0===p.mode)!0!==(h=!0===a.isSkinnedMesh?new r.TUv(d,v):new r.Kj0(d,v)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),p.mode===S?h.geometry=V(h.geometry,r.UlW):p.mode===_&&(h.geometry=V(h.geometry,r.z$h));else if(p.mode===T)h=new r.ejS(d,v);else if(p.mode===A)h=new r.x12(d,v);else if(p.mode===E)h=new r.blk(d,v);else{if(p.mode!==R)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new r.woe(d,v)}Object.keys(h.geometry.morphAttributes).length>0&&j(h,a),h.name=n.createUniqueName(a.name||"mesh_"+e),z(h,a),p.extensions&&H(o,h,p),n.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new r.ZAu;for(l=0,f=c.length;l<f;l++)m.add(c[l]);return m}))},G.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r.cPb(r.M8C.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.iKG(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),z(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},G.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},G.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],i=[],o=[],a=[],s=[],u=0,c=t.channels.length;u<c;u++){var l=t.channels[u],f=t.samplers[l.sampler],h=l.target,d=void 0!==h.node?h.node:h.id,p=void 0!==t.parameters?t.parameters[f.input]:f.input,v=void 0!==t.parameters?t.parameters[f.output]:f.output;n.push(this.getDependency("node",d)),i.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",v)),a.push(f),s.push(h)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(n){for(var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=[],l=0,f=i.length;l<f;l++){var h=i[l],d=o[l],p=a[l],v=s[l],m=u[l];if(void 0!==h){var y;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,C[m.path]){case C.weights:y=r.dUE;break;case C.rotation:y=r.iLg;break;case C.position:case C.scale:default:y=r.yC1}var g=h.name?h.name:h.uuid,b=void 0!==v.interpolation?D[v.interpolation]:r.NMF,R=[];C[m.path]===C.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&R.push(e.name?e.name:e.uuid)})):R.push(g);var T=p.array;if(p.normalized){var E;if(T.constructor===Int8Array)E=1/127;else if(T.constructor===Uint8Array)E=1/255;else if(T.constructor==Int16Array)E=1/32767;else{if(T.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");E=1/65535}for(var A=new Float32Array(T.length),x=0,S=T.length;x<S;x++)A[x]=T[x]*E;T=A}for(x=0,S=R.length;x<S;x++){var _=new y(R[x]+"."+C[m.path],d.array,T,b);"CUBICSPLINE"===v.interpolation&&(_.createInterpolant=function(e){return new w(this.times,this.values,this.getValueSize()/3,e)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(_)}}}var P=t.name?t.name:"animation_"+e;return new r.m7l(P,void 0,c)}))},G.prototype.loadNode=function(e){var t=this.json,n=this.extensions,i=this,o=t.nodes[e],a=o.name?i.createUniqueName(o.name):"";return function(){var t=[];return void 0!==o.mesh&&t.push(i.getDependency("mesh",o.mesh).then((function(e){var t=i._getNodeRef(i.meshCache,o.mesh,e);return void 0!==o.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=o.weights.length;t<n;t++)e.morphTargetInfluences[t]=o.weights[t]})),t}))),void 0!==o.camera&&t.push(i.getDependency("camera",o.camera).then((function(e){return i._getNodeRef(i.cameraCache,o.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var s;if((s=!0===o.isBone?new r.N$j:t.length>1?new r.ZAu:1===t.length?t[0]:new r.Tme)!==t[0])for(var u=0,c=t.length;u<c;u++)s.add(t[u]);if(o.name&&(s.userData.name=o.name,s.name=a),z(s,o),o.extensions&&H(n,s,o),void 0!==o.matrix){var l=new r.yGw;l.fromArray(o.matrix),s.applyMatrix4(l)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return i.associations.set(s,{type:"nodes",index:e}),s}))},G.prototype.loadScene=function(){function e(t,n,i,o){var a=i.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===a.skin?e:o.getDependency("skin",a.skin).then((function(e){for(var n=[],r=0,i=(t=e).joints.length;r<i;r++)n.push(o.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var i=[],o=[],a=0,s=n.length;a<s;a++){var u=n[a];if(u){i.push(u);var c=new r.yGw;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*a),o.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new r.OdW(i,o),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var r=[];if(a.children)for(var s=a.children,u=0,c=s.length;u<c;u++){var l=s[u];r.push(e(l,t,i,o))}return Promise.all(r)}))}return function(t){var n=this.json,i=this.extensions,o=this.json.scenes[t],a=new r.ZAu;o.name&&(a.name=this.createUniqueName(o.name)),z(a,o),o.extensions&&H(i,a,o);for(var s=o.nodes||[],u=[],c=0,l=s.length;c<l;c++)u.push(e(s[c],a,n,this));return Promise.all(u).then((function(){return a}))}}(),e}()},2367:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},282:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},64841:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2367);function i(e){if(Array.isArray(e))return(0,r.Z)(e)}},94780:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},58700:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},49182:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},63290:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(22697),i=n(90171);function o(e,t,n){return(o=(0,i.Z)()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&(0,r.Z)(o,n.prototype),o}).apply(null,arguments)}},39337:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:function(){return i}})},15194:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},42828:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(78940);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=(0,r.Z)(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},89306:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:function(){return r}})},13987:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(22697);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.Z)(e,t)}},15872:function(e,t,n){"use strict";function r(e){return-1!==Function.toString.call(e).indexOf("[native code]")}n.d(t,{Z:function(){return r}})},90171:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},99037:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,{Z:function(){return r}})},76727:function(e,t,n){"use strict";function r(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}n.d(t,{Z:function(){return r}})},27320:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},593:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},11742:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},29569:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(20256),i=n(94780);function o(e,t){return!t||"object"!==(0,r.Z)(t)&&"function"!==typeof t?(0,i.Z)(e):t}},22697:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:function(){return r}})},64414:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(282),i=n(76727),o=n(2412),a=n(27320);function s(e,t){return(0,r.Z)(e)||(0,i.Z)(e,t)||(0,o.Z)(e,t)||(0,a.Z)()}},78940:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(89306);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}},77866:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(64841),i=n(99037),o=n(2412),a=n(593);function s(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,o.Z)(e)||(0,a.Z)()}},20256:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:function(){return r}})},2412:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2367);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},49135:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(89306),i=n(22697),o=n(15872),a=n(63290);function s(e){var t="function"===typeof Map?new Map:void 0;return(s=function(e){if(null===e||!(0,o.Z)(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return(0,a.Z)(e,arguments,(0,r.Z)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(n,e)})(e)}},33221:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,u=[],c=!1,l=-1;function f(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&h())}function h(){if(!c){var e=a(f);c=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},35406:function(e,t,n){"use strict";var r=n(49804),i=n(4821);Object.defineProperty(t,"__esModule",{value:!0}),t.BufferManager=void 0;var o=n(41385),a=function(){function e(t){r(this,e),this.maxByteSize=null!==t&&void 0!==t?t:1e6,this._offset=0,this._buffer=new ArrayBuffer(this.maxByteSize),this._dataView=new DataView(this._buffer),this._uint8Array=new Uint8Array(this._buffer),this._textEncoder=new TextEncoder,this._textDecoder=new TextDecoder}return i(e,[{key:"refresh",value:function(e){this._offset=0,e&&this._uint8Array.set(new Uint8Array(e))}},{key:"finalize",value:function(){return this._buffer.slice(0,this._offset)}},{key:"append",value:function(e,t){if("String"===e.type){this._dataView.setUint8(this._offset,34),this._offset+=o.uint8.bytes;var n=this._textEncoder.encode(t.toString());return this._uint8Array.set(n,this._offset),this._offset+=n.byteLength,this._dataView.setUint8(this._offset,34),void(this._offset+=o.uint8.bytes)}if("Boolean"===e.type)this._dataView.setUint8(this._offset,!0===t?1:0);else{switch(e.type){case"BigInt64":case"BigUint64":t="bigint"===typeof t?t:BigInt(t);break;case"Float32":case"Float64":t=Number(Number(t).toPrecision("Float32"===e.type?7:16))}this._dataView["set".concat(e.type)](this._offset,t)}this._offset+=e.bytes}},{key:"read",value:function(e){var t,n=this._offset+e.bytes;if("String"===e.type){var r=this._uint8Array[this._offset],i=this._uint8Array.indexOf(34,this._offset+1);if(34!==r||i<this._offset)throw new Error("Buffer contains invalid string.");t=this._textDecoder.decode(this._uint8Array.subarray(this._offset+1,i)),n=i+1}else"Boolean"===e.type?t=Boolean(this._dataView.getUint8(this._offset)):(t=this._dataView["get".concat(e.type)](this._offset),"Float32"!==e.type&&"Float64"!==e.type||(t=Number(Number(t).toPrecision("Float32"===e.type?7:16))));return this._offset=n,t}},{key:"offset",get:function(){return this._offset}}]),e}();t.BufferManager=a},97157:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.views=void 0,o(n(32906),t),o(n(79011),t),o(n(51691),t),o(n(41385),t),t.views=a(n(41385))},32906:function(e,t,n){"use strict";var r=n(49804),i=n(4821);Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var o=n(35406),a=n(79011),s=n(41385),u=n(30521),c=function(){function e(t,n){r(this,e),this._buffer=new o.BufferManager(n),this.schema=t}return i(e,[{key:"toBuffer",value:function(t){if(this._buffer.refresh(),Array.isArray(t)){this._buffer.append(s.uint8,e.BUFFER_ARRAY),this._buffer.append(s.uint8,this.schema.id),this._buffer.append(s.uint16,t.length);for(var n=0;n<t.length;n++)this.serialize(t[n],this.schema.struct)}else this._buffer.append(s.uint8,e.BUFFER_OBJECT),this._buffer.append(s.uint8,this.schema.id),this.serialize(t,this.schema.struct);return this._buffer.finalize()}},{key:"fromBuffer",value:function(t,n){if(t.byteLength>this._buffer.maxByteSize)throw new Error("Buffer exceeds max allocation size.");this._buffer.refresh(t);var r=this._buffer.read(s.uint8);if(n&&n!==r)throw new Error("Expected buffer type to be ".concat(n," but got ").concat(r,"."));if(this._buffer.read(s.uint8)!==this.schema.id)throw new Error("Expected schema id to be ".concat(this.schema.id));if(r===e.BUFFER_OBJECT)return this.deserialize(this.schema.struct);for(var i=this._buffer.read(s.uint16),o=[],a=0;a<i;a++)o.push(this.deserialize(this.schema.struct));return o}},{key:"serialize",value:function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=e[n[r]],o=t[n[r]];if(u.isBufferView(o))this._buffer.append(o,i);else if(o instanceof a.Schema)this.serialize(i,o.struct);else if(Array.isArray(o)){this._buffer.append(s.uint16,i.length);var c=o[0];if(c instanceof a.Schema)for(var l=0;l<i.length;l++)this.serialize(i[l],c.struct);else if(u.isBufferView(c))for(var f=0;f<i.length;f++)this._buffer.append(c,i[f])}else u.isObject(o)&&this.serialize(i,o)}}},{key:"deserialize",value:function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=e[n[r]];if(u.isBufferView(i))t[n[r]]=this._buffer.read(i);else if(Array.isArray(i)){var o=this._buffer.read(s.uint16),c=i[0],l=[];if(c instanceof a.Schema)for(var f=0;f<o;f++)l.push(this.deserialize(c.struct));else if(u.isBufferView(c))for(var h=0;h<o;h++)l.push(this._buffer.read(c));t[n[r]]=l}else t[n[r]]=this.deserialize(i instanceof a.Schema?i.struct:i)}return t}}],[{key:"fromSchemaDefinition",value:function(t,n){return new e(new a.Schema(t,n))}},{key:"getIdFromBuffer",value:function(e){return new Uint8Array(e)[1]}}]),e}();t.Model=c,c.BUFFER_ARRAY=0,c.BUFFER_OBJECT=1},79011:function(e,t,n){"use strict";var r=n(49804),i=n(4821);function o(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=void 0;var s=n(30521),u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.instances.size;if(r(this,e),this.struct=e.definition(t),this.id=n,e.instances.get(n))throw new Error('A Schema with the name "'.concat(n,'" already exists.'));if(e.instances.set(n,this),e.instances.size>255)throw new Error("The maximum number of Schema instances (255) has been reached.")}return i(e,null,[{key:"definition",value:function(e){return this.sortStruct(e)}},{key:"sortStruct",value:function(e){var t=this,n=Object.keys(e);n.length<=1&&this.getSortPriority(e[n[0]]);var r,i={},a=o(n.sort((function(n,r){var i=t.getSortPriority(e[n]),o=t.getSortPriority(e[r]);return i===o?n<r?-1:1:i<o?-1:1})));try{for(a.s();!(r=a.n()).done;){var u=r.value,c=e[u];s.isObject(c)&&!s.isBufferView(c)?i[u]=this.sortStruct(c):i[u]=c}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getSortPriority",value:function(t){if(s.isBufferView(t))return"String"===t.type?2:0;if(t instanceof e)return 5;if(Array.isArray(t)){if(s.isBufferView(t[0]))return"String"===t[0].type?3:1;if(t[0]instanceof e)return 6}if(s.isObject(t))return 4;throw new Error("Unsupported data type in schema definition: ".concat(t))}}]),e}();t.Schema=u,u.instances=new Map},51691:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30521:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBufferView=t.isObject=void 0,t.isObject=function(e){return"object"===typeof e&&Object.getPrototypeOf(e)===Object.prototype},t.isBufferView=function(e){return e&&"string"===typeof e.type&&"number"===typeof e.bytes}},41385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.string=t.float64=t.float32=t.uint64=t.int64=t.uint32=t.uint16=t.uint8=t.int32=t.int16=t.int8=void 0;var n=function(e){return{type:"Int".concat(e),bytes:8===e?1:16===e?2:4}};t.int8=n(8),t.int16=n(16),t.int32=n(32);var r=function(e){return{type:"Uint".concat(e),bytes:8===e?1:16===e?2:4}};t.uint8=r(8),t.uint16=r(16),t.uint32=r(32);var i=function(e){return{type:"Big".concat(e?"Int":"Uint","64"),bytes:8}};t.int64=i(!0),t.uint64=i(!1);var o=function(e){return{type:"Float".concat(e),bytes:32===e?4:8}};t.float32=o(32),t.float64=o(64),t.string={type:"String",bytes:1},t.boolean={type:"Boolean",bytes:1}}}]);