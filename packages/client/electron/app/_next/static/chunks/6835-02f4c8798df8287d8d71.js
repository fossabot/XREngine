(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6835],{60645:function(e,t,n){"use strict";n.d(t,{nZ:function(){return h},Vb:function(){return m},aG:function(){return v}});var r=n(48533),o=n.n(r),i=n(64414),s=n(58700),a=n(36595),c=n(47396),u=n(664),l=n(80620),p=n(91365),f=new l.E,d=null;function h(){return f}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,s.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){h().load(t,(function(t){v(t),e({scene:t.scene,json:{},stats:{}})}),null,(function(e){n(e)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c.C?(d=new u._).setDecoderPath("/loader_decoders/"):((d=new p.Z).getDecoderModule=function(){},d.preload=function(){}),f.setDRACOLoader(d);var v=function(e){g(e.parser),b(e)},g=function(e){for(var t=function(){var t=(0,s.Z)(o().mark((function t(n){var r,s,a,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.json.materials[n].extensions.MOZ_lightmap,t.next=3,Promise.all([e.getDependency("material",n),e.getDependency("texture",r.index)]);case 3:return s=t.sent,a=(0,i.Z)(s,2),c=a[0],u=a[1],c.lightMap=u,c.lightMapIntensity=void 0!==r.intensity?r.intensity:1,c.needsUpdate=!0,t.abrupt("return",u);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=0;n<e.json.materials.length;n++){var r=e.json.materials[n];r.extensions&&(r.extensions.MOZ_lightmap&&t(n))}},b=function(e){var t,n,r,o;if(3===(null===(o=null===(r=null===(n=null===(t=e.parser.json)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.MOZ_hubs_components)||void 0===r?void 0:r.MOZ_hubs_components)||void 0===o?void 0:o.version)){var i=[];e.scene.traverse((function(e){if(e.userData.gltfExtensions&&e.userData.gltfExtensions.MOZ_hubs_components){var t;switch(Object.keys(e.userData.gltfExtensions.MOZ_hubs_components)[0]){case"point-light":t=C(e);break;case"ambient-light":t=E(e)}t&&(t.position.copy(e.position),t.quaternion.copy(e.quaternion),e.parent.add(t),i.push(e),console.log(t))}}));for(var s=0,a=i;s<a.length;s++){var c=a[s];c.parent.remove(c)}}},w=function(e,t){"undefined"!==typeof t.castShadow&&(e.castShadow=t.castShadow),"undefined"!==typeof t.shadowResolution&&e.shadow.mapSize.set(t.shadowResolution[0],t.shadowResolution[1]),"undefined"!==typeof t.shadowBias&&(e.shadow.bias=t.shadowBias),"undefined"!==typeof t.shadowRadius&&(e.shadow.radius=t.shadowRadius)},C=function(e){var t=e.userData.gltfExtensions.MOZ_hubs_components["point-light"],n=new a.cek(t.color,t.intensity,t.distance,t.decay);return w(n,t),n},E=function(e){var t=e.userData.gltfExtensions.MOZ_hubs_components["ambient-light"];return new a.Mig(t.color,t.intensity)}},68920:function(e,t,n){"use strict";n.d(t,{qf:function(){return o}});var r=n(36595);function o(e,t){for(var n=null!==e[0].index,o=new Set(Object.keys(e[0].attributes)),s=new Set(Object.keys(e[0].morphAttributes)),a={},c={},u=e[0].morphTargetsRelative,l=new r.u9r,p=0,f=0;f<e.length;++f){var d=e[f],h=0;if(n!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var m in d.attributes){if(!o.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[m]&&(a[m]=[]),a[m].push(d.attributes[m]),h++}if(h!==o.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". Make sure all geometries have the same number of attributes."),null;if(u!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var y in d.morphAttributes){if(!s.has(y))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===c[y]&&(c[y]=[]),c[y].push(d.morphAttributes[y])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(d.userData),t){var v=void 0;if(n)v=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+f+". The geometry must have either an index or a position attribute"),null;v=d.attributes.position.count}l.addGroup(p,v,f),p+=v}}if(n){for(var g=0,b=[],w=0;w<e.length;++w){for(var C=e[w].index,E=0;E<C.count;++E)b.push(C.getX(E)+g);g+=e[w].attributes.position.count}l.setIndex(b)}for(var k in a){var x=i(a[k]);if(!x)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+k+" attribute."),null;l.setAttribute(k,x)}for(var T in c){var S=c[T][0].length;if(0===S)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[T]=[];for(var A=0;A<S;++A){for(var _=[],R=0;R<c[T].length;++R)_.push(c[T][R][A]);var P=i(_);if(!P)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+T+" morphAttribute."),null;l.morphAttributes[T].push(P)}}return l}function i(e){for(var t,n,o,i=0,s=0;s<e.length;++s){var a=e[s];if(a.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===o&&(o=a.normalized),o!==a.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=a.array.length}for(var c=new t(i),u=0,l=0;l<e.length;++l)c.set(e[l].array,u),u+=e[l].array.length;return new r.TlE(c,n,o)}},44978:function(e,t,n){"use strict";n.d(t,{n2:function(){return o},UG:function(){return i}});var r=n(33221),o=("undefined"!==typeof window&&window.document,"object"===typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name),i="undefined"!==typeof r&&null!=r.versions&&null!=r.versions.node},49903:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=!1;if("undefined"!==typeof navigator&&"undefined"!==typeof window){var o=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||(null===navigator||void 0===navigator?void 0:navigator.vendor)||(null===window||void 0===window?void 0:window.opera);r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4))}var i=function(){var e,t;return(null===(t=null===(e=globalThis)||void 0===e?void 0:e.__messageQueue)||void 0===t?void 0:t.isMobile)||r}},483:function(e,t,n){"use strict";n.d(t,{Bb:function(){return C},D4:function(){return x},VY:function(){return E},fO:function(){return k}});var r=n(49182),o=n(36595),i=n(73601),s=n(87227),a=n(85602),c=n(80375),u=n(44978),l=n(57227),p=n(13987),f=n(29569),d=n(89306),h=n(39337),m=n(76207);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var v=function(){function e(){(0,r.Z)(this,e),this.gain={value:0}}return(0,h.Z)(e,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){}}]),e}(),g=function(){function e(){(0,r.Z)(this,e),this.panningModel="HRTF",this.gain={value:0}}return(0,h.Z)(e,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){}}]),e}(),b=function(e){(0,p.Z)(n,e);var t=y(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this)).type="Audio",o.listener=e,o.context=e.context,o.gain=new v,o.autoplay=!1,o.detune=0,o.loop=!1,o.loopStart=0,o.loopEnd=0,o.offset=0,o.duration=void 0,o.playbackRate=1,o.isPlaying=!1,o.hasPlaybackControl=!0,o.source=null,o.sourceType="empty",o.filters=[],o}return(0,h.Z)(n,[{key:"getOutput",value:function(){}},{key:"setNodeSource",value:function(e){return this.__callFunc("setNodeSource",e),this}},{key:"setMediaElementSource",value:function(e){return this.messageQueue.queue.push({messageType:m.Cs.AUDIO_SOURCE_ELEMENT_SET,message:{sourceID:e.uuid,proxyID:this.proxyID}}),this}},{key:"setMediaStreamSource",value:function(e){return this.messageQueue.queue.push({messageType:m.Cs.AUDIO_SOURCE_STREAM_SET,message:{sourceID:e,proxyID:this.proxyID}}),this}},{key:"setBuffer",value:function(e){return this.messageQueue.queue.push({messageType:m.Cs.AUDIO_BUFFER_SET,message:{bufferID:e,proxyID:this.proxyID}}),this}},{key:"play",value:function(){return this.__callFunc("play"),this}},{key:"pause",value:function(){return this.__callFunc("pause"),this}},{key:"stop",value:function(){return this.__callFunc("stop"),this}},{key:"connect",value:function(){return this.__callFunc("connect"),this}},{key:"disconnect",value:function(){return this.__callFunc("disconnect"),this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return this.filters=e,this.__callFunc("setFilters",e),this}},{key:"setDetune",value:function(e){return this.detune=e,this.__callFunc("setDetune",e),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){return this.playbackRate=e,this.__callFunc("setPlaybackRate",e),this}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return this.loop}},{key:"setLoop",value:function(e){return this.__callFunc("setLoop",e),this.loop=e,this}},{key:"setVolume",value:function(e){return this.__callFunc("setVolume",e),this.gain.gain.value=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}}]),n}(m.ps),w=function(e){(0,p.Z)(n,e);var t=y(n);function n(e){var o;return(0,r.Z)(this,n),(o=t.call(this,e)).type="PositionalAudio",o.panner=new g,o}return(0,h.Z)(n,[{key:"getOutput",value:function(){}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.__callFunc("setRefDistance",e),this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.__callFunc("setRolloffFactor",e),this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.__callFunc("setDistanceModel",e),this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.__callFunc("setMaxDistance",e),this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.__callFunc("setMaxDistance",e,t,n),this}}]),n}(b),C=(new(function(){function e(){(0,r.Z)(this,e),this.messageQueue=globalThis.__messageQueue}return(0,h.Z)(e,[{key:"createMediaElementSource",value:function(e){return document.createElement("mediaElementSource",{elementID:e.uuid})}}]),e}()),u.n2?b:o.BbS),E=u.n2?w:o.VYz,k=u.n2?l.Q:o.fO1,x=function e(){(0,r.Z)(this,e)};x.engineTimer=null,x.engineIKTimer=null,x.isExecuting=!1,x.physicsFrameRate=60,x.networkFramerate=20,x.timeScaleTarget=1,x.clock=new o.SUY,x.renderer=null,x.csm=null,x.xrSession=null,x.context=null,x.scene=null,x.camera=null,x.cameraTransform=null,x.audioListener=null,x.eventDispatcher=new a.H,x.options={entityPoolSize:0},x.enabled=!0,x.deferredRemovalEnabled=!0,x.systems=[],x.entities=[],x.entityMap=new Map,x.queries=[],x.components=[],x.nextEntityId=0,x.nextComponentId=0,x.entityPool=new s.n(i.J),x.componentsMap={},x.componentPool={},x.numComponents={},x.entitiesWithComponentsToRemove=[],x.entitiesToRemove=[],x.systemsToExecute=[],x.tick=0,x.createElement=c.a,x.hasUserEngaged=!1,x.useAudioSystem=!1,x.inputState=new Map,x.prevInputState=new Map,x.gamepadConnected=!1,x.gamepadThreshold=.1,x.gamepadButtons=[],x.gamepadInput=[],x.xrSupported=!1},34452:function(e,t,n){"use strict";n.d(t,{NL:function(){return w},On:function(){return C},rj:function(){return E},cD:function(){return S}});var r=n(39337),o=n(42828),i=n(49182),s=n(94780),a=n(13987),c=n(29569),u=n(89306),l=n(79559),p=n(61467),f=n(46192),d=n(41912),h=n(65622),m=n(95812),y=n(5297),v=n(16090),g=n(483);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var w=function(e){(0,a.Z)(n,e);var t=b(n);function n(){var e;return(0,i.Z)(this,n),e=t.call(this),n.instance=(0,s.Z)(e),e}return n}(l.p);w.EVENTS={CONNECT_TO_WORLD:"CORE_CONNECT_TO_WORLD",CONNECT_TO_WORLD_TIMEOUT:"CORE_CONNECT_TO_WORLD_TIMEOUT",JOINED_WORLD:"CORE_JOINED_WORLD",LEAVE_WORLD:"CORE_LEAVE_WORLD",LOAD_SCENE:"CORE_LOAD_SCENE",SCENE_LOADED:"CORE_SCENE_LOADED",ENTITY_LOADED:"CORE_ENTITY_LOADED",ENABLE_SCENE:"CORE_ENABLE_SCENE",LOAD_AVATAR:"CORE_LOAD_AVATAR",CLIENT_ENTITY_LOAD:"CORE_CLIENT_ENTITY_LOAD",USER_ENGAGE:"CORE_USER_ENGAGE",ENTITY_DEBUG_DATA:"CORE_ENTITY_DEBUG_DATA"};var C=function(){w.instance.addEventListener(w.EVENTS.LOAD_SCENE,(function e(t){(0,h.e)(t.result),w.instance.removeEventListener(w.EVENTS.LOAD_SCENE,e)}));w.instance.addEventListener(w.EVENTS.JOINED_WORLD,(function e(t){(0,f.C)(t.worldState),w.instance.removeEventListener(w.EVENTS.JOINED_WORLD,e)})),w.instance.addEventListener(d.T.EVENTS.RECEIVE_DATA,(function(e){(0,f.C)(e.unbufferedState,e.delta)})),w.instance.addEventListener(w.EVENTS.LOAD_AVATAR,(function(e){var t=(0,v.rV)(e.entityID),n=(0,v.Ei)(t,m.rl);null!=n&&(n.avatarId=e.avatarId),(0,y.Of)(t)}));w.instance.addEventListener(w.EVENTS.USER_ENGAGE,(function e(){g.D4.hasUserEngaged=!0,w.instance.removeEventListener(w.EVENTS.USER_ENGAGE,e)}))},E=function(){w.instance.addEventListener(d.T.EVENTS.SEND_DATA,(function(e){p.Z.instance.transport.sendData(e.buffer)}))},k="ENGINE_EVENTS_PROXY_EVENT",x="ENGINE_EVENTS_PROXY_EVENT_ADD",T="ENGINE_EVENTS_PROXY_EVENT_REMOVE",S=function(e){(0,a.Z)(n,e);var t=b(n);function n(e){var r;(0,i.Z)(this,n),(r=t.call(this)).messageQueue=e;var o=function(e){r.messageQueue.sendEvent(k,{event:e})};return r.messageQueue.addEventListener(x,(function(e){var t=e.detail.type;r.addEventListener(t,o,!0)})),r.messageQueue.addEventListener(T,(function(e){var t=e.detail.type;r.removeEventListener(t,o,!0)})),r.messageQueue.addEventListener(k,(function(e){var t=e.detail.event;r.dispatchEvent(t,!0)})),r}return(0,r.Z)(n,[{key:"addEventListener",value:function(e,t,r){r||this.messageQueue.sendEvent(x,{type:e}),(0,o.Z)((0,u.Z)(n.prototype),"addEventListener",this).call(this,e,t)}},{key:"removeEventListener",value:function(e,t,r){r||this.messageQueue.sendEvent(T,{type:e}),(0,o.Z)((0,u.Z)(n.prototype),"removeEventListener",this).call(this,e,t)}},{key:"dispatchEvent",value:function(e,t,r){t||this.messageQueue.sendEvent(k,{event:e},r),(0,o.Z)((0,u.Z)(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(w)},16090:function(e,t,n){"use strict";n.d(t,{Ei:function(){return c},Tk:function(){return u},aT:function(){return l},tu:function(){return p},Qe:function(){return f},af:function(){return d},JP:function(){return h},Sx:function(){return m},PF:function(){return y},yb:function(){return v},Xr:function(){return g},rV:function(){return b}});var r=n(483),o=n(86463),i=n(57473),s=n(8603),a=n(73731);function c(e,t){var n=e.components[t._typeId];if(n){for(var r=0;r<e.queries.length;r++){var o=e.queries[r];o.reactive&&-1!==o.components.indexOf(t)&&o.eventDispatcher.dispatchEvent(a.eE,e,n)}return n}}function u(e,t,n){if("undefined"!==typeof t._typeId||r.D4.componentsMap[t._typeId]||(0,o.RM)(t),!~e.componentTypes.indexOf(t)){e.componentTypes.push(t),void 0!==t.isSystemStateComponent&&e.numStateComponents++;var s=new i.L(t),c=s?s.acquire():new t(n);for(var u in c.entity=e,c._typeId=t._typeId,s&&n&&c.copy(n),e.components[t._typeId]=c,r.D4.queries){var l=r.D4.queries[u];~l.notComponents.indexOf(t)&&~l.entities.indexOf(e)?l.removeEntity(e):~l.components.indexOf(t)&&l.match(e)&&!~l.entities.indexOf(e)&&l.addEntity(e)}return r.D4.numComponents[c._typeId]++,r.D4.eventDispatcher.dispatchEvent(a.NR,e,t),c}}function l(e,t,n){var o=e.componentTypes.indexOf(t);if(~o){var i=e.components[t._typeId];if(r.D4.eventDispatcher.dispatchEvent(a.ub,e,i),n){e.componentTypes.splice(o,1);var c=e.components[i._typeId];delete e.components[i._typeId],c.dispose(),r.D4.numComponents[i._typeId]--}else 0===e.componentTypesToRemove.length&&r.D4.entitiesWithComponentsToRemove.push(e),e.componentTypes.splice(o,1),e.componentTypesToRemove.push(i),e.componentsToRemove[i._typeId]=e.components[i._typeId],delete e.components[i._typeId];for(var u in r.D4.queries){var l=r.D4.queries[u];~l.notComponents.indexOf(t)&&!~l.entities.indexOf(e)&&l.match(e)?l.addEntity(e):~l.components.indexOf(t)&&~l.entities.indexOf(e)&&!l.match(e)&&l.removeEntity(e)}return t.__proto__===s.h&&(e.numStateComponents--,0===e.componentTypes.length&&m(e)),i}}function p(e,t,n){return e.componentTypes.length>0&&!!~e.componentTypes.indexOf(t)||void 0!==n&&n&&function(e,t){return!!~e.componentTypesToRemove.indexOf(t)}(e,t)}function f(e,t){for(var n=0;n<t.length;n++)if(!p(e,t[n]))return!1;return!0}function d(e,t){for(var n=0;n<t.length;n++)if(p(e,t[n]))return!0;return!1}function h(){var e=r.D4.entityPool.acquire();return r.D4.entities.push(e),r.D4.entityMap.set(String(e.id),e),r.D4.eventDispatcher.dispatchEvent(a.yP,e),e}function m(e,t){var n=r.D4.entities.indexOf(e);if(~n){if(0===e.numStateComponents){for(var o in r.D4.eventDispatcher.dispatchEvent(a.tm,e),r.D4.queries){var i=r.D4.queries[o];-1!==e.queries.indexOf(i)&&i.removeEntity(e)}t?(r.D4.entities.splice(n,1),r.D4.entityMap.delete(String(e.id)),r.D4.entityPool.release(e)):r.D4.entitiesToRemove.push(e)}y(e,t)}else console.error("Tried to remove entity not in list")}function y(e,t){for(var n=e.componentTypes,r=n.length-1;r>=0;r--)n[r].__proto__!==s.h&&l(e,n[r],t)}function v(){for(var e=r.D4.entities.length-1;e>=0;e--)m(r.D4.entities[e])}function g(e,t,n){var r=e.components[t._typeId];return!r&&n&&(r=e.componentsToRemove[t._typeId]),r}function b(e){return r.D4.entityMap.get(String(e))}},17356:function(e,t,n){"use strict";var r;n.d(t,{V:function(){return r}}),function(e){e[e.Free=0]="Free",e[e.Fixed=1]="Fixed",e[e.Network=2]="Network"}(r||(r={}))},25802:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(36595),o=n(71362);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.dpR;return new Promise((function(n,r){t.load(e,n,null,(function(t){return r(new o.mQ('Error loading texture "'.concat(e,'"'),t))}))}))}},84711:function(e,t,n){"use strict";n.d(t,{H6:function(){return o},PS:function(){return i}});var r={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},o={audio:!0,video:{width:r.qvga.width,height:r.qvga.height,frameRate:{max:30}}},i=[{maxBitrate:36e3,scaleResolutionDownBy:4},{maxBitrate:96e3,scaleResolutionDownBy:2},{maxBitrate:68e4,scaleResolutionDownBy:1}]},81652:function(e,t,n){"use strict";n.d(t,{Ep:function(){return y},bs:function(){return w},C5:function(){return E},eb:function(){return x},iS:function(){return S},sU:function(){return _},rj:function(){return P},zm:function(){return I},kn:function(){return N},Vu:function(){return B},tM:function(){return Z},dy:function(){return j},dC:function(){return V},A7:function(){return W},Zu:function(){return Y}});var r,o=n(15194),i=n(48533),s=n.n(i),a=n(58700),c=n(84711),u=n(90038),l=n(83052),p=n(34452),f=n(61467),d=n(94849);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)(s().mark((function e(){var t,n,o,i,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"default",n=c.length>1&&void 0!==c[1]?c[1]:"raw",o=c.length>2&&void 0!==c[2]?c[2]:{},r=f.Z.instance.transport,i="instance"===t?r.instanceSendTransport:r.channelSendTransport,e.next=7,i.produceData({appData:{data:o},ordered:!1,label:t,maxPacketLifeTime:3e3,protocol:n});case 7:return(a=e.sent).on("transportclose",(function(){var e,n;f.Z.instance.dataProducers.delete(t),"instance"===t?null===(e=r.instanceDataProducer)||void 0===e||e.close():null===(n=r.channelDataProducer)||void 0===n||n.close()})),"instance"===t?r.instanceDataProducer=a:r.channelDataProducer=a,f.Z.instance.dataProducers.set(t,r.dataProducer),e.abrupt("return",Promise.resolve(r.dataProducer));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(s().mark((function e(t,n,o){var i,c,p,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.Z.instance.transport,i="instance"===n?r.instanceRequest:r.channelRequest,console.log("Requesting transport creation",t,n,o),e.next=5,i(u.u.WebRTCTransportCreate.toString(),{direction:t,sctpCapabilities:r.mediasoupDevice.sctpCapabilities,channelType:n,channelId:o});case 5:if(p=e.sent,d=p.transportOptions,"recv"!==t){e.next=13;break}return e.next=10,r.mediasoupDevice.createRecvTransport(d);case 10:c=e.sent,e.next=20;break;case 13:if("send"!==t){e.next=19;break}return e.next=16,r.mediasoupDevice.createSendTransport(d);case 16:c=e.sent,e.next=20;break;case 19:throw new Error("bad transport 'direction': ".concat(t));case 20:return c.on("connect",function(){var e=(0,a.Z)(s().mark((function e(t,n,r){var o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.dtlsParameters,e.next=3,i(u.u.WebRTCTransportConnect.toString(),{transportId:d.id,dtlsParameters:o});case 3:if(!(a=e.sent).error){e.next=8;break}return console.log("Transport connect error"),console.log(a.error),e.abrupt("return",r());case 8:n();case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),"send"===t&&(c.on("produce",function(){var e=(0,a.Z)(s().mark((function e(t,n,r){var o,a,c,p,f,h,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.kind,a=t.rtpParameters,c=t.appData,p=!1,"cam-video"===c.mediaTag?p=l.p.instance.videoPaused:"cam-audio"===c.mediaTag&&(p=l.p.instance.audioPaused),e.next=5,i(u.u.WebRTCSendTrack.toString(),{transportId:d.id,kind:o,rtpParameters:a,paused:p,appData:c});case 5:if(f=e.sent,h=f.error,m=f.id,!h){e.next=12;break}return r(),console.log(h),e.abrupt("return");case 12:n({id:m});case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),c.on("producedata",function(){var e=(0,a.Z)(s().mark((function e(t,n,r){var o,a,l,p,f,d,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.sctpStreamParameters,a=t.label,l=t.protocol,p=t.appData,e.next=3,i(u.u.WebRTCProduceData,{transportId:c.id,sctpStreamParameters:o,label:a,protocol:l,appData:p});case 3:if(f=e.sent,d=f.error,h=f.id,!d){e.next=10;break}return console.log(d),r(),e.abrupt("return");case 10:return e.abrupt("return",n({id:h}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}())),c.on("connectionstatechange",function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===r.leaving||"closed"!==t&&"failed"!==t&&"disconnected"!==t){e.next=3;break}return e.next=3,i(u.u.WebRTCTransportClose.toString(),{transportId:c.id});case 3:if(!0===r.leaving||"connected"!==t||"recv"!==c.direction){e.next=6;break}return e.next=6,i(u.u.WebRTCRequestCurrentProducers.toString(),{channelType:n,channelId:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c.channelType=n,c.channelId=o,e.abrupt("return",Promise.resolve(c));case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(s().mark((function e(t,n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.Z.instance.transport,"instance"!==t){e.next=7;break}return e.next=4,g("recv",t);case 4:o=r.instanceRecvTransport=e.sent,e.next=10;break;case 7:return e.next=9,g("recv",t,n);case 9:o=r.channelRecvTransport=e.sent;case 10:return e.abrupt("return",Promise.resolve(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(s().mark((function e(t,n){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.Z.instance.transport,"instance"!==t){e.next=7;break}return e.next=4,g("send",t);case 4:o=r.instanceSendTransport=e.sent,e.next=10;break;case 7:return e.next=9,g("send",t,n);case 9:o=r.channelSendTransport=e.sent;case 10:return e.abrupt("return",Promise.resolve(o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return T.apply(this,arguments)}function T(){return(T=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.Z.instance.transport,null!=l.p.instance.mediaStream){e.next=4;break}return e.next=4,l.p.instance.startCamera();case 4:if(null!=l.p.instance.mediaStream){e.next=7;break}return console.warn("Media stream is null, camera must have failed"),e.abrupt("return",!1);case 7:if("instance"===t||null!=r.channelSendTransport&&!0!==r.channelSendTransport.closed&&"disconnected"!==r.channelSendTransport.connectionState){e.next=10;break}return e.next=10,Promise.all([E(t,n),w(t,n)]);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)(s().mark((function e(t,n){var o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l.p.instance.mediaStream||!0!==r.videoEnabled){e.next=8;break}return i="instance"===t?r.instanceSendTransport:r.channelSendTransport,e.next=4,i.produce({track:l.p.instance.mediaStream.getVideoTracks()[0],encodings:c.PS,appData:{mediaTag:"cam-video",channelType:t,channelId:n}});case 4:if(l.p.instance.camVideoProducer=e.sent,!l.p.instance.videoPaused){e.next=8;break}return e.next=8,null===(o=l.p.instance)||void 0===o?void 0:o.camVideoProducer.pause();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return R.apply(this,arguments)}function R(){return(R=(0,a.Z)(s().mark((function e(t,n){var o,i,a,c,u,p,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l.p.instance.mediaStream){e.next=16;break}return i=l.p.instance.mediaStream.getAudioTracks()[0],a=new AudioContext,c=a.createMediaStreamSource(new MediaStream([i])),u=a.createMediaStreamDestination(),(p=a.createGain()).gain.value=1,[c,p,u].reduce((function(e,t){return e&&e.connect(t)})),l.p.instance.audioGainNode=p,l.p.instance.mediaStream.removeTrack(i),l.p.instance.mediaStream.addTrack(u.stream.getAudioTracks()[0]),f="instance"===t?r.instanceSendTransport:r.channelSendTransport,e.next=14,f.produce({track:l.p.instance.mediaStream.getAudioTracks()[0],appData:{mediaTag:"cam-audio",channelType:t,channelId:n}});case 14:l.p.instance.camAudioProducer=e.sent,l.p.instance.audioPaused&&(null===(o=l.p.instance)||void 0===o||o.camAudioProducer.pause());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(s().mark((function e(t){var n,o,i,c,p,d,h,m,y,v,g,b,w,C,E,k,x,T,S;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==f.Z.instance||null==f.Z.instance.transport){e.next=57;break}if(e.prev=1,r=f.Z.instance.transport,T=!0===(null===(n=r.instanceSocket)||void 0===n?void 0:n.connected)&&(null==r.channelId||0===r.channelId.length),S=!0===(null===(o=r.channelSocket)||void 0===o?void 0:o.connected)&&null!=r.channelId&&r.channelId.length>0,!(null===(i=l.p.instance)||void 0===i?void 0:i.camVideoProducer)){e.next=14;break}if(!T){e.next=9;break}return e.next=9,r.instanceRequest(u.u.WebRTCCloseProducer.toString(),{producerId:null===(c=l.p.instance)||void 0===c?void 0:c.camVideoProducer.id});case 9:if(!S){e.next=12;break}return e.next=12,r.channelRequest(u.u.WebRTCCloseProducer.toString(),{producerId:null===(p=l.p.instance)||void 0===p?void 0:p.camVideoProducer.id});case 12:return e.next=14,null===(h=null===(d=l.p.instance)||void 0===d?void 0:d.camVideoProducer)||void 0===h?void 0:h.close();case 14:if(!(null===(m=l.p.instance)||void 0===m?void 0:m.camAudioProducer)){e.next=23;break}if(!T){e.next=18;break}return e.next=18,r.instanceRequest(u.u.WebRTCCloseProducer.toString(),{producerId:null===(y=l.p.instance)||void 0===y?void 0:y.camAudioProducer.id});case 18:if(!S){e.next=21;break}return e.next=21,r.channelRequest(u.u.WebRTCCloseProducer.toString(),{producerId:null===(v=l.p.instance)||void 0===v?void 0:v.camAudioProducer.id});case 21:return e.next=23,null===(b=null===(g=l.p.instance)||void 0===g?void 0:g.camAudioProducer)||void 0===b?void 0:b.close();case 23:if(!(null===(w=l.p.instance)||void 0===w?void 0:w.screenVideoProducer)){e.next=32;break}if(!T){e.next=27;break}return e.next=27,r.instanceRequest(u.u.WebRTCCloseProducer.toString(),{producerId:l.p.instance.screenVideoProducer.id});case 27:if(!S){e.next=30;break}return e.next=30,r.channelRequest(u.u.WebRTCCloseProducer.toString(),{producerId:l.p.instance.screenVideoProducer.id});case 30:return e.next=32,null===(C=l.p.instance.screenVideoProducer)||void 0===C?void 0:C.close();case 32:if(!(null===(E=l.p.instance)||void 0===E?void 0:E.screenAudioProducer)){e.next=41;break}if(!T){e.next=36;break}return e.next=36,r.instanceRequest(u.u.WebRTCCloseProducer.toString(),{producerId:l.p.instance.screenAudioProducer.id});case 36:if(!S){e.next=39;break}return e.next=39,r.channelRequest(u.u.WebRTCCloseProducer.toString(),{producerId:l.p.instance.screenAudioProducer.id});case 39:return e.next=41,null===(k=l.p.instance.screenAudioProducer)||void 0===k?void 0:k.close();case 41:if(!0===(null===t||void 0===t?void 0:t.endConsumers)&&(null===(x=l.p.instance)||void 0===x||x.consumers.map(function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=3;break}return e.next=3,r.instanceRequest(u.u.WebRTCCloseConsumer.toString(),{consumerId:t.id});case 3:if(!S){e.next=6;break}return e.next=6,r.channelRequest(u.u.WebRTCCloseConsumer.toString(),{consumerId:t.id});case 6:return e.next=8,t.close();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),!0!==(null===t||void 0===t?void 0:t.leftParty)){e.next=49;break}if(null==r.channelRecvTransport||!0===r.channelRecvTransport.closed){e.next=46;break}return e.next=46,r.channelRecvTransport.close();case 46:if(null==r.channelSendTransport||!0===r.channelSendTransport.closed){e.next=49;break}return e.next=49,r.channelSendTransport.close();case 49:return O(),e.abrupt("return",!0);case 53:e.prev=53,e.t0=e.catch(1),console.log("EndvideoChat error"),console.log(e.t0);case 57:case"end":return e.stop()}}),e,null,[[1,53]])})))).apply(this,arguments)}function O(){var e;if(l.p){if(null!=(null===(e=null===l.p||void 0===l.p?void 0:l.p.instance)||void 0===e?void 0:e.mediaStream))l.p.instance.mediaStream.getTracks().forEach((function(e){return e.stop()}));l.p.instance.camVideoProducer=null,l.p.instance.camAudioProducer=null,l.p.instance.screenVideoProducer=null,l.p.instance.screenAudioProducer=null,l.p.instance.mediaStream=null,l.p.instance.localScreen=null}}function I(e,t,n,r){return F.apply(this,arguments)}function F(){return(F=(0,a.Z)(s().mark((function e(t,n,o,i){var a,c,p,h,y,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.Z.instance.transport,null==(y="instance"===o?r.instanceRequest:r.channelRequest)){e.next=28;break}return v=null===(a=l.p.instance)||void 0===a?void 0:a.consumers.find((function(e){return e.appData.peerId===t&&e.appData.mediaTag===n})),e.next=6,y(u.u.WebRTCReceiveTrack.toString(),{mediaTag:n,mediaPeerId:t,rtpCapabilities:r.mediasoupDevice.rtpCapabilities,channelType:o,channelId:i});case 6:if(null!=(null===(g=e.sent)||void 0===g?void 0:g.id)){e.next=9;break}return e.abrupt("return");case 9:if("instance"!==o){e.next=15;break}return e.next=12,r.instanceRecvTransport.consume(m(m({},g),{},{appData:{peerId:t,mediaTag:n,channelType:o},paused:!0}));case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,r.channelRecvTransport.consume(m(m({},g),{},{appData:{peerId:t,mediaTag:n,channelType:o,channelId:i},paused:!0}));case 17:e.t0=e.sent;case 18:if(v=e.t0,null!=(null===(p=null===(c=l.p.instance)||void 0===c?void 0:c.consumers)||void 0===p?void 0:p.find((function(e){var r,o;return(null===(r=null===e||void 0===e?void 0:e.appData)||void 0===r?void 0:r.peerId)===t&&(null===(o=null===e||void 0===e?void 0:e.appData)||void 0===o?void 0:o.mediaTag)===n})))){e.next=26;break}return null===(h=l.p.instance)||void 0===h||h.consumers.push(v),(0,d.cR)(),e.next=24,B(v);case 24:e.next=28;break;case 26:return e.next=28,G(v);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCPauseConsumer.toString(),{consumerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCPauseConsumer.toString(),{consumerId:t.id});case 7:return e.next=9,t.pause();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return M.apply(this,arguments)}function M(){return(M=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCResumeConsumer.toString(),{consumerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCResumeConsumer.toString(),{consumerId:t.id});case 7:return e.next=9,t.resume();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return U.apply(this,arguments)}function U(){return(U=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCPauseProducer.toString(),{producerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCPauseProducer.toString(),{producerId:t.id});case 7:return e.next=9,t.pause();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return q.apply(this,arguments)}function q(){return(q=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCResumeProducer.toString(),{producerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCResumeProducer.toString(),{producerId:t.id});case 7:return e.next=9,t.resume();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return z.apply(this,arguments)}function z(){return(z=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCPauseProducer.toString(),{producerId:t.id,globalMute:!0});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCPauseProducer.toString(),{producerId:t.id,globalMute:!0});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return H.apply(this,arguments)}function H(){return(H=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCResumeProducer.toString(),{producerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCResumeProducer.toString(),{producerId:t.id});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(s().mark((function e(t){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=f.Z.instance.transport).channelId&&""!==r.channelId||null==r.instanceRequest){e.next=4;break}return e.next=4,r.instanceRequest(u.u.WebRTCCloseConsumer.toString(),{consumerId:t.id});case 4:if(!(null!=r.channelId&&r.channelId.length>0&&null!=r.channelRequest)){e.next=7;break}return e.next=7,r.channelRequest(u.u.WebRTCCloseConsumer.toString(),{consumerId:t.id});case 7:return e.next=9,t.close();case 9:o=null===(n=l.p.instance)||void 0===n?void 0:n.consumers.filter((function(e){return!(e.id===t.id)})),l.p.instance.consumers=o;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(s().mark((function e(t){var n,o,i,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(null===(n=f.Z.instance)||void 0===n?void 0:n.transport)){e.next=29;break}if(e.prev=1,(r=f.Z.instance.transport).leaving=!0,i=!0===t?r.instanceSocket:r.channelSocket,!(a=!0===t?r.instanceRequest:r.channelRequest)){e.next=12;break}return e.next=9,a(u.u.LeaveWorld.toString());case 9:(c=e.sent).error&&console.error(c.error),p.NL.instance.dispatchEvent({type:p.NL.EVENTS.LEAVE_WORLD});case 12:if(r.leaving=!1,!0===t?(r.instanceRecvTransport=null,r.instanceSendTransport=null):(r.channelRecvTransport=null,r.channelSendTransport=null),r.lastPollSyncData={},l.p&&(null!=(null===(o=null===l.p||void 0===l.p?void 0:l.p.instance)||void 0===o?void 0:o.mediaStream)&&l.p.instance.mediaStream.getTracks().forEach((function(e){return e.stop()})),l.p.instance.camVideoProducer=null,l.p.instance.camAudioProducer=null,l.p.instance.screenVideoProducer=null,l.p.instance.screenAudioProducer=null,l.p.instance.mediaStream=null,l.p.instance.localScreen=null,l.p.instance.consumers=[]),i&&i.close&&i.close(),!0===t||null==a){e.next=21;break}return e.next=21,r.instanceRequest(u.u.WebRTCRequestCurrentProducers.toString(),{channelType:"instance"});case 21:return e.abrupt("return",!0);case 24:e.prev=24,e.t0=e.catch(1),console.log("Error with leave()"),console.log(e.t0),r.leaving=!1;case 29:case"end":return e.stop()}}),e,null,[[1,24]])})))).apply(this,arguments)}},46192:function(e,t,n){"use strict";n.d(t,{C:function(){return g}});var r=n(36595),o=n(483),i=n(16090),s=n(93228),a=n(61467),c=n(77301),u=n(5957),l=n(49026),p=n(95812),f=n(98847),d=n(88334),h=n(12665),m=n(95070),y=n(30307);function v(e){for(var t=0;t<o.D4.entities.length;t++){var n=o.D4.entities[t];if((0,i.tu)(n,d.g)&&(0,i.Xr)(n,d.g).entityIdFromScenaLoader&&(0,i.tu)(n,c.H))(0,i.Xr)(n,d.g).entityIdFromScenaLoader.entityId===e.uniqueId&&(0,i.Xr)(n,c.H).networkId!==e.networkId&&((0,i.Ei)(n,c.H).networkId=e.networkId,e.networkId)}for(var r=0;r<o.D4.entities.length;r++){var s=o.D4.entities[r];if((0,i.tu)(s,d.g)&&(0,i.tu)(s,c.H)){var u=(0,i.Xr)(s,c.H).networkId;a.Z.instance.networkObjects[u]||"server"==e.ownerId&&(a.Z.instance.networkObjects[e.networkId]={ownerId:"server",prefabType:f.s0.worldObject,component:(0,i.Xr)(s,c.H),uniqueId:e.uniqueId})}}}function g(e){var t;for(var n in a.Z.tick,e.tick,e.transforms.length&&(a.Z.tick=e.tick,a.Z.instance.worldState=e),e.clientsConnected)a.Z.instance.clients[e.clientsConnected[n].userId]={userId:e.clientsConnected[n].userId};for(var o in e.clientsDisconnected)void 0!==e.clientsConnected[o]?(console.log(e.clientsConnected[o].userId," disconnected"),delete a.Z.instance.clients[e.clientsConnected[o].userId]):console.warn("Client disconnected but was not found in our client list");for(var c in e.createObjects)if(void 0!==a.Z.instance.networkObjects[e.createObjects[c].networkId])console.warn("Not creating object because it already exists");else{var d=e.createObjects[c],g=null,b=null;if("number"!==typeof d.x&&"number"!==typeof d.y&&"number"!==typeof d.z||(g=new r.Pa4(d.x,d.y,d.z)),"number"!==typeof d.qX&&"number"!==typeof d.qY&&"number"!==typeof d.qZ&&"number"!==typeof d.qW||(b=new r._fP(d.qX,d.qY,d.qZ,d.qW)),d.prefabType===f.s0.worldObject)v(d);else{var w=(0,l.K)(String(d.ownerId),d.networkId,d.prefabType,g,b);d.ownerId===a.Z.instance.userId?(console.warn("Give Player Id by Server "+d.networkId,d.ownerId,a.Z.instance.userId),console.warn(a.Z.instance.networkObjects),a.Z.instance.localAvatarNetworkId=d.networkId,(0,i.Tk)(w.entity,y.e)):(0,i.Tk)(w.entity,y.e)}}if(e.transforms.length){var C=e.transforms.find((function(e){return e.networkId==a.Z.instance.localAvatarNetworkId})),E=(0,u.Ox)(e.transforms);E.timeCorrection=C?C.snapShotTime+a.Z.instance.timeSnaphotCorrection:0,E.time=e.time,a.Z.instance.snapshot=E,(0,u.eW)(E)}for(var k in e.editObjects){var x=e.editObjects[k].networkId,T=e.editObjects[k].whoIsItFor;if(a.Z.instance.localAvatarNetworkId!=x||"all"==T){if(void 0===a.Z.instance.networkObjects[x])return console.warn("Can't Edit object, as it doesn't appear to exist");e.editObjects[k].component;var S=e.editObjects[k].state,A=e.editObjects[k].currentId,_=e.editObjects[k].value,R=a.Z.instance.networkObjects[x].component.entity;"onAddedEnding"==S&&("all"==T&&a.Z.instance.localAvatarNetworkId==x&&((0,i.aT)(R,s.$),(0,i.aT)(R,m.F)),(0,i.tu)(R,h.I)||(0,i.Tk)(R,h.I,{state:S,networkCarId:A,currentFocusedPart:_})),"onStartRemove"==S&&((0,i.tu)(R,h.I)?(0,i.Ei)(R,h.I).state=S:console.warn(a.Z.instance.localAvatarNetworkId+" "+x+" hasNot PlayerInCar component"))}}for(var P in e.destroyObjects){var D=e.destroyObjects[P].networkId;if(console.log("Destroying ",D),void 0===a.Z.instance.networkObjects[D])return console.warn("Can't destroy object as it doesn't appear to exist");console.log("Destroying network object ",a.Z.instance.networkObjects[D].component.networkId);var O=a.Z.instance.networkObjects[D].component.entity;(0,i.Sx)(O),console.warn("Entity is removed, but character imight not be"),delete a.Z.instance.networkObjects[D]}null===(t=e.inputs)||void 0===t||t.forEach((function(e){if(null!=a.Z.instance.localAvatarNetworkId&&a.Z.instance.localAvatarNetworkId!=e.networkId&&void 0!==a.Z.instance.networkObjects[e.networkId]&&"server"!==a.Z.instance.networkObjects[e.networkId].ownerId){var t=a.Z.instance.networkObjects[e.networkId].component;(0,i.Ei)(t.entity,p.rl).viewVector.set(e.viewVector.x,e.viewVector.y,e.viewVector.z)}}))}},41912:function(e,t,n){"use strict";n.d(t,{T:function(){return g}});var r=n(49182),o=n(13987),i=n(29569),s=n(89306),a=n(34452),c=n(88203),u=n(86463),l=n(17356),p=n(7331),f=n(93228),d=n(61467),h=n(77301),m=n(64922),y=n(33221);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var g=function(e){(0,o.Z)(n,e);var t=v(n);function n(e){var o;(0,r.Z)(this,n),(o=t.call(this,e)).updateType=l.V.Fixed,o.execute=function(e){for(var t=d.Z.instance.incomingMessageQueue;t.getBufferLength()>0;){var r=t.pop(),o=m.C.fromBuffer(r);o||console.warn("Couldn't deserialize buffer, probably still reading the wrong one"),a.NL.instance.dispatchEvent({type:n.EVENTS.RECEIVE_DATA,unbufferedState:o,delta:e})}};var i=e.schema,s=e.app;return d.Z.instance.schema=i,d.Z.instance.transport=new i.transport(s),void 0===y.env.SERVER_MODE||"realtime"!==y.env.SERVER_MODE&&"local"!==y.env.SERVER_MODE||(d.Z.instance.transport.initialize(),d.Z.instance.isInitialized=!0),o}return n}(c.x);g.EVENTS={CONNECT:"CLIENT_NETWORK_SYSTEM_CONNECT",INITIALIZE:"CLIENT_NETWORK_SYSTEM_INITIALIZE",SEND_DATA:"CLIENT_NETWORK_SYSTEM_SEND_DATA",RECEIVE_DATA:"CLIENT_NETWORK_SYSTEM_RECEIVE_DATA"},g.queries={clientNetworkInputReceivers:{components:[h.H,p.I,(0,u.yo)(f.$)]}}},83052:function(e,t,n){"use strict";n.d(t,{p:function(){return m}});var r=n(48533),o=n.n(r),i=n(58700),s=n(49182),a=n(39337),c=n(94780),u=n(13987),l=n(29569),p=n(89306),f=n(88203),d=n(84711);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var o=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var m=function(e){(0,u.Z)(n,e);var t=h(n);function n(){var e;return(0,s.Z)(this,n),(e=t.call(this)).videoPaused=!1,e.audioPaused=!1,e.faceTracking=!1,e.mediaStream=null,e.audioGainNode=null,e.localScreen=null,e.camVideoProducer=null,e.camAudioProducer=null,e.screenVideoProducer=null,e.screenAudioProducer=null,e.producers=[],e.consumers=[],e.screenShareVideoPaused=!1,e.screenShareAudioPaused=!1,e.initialized=!1,e.execute=null,n.instance=(0,c.Z)(e),e}return(0,a.Z)(n,[{key:"setFaceTracking",value:function(e){return this.faceTracking=e,this.faceTracking}},{key:"setVideoPaused",value:function(e){return console.log("setVideoPaused"),this.videoPaused=e,this.videoPaused}},{key:"setAudioPaused",value:function(e){return this.audioPaused=e,this.audioPaused}},{key:"setScreenShareVideoPaused",value:function(e){return this.screenShareVideoPaused=e,this.screenShareVideoPaused}},{key:"setScreenShareAudioPaused",value:function(e){return this.screenShareAudioPaused=e,this.screenShareAudioPaused}},{key:"toggleVideoPaused",value:function(){return console.log("toggleVideoPaused"),console.log(this.videoPaused),this.videoPaused=!this.videoPaused,this.videoPaused}},{key:"toggleAudioPaused",value:function(){return this.audioPaused=!this.audioPaused,this.audioPaused}},{key:"toggleScreenShareVideoPaused",value:function(){return this.screenShareVideoPaused=!this.screenShareVideoPaused,this.screenShareVideoPaused}},{key:"toggleScreenShareAudioPaused",value:function(){return this.screenShareAudioPaused=!this.screenShareAudioPaused,this.screenShareAudioPaused}},{key:"startCamera",value:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("start camera"),!this.mediaStream){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,this.getMediaStream();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cycleCamera",value:function(){var e=(0,i.Z)(o().mark((function e(){var t,n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.camVideoProducer&&this.camVideoProducer.track){e.next=3;break}return console.log("cannot cycle camera - no current camera track"),e.abrupt("return",!1);case 3:return console.log("cycle camera"),e.next=6,this.getCurrentDeviceId();case 6:return t=e.sent,e.next=9,navigator.mediaDevices.enumerateDevices();case 9:if(n=e.sent,(r=n.filter((function(e){return"videoinput"===e.kind}))).length>1){e.next=14;break}return console.log("cannot cycle camera - only one camera"),e.abrupt("return",!1);case 14:return(i=r.findIndex((function(e){return e.deviceId===t})))===r.length-1?i=0:i+=1,console.log("getting a video stream from new device",r[i].label),e.next=19,navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:r[i].deviceId}},audio:!0});case 19:return this.mediaStream=e.sent,e.next=22,this.camVideoProducer.replaceTrack({track:this.mediaStream.getVideoTracks()[0]});case 22:return e.next=24,this.camAudioProducer.replaceTrack({track:this.mediaStream.getAudioTracks()[0]});case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getScreenPausedState",value:function(){return this.screenShareVideoPaused}},{key:"getScreenAudioPausedState",value:function(){return this.screenShareAudioPaused}},{key:"getCurrentDeviceId",value:function(){var e=(0,i.Z)(o().mark((function e(){var t,n,r,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.camVideoProducer){e.next=2;break}return e.abrupt("return",null);case 2:if(t=this.camVideoProducer.track.getSettings(),!(n=t.deviceId)){e.next=5;break}return e.abrupt("return",n);case 5:if(r=this.mediaStream&&this.mediaStream.getVideoTracks()[0]){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,navigator.mediaDevices.enumerateDevices();case 10:return i=e.sent,s=i.find((function(e){return e.label.startsWith(r.label)})),e.abrupt("return",s.deviceId);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMediaStream",value:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Getting media stream"),console.log(d.H6),e.next=5,navigator.mediaDevices.getUserMedia(d.H6);case 5:if(this.mediaStream=e.sent,console.log(this.mediaStream),!this.mediaStream.active){e.next=11;break}return this.audioPaused=!1,this.videoPaused=!1,e.abrupt("return",!0);case 11:return this.audioPaused=!0,this.videoPaused=!0,e.abrupt("return",!1);case 16:e.prev=16,e.t0=e.catch(0),console.log("failed to get media stream"),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"removeVideoAudio",value:function(e){document.querySelectorAll(e.id).forEach((function(t){t.consumer===e&&(null===t||void 0===t||t.parentNode.removeChild(t))}))}},{key:"addVideoAudio",value:function(e,t){if(e&&e.track){var n="".concat(t,"_").concat(e.kind),r=document.getElementById(n);if("video"===e.kind){null===r&&((r=document.createElement("video")).id="".concat(t,"_").concat(e.kind),r.autoplay=!0,document.body.appendChild(r),r.setAttribute("playsinline","true")),r.srcObject=new MediaStream([e.track.clone()]),r.mediaStream=e;try{r.play().then((function(){return console.log("Playing video")})).catch((function(e){console.log("Play video error: ".concat(e)),console.error(e)}))}catch(o){console.log("video play error"),console.log(o)}}else null===r&&((r=document.createElement("audio")).id="".concat(t,"_").concat(e.kind),document.body.appendChild(r),r.setAttribute("playsinline","true"),r.setAttribute("autoplay","true")),r.srcObject=new MediaStream([e.track.clone()]),r.mediaStream=e,r.volume=0,r.play().catch((function(e){console.log("Play audio error: ".concat(e)),console.error(e)}))}}}]),n}(f.x);m.instance=null},64838:function(e,t,n){"use strict";n.d(t,{V:function(){return f}});var r=n(15194),o=n(49182),i=n(13987),s=n(29569),a=n(89306),c=n(52288);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var o=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=function(e){(0,i.Z)(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return n}(n(65648).w);f._schema=l(l({},f._schema),{},{particleEmitterMesh:{type:c.Yk.Ref,default:null}})},41340:function(e,t,n){"use strict";n.d(t,{P:function(){return m}});var r=n(49182),o=n(39337),i=n(42828),s=n(13987),a=n(29569),c=n(89306),u=n(36595),l=n(25730),p=n(25802),f=n(56633),d=n(10651);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var m=function(e){(0,s.Z)(n,e);var t=h(n);function n(e,o){var i;(0,r.Z)(this,n);var s=new u.BKK(1,1,1,1),a=new u.L5s;a.index=s.index,a.attributes=s.attributes;var c=new u.jyz({uniforms:u.rDY.merge([{map:{value:e},emitterMatrix:{value:new u.yGw}},u.rBU.fog]),vertexShader:d.C7,fragmentShader:d.zH,transparent:!0,depthWrite:!1,fog:!0,blendEquation:u.bGH,side:u.ehD});if(c.uniforms.map.value=e,c.uniforms.emitterMatrix.value=new u.yGw,(i=t.call(this,a,c)).frustumCulled=!1,i.initialPositions=[],i.lifetimes=[],i.particleSizeRandomness=[],i.initialAges=[],i.ages=[],i.colors=[],i.inverseWorldScale=new u.Pa4,i.worldScale=new u.Pa4,o)for(var l=0,p=Object.keys(o);l<p.length;l++){var f=p[l];i[f]=o[f]}else i.startSize=.25,i.endSize=.25,i.sizeRandomness=0,i.startVelocity=new u.Pa4(0,0,.5),i.endVelocity=new u.Pa4(0,0,.5),i.angularVelocity=0,i.particleCount=100,i.lifetime=5,i.lifetimeRandomness=5,i.ageRandomness=10,i.endColor=new u.Ilk,i.middleColor=new u.Ilk,i.startColor=new u.Ilk,i.startOpacity=1,i.middleOpacity=1,i.endOpacity=1,i.colorCurve="linear",i.velocityCurve="linear",i.sizeCurve="linear";return i.updateParticles(),i}return(0,o.Z)(n,[{key:"updateParticles",value:function(){this.material.uniforms.map.value;var e=new u.BKK(1,1,1,1),t=new u.L5s;t.index=e.index,t.attributes=e.attributes;var n=[],r=[],o=[],i=[],s=[],a=[],c=[],l=[];this.getWorldScale(this.worldScale);for(var p=0;p<this.particleCount;p++)s[p]=Math.random()*this.ageRandomness-this.ageRandomness,o[p]=this.lifetime+2*Math.random()*this.lifetimeRandomness,i[p]=s[p],a[3*p]=2*Math.random()-1,a[3*p+1]=2*Math.random()-1,a[3*p+2]=0,c[p]=Math.random()*this.sizeRandomness,n.push(a[3*p]*this.worldScale.x),n.push(a[3*p+1]*this.worldScale.y),n.push(a[3*p+2]),n.push(this.startSize+c[p]),l.push(0),r.push(this.startColor.r,this.startColor.g,this.startColor.b,0);t.setAttribute("particlePosition",new u.lb7(new Float32Array(n),4).setUsage(u.dj0)),t.setAttribute("particleColor",new u.lb7(new Float32Array(r),4).setUsage(u.dj0)),t.setAttribute("particleAngle",new u.lb7(new Float32Array(l),1).setUsage(u.dj0)),this.geometry=t,this.initialPositions=a,this.particleSizeRandomness=c,this.ages=i,this.initialAges=s,this.lifetimes=o,this.colors=r}},{key:"update",value:function(e){var t=this.geometry,n=t.attributes.particlePosition.array,r=t.attributes.particleColor.array,o=t.attributes.particleAngle.array;this.getWorldScale(this.worldScale),this.inverseWorldScale.set(1/this.worldScale.x,1/this.worldScale.y,1/this.worldScale.z);var i=this.material.uniforms.emitterMatrix.value;i.copy(this.matrixWorld),i.scale(this.inverseWorldScale);for(var s=0;s<this.particleCount;s++){var a=this.ages[s],c=this.ages[s]+=e;if(!(c<0))if(c>0&&a<=0)r[4*s+3]=this.startOpacity,n[4*s]=this.initialPositions[3*s]*this.worldScale.x,n[4*s+1]=this.initialPositions[3*s+1]*this.worldScale.y,n[4*s+2]=0,n[4*s+3]=this.startSize+this.particleSizeRandomness[s],r[4*s]=this.startColor.r,r[4*s+1]=this.startColor.g,r[4*s+2]=this.startColor.b;else if(c>this.lifetimes[s])this.ages[s]=this.initialAges[s],r[4*s+3]=0;else{var u=(0,f.uZ)(this.ages[s]/this.lifetimes[s],0,1),p=l;p[this.velocityCurve]||(console.warn("Unknown velocity curve type ".concat(this.velocityCurve," in particle emitter. Falling back to linear.")),this.velocityCurve="linear"),p[this.sizeCurve]||(console.warn("Unknown size curve type ".concat(this.sizeCurve," in particle emitter. Falling back to linear.")),this.sizeCurve="linear"),p[this.colorCurve]||(console.warn("Unknown color curve type ".concat(this.colorCurve," in particle emitter. Falling back to linear.")),this.colorCurve="linear");var h=p[this.velocityCurve](u),m=p[this.sizeCurve](u),y=p[this.colorCurve](u);if(n[4*s]+=(0,f.t7)(this.startVelocity.x,this.endVelocity.x,h)*e,n[4*s+1]+=(0,f.t7)(this.startVelocity.y,this.endVelocity.y,h)*e,n[4*s+2]+=(0,f.t7)(this.startVelocity.z,this.endVelocity.z,h)*e,n[4*s+3]=(0,f.t7)(this.startSize+this.particleSizeRandomness[s],this.endSize+this.particleSizeRandomness[s],m),o[s]+=this.angularVelocity*d.qW*e,y<=.5){var v=y/.5;r[4*s]=(0,f.t7)(this.startColor.r,this.middleColor.r,v),r[4*s+1]=(0,f.t7)(this.startColor.g,this.middleColor.g,v),r[4*s+2]=(0,f.t7)(this.startColor.b,this.middleColor.b,v),r[4*s+3]=(0,f.t7)(this.startOpacity,this.middleOpacity,v)}else if(y>.5){var g=(y-.5)/.5;r[4*s]=(0,f.t7)(this.middleColor.r,this.endColor.r,g),r[4*s+1]=(0,f.t7)(this.middleColor.g,this.endColor.g,g),r[4*s+2]=(0,f.t7)(this.middleColor.b,this.endColor.b,g),r[4*s+3]=(0,f.t7)(this.middleOpacity,this.endOpacity,g)}}}t.attributes.particlePosition.needsUpdate=!0,t.attributes.particleColor.needsUpdate=!0,t.attributes.particleAngle.needsUpdate=!0}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.Z)((0,c.Z)(n.prototype),"copy",this).call(this,e,t);var r=this.material,o=e.material;return r.uniforms.map.value=o.uniforms.map.value,this.startColor.copy(e.startColor),this.middleColor.copy(e.middleColor),this.endColor.copy(e.endColor),this.startOpacity=e.startOpacity,this.middleOpacity=e.middleOpacity,this.endOpacity=e.endOpacity,this.colorCurve=e.colorCurve,this.sizeCurve=e.sizeCurve,this.startSize=e.startSize,this.endSize=e.endSize,this.sizeRandomness=e.sizeRandomness,this.ageRandomness=e.ageRandomness,this.lifetime=e.lifetime,this.lifetimeRandomness=e.lifetimeRandomness,this.particleCount=e.particleCount,this.startVelocity.copy(e.startVelocity),this.endVelocity.copy(e.endVelocity),this.velocityCurve=e.velocityCurve,this.angularVelocity=e.angularVelocity,this}}],[{key:"fromArgs",value:function(e){return e.startColor=new u.Ilk(e.startColor),e.middleColor=new u.Ilk(e.middleColor),e.endColor=new u.Ilk(e.endColor),e.startVelocity=new u.Pa4(e.startVelocity.x,e.startVelocity.y,e.startVelocity.z),e.endVelocity=new u.Pa4(e.endVelocity.x,e.endVelocity.y,e.endVelocity.z),new Promise((function(t){(0,p.Z)(e.src).then((function(r){r.flipY=!1,t(new n(r,e))}))}))}}]),n}(u.Kj0)},10651:function(e,t,n){"use strict";n.d(t,{qW:function(){return u},C7:function(){return l},zH:function(){return p},Et:function(){return f},Ne:function(){return d}});var r=n(64838),o=n(16090),i=n(82552),s=n(47396),a=n(41340),c=n(483),u=.0174533,l="\n  #include <common>\n  attribute vec4 particlePosition;\n  attribute vec4 particleColor;\n  attribute float particleAngle;\n  varying vec4 vColor;\n  varying vec2 vUV;\n  uniform mat4 emitterMatrix;\n  #include <fog_pars_vertex>\n  void main() {\n    vUV = uv;\n    vColor = particleColor;\n    float particleScale = particlePosition.w;\n    vec4 mvPosition = viewMatrix * emitterMatrix * vec4(particlePosition.xyz, 1.0);\n    \n    vec3 rotatedPosition = position;\n    rotatedPosition.x = cos( particleAngle ) * position.x - sin( particleAngle ) * position.y;\n    rotatedPosition.y = sin( particleAngle ) * position.x + cos( particleAngle ) * position.y;\n    mvPosition.xyz += rotatedPosition * particleScale;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <fog_vertex>\n  }\n",p="\n  #include <common>\n  #include <fog_pars_fragment>\n  uniform sampler2D map;\n  varying vec2 vUV;\n  varying vec4 vColor;\n  void main() {\n    gl_FragColor = texture2D(map,  vUV) * vColor;\n    #include <fog_fragment>\n  }\n",f=function(e,t){s.C&&a.P.fromArgs(t.objArgs).then((function(t){(0,o.Tk)(e,r.V,{particleEmitterMesh:t}),c.D4.scene.add(t)}))},d=function(e,t){if(s.C){var n=t.particleEmitterMesh;if(n){var r=(0,o.Xr)(e,i.U);n.position.set(r.position.x,r.position.y,r.position.z),n.quaternion.set(r.rotation.x,r.rotation.y,r.rotation.z,r.rotation.w),n.scale.set(r.scale.x,r.scale.y,r.scale.z),n.updateMatrix()}}}},31345:function(e,t,n){"use strict";n.d(t,{ww:function(){return v},SY:function(){return g},jV:function(){return b},eH:function(){return w},ZP:function(){return C}});var r=n(48533),o=n.n(r),i=n(58700),s=n(49182),a=n(39337),c=n(94780),u=n(42828),l=n(13987),p=n(29569),f=n(89306),d=n(36595),h=n(483),m=n(71362);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var v={Stereo:"stereo",PannerNode:"pannernode"},g={Linear:"linear",Inverse:"inverse",Exponential:"exponential"},b=Object.values(v).map((function(e){return{label:e,value:e}})),w=Object.values(g).map((function(e){return{label:e,value:e}})),C=function(e){(0,l.Z)(n,e);var t=y(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio";(0,s.Z)(this,n),r=t.call(this);var i=h.D4.createElement(o,{crossorigin:"anonymous",loop:!0,playsinline:"","webkit-playsinline":""});return r.el=i,r._src="",r.audioListener=e,r.controls=!0,r.audioType=v.PannerNode,r.volume=.5,console.log("audiosource create",(0,c.Z)(r)),r}return(0,a.Z)(n,[{key:"loadMedia",value:function(e){var t=this;return new Promise((function(n,r){t.el.src=e;var o=null,i=function(){o(),n()},s=function(e){o(),r(new m.mQ('Error loading video "'.concat(t.el.src,'"'),e))};o=function(){t.el.removeEventListener("loadeddata",i),t.el.removeEventListener("error",s)},t.el.addEventListener("loadeddata",i),t.el.addEventListener("error",s)}))}},{key:"load",value:function(){var e=(0,i.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMedia(t);case 2:if(h.D4.useAudioSystem){e.next=4;break}return e.abrupt("return",this);case 4:return this.audioSource=this.audioListener.context.createMediaElementSource(this.el),this.audio.setNodeSource(this.audioSource),e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((0,u.Z)((0,f.Z)(n.prototype),"copy",this).call(this,e,!1),t)for(var r=0;r<e.children.length;r++){var o=e.children[r];o!==e.audio&&this.add(o.clone())}return this.controls=e.controls,this.autoPlay=e.autoPlay,this.loop=e.loop,this.audioType=e.audioType,this.volume=e.volume,this.distanceModel=e.distanceModel,this.rolloffFactor=e.rolloffFactor,this.refDistance=e.refDistance,this.maxDistance=e.maxDistance,this.coneInnerAngle=e.coneInnerAngle,this.coneOuterAngle=e.coneOuterAngle,this.coneOuterGain=e.coneOuterGain,this.src=e.src,this}},{key:"play",value:function(){this.el.play()}},{key:"pause",value:function(){this.el.pause()}},{key:"duration",get:function(){return this.el.duration}},{key:"src",get:function(){return this.el.src},set:function(e){this.load(e).catch(console.error)}},{key:"autoPlay",get:function(){return this.el.autoplay},set:function(e){this.el.autoplay=e}},{key:"loop",get:function(){return this.el.loop},set:function(e){this.el.loop=e}},{key:"audioType",get:function(){return this._audioType},set:function(e){if(e!==this._audioType&&h.D4.useAudioSystem){var t,n=this.audio;t=e===v.PannerNode?new h.VY(this.audioListener):new h.Bb(this.audioListener),n&&(t.gain.gain.value=n.getVolume(),this.audioSource&&n.disconnect(),this.remove(n)),this.audioSource&&t.setNodeSource(this.audioSource),this.audio=t,this.add(t),this._audioType=e}}},{key:"volume",get:function(){return h.D4.useAudioSystem?this.audio.getVolume():1},set:function(e){h.D4.useAudioSystem&&(this.audio.gain.gain.value=e)}},{key:"distanceModel",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.getDistanceModel():null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&this.audio.setDistanceModel(e)}},{key:"rolloffFactor",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.getRolloffFactor():null},set:function(e){h.D4.useAudioSystem&&(this.audioType!==v.PannerNode||this.audio.setRolloffFactor(e))}},{key:"refDistance",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.getRefDistance():null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&this.audio.setRefDistance(e)}},{key:"maxDistance",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.getMaxDistance():null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&this.audio.setMaxDistance(e)}},{key:"coneInnerAngle",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.panner.coneInnerAngle:null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&(this.audio.panner.coneInnerAngle=e)}},{key:"coneOuterAngle",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.panner.coneOuterAngle:null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&(this.audio.panner.coneOuterAngle=e)}},{key:"coneOuterGain",get:function(){if(h.D4.useAudioSystem)return this.audioType===v.PannerNode?this.audio.panner.coneOuterGain:null},set:function(e){h.D4.useAudioSystem&&this.audioType===v.PannerNode&&(this.audio.panner.coneOuterGain=e)}}]),n}(d.Tme)},99887:function(e,t,n){"use strict";n.d(t,{m:function(){return w},Z:function(){return C}});var r=n(48533),o=n.n(r),i=n(58700),s=n(49182),a=n(39337),c=n(42828),u=n(13987),l=n(29569),p=n(89306),f=n(36595),d=n(71362),h=n(77977),m=n.n(h),y=n(46597),v=n(31345),g=n(483);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var o=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var w={Flat:"flat",Equirectangular360:"360-equirectangular"},C=function(e){(0,u.Z)(n,e);var t=b(n);function n(e){var r;(0,s.Z)(this,n),(r=t.call(this,e,"video"))._videoTexture=new g.fO(r.el),r._videoTexture.minFilter=f.wem,r._videoTexture.encoding=f.knz,r._texture=r._videoTexture;var o=new f.BKK,i=new f.vBJ;return i.map=r._texture,i.side=f.ehD,r._mesh=new f.Kj0(o,i),r._mesh.name="VideoMesh",r.add(r._mesh),r._projection="flat",r.hls=null,r}return(0,a.Z)(n,[{key:"loadVideo",value:function(e,t){var n=this;return new Promise((function(r,o){var i=(0,y.Z)(e,t);i?(n.hls||(n.hls=new(m())),n.hls.loadSource(e),n.hls.attachMedia(n.el),n.hls.on(m().Events.MANIFEST_PARSED,(function(){n.hls.startLoad(-1)}))):n.el.src=e;var s=null,a=function(){s(),s(),r(n._videoTexture)},c=function(e){s(),o(new d.mQ('Error loading video "'.concat(n.el.src,'"'),e))};s=function(){n.el.removeEventListener("loadeddata",a),n.el.removeEventListener("error",c)},i&&n.hls.on(m().Events.ERROR,c),n.el.addEventListener("loadeddata",a),n.el.addEventListener("error",c)}))}},{key:"load",value:function(){var e=(0,i.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._mesh.visible=!1,e.next=3,this.loadVideo(t,n);case 3:return this._texture=e.sent,this.onResize(),g.D4.useAudioSystem&&(this.audioSource=this.audioListener.context.createMediaElementSource(this.el),this.audio.setNodeSource(this.audioSource)),this._texture.format===f.wk1&&(this._mesh.material.transparent=!0),this._mesh.material.map=this._texture,this._mesh.material.needsUpdate=!0,this._mesh.visible=!0,e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onResize",value:function(){if(this.projection===w.Flat){var e=(this.el.videoHeight||1)/(this.el.videoWidth||1),t=Math.min(1,1/e),n=Math.min(1,e);this._mesh.scale.set(t,n,1)}}},{key:"clone",value:function(e){return new this.constructor(this.audioListener).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((0,c.Z)((0,p.Z)(n.prototype),"copy",this).call(this,e,!1),t)for(var r=0;r<e.children.length;r++){var o=e.children[r];o!==e.audio&&o!==e._mesh&&this.add(o.clone())}return this.projection=e.projection,this}},{key:"projection",get:function(){return this._projection},set:function(e){if(e!==this._projection){var t,n=new f.vBJ;"360-equirectangular"===e?(t=new f.Aip(1,64,32)).scale(-1,1,1):(t=new f.BKK,n.side=f.ehD),n.map=this._texture,this._projection=e;var r=new f.Kj0(t,n);r.name="VideoMesh";var o=this.children.indexOf(this._mesh);-1===o?this.add(r):(this.children.splice(o,1,r),r.parent=this),this._mesh=r,this.onResize()}}},{key:"src",get:function(){return this.el.src},set:function(e){this.load(e).catch(console.error)}}]),n}(v.ZP)},65622:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(88334),o=n(47396),i=n(34452),s=n(16090),a=n(17209),c=n(39614);function u(e){var t=[],n=0;o.C&&i.NL.instance.dispatchEvent({type:i.NL.EVENTS.ENTITY_LOADED,left:t.length}),Object.keys(e.entities).forEach((function(u){var l=e.entities[u],p=(0,s.JP)();(0,s.Tk)(p,a.j0),l.components.forEach((function(e){if(function(e,t){var n,r,o=t.name.replace(/-\d+/,"").replace(" ","");if(void 0===c.Xn[o])return console.warn("Couldn't load ",o);var i=c.Xn[o];null===(n=i.behaviors)||void 0===n||n.forEach((function(n){var r,o,i={};null===(r=n.values)||void 0===r||r.forEach((function(e){void 0!==e.from?i[e.to]=t.data[e.from]:i[e]=t.data[e]})),n.onLoaded&&(i.onLoaded=n.onLoaded),n.behavior(e,Object.assign(Object.assign({},n.args),{objArgs:Object.assign(Object.assign({},null===(o=n.args)||void 0===o?void 0:o.objArgs),i)}))})),null===(r=i.components)||void 0===r||r.forEach((function(n){var r=n.values?n.values.map((function(e){return t.data[e]})):{};(0,s.Tk)(e,n.type,r)}))}(p,e),o.C&&"gltf-model"===e.name){var a=(0,s.Ei)(p,r.g);a.entityIdFromScenaLoader=l,t.push(new Promise((function(e,r){null===a.onLoaded||a.onLoaded,a.onLoaded.push((function(){n++,e(),i.NL.instance.dispatchEvent({type:i.NL.EVENTS.ENTITY_LOADED,left:t.length-n})}))})))}else if(!o.C&&"gltf-model"===e.name){(0,s.Ei)(p,r.g).entityIdFromScenaLoader=l}}))})),o.C&&Promise.all(t).then((function(){i.NL.instance.dispatchEvent({type:i.NL.EVENTS.SCENE_LOADED,loaded:!0})}))}},95812:function(e,t,n){"use strict";n.d(t,{W:function(){return h},CT:function(){return m},rl:function(){return y}});var r=n(49182),o=n(39337),i=n(42828),s=n(13987),a=n(29569),c=n(89306),u=n(52288),l=n(65648),p=n(36595),f=n(47509);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var h=1.2,m=2.4,y=function(e){(0,s.Z)(n,e);var t=d(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).initialized=!1,e.currentAnimationAction=[],e.currentAnimationLength=0,e.timer=0,e.animationsTimeScale=.5,e.height=0,e.materials=[],e.visible=!0,e.animations=[],e.physicsEnabled=!0,e.localMovementDirection=new p.Pa4,e.acceleration=new p.Pa4,e.velocity=new p.Pa4,e.arcadeVelocityInfluence=new p.Pa4,e.velocityTarget=new p.Pa4,e.currentInputHash="",e.defaultVelocitySimulatorDamping=.8,e.defaultVelocitySimulatorMass=50,e.moveSpeed=m,e.otherPlayerMaxSpeedCount=0,e.angularVelocity=0,e.orientation=new p.Pa4(0,0,1),e.orientationTarget=new p.Pa4(0,0,1),e.defaultRotationSimulatorDamping=.5,e.defaultRotationSimulatorMass=10,e.changedViewAngle=0,e.actorMass=1,e.actorHeight=1,e.capsuleRadius=.25,e.capsuleSegments=8,e.capsuleFriction=0,e.capsulePosition=new f.AO,e.rayResult=new f.Fv,e.rayDontStuckX=new f.Fv,e.rayDontStuckZ=new f.Fv,e.rayDontStuckXm=new f.Fv,e.rayDontStuckZm=new f.Fv,e.rayHasHit=!1,e.rayGroundHit=!1,e.rayGroundY=null,e.rayCastLength=.85,e.raySafeOffset=.03,e.wantsToJump=!1,e.initJumpSpeed=-1,e.playerStuck=0,e.playerInPortal=0,e.animationVelocity=new p.Pa4,e.groundImpactVelocity=new p.Pa4,e}return(0,o.Z)(n,[{key:"dispose",value:function(){(0,i.Z)((0,c.Z)(n.prototype),"dispose",this).call(this),this.modelContainer.parent.remove(this.modelContainer),this.tiltContainer=null}}]),n}(l.w);y._schema={tiltContainer:{type:u.Yk.Ref,default:null}}},5297:function(e,t,n){"use strict";n.d(t,{Of:function(){return X},NK:function(){return J}});var r=n(63290),o=n(48533),i=n.n(o),s=n(77866),a=n(58700),c=n(49182),u=n(39337),l=n(97762),p=n(47396),f=n(67200),d=n(47509),h=n(36595),m=n(88334),y=n(60773),v=n(38936),g=n(95070),b=n(74203),w=n(16090),C=n(7331),E=n(93228),k=n(913),x=n(31110),T=n(43396),S=n(62589),A=n(30307),_=n(73505),R=n(94223),P=n(41091),D=n(53516),O=n(99010),I=n(55881),F=n(82552),N=n(9819),L=n(97680),B=n(17751),M=n(58365),Z=n(77020),U=n(32053),j=n(81537),q=n(5969),V=n(61306),z=n(95812),W=n(40654),H=n(60645),G=function(){function e(){(0,c.Z)(this,e),this.initialized=!1,this._animations=[],this.getAnimations()}return(0,u.Z)(e,[{key:"getAnimations",value:function(){var e=this;return new Promise((function(t){p.C?(0,H.nZ)().load("/models/avatars/Animation.glb",(function(n){var r;e._animations=n.animations,null===(r=e._animations)||void 0===r||r.forEach((function(e){e.tracks=e.tracks.filter((function(e){return!e.name.match(/^CC_Base_/)}))})),t(e._animations)})):t([])}))}}]),e}();G.instance=new G;var X=function(e){var t,n,r=null===(t=(0,w.Xr)(e,z.rl))||void 0===t?void 0:t.avatarId,o=null===(n=U.jB.find((function(e){return e.id===r})))||void 0===n?void 0:n.src;(0,w.tu)(e,m.g)&&(0,w.aT)(e,m.g,!0),(0,w.tu)(e,y.e)&&(0,w.aT)(e,y.e,!0);var c=new h.ZAu;(0,w.Tk)(e,m.g,{url:o,receiveShadow:!0,castShadow:!0,parent:c}),(0,P.Q)(e,{objArgs:{castShadow:!0,receiveShadow:!0}}),(0,w.Xr)(e,m.g).onLoaded.push(function(){var e=(0,a.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Actor Avatar loaded"),(r=(0,w.Ei)(t,z.rl)).mixer&&r.mixer.stopAllAction(),r.currentAnimationAction=[],(0,s.Z)(r.modelContainer.children).forEach((function(e){return r.modelContainer.remove(e)})),c.children.forEach((function(e){return r.modelContainer.add(e)})),r.mixer=new h.Xcj(r.modelContainer.children[0]),Y(t,n.asset.children[0]),(0,w.Xr)(t,I.Z).data.forEach((function(e){return e.lifecycleState=l.q.STARTED}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};function Y(e,t){var n=(0,w.Ei)(e,z.rl),r={fingers:!0,hair:!0,visemes:!0};n.model=function(){var e=t;if(e&&!e.isMesh&&(e=e.scene),!e){var n=new h.xsS,r=new h.TUv;r.skeleton=null,r.bind=function(e){this.skeleton=e},r.bind((0,L.MX)(N.Z)),n.add(r),console.log(r);var o=(0,L.fU)(r.skeleton),i=(0,L.hN)(o);n.add(i),e=n}return e}(),n.options=r,n.model.updateMatrixWorld(!0);var o=[];n.model.traverse((function(e){e.isSkinnedMesh&&o.push(e)})),o.sort((function(e,t){return t.skeleton.bones.length-e.skeleton.bones.length})),n.skinnedMeshes=o;var s=o.find((function(e){return e.skeleton.bones[0].parent}))||null,c=s&&s.skeleton,u=c?o.find((function(e){return e.skeleton!==c&&e.skeleton.bones.length>=c.bones.length})):null,l=u&&u.skeleton;l&&((0,L.Fp)(l,c),u.bind(c)),n.tailBones=(0,L.Eq)(c),n.skeleton=c,n.Eye_L=(0,L.Dm)(n.tailBones,!0),n.Eye_R=(0,L.Dm)(n.tailBones,!1),n.Head=(0,L.GN)(n.tailBones),n.Neck=n.Head.parent,n.Chest=n.Neck.parent,n.Hips=(0,L.fU)(c),n.Spine=(0,L.vt)(n.Chest,n.Hips),n.Left_shoulder=(0,L.s_)(n.tailBones,!0),n.Left_wrist=(0,L.ll)(n.Left_shoulder),n.Left_elbow=n.Left_wrist.parent,n.Left_arm=n.Left_elbow.parent,n.Right_shoulder=(0,L.s_)(n.tailBones,!1),n.Right_wrist=(0,L.ll)(n.Right_shoulder),n.Right_elbow=n.Right_wrist.parent,n.Right_arm=n.Right_elbow.parent,n.modelBones={Spine:n.Spine,Chest:n.Chest,Neck:n.Neck,Head:n.Head,Left_shoulder:n.Left_shoulder,Left_arm:n.Left_arm,Left_elbow:n.Left_elbow,Left_wrist:n.Left_wrist,Right_shoulder:n.Right_shoulder,Right_arm:n.Right_arm,Right_elbow:n.Right_elbow,Right_wrist:n.Right_wrist},n.armature=(0,L.hN)(n.Hips);var p=n.Left_wrist.getWorldPosition(new h.Pa4).sub(n.Head.getWorldPosition(new h.Pa4)).x<0,f=new h.Pa4(0,1,0).applyQuaternion(n.armature.quaternion).z<-.5,d=n.armature.quaternion.clone(),m=(new h.yGw).getInverse(n.armature.matrixWorld);n.armature.position.set(0,0,0),n.armature.quaternion.set(0,0,0,1),n.armature.scale.set(1,1,1),n.armature.updateMatrix(),n.Head.traverse((function(e){e.savedPosition=e.position.clone(),e.savedMatrixWorld=e.matrixWorld.clone()}));var y=[];!function e(t){for(var n=0;n<t.length;n++){var r=t[n];/hair/i.test(r.name)&&y.push(r),e(r.children)}}(c.bones);var v=n.tailBones.filter((function(e){return/hair/i.test(e.name)})).map((function(e){for(;e;e=e.parent)if(e.parent===n.Head)return e;return null})).filter((function(e){return e}));n.allHairBones=y,n.hairBones=v,r.hair&&new Promise((function(e,r){t||(t={}),t.parser||(t.parser={json:{extensions:{}}}),t.parser.json.extensions||(t.parser.json.extensions={}),t.parser.json.extensions.VRM||(t.parser.json.extensions.VRM={secondaryAnimation:{boneGroups:n.hairBones.map((function(e){var t=[];return function e(r){t.push(n.allHairBones.indexOf(r)),r.children.length>0&&e(r.children[0])}(e),{comment:e.name,stiffiness:.5,gravityPower:.2,gravityDir:{x:0,y:-1,z:0},dragForce:.3,center:-1,hitRadius:.02,bones:t,colliderGroups:[]}}))}},t.parser.getDependency=function(){var e=(0,a.Z)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("node"!==t){e.next=4;break}return e.abrupt("return",n.allHairBones[r]);case 4:throw new Error("unsupported type");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}));var g=function(e,t){var r=n.tailBones.filter((function(t){return e.test(t.name)&&(0,L.oM)(t,(function(e){return e===n.modelBones.Left_wrist||e===n.modelBones.Right_wrist}))})).sort((function(n,r){var o=n.name.replace(e,""),i=(0,L.jh)(o,/l/i)-(0,L.jh)(o,/r/i),s=r.name.replace(e,""),a=(0,L.jh)(s,/l/i)-(0,L.jh)(s,/r/i);return t?a-i:i-a}));return r.length>0?(0,L.tV)(r[0],(function(t){return e.test(t.name)})):null},b={left:{thumb:g(/thumb/gi,!0),index:g(/index/gi,!0),middle:g(/middle/gi,!0),ring:g(/ring/gi,!0),little:g(/little/gi,!0)||g(/pinky/gi,!0)},right:{thumb:g(/thumb/gi,!1),index:g(/index/gi,!1),middle:g(/middle/gi,!1),ring:g(/ring/gi,!1),little:g(/little/gi,!1)||g(/pinky/gi,!1)}};n.fingerBones=b;var C={},E=function(e){var t=n.modelBones[e].name;return C[t]||(C[t]=new h._fP),C[t]};f&&n.Hips.forEach((function(e){E(e).premultiply((new h._fP).setFromAxisAngle(new h.Pa4(1,0,0),-Math.PI/2))})),p&&n.Hips.forEach((function(e){E(e).premultiply((new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),Math.PI))}));var k=p?n.Left_arm:n.Right_arm,x=p?n.Left_elbow:n.Right_elbow,T=p?n.Left_wrist:n.Right_wrist,S=(new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),-Math.PI/2).premultiply((new h._fP).setFromRotationMatrix((new h.yGw).lookAt(new h.Pa4(0,0,0),x.getWorldPosition(new h.Pa4).applyMatrix4(m).sub(k.getWorldPosition(new h.Pa4).applyMatrix4(m)).applyQuaternion(d),new h.Pa4(0,1,0)))),A=(new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),-Math.PI/2).premultiply((new h._fP).setFromRotationMatrix((new h.yGw).lookAt(new h.Pa4(0,0,0),T.getWorldPosition(new h.Pa4).applyMatrix4(m).sub(x.getWorldPosition(new h.Pa4).applyMatrix4(m)).applyQuaternion(d),new h.Pa4(0,1,0)))),_=p?n.Right_arm:n.Left_arm,R=p?n.Right_elbow:n.Left_elbow,P=p?n.Right_wrist:n.Left_wrist,D=(new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),Math.PI/2).premultiply((new h._fP).setFromRotationMatrix((new h.yGw).lookAt(new h.Pa4(0,0,0),R.getWorldPosition(new h.Pa4).applyMatrix4(m).sub(_.getWorldPosition(new h.Pa4).applyMatrix4(m)).applyQuaternion(d),new h.Pa4(0,1,0)))),O=(new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),Math.PI/2).premultiply((new h._fP).setFromRotationMatrix((new h.yGw).lookAt(new h.Pa4(0,0,0),P.getWorldPosition(new h.Pa4).applyMatrix4(m).sub(R.getWorldPosition(new h.Pa4).applyMatrix4(m)).applyQuaternion(d),new h.Pa4(0,1,0))));for(var I in E("Right_arm").multiply(S.clone().invert()),E("Right_elbow").multiply(S.clone()).premultiply(A.clone().invert()),E("Left_arm").multiply(D.clone().invert()),E("Left_elbow").multiply(D.clone()).premultiply(O.clone().invert()),C)C[I].invert();(0,Z.E)(n.armature.children[0],{preRotations:C}),n.model.traverse((function(e){e.isSkinnedMesh&&e.bind(e.skeleton.bones.length===c.bones.length&&e.skeleton.bones.every((function(e,t){return e===c.bones[t]}))?c:e.skeleton)})),f&&n.modelBones.Hips.quaternion.premultiply((new h._fP).setFromAxisAngle(new h.Pa4(1,0,0),-Math.PI/2)),p&&n.modelBones.Hips.quaternion.premultiply((new h._fP).setFromAxisAngle(new h.Pa4(0,1,0),Math.PI)),n.modelBones.Right_arm.quaternion.premultiply(S.clone().invert()),n.modelBones.Right_elbow.quaternion.premultiply(S).premultiply(A.clone().invert()),n.modelBones.Left_arm.quaternion.premultiply(D.clone().invert()),n.modelBones.Left_elbow.quaternion.premultiply(D).premultiply(O.clone().invert()),n.model.updateMatrixWorld(!0),n.Hips.traverse((function(e){e.initialQuaternion=e.quaternion.clone()}));var F=function(){if(n.Eye_L&&n.Eye_R)return n.Eye_L.getWorldPosition(new h.Pa4).add(n.Eye_R.getWorldPosition(new h.Pa4)).divideScalar(2);var e=n.Head.getWorldPosition(new h.Pa4).sub(n.Neck.getWorldPosition(new h.Pa4));return e.z<0&&(e.z*=-1),n.Head.getWorldPosition(new h.Pa4).add(e)}();n.poseManager=new B.Z,n.shoulderTransforms=new M.Z(n);var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parent;return e.getWorldPosition(new h.Pa4).sub(t.getWorldPosition(new h.Pa4))};!function(e,t){e.shoulderTransforms.spine.position.copy(t.spine),e.shoulderTransforms.transform.position.copy(t.chest),e.shoulderTransforms.neck.position.copy(t.neck),e.shoulderTransforms.head.position.copy(t.head),e.shoulderTransforms.eyes.position.copy(t.eyes),e.shoulderTransforms.leftShoulderAnchor.position.copy(t.leftShoulder),e.shoulderTransforms.leftArm.upperArm.position.copy(t.leftUpperArm),e.shoulderTransforms.leftArm.lowerArm.position.copy(t.leftLowerArm),e.shoulderTransforms.leftArm.hand.position.copy(t.leftHand),e.shoulderTransforms.rightShoulderAnchor.position.copy(t.rightShoulder),e.shoulderTransforms.rightArm.upperArm.position.copy(t.rightUpperArm),e.shoulderTransforms.rightArm.lowerArm.position.copy(t.rightLowerArm),e.shoulderTransforms.rightArm.hand.position.copy(t.rightHand),e.shoulderTransforms.hips.updateMatrixWorld()}(n,{spine:U(n.modelBones.Spine),chest:U(n.modelBones.Chest,n.modelBones.Spine),neck:U(n.modelBones.Neck),head:U(n.modelBones.Head),eyes:F.clone().sub(n.Head.getWorldPosition(new h.Pa4)),leftShoulder:U(n.modelBones.Right_shoulder),leftUpperArm:U(n.modelBones.Right_arm),leftLowerArm:U(n.modelBones.Right_elbow),leftHand:U(n.modelBones.Right_wrist),rightShoulder:U(n.modelBones.Left_shoulder),rightUpperArm:U(n.modelBones.Left_arm),rightLowerArm:U(n.modelBones.Left_elbow),rightHand:U(n.modelBones.Left_wrist)}),n.shoulderWidth=n.modelBones.Left_arm.getWorldPosition(new h.Pa4).distanceTo(n.modelBones.Right_arm.getWorldPosition(new h.Pa4)),n.leftArmLength=n.shoulderTransforms.leftArm.armLength,n.rightArmLength=n.shoulderTransforms.rightArm.armLength,n.inputs={hmd:n.poseManager.vrTransforms.head,leftGamepad:n.poseManager.vrTransforms.leftHand,rightGamepad:n.poseManager.vrTransforms.rightHand},console.log("load actor status",n.inputs),n.inputs.hmd.scaleFactor=1,n.lastModelScaleFactor=1,n.outputs={eyes:n.shoulderTransforms.eyes,head:n.shoulderTransforms.head,spine:n.shoulderTransforms.spine,chest:n.shoulderTransforms.transform,neck:n.shoulderTransforms.neck,leftShoulder:n.shoulderTransforms.leftShoulderAnchor,leftUpperArm:n.shoulderTransforms.leftArm.upperArm,leftLowerArm:n.shoulderTransforms.leftArm.lowerArm,leftHand:n.shoulderTransforms.leftArm.hand,rightShoulder:n.shoulderTransforms.rightShoulderAnchor,rightUpperArm:n.shoulderTransforms.rightArm.upperArm,rightLowerArm:n.shoulderTransforms.rightArm.lowerArm,rightHand:n.shoulderTransforms.rightArm.hand},n.modelBoneOutputs={Hips:n.outputs.hips,Spine:n.outputs.spine,Chest:n.outputs.chest,Neck:n.outputs.neck,Head:n.outputs.head,Left_shoulder:n.outputs.rightShoulder,Left_arm:n.outputs.rightUpperArm,Left_elbow:n.outputs.rightLowerArm,Left_wrist:n.outputs.rightHand,Right_shoulder:n.outputs.leftShoulder,Right_arm:n.outputs.leftUpperArm,Right_elbow:n.outputs.leftLowerArm,Right_wrist:n.outputs.leftHand},n.lastTimestamp=Date.now(),n.shoulderTransforms.Start()}var J={networkComponents:[{type:z.rl,data:{avatarId:U._h}},{type:F.U},{type:C.I,data:{schema:j.M}},{type:I.Z,data:{schema:q.s}},{type:W.M},{type:v.t}],localClientComponents:[{type:E.$},{type:g.F,data:{distance:3,mode:b.r.ThirdPerson}},{type:k.Q},{type:A.e}],serverComponents:[{type:D.Z}],onAfterCreate:[{behavior:function(e){var t;(0,w.tu)(e,z.rl)||(console.warn("Character does not have a character component, adding"),(0,w.Tk)(e,z.rl));var n=(0,w.Ei)(e,z.rl);null===(t=n.mixer)||void 0===t||t.stopAllAction(),n.currentAnimationAction=[],void 0!==n.modelContainer&&(0,s.Z)(n.modelContainer.children).forEach((function(e){return n.modelContainer.remove(e)})),(0,w.Xr)(e,I.Z).data.forEach((function(e){return e.lifecycleState=l.q.STARTED})),n.tiltContainer=new h.ZAu,n.tiltContainer.name="Actor (tiltContainer)"+e.id,n.modelContainer=new h.ZAu,n.modelContainer.name="Actor (modelContainer)"+e.id,n.modelContainer.position.y=-n.rayCastLength,n.tiltContainer.add(n.modelContainer),(0,f.o)(e,{obj3d:n.tiltContainer}),p.C&&G.instance.getAnimations().then((function(e){n.animations=e})),n.velocitySimulator=new T.z(60,n.defaultVelocitySimulatorMass,n.defaultVelocitySimulatorDamping),n.moveVectorSmooth=new T.z(60,n.defaultVelocitySimulatorMass,n.defaultVelocitySimulatorDamping),n.vactorAnimSimulator=new T.z(60,n.defaultVelocitySimulatorMass,n.defaultVelocitySimulatorDamping),n.rotationSimulator=new x.L(60,n.defaultRotationSimulatorMass,n.defaultRotationSimulatorDamping),null==n.viewVector&&(n.viewVector=new h.Pa4);var o=(0,w.Xr)(e,F.U);(0,w.Tk)(e,S.z,{mass:n.actorMass,position:(0,r.Z)(d.AO,(0,s.Z)(o.position.toArray())),height:n.actorHeight,radius:n.capsuleRadius,segments:n.capsuleSegments,friction:n.capsuleFriction}),n.actorCapsule=(0,w.Ei)(e,S.z),n.actorCapsule.body.shapes.forEach((function(e){e.collisionFilterMask=~_.p.TrimeshColliders})),n.actorCapsule.body.allowSleep=!1,n.actorCapsule.body.collisionFilterGroup=2,n.actorCapsule.body.fixedRotation=!0,n.actorCapsule.body.updateMassProperties();var i=new h.DvJ(.1,.1,.1),a=new h.YBo({color:16711680});n.raycastBox=new h.Kj0(i,a),R.F.physicsWorld.addBody(n.actorCapsule.body),(0,O.I)(e,{state:V.F.DEFAULT}),n.initialized=!0},networked:!0},{behavior:X,networked:!0}],onBeforeDestroy:[]}},76207:function(e,t,n){"use strict";n.d(t,{Cs:function(){return g},ps:function(){return x},ez:function(){return S},rR:function(){return _}});var r=n(64414),o=n(48533),i=n.n(o),s=n(58700),a=n(94780),c=n(77866),u=n(42828),l=n(13987),p=n(29569),f=n(89306),d=n(49182),h=n(39337),m=n(36595),y=n(49903);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var g,b=m.M8C.generateUUID;!function(e){e[e.OFFSCREEN_CANVAS=0]="OFFSCREEN_CANVAS",e[e.CANVAS_CREATED=1]="CANVAS_CREATED",e[e.ADD_EVENT=2]="ADD_EVENT",e[e.REMOVE_EVENT=3]="REMOVE_EVENT",e[e.EVENT=4]="EVENT",e[e.TRANSFER=5]="TRANSFER",e[e.DOCUMENT_ELEMENT_CREATE=6]="DOCUMENT_ELEMENT_CREATE",e[e.DOCUMENT_ELEMENT_FUNCTION_CALL=7]="DOCUMENT_ELEMENT_FUNCTION_CALL",e[e.DOCUMENT_ELEMENT_PARAM_SET=8]="DOCUMENT_ELEMENT_PARAM_SET",e[e.DOCUMENT_ELEMENT_ADD_EVENT=9]="DOCUMENT_ELEMENT_ADD_EVENT",e[e.DOCUMENT_ELEMENT_REMOVE_EVENT=10]="DOCUMENT_ELEMENT_REMOVE_EVENT",e[e.DOCUMENT_ELEMENT_EVENT=11]="DOCUMENT_ELEMENT_EVENT",e[e.DOCUMENT_ELEMENT_PROP_UPDATE=12]="DOCUMENT_ELEMENT_PROP_UPDATE",e[e.VIDEO_ELEMENT_CREATE=13]="VIDEO_ELEMENT_CREATE",e[e.VIDEO_ELEMENT_FRAME=14]="VIDEO_ELEMENT_FRAME",e[e.OBJECT3D_CREATE=15]="OBJECT3D_CREATE",e[e.OBJECT3D_DESTROY=16]="OBJECT3D_DESTROY",e[e.OBJECT3D_MATRIX=17]="OBJECT3D_MATRIX",e[e.OBJECT3D_PARAM_SET=18]="OBJECT3D_PARAM_SET",e[e.OBJECT3D_FUNCTION_CALL=19]="OBJECT3D_FUNCTION_CALL",e[e.AUDIO_BUFFER_LOAD=20]="AUDIO_BUFFER_LOAD",e[e.AUDIO_BUFFER_SET=21]="AUDIO_BUFFER_SET",e[e.AUDIO_SOURCE_STREAM_SET=22]="AUDIO_SOURCE_STREAM_SET",e[e.AUDIO_SOURCE_ELEMENT_SET=23]="AUDIO_SOURCE_ELEMENT_SET"}(g||(g={}));function w(e){var t={};for(var n in e)"function"!==typeof e[n]&&(t[n]=e[n]);return t}function C(e){var t=w(e);switch(t.srcElement){case window:t.targetElement="window";break;case document:t.targetElement="document";break;case globalThis.__messageQueue.canvas:t.targetElement="canvas"}return delete t.currentTarget,delete t.path,delete t.srcElement,delete t.target,delete t.view,delete t.sourceCapabilities,delete t.toElement,delete t.relatedTarget,delete t.fromElement,t}var E=function(){function e(t){var n=this,r=t.eventTarget,o=t.eventListener;(0,d.Z)(this,e),this._listeners={},this.eventTarget=r,this.eventListener=o,this.messageTypeFunctions=new Map,this.messageTypeFunctions.set(g.EVENT,(function(e){e.preventDefault=function(){},e.stopPropagation=function(){},delete e.target,n.dispatchEvent(e,!0)})),this.messageTypeFunctions.set(g.ADD_EVENT,(function(e){var t=e.type;n.eventTarget.addEventListener(t,o)})),this.messageTypeFunctions.set(g.REMOVE_EVENT,(function(e){var t=e.type;n.eventTarget.removeEventListener(t,o)}))}return(0,h.Z)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners[e]&&(this._listeners[e]=[]),-1===this._listeners[e].indexOf(t)&&this._listeners[e].push(t)}},{key:"hasEventListener",value:function(e,t){return void 0!==this._listeners[e]&&-1!==this._listeners[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"dispatchEvent",value:function(e,t){var n=this._listeners[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),o=0,i=r.length;o<i;o++)r[o].call(this,e)}}}]),e}(),k=function(e){(0,l.Z)(n,e);var t=v(n);function n(e){var r,o=e.messagePort,i=e.eventTarget,s=e.eventListener;return(0,d.Z)(this,n),(r=t.call(this,{eventTarget:i,eventListener:s})).object3dProxies=[],r.messagePort=o,r.eventTarget=i,r.queue=[],r.remoteDocumentObjects=new Map,r.messagePort.onmessage=function(e){r.receiveQueue(e.data)},r.interval=setInterval((function(){r.sendQueue()}),1e3/60),r}return(0,h.Z)(n,[{key:"sendEvent",value:function(e,t,n){this.queue.push({messageType:g.EVENT,message:{type:e,detail:t},transferables:n})}},{key:"transfer",value:function(e){this.queue.push({messageType:g.TRANSFER,message:{},transferables:e})}},{key:"sendQueue",value:function(){var e;if(this.dispatchEvent({type:"MESSAGE_QUEUE_EVENT_BEFORE_SEND_QUEUE"},!0),null===(e=this.queue)||void 0===e?void 0:e.length){var t=[];this.queue.forEach((function(e){t.push({messageType:e.messageType,message:e.message})}));var n=[];this.queue.forEach((function(e){e.transferables&&n.push.apply(n,(0,c.Z)(e.transferables))}));try{this.messagePort.postMessage(t,n)}catch(r){console.log(r,t,this)}this.queue=[]}}},{key:"receiveQueue",value:function(e){var t=this;e.forEach((function(e){var n,r=e.messageType,o=e.message;o.returnID&&""!==o.returnID?t.remoteDocumentObjects.get(o.returnID)&&(null===(n=t.remoteDocumentObjects.get(o.returnID))||void 0===n||n.messageTypeFunctions.get(r)(o)):t.messageTypeFunctions.has(r)&&t.messageTypeFunctions.get(r)(o)}))}},{key:"addEventListener",value:function(e,t){this.queue.push({messageType:g.ADD_EVENT,message:{type:e}}),(0,u.Z)((0,f.Z)(n.prototype),"addEventListener",this).call(this,e,t)}},{key:"removeEventListener",value:function(e,t){this.queue.push({messageType:g.REMOVE_EVENT,message:{type:e}}),(0,u.Z)((0,f.Z)(n.prototype),"removeEventListener",this).call(this,e,t)}},{key:"dispatchEvent",value:function(e,t){t||this.queue.push({messageType:g.EVENT,message:w(e)}),(0,u.Z)((0,f.Z)(n.prototype),"dispatchEvent",this).call(this,e)}}]),n}(E),x=function(e){(0,l.Z)(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.Z)(this,n),(e=t.call(this)).setQueue=new Map,e.type=r.type||"Object3D",e.proxyID=b(),e.messageQueue=globalThis.__messageQueue,e.messageQueue.object3dProxies.push((0,a.Z)(e)),e.messageQueue.queue.push({messageType:g.OBJECT3D_CREATE,message:{proxyID:e.proxyID,type:e.type}}),e.addEventListener("removed",(function(){e.messageQueue.object3dProxies.splice(e.messageQueue.object3dProxies.indexOf((0,a.Z)(e)),1),e.messageQueue.queue.push({messageType:g.OBJECT3D_DESTROY,message:{proxyID:e.proxyID}})})),e}return(0,h.Z)(n,[{key:"__callFunc",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.messageQueue.queue.push({messageType:g.OBJECT3D_FUNCTION_CALL,message:{call:e,proxyID:this.proxyID,args:n}})}}]),n}(m.Tme),T=function(e){(0,l.Z)(n,e);var t=v(n);function n(e){var r,o=e.messagePort,i=e.eventTarget;return(0,d.Z)(this,n),(r=t.call(this,{messagePort:o,eventTarget:i,eventListener:function(e){r.queue.push({messageType:g.EVENT,message:w(e)})}})).canvas=i,r}return n}(k);function S(e,t,n){return A.apply(this,arguments)}function A(){return(A=(0,s.Z)(i().mark((function e(t,n,r){var o,a,u,l,p,f,d,h,v,b,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new T({messagePort:t,eventTarget:n}),a=n.getBoundingClientRect(),u=a.width,l=a.height,p=n.transferControlToOffscreen(),f=new Map,d=new Map,h=new m.xsS,v=new m.mTL,b=new Map,w=void 0,o.isMobile=(0,y.i)(),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_FUNCTION_CALL,function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,s,a,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.call,r=t.uuid,s=t.args,a=t.requestID,e.prev=1,e.next=4,(u=f.get(r))[n].apply(u,(0,c.Z)(s));case 4:l=e.sent,a&&o.sendEvent(a,{returnedData:l}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),a&&o.sendEvent(a,{returnedData:void 0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_PARAM_SET,(function(e){var t=e.param,n=e.uuid,r=e.arg;f.get(n)[t]=r})),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_EVENT,(function(e){var t,n=e.type,r=e.uuid,o=e.detail;null===(t=f.get(r))||void 0===t||t.dispatchEvent(new CustomEvent(n,{detail:o}))})),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_ADD_EVENT,(function(e){var t=e.type,n=e.uuid;if(f.get(n)){var r=function(e){var r=C(e);r.type=t,r.returnID=n,o.queue.push({messageType:g.EVENT,message:r})};f.get(n).addEventListener(t,r),f.get(n).proxyListener=r}})),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_REMOVE_EVENT,(function(e){var t=e.type,n=e.uuid;f.get(n)&&(f.get(n).removeEventListener(t,f.get(n).proxyListener),delete f.get(n).proxyListener)})),o.messageTypeFunctions.set(g.DOCUMENT_ELEMENT_CREATE,(function(e){var t=e.type,r=e.uuid,i=e.elementArgs;switch(t){case"window":f.set(r,window);break;case"navigator.xr":f.set(r,new D({messageQueue:o,documentElementMap:f}));break;case"document":f.set(r,document);break;case"canvas":f.set(r,n);break;case"mediaElementSource":f.set(r,w.context.createMediaElementSource(f.get(i.elementID)));case"audio":var s=document.createElement("audio");void 0!==i&&_(s,i),f.set(r,s);break;case"video":var a=document.createElement("video");void 0!==i&&_(a,i),f.set(r,a),a.onplay=function(e){var t=a.videoWidth>1280||a.videoHeight>720?1/Math.abs(a.videoHeight/720):1;a.setAttribute("height",String(a.videoHeight*t)+"px");var n=new OffscreenCanvas(a.videoWidth*t,a.videoHeight*t),i=n.getContext("2d");o.queue.push({messageType:g.VIDEO_ELEMENT_CREATE,message:{width:n.width,height:n.width,returnID:r,canvasScale:t}});a.requestVideoFrameCallback((function e(s,c){i.drawImage(a,0,0,a.videoWidth*t,a.videoHeight*t);var u=n.transferToImageBitmap();o.queue.push({messageType:g.VIDEO_ELEMENT_FRAME,message:{imageBitmap:u,readyState:a.readyState,returnID:r,currentTime:a.currentTime,now:s,metaData:c},transferables:[u]}),a.requestVideoFrameCallback(e)}))}}})),o.messageTypeFunctions.set(g.AUDIO_BUFFER_LOAD,(function(e){var t=e.url;v.load(t,(function(e){b.set(t,e),o.queue.push({messageType:g.EVENT,message:{type:t}})}))})),o.messageTypeFunctions.set(g.AUDIO_BUFFER_SET,(function(e){var t=e.bufferID,n=e.proxyID,r=b.get(t),o=d.get(n);r&&o&&o.setBuffer(r)})),o.messageTypeFunctions.set(g.AUDIO_SOURCE_ELEMENT_SET,(function(e){var t=e.sourceID,n=e.proxyID,r=f.get(t),o=d.get(n);r&&o&&o.setMediaElementSource(r)})),o.messageTypeFunctions.set(g.OBJECT3D_CREATE,(function(e){var t,n=e.type,r=e.proxyID;e.args;switch(n){case"Audio":t=new m.BbS(w);break;case"PositionalAudio":t=new m.VYz(w);break;case"AudioListener":t=new m.SJI,w=t}t&&(h.add(t),d.set(r,t))})),o.messageTypeFunctions.set(g.OBJECT3D_PARAM_SET,(function(e){var t=e.param,n=e.proxyID,r=e.arg,o=d.get(n);o&&(o[t]=r)})),o.messageTypeFunctions.set(g.OBJECT3D_FUNCTION_CALL,(function(e){var t=e.call,n=e.proxyID,r=e.args,o=d.get(n);o&&o[t].apply(o,(0,c.Z)(r))})),o.messageTypeFunctions.set(g.OBJECT3D_MATRIX,(function(e){var t=e.matrixWorld,n=e.proxyID,r=d.get(n);r&&(r.matrixWorld=t,r.matrixWorldNeedsUpdate=!0)})),o.messageTypeFunctions.set(g.OBJECT3D_DESTROY,(function(e){var t=e.proxyID,n=d.get(t);(null===n||void 0===n?void 0:n.parent)&&n.parent.remove(n)})),window.addEventListener("resize",(function(){o.queue.push({messageType:g.EVENT,message:{type:"resize",detail:{width:n.clientWidth,height:n.clientHeight}}})})),o.queue.push({messageType:g.OFFSCREEN_CANVAS,message:{width:u,height:l,canvas:p,devicePixelRatio:window.devicePixelRatio,isMobile:o.isMobile,userArgs:r},transferables:[p]}),e.next=28,new Promise((function(e){o.messageTypeFunctions.set(g.CANVAS_CREATED,(function(){o.messageTypeFunctions.delete(g.CANVAS_CREATED),e()}))}));case 28:return globalThis.__messageQueue=o,e.abrupt("return",o);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e,t){return Object.entries(t).forEach((function(t){var n=(0,r.Z)(t,2),o=n[0],i=n[1];e[o]=i})),e},R="OFFSCREEN_XR_EVENTS_SESSION_START",P="OFFSCREEN_XR_EVENTS_SESSION_CREATED",D=function(){function e(t){var n=t.messageQueue,r=t.documentElementMap;(0,d.Z)(this,e),this.messageQueue=n,this.documentElementMap=r}return(0,h.Z)(e,[{key:"isSessionSupported",value:function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.xr.isSessionSupported(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestSession",value:function(){var e=(0,s.Z)(i().mark((function e(t){var n,r,o=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.xr.requestSession(t);case 2:return n=e.sent,document.dispatchEvent(new CustomEvent(R,{detail:{session:n}})),r=b(),this.documentElementMap.set(r,n),n.createOffscreenSession=function(){var e=(0,s.Z)(i().mark((function e(t){var r,s,a,c,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.framebufferScaleFactor,o.messageQueue.eventTarget.hidden=!0,s=document.createElement("canvas"),document.body.append(s),a=s.getContext("webgl2",{xrCompatible:!0}),c=a.getContextAttributes(),!0===a.xrCompatible){e.next=9;break}return e.next=9,a.makeXRCompatible();case 9:return u=new XRWebGLLayer(n,a,{antialias:c.antialias,alpha:c.alpha,depth:c.depth,stencil:c.stencil,framebufferScaleFactor:r}),e.next=12,n.updateRenderState({baseLayer:u});case 12:document.dispatchEvent(new CustomEvent(P,{detail:{baseLayer:u,context:a,session:n,canvas:s}}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},31274:function(e,t,n){e.exports=n(3238)},54158:function(e){function t(){}e.exports=function(e,n,r){var o=!1;return r=r||t,i.count=e,0===e?n():i;function i(e,t){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,n(e),n=r):0!==i.count||o||n(null,t)}}},98805:function(e){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},60510:function(e,t,n){e.exports=n(8221)},66504:function(e,t,n){"use strict";var r=n(63370),o=n(74182),i=n(50339),s=n(3511),a=n(43841),c=n(19984),u=n(74817),l=n(64354);e.exports=function(e){return new Promise((function(t,n){var p=e.data,f=e.headers;r.isFormData(p)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(h+":"+m)}var y=a(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),s(y,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?c(d.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:e,request:d};o(t,n,i),d=null}},d.onabort=function(){d&&(n(l("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(l("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var v=(e.withCredentials||u(y))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;v&&(f[e.xsrfHeaderName]=v)}if("setRequestHeader"in d&&r.forEach(f,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(g){if("json"!==e.responseType)throw g}"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),n(e),d=null)})),p||(p=null),d.send(p)}))}},8221:function(e,t,n){"use strict";var r=n(63370),o=n(23978),i=n(56316),s=n(76561);function a(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=a(n(14135));c.Axios=i,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(59514),c.CancelToken=n(5441),c.isCancel=n(88563),c.all=function(e){return Promise.all(e)},c.spread=n(83673),c.isAxiosError=n(58005),e.exports=c,e.exports.default=c},59514:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},5441:function(e,t,n){"use strict";var r=n(59514);function o(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},88563:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},56316:function(e,t,n){"use strict";var r=n(63370),o=n(3511),i=n(96248),s=n(57457),a=n(76561);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=c},96248:function(e,t,n){"use strict";var r=n(63370);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},43841:function(e,t,n){"use strict";var r=n(29937),o=n(75374);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},64354:function(e,t,n){"use strict";var r=n(9857);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},57457:function(e,t,n){"use strict";var r=n(63370),o=n(41540),i=n(88563),s=n(14135);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},9857:function(e){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},76561:function(e,t,n){"use strict";var r=n(63370);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),r.forEach(i,u),r.forEach(s,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=c(void 0,e[o])):n[o]=c(void 0,t[o])})),r.forEach(a,(function(r){r in t?n[r]=c(e[r],t[r]):r in e&&(n[r]=c(void 0,e[r]))}));var l=o.concat(i).concat(s).concat(a),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(p,u),n}},74182:function(e,t,n){"use strict";var r=n(64354);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},41540:function(e,t,n){"use strict";var r=n(63370);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},14135:function(e,t,n){"use strict";var r=n(33221),o=n(63370),i=n(93554),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof r&&"[object process]"===Object.prototype.toString.call(r))&&(e=n(66504)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){c.headers[e]=o.merge(s)})),e.exports=c},23978:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},3511:function(e,t,n){"use strict";var r=n(63370);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},75374:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},50339:function(e,t,n){"use strict";var r=n(63370);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},29937:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},58005:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},74817:function(e,t,n){"use strict";var r=n(63370);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},93554:function(e,t,n){"use strict";var r=n(63370);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},19984:function(e,t,n){"use strict";var r=n(63370),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},83673:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},63370:function(e,t,n){"use strict";var r=n(23978),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return"undefined"===typeof e}function a(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===o.call(e)}function l(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,o){e[o]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},41073:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},83769:function(e){var t="undefined"!==typeof t?t:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),r=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=t&&t.prototype.append&&t.prototype.getBlob;function i(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function s(e,n){n=n||{};var r=new t;return i(e).forEach((function(e){r.append(e)})),n.type?r.getBlob(n.type):r.getBlob()}function a(e,t){return new Blob(i(e),t||{})}"undefined"!==typeof Blob&&(s.prototype=Blob.prototype,a.prototype=Blob.prototype),e.exports=n?r?Blob:a:o?s:void 0},34193:function(e){var t=[].slice;e.exports=function(e,n){if("string"==typeof n&&(n=e[n]),"function"!=typeof n)throw new Error("bind() requires a function");var r=t.call(arguments,2);return function(){return n.apply(e,r.concat(t.call(arguments)))}}},98533:function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},93902:function(e){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},82628:function(e){e.exports="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},44450:function(e,t,n){e.exports=n(58122),e.exports.parser=n(62127)},58122:function(e,t,n){var r=n(4784),o=n(98533),i=n(95601)("engine.io-client:socket"),s=n(75542),a=n(62127),c=n(49947),u=n(94648);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"===typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"===typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=a.protocol,l.Socket=l,l.Transport=n(86532),l.transports=n(4784),l.parser=n(62127),l.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(i('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(i("changing transport and sending upgrade packet"),f(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{i('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,r.emit("upgradeError",s)}})))}function s(){n||(n=!0,f(),t.close(),t=null)}function a(n){var o=new Error("probe error: "+n);o.transport=t.name,s(),i('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function c(){a("transport closed")}function u(){a("socket closed")}function p(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),s())}function f(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",p)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",p),t.open()},l.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){i("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~s(this.transports,e[n])&&t.push(e[n]);return t}},86532:function(e,t,n){var r=n(62127),o=n(98533);function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=i,o(i.prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},4784:function(e,t,n){var r=n(81718),o=n(29984),i=n(90302),s=n(21540);t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!==typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},90302:function(e,t,n){var r=n(37655),o=n(93902),i=n(82628);e.exports=l;var s,a=/\n/g,c=/\\n/g;function u(){}function l(e){r.call(this,e),this.query=this.query||{},s||(s=i.___eio=i.___eio||[]),this.index=s.length;var t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=u)}),!1)}o(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(t){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}},29984:function(e,t,n){var r=n(81718),o=n(37655),i=n(98533),s=n(93902),a=n(95601)("engine.io-client:polling-xhr"),c=n(82628);function u(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!==typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function p(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=p,s(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new p(e)},l.prototype.doWrite=function(e,t){var n="string"!==typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},i(p.prototype),p.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(i){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{t.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(i){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"===typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(i){return void setTimeout((function(){n.onError(i)}),0)}"undefined"!==typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},p.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},p.prototype.cleanup=function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(n){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},p.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",f);else if("function"===typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",f,!1)}function f(){for(var e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}},37655:function(e,t,n){var r=n(86532),o=n(94648),i=n(62127),s=n(93902),a=n(40577),c=n(95601)("engine.io-client:polling");e.exports=l;var u=null!=new(n(81718))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}s(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||n()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e);i.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};i.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},21540:function(e,t,n){var r,o,i=n(26508).Buffer,s=n(86532),a=n(62127),c=n(94648),u=n(93902),l=n(40577),p=n(95601)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?r=WebSocket:"undefined"!==typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{o=n(40418)}catch(h){}var f=r||o;function d(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=o),s.call(this,e)}e.exports=d,u(d,s),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,r=0,o=n;r<o;r++)!function(e){a.encodePacket(e,t.supportsBinary,(function(r){if(!t.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),t.perMessageDeflate)("string"===typeof r?i.byteLength(r):r.length)<t.perMessageDeflate.threshold&&(o.compress=!1)}try{t.usingBrowserWebSocket?t.ws.send(r):t.ws.send(r,o)}catch(h){p("websocket closed before onclose event")}--n||s()}))}(e[r]);function s(){t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0)}},d.prototype.onClose=function(){s.prototype.onClose.call(this)},d.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!!f&&!("__initialize"in f&&this.name===d.prototype.name)}},81718:function(e,t,n){var r=n(70695),o=n(82628);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(s){}try{if("undefined"!==typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(s){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}},95601:function(e,t,n){var r=n(33221);function o(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(18738)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=o,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(o())},18738:function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"===typeof o){var i=s[c];n=o.call(e,i),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=r.log||t.log||console.log.bind(console);u.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(89631),t.instances=[],t.names=[],t.skips=[],t.formatters={}},89631:function(e){var t=1e3,n=60*t,r=60*n,o=24*r,i=365.25*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!s)return;var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return a.long?s(c=e,o,"day")||s(c,r,"hour")||s(c,n,"minute")||s(c,t,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},62127:function(e,t,n){var r,o=n(71254),i=n(67442),s=n(98805),a=n(54158),c=n(57862);"undefined"!==typeof ArrayBuffer&&(r=n(21799));var u="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),p=u||l;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(f),h={type:"error",data:"parser error"},m=n(83769);function y(e,t,n){for(var r=new Array(e.length),o=a(e.length,n),i=function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))},s=0;s<e.length;s++)i(s,e[s],o)}t.encodePacket=function(e,n,r,o){"function"===typeof n&&(o=n,n=!1),"function"===typeof r&&(o=r,r=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!==typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=f[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}(e,n,o);if("undefined"!==typeof m&&i instanceof m)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(p)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(e.data)}(e,n,r);var o=new Uint8Array(1);o[0]=f[e.type];var i=new m([o.buffer,e.data]);return r(i)}(e,n,o);if(i&&i.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,o);var s=f[e.type];return void 0!==e.data&&(s+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),o(""+s)},t.encodeBase64Packet=function(e,n){var r,o="b"+t.packets[e.type];if("undefined"!==typeof m&&e.data instanceof m){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(u){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return o+=btoa(r),n(o)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"===typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return h;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:h}o=new Uint8Array(e)[0];var i=s(e,1);return m&&"blob"===n&&(i=new m([i])),{type:d[o],data:i}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===t&&m&&(o=new m([o])),{type:n,data:o}},t.encodePayload=function(e,n,r){"function"===typeof n&&(r=n,n=null);var o=i(e);if(n&&o)return m&&!p?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");y(e,(function(e,r){t.encodePacket(e,!!o&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!==typeof e)return t.decodePayloadAsBinary(e,n,r);var o;if("function"===typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var i,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===a||a!=(i=Number(a)))return r(h,0,1);if(a!=(s=e.substr(c+1,i)).length)return r(h,0,1);if(s.length){if(o=t.decodePacket(s,n,!1),h.type===o.type&&h.data===o.data)return r(h,0,1);if(!1===r(o,c+i,u))return}c+=i,a=""}else a+=l}return""!==a?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));y(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"===typeof t?t.length:t.byteLength).toString().length+n+2}),0),o=new Uint8Array(r),i=0;return t.forEach((function(e){var t="string"===typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}o[i++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){y(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"===typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,m){var a=new m([t.buffer,s.buffer,e]);n(null,a)}}))}),(function(e,t){return n(new m(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"===typeof n&&(r=n,n=null);for(var o=e,i=[];o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",l=1;255!==a[l];l++){if(u.length>310)return r(h,0,1);u+=a[l]}o=s(o,2+u.length),u=parseInt(u);var p=s(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(m){var f=new Uint8Array(p);p="";for(l=0;l<f.length;l++)p+=String.fromCharCode(f[l])}i.push(p),o=s(o,u)}var d=i.length;i.forEach((function(e,o){r(t.decodePacket(e,n,!0),o,d)}))}},71254:function(e){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},57862:function(e){var t,n,r,o=String.fromCharCode;function i(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(e,t){return o(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),n=o(e>>12&15|224),n+=a(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=a(e,12),n+=a(e,6)),n+=o(63&e|128)}function u(){if(r>=n)throw Error("Invalid byte index");var e=255&t[r];if(r++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function l(e){var o,i;if(r>n)throw Error("Invalid byte index");if(r==n)return!1;if(o=255&t[r],r++,0==(128&o))return o;if(192==(224&o)){if((i=(31&o)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&o)){if((i=(15&o)<<12|u()<<6|u())>=2048)return s(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&o)&&(i=(7&o)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=i(e),o=r.length,s=-1,a="";++s<o;)a+=c(r[s],n);return a},decode:function(e,s){var a=!1!==(s=s||{}).strict;t=i(e),n=t.length,r=0;for(var c,u=[];!1!==(c=l(a));)u.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(u)}}},21799:function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,i="";for(n=0;n<o;n+=3)i+=e[r[n]>>2],i+=e[(3&r[n])<<4|r[n+1]>>4],i+=e[(15&r[n+1])<<2|r[n+2]>>6],i+=e[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var n,r,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),p=new Uint8Array(l);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),i=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),p[u++]=r<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},67442:function(e,t,n){var r=n(26508).Buffer,o=n(52488),i=Object.prototype.toString,s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(t){if(!t||"object"!==typeof t)return!1;if(o(t)){for(var n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1}if("function"===typeof r&&r.isBuffer&&r.isBuffer(t)||"function"===typeof ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&e(t[c]))return!0;return!1}},52488:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},70695:function(e){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},75542:function(e){var t=[].indexOf;e.exports=function(e,n){if(t)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1}},76266:function(e){var t=1e3,n=60*t,r=60*n,o=24*r,i=7*o,s=365.25*o;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var i=Math.abs(e);if(i>=o)return a(e,i,o,"day");if(i>=r)return a(e,i,r,"hour");if(i>=n)return a(e,i,n,"minute");if(i>=t)return a(e,i,t,"second");return e+" ms"}(e):function(e){var i=Math.abs(e);if(i>=o)return Math.round(e/o)+"d";if(i>=r)return Math.round(e/r)+"h";if(i>=n)return Math.round(e/n)+"m";if(i>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},94648:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},49947:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=t.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=r,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}},98592:function(e,t,n){var r=n(47568),o=n(42659),i=n(12357),s=n(22341)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),c=o.source,u=o.id,l=o.path,p=a[u]&&l in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?(s("ignoring socket cache for %s",c),n=i(c,t)):(a[u]||(s("new io instance for %s",c),a[u]=i(c,t)),n=a[u]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=c,t.Manager=n(12357),t.Socket=n(85282)},12357:function(e,t,n){var r=n(44450),o=n(85282),i=n(85662),s=n(42659),a=n(10131),c=n(34193),u=n(22341)("socket.io-client:manager"),l=n(75542),p=n(41073),f=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var i=a(n,"open",(function(){o.onopen(),e&&e()})),s=a(n,"error",(function(t){if(u("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c);var l=setTimeout((function(){u("connect attempt timed out after %d",c),i.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(s),this},d.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",i),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&i()}function i(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},10131:function(e){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},85282:function(e,t,n){var r=n(42659),o=n(85662),i=n(34678),s=n(10131),a=n(34193),c=n(22341)("socket.io-client:socket"),u=n(20697),l=n(67442);e.exports=d;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(p.hasOwnProperty(e))return f.apply(this,arguments),this;var t=i(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=i(arguments);c("sending ack %j",o),t.packet({type:l(o)?r.BINARY_ACK:r.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"===typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},47568:function(e,t,n){var r=n(12287),o=n(22341)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!==typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!==typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}},85662:function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},22341:function(e,t,n){var r=n(33221);t.log=function(){var e;return"object"===typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(1783)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},1783:function(e,t,n){var r=n(64181);e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return o.colors[Math.abs(t)%o.colors.length]}function o(e){var n;function r(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(r.enabled){var s=r,a=Number(new Date),c=a-(n||a);s.diff=c,s.prev=n,s.curr=a,n=a,t[0]=o.coerce(t[0]),"string"!==typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var r=o.formatters[n];if("function"===typeof r){var i=t[u];e=r.call(s,i),t.splice(u,1),u--}return e})),o.formatArgs.call(s,t);var l=s.log||o.log;l.apply(s,t)}}return r.namespace=e,r.enabled=o.enabled(e),r.useColors=o.useColors(),r.color=t(e),r.destroy=i,r.extend=s,"function"===typeof o.init&&o.init(r),o.instances.push(r),r}function i(){var e=o.instances.indexOf(this);return-1!==e&&(o.instances.splice(e,1),!0)}function s(e,t){var n=o(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},o.disable=function(){var e=[].concat(r(o.names.map(a)),r(o.skips.map(a).map((function(e){return"-"+e})))).join(",");return o.enable(""),e},o.enable=function(e){var t;o.save(e),o.names=[],o.skips=[];var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+e.substr(1)+"$")):o.names.push(new RegExp("^"+e+"$")));for(t=0;t<o.instances.length;t++){var i=o.instances[t];i.enabled=o.enabled(i.namespace)}},o.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=o.skips.length;t<n;t++)if(o.skips[t].test(e))return!1;for(t=0,n=o.names.length;t<n;t++)if(o.names[t].test(e))return!0;return!1},o.humanize=n(76266),Object.keys(e).forEach((function(t){o[t]=e[t]})),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=t,o.enable(o.load()),o}},20697:function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},12287:function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=t.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=r,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},83934:function(e,t,n){var r=n(32098),o=n(50565),i=Object.prototype.toString,s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);function c(e,t){if(!e)return e;if(o(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var i=new Array(e.length),s=0;s<e.length;s++)i[s]=c(e[s],t);return i}if("object"===typeof e&&!(e instanceof Date)){i={};for(var a in e)i[a]=c(e[a],t);return i}return e}function u(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=u(e[n],t);else if("object"===typeof e)for(var o in e)e[o]=u(e[o],t);return e}t.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=c(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=u(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,i=e;!function e(c,u,l){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){n++;var p=new FileReader;p.onload=function(){l?l[u]=this.result:i=this.result,--n||t(i)},p.readAsArrayBuffer(c)}else if(r(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"===typeof c&&!o(c))for(var d in c)e(c[d],d,c)}(i),n||t(i)}},42659:function(e,t,n){var r=n(85920)("socket.io-parser"),o=n(98533),i=n(83934),s=n(32098),a=n(50565);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=p;var u=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(t){return!1}}(e.data);if(!1===o)return u;n+=o}return r("encoded %j as %s",e,n),n}function p(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){function n(e){var n=i.deconstructPacket(e),r=l(n.packet),o=n.buffers;o.unshift(r),t(o)}i.removeBlobs(e,n)}(e,n):n([l(e)])},o(p.prototype),p.prototype.add=function(e){var n;if("string"===typeof e)n=function(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var i=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var a=e.substring(i,n);if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(a)}if("/"===e.charAt(n+1)){for(i=n+1;++n;){if(","===(u=e.charAt(n)))break;if(n===e.length)break}o.nsp=e.substring(i,n)}else o.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(i=n+1;++n;){var u;if(null==(u=e.charAt(n))||Number(u)!=u){--n;break}if(n===e.length)break}o.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(n));if(!(!1!==l&&(o.type===t.ERROR||s(l))))return d("invalid payload");o.data=l}return r("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},50565:function(e,t,n){var r=n(26508).Buffer;e.exports=function(e){return o&&r.isBuffer(e)||i&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var o="function"===typeof r&&"function"===typeof r.isBuffer,i="function"===typeof ArrayBuffer},85920:function(e,t,n){var r=n(33221);function o(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(83633)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=o,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(o())},83633:function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"===typeof o){var i=s[c];n=o.call(e,i),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=r.log||t.log||console.log.bind(console);u.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var i=t.instances[n];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(76443),t.instances=[],t.names=[],t.skips=[],t.formatters={}},32098:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},76443:function(e){var t=1e3,n=60*t,r=60*n,o=24*r,i=365.25*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!s)return;var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===u&&!1===isNaN(e))return a.long?s(c=e,o,"day")||s(c,r,"hour")||s(c,n,"minute")||s(c,t,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},34678:function(e){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},40577:function(e){"use strict";var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},o=0,i=0;function s(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function a(){var e=s(+new Date);return e!==t?(o=0,t=e):e+"."+s(o++)}for(;i<64;i++)r[n[i]]=i;a.encode=s,a.decode=function(e){var t=0;for(i=0;i<e.length;i++)t=64*t+r[e.charAt(i)];return t},e.exports=a},24892:function(e,t,n){"use strict";n.d(t,{vK:function(){return le},ib:function(){return ue},DQ:function(){return pe},bA:function(){return ce},bW:function(){return Q},gF:function(){return se},pQ:function(){return te},Nb:function(){return ee},pK:function(){return K},TX:function(){return ne},C0:function(){return fe},Jx:function(){return re},kX:function(){return ve},A8:function(){return ie},c0:function(){return ae},jq:function(){return ye},d2:function(){return de},_S:function(){return me},gg:function(){return he},lm:function(){return oe}});var r,o=n(15194),i=n(48533),s=n.n(i),a=n(58700),c=new Uint8Array(16);function u(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(c)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var p=function(e){return"string"===typeof e&&l.test(e)},f=[],d=0;d<256;++d)f.push((d+256).toString(16).substr(1));var h,m,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!p(n))throw TypeError("Stringified UUID is invalid");return n},v=0,g=0;var b=function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||h,s=void 0!==e.clockseq?e.clockseq:m;if(null==i||null==s){var a=e.random||(e.rng||u)();null==i&&(i=h=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=m=16383&(a[6]<<8|a[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:g+1,p=c-v+(l-g)/1e4;if(p<0&&void 0===e.clockseq&&(s=s+1&16383),(p<0||c>v)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=c,g=l,m=s;var f=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var d=c/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var b=0;b<6;++b)o[r+b]=i[b];return t||y(o)},w=n(62575);function C(e){return{type:w.xZ,processing:e}}function E(e){return{type:w.$U,authUser:e,message:""}}function k(e){return{type:w._C,message:e}}function x(){return{type:w.Wb,message:""}}function T(e){return{type:w.in,identityProvider:e,message:""}}function S(e){return{type:w.kS,result:e}}function A(e){return{type:w.Ni,result:e}}function _(e){return{type:w.w5,result:e}}function R(e){return{type:w.Y9,result:e}}function P(e){return{type:w.Lx,result:e}}function D(e){return{type:w.I8,data:e}}function O(e){var t=e.url;return{type:w.hL,url:t}}function I(e){return{type:w.hO,user:e}}var F=n(22667),N=n(92384),L=n(73673),B=n(69327),M=n(45716),Z=n(50931),U=n(59804),j=n(60510),q=n.n(j),V=n(77869),z=n(42879),W=n(86887),H=n(81652),G=n(82812),X=(0,Z.default)().publicRuntimeConfig,Y=X.apiServer,J=X.auth;function Q(e,t){return function(){var n=(0,a.Z)(s().mark((function n(r){var o,i,a,c,u,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,o=(0,U.tV)("auth"),i=o&&o.authUser?o.authUser.accessToken:void 0,!0===e||null!=i){n.next=5;break}return n.abrupt("return");case 5:if(!0!==t){n.next=8;break}return n.next=8,N.L.authentication.reset();case 8:if(!0!==e||null!=i&&0!==i.length){n.next=13;break}return n.next=11,N.L.service("identity-provider").create({type:"guest",token:b()});case 11:a=n.sent,i=a.accessToken;case 13:return n.next=15,N.L.authentication.setAccessToken(i);case 15:return n.prev=15,n.next=18,N.L.reAuthenticate();case 18:c=n.sent,n.next=40;break;case 21:if(n.prev=21,n.t0=n.catch(15),"not-found"!==n.t0.className){n.next=39;break}return n.next=26,r(x());case 26:return n.next=28,N.L.authentication.reset();case 28:return n.next=30,N.L.service("identity-provider").create({type:"guest",token:b()});case 30:return u=n.sent,i=u.accessToken,n.next=34,N.L.authentication.setAccessToken(i);case 34:return n.next=36,N.L.reAuthenticate();case 36:c=n.sent,n.next=40;break;case 39:throw n.t0;case 40:c?(l=(0,V.l)(c),r(E(l)),$(r,l.identityProvider.userId)):console.log("****************"),n.next=47;break;case 43:n.prev=43,n.t1=n.catch(0),console.error(n.t1),r(x());case 47:case"end":return n.stop()}}),n,null,[[0,43],[15,21]])})));return function(e){return n.apply(this,arguments)}}()}function $(e,t){N.L.service("user").get(t).then((function(e){return null==e.user_setting?N.L.service("user-settings").find({query:{userId:t}}).then((function(n){return 0===n.total?N.L.service("user-settings").create({userId:t}).then((function(t){return e.user_setting=t,Promise.resolve(e)})):(e.user_setting=n.data[0],Promise.resolve(e))})):Promise.resolve(e)})).then((function(t){var n=(0,z.H)(t);e(function(e){return{type:w.tN,user:e}}(n))})).catch((function(t){console.log(t),(0,L.UY)(e,"Failed to load user data")}))}function K(e){return function(t){(0,B.o)(e.email)?(t(C(!0)),N.L.authenticate({strategy:"local",email:e.email,password:e.password}).then((function(e){var n=(0,V.l)(e);if(!n.identityProvider.isVerified)return N.L.logout(),t(T(n.identityProvider)),void(window.location.href="/auth/confirm");t(E(n)),$(t,n.identityProvider.userId),window.location.href="/"})).catch((function(e){console.log(e),t(k("Failed to login")),(0,L.UY)(t,e.message)})).finally((function(){return t(C(!1))}))):(0,L.UY)(t,"Please input valid email address")}}function ee(e){return function(t,n){t(C(!0));var r=n().get("auth").get("authUser").accessToken,o=window.location.pathname,i=G.parse(window.location.search.slice(1)),s={path:o};i.instanceId&&i.instanceId.length>0&&(s.instanceId=i.instanceId);var a="".concat(Y,"/oauth/").concat(e,"?feathers_token=").concat(r,"&redirect=").concat(JSON.stringify(s));window.location.href=a}}function te(e,t,n){return function(){var r=(0,a.Z)(s().mark((function r(o){var i,a;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o(C(!0)),r.next=4,N.L.authenticate({strategy:"jwt",accessToken:e});case 4:i=r.sent,a=(0,V.l)(i),o(E(a)),$(o,a.identityProvider.userId),o(C(!1)),window.location.href=t,r.next=19;break;case 12:r.prev=12,r.t0=r.catch(0),console.log(r.t0),o(k("Failed to login")),(0,L.UY)(o,r.t0.message),window.location.href="".concat(n,"?error=").concat(r.t0.message),o(C(!1));case 19:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()}function ne(){return function(e){e(C(!0)),N.L.logout().then((function(){return e(x())})).catch((function(){return e(x())})).finally((function(){e(C(!1)),Q(!0,!0)(e)}))}}function re(e){return console.log("1 registerUserByEmail"),function(t){console.log("2 dispatch",t),t(C(!0)),N.L.service("identity-provider").create({token:e.email,password:e.password,type:"password"}).then((function(e){console.log("3 ",e),t(T(e)),window.location.href="/auth/confirm"})).catch((function(e){var n;console.log("error",e),t((n=e.message,{type:w.Lp,message:n})),(0,L.UY)(t,e.message)})).finally((function(){console.log("4 finally",t),t(C(!1))}))}}function oe(e){return function(t){t(C(!0)),N.L.service("authManagement").create({action:"verifySignupLong",value:e}).then((function(e){t(S(!0)),te(e.accessToken,"/","/")(t)})).catch((function(e){console.log(e),t(S(!1)),(0,L.UY)(t,e.message)})).finally((function(){return t(C(!1))}))}}function ie(e){return function(t){t(C(!0)),N.L.service("authManagement").create({action:"resendVerifySignup",value:{token:e,type:"password"}}).then((function(){return t(A(!0))})).catch((function(){return t(A(!1))})).finally((function(){return t(C(!1))}))}}function se(e){return function(t){t(C(!0)),console.log("forgotPassword",e),N.L.service("authManagement").create({action:"sendResetPwd",value:{token:e,type:"password"}}).then((function(){return t(_(!0))})).catch((function(){return t(_(!1))})).finally((function(){return t(C(!1))}))}}function ae(e,t){return function(n){n(C(!0)),N.L.service("authManagement").create({action:"resetPwdLong",value:{token:e,password:t}}).then((function(e){console.log(e),n(R(!0)),window.location.href="/"})).catch((function(e){console.log(e),n(R(!1)),window.location.href="/"})).finally((function(){return n(C(!1))}))}}function ce(e,t){return function(n){var r,i;n(C(!0));var s="email",a="email",c=null===(r=J&&J.enableEmailMagicLink)||void 0===r||r,u=null!==(i=J&&J.enableSmsMagicLink)&&void 0!==i&&i;if("email"===t)s="email",a="email";else if("sms"===t)s="sms",a="mobile";else{var l=e.replace(/-/g,"");if((0,B.Y)(l)){if(!u)return void(0,L.UY)(n,"Please input valid email address");s="sms",a="mobile",e="+1"+l}else{if(!(0,B.o)(e))return void(0,L.UY)(n,"Please input valid email or phone number");if(!c)return void(0,L.UY)(n,"Please input valid phone number");s="email"}}N.L.service("magic-link").create((0,o.Z)({type:s},a,e)).then((function(e){console.log(e),n(P(!0)),(0,L.kc)(n,"Login Magic Link was sent. Please check your Email or SMS.")})).catch((function(e){console.log(e),n(P(!1)),(0,L.UY)(n,e.message)})).finally((function(){return n(C(!1))}))}}function ue(e,t){return function(n){n(C(!0)),N.L.service("identity-provider").create({token:e.email,password:e.password,type:"password",userId:t}).then((function(e){$(n,e.userId)})).catch((function(e){console.log(e),(0,L.UY)(n,e.message)})).finally((function(){return n(C(!1))}))}}function le(e,t){return function(n){n(C(!0)),N.L.service("magic-link").create({email:e,type:"email",userId:t}).then((function(e){var t=e;null!=t.userId&&$(n,t.userId)})).catch((function(e){console.log(e),(0,L.UY)(n,e.message)})).finally((function(){return n(C(!1))}))}}function pe(e,t){return function(n){n(C(!0)),N.L.service("magic-link").create({mobile:e,type:"sms",userId:t}).then((function(e){var t=e;null!=t.userId&&$(n,t.userId)})).catch((function(e){console.log(e),(0,L.UY)(n,e.message)})).finally((function(){return n(C(!1))}))}}function fe(e){}var de=function(e,t){return function(){var n=(0,a.Z)(s().mark((function n(r){var o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.L.service("user-settings").patch(e,t);case 2:o=n.sent,r(D(o));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function he(e){return function(){var t=(0,a.Z)(s().mark((function t(n,r){var o,i,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().get("auth").get("authUser").accessToken,i=r().get("auth").get("user"),t.next=4,q().post("".concat(M.JW,"/upload"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+o}});case 4:return a=t.sent,t.next=7,N.L.service("user").patch(i.id,{name:i.name});case 7:c=a.data,(0,L.kc)(n,"Avatar updated"),n(O(c));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function me(e,t){return function(n){N.L.service("user").patch(e,{name:t}).then((function(e){(0,L.kc)(n,"Username updated"),n(function(e){var t=e.name;return{type:w.tr,name:t}}(e))}))}}function ye(e,t){return function(n){N.L.service("user").patch(e,{avatarId:t}).then((function(e){n(function(e){var t=e.avatarId;return{type:w.Nf,avatarId:t}}(e))}))}}function ve(e){return function(){var t=(0,a.Z)(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.L.service("user").remove(e);case 2:return t.next=4,N.L.service("identity-provider").remove(null,{where:{userId:e}});case 4:ne()(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}N.L.service("user").on("patched",function(){var e=(0,a.Z)(s().mark((function e(t){var n,r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("User patched"),n=W.Z.getState().get("auth").get("user"),r=(0,z.H)(t.userRelationship),console.log(r),n.id===r.id?(n.instanceId!==r.instanceId&&W.Z.dispatch((0,F.jJ)()),n.channelInstanceId!==r.channelInstanceId&&W.Z.dispatch((0,F.co)()),W.Z.dispatch(I(r)),r.partyId,r.instanceId!==n.instanceId&&(o=new URL(window.location.href),(i=o.searchParams).set("instanceId",r.instanceId),o.search=i.toString(),history.pushState&&window.history.replaceState({},"",o.toString()))):(null!=r.channelInstanceId&&r.channelInstanceId===n.channelInstanceId&&W.Z.dispatch((0,F.dn)(r)),null!=r.instanceId&&r.instanceId===n.instanceId&&(W.Z.dispatch((0,F.gY)(r)),W.Z.dispatch((0,F.UR)(r,{userAdded:!0}))),r.instanceId!==n.instanceId&&(W.Z.dispatch((0,F.F1)(r)),W.Z.dispatch((0,F.UR)(r,{userRemoved:!0}))),r.channelInstanceId!==n.channelInstanceId&&W.Z.dispatch((0,F.l9)(r)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N.L.service("location-ban").on("created",function(){var e=(0,a.Z)(s().mark((function e(t){var n,r,o,i,a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W.Z.getState(),r=n.get("auth").get("user"),o=n.get("party"),i=o&&o.partyUsers?o.partyUsers.find((function(e){return e.userId===r.id})):{},a=n.get("locations").get("currentLocation").get("location"),c=t.locationBan,r.id!==c.userId||a.id!==c.locationId){e.next=18;break}if((0,H.rj)({leftParty:!0}),(0,H.Zu)(!0),null==i.id){e.next=12;break}return e.next=12,N.L.service("party-user").remove(i.id);case 12:return e.t0=z.H,e.next=15,N.L.service("user").get(r.id);case 15:e.t1=e.sent,u=(0,e.t0)(e.t1),W.Z.dispatch(I(u));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},92384:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var r=n(98592),o=n.n(r),i=n(50931),s=n(31274),a=n.n(s),c=(0,i.default)().publicRuntimeConfig,u=c.apiServer,l=c.featherStoreKey,p=o()(u),f=a()();f.configure(a().socketio(p,{timeout:1e4})),f.configure(a().authentication({storageKey:l}))},69327:function(e,t,n){"use strict";function r(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)}function o(e){return/^[0-9]{10}$/.test(e)}n.d(t,{o:function(){return r},Y:function(){return o}})},94849:function(e,t,n){"use strict";n.d(t,{pn:function(){return m},cR:function(){return p},hs:function(){return d},q9:function(){return u}});var r=n(83052),o=n(62575);function i(e){return console.log("setCamVideoState",e),{type:o.IB,isEnable:e}}var s=function(e){return{type:o.fT,isEnable:e}},a=function(e){return{type:o.On,consumers:e}},c=n(86887),u=function(){var e=r.p.instance;e||l(!1),console.log("Dispatch new camVideoState:",null!=e.camVideoProducer,!e.videoPaused),c.Z.dispatch(i(null!=e.camVideoProducer&&!e.videoPaused))},l=function(e){return function(t){t(i(e))}},p=function(){var e=r.p.instance;e||f([]),c.Z.dispatch(a(e.consumers))},f=function(e){return function(t){t(a(e))}},d=function(){var e=r.p.instance;e||h(!1),c.Z.dispatch(s(null!=e.camAudioProducer&&!e.audioPaused))},h=function(e){return function(t){t(s(e))}},m=function(e){return function(t){t(function(e){return{type:o.up,isEnable:e}}(e))}}},45716:function(e,t,n){"use strict";n.d(t,{JW:function(){return r}});n(60510);var r=(0,n(66912).default)().publicRuntimeConfig.apiServer},22667:function(e,t,n){"use strict";n.d(t,{cq:function(){return o},ck:function(){return i},S5:function(){return s},jJ:function(){return a},gY:function(){return c},F1:function(){return u},fD:function(){return l},co:function(){return p},dn:function(){return f},l9:function(){return d},UR:function(){return h}});var r=n(62575);function o(e){return{type:r.a7,user:e}}function i(e){return{type:r.Mv,users:e}}function s(e){return{type:r.zX,users:e}}function a(){return{type:r.HB}}function c(e){return{type:r.$K,user:e}}function u(e){return{type:r.V2,user:e}}function l(e){return{type:r.n3,users:e}}function p(){return{type:r.Ok}}function f(e){return{type:r.w$,user:e}}function d(e){return{type:r.qW,user:e}}function h(e,t){return{type:r.$L,message:{user:e,args:t}}}}}]);