(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3236],{33236:function(t,n,r){"use strict";r.d(n,{uL:function(){return kt},Xy:function(){return _t}});var e=r(36595),i=r(15194),o=r(49182),a=r(39337),u=function t(){(0,o.Z)(this,t)};function s(t,n){return n.min.x=t[0],n.min.y=t[1],n.min.z=t[2],n.max.x=t[3],n.max.y=t[4],n.max.z=t[5],n}function c(t){for(var n=-1,r=-1/0,e=0;e<3;e++){var i=t[e+3]-t[e];i>r&&(r=i,n=e)}return n}function f(t,n){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(!t)return;if("string"===typeof t)return l(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,n)}(t))||n&&t&&"number"===typeof t.length){r&&(t=r);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var v=["x","y","z"],d=new e.ZzF;function h(t,n,r,e){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=1/0,a=1/0,u=1/0,s=-1/0,c=-1/0,f=-1/0,l=1/0,v=1/0,d=1/0,h=-1/0,p=-1/0,y=-1/0,g=null!==i,m=6*n,x=6*(n+r);m<x;m+=6){var w=t[m+0],b=t[m+1],P=w-b,T=w+b;P<o&&(o=P),T>s&&(s=T),g&&w<l&&(l=w),g&&w>h&&(h=w);var A=t[m+2],B=t[m+3],F=A-B,z=A+B;F<a&&(a=F),z>c&&(c=z),g&&A<v&&(v=A),g&&A>p&&(p=A);var M=t[m+4],Z=t[m+5],S=M-Z,D=M+Z;S<u&&(u=S),D>f&&(f=D),g&&M<d&&(d=M),g&&M>y&&(y=M)}e[0]=o,e[1]=a,e[2]=u,e[3]=s,e[4]=c,e[5]=f,g&&(i[0]=l,i[1]=v,i[2]=d,i[3]=h,i[4]=p,i[5]=y)}function p(t,n,r,e){for(var i=1/0,o=1/0,a=1/0,u=-1/0,s=-1/0,c=-1/0,f=6*n,l=6*(n+r);f<l;f+=6){var v=t[f+0];v<i&&(i=v),v>u&&(u=v);var d=t[f+2];d<o&&(o=d),d>s&&(s=d);var h=t[f+4];h<a&&(a=h),h>c&&(c=h)}e[0]=i,e[1]=o,e[2]=a,e[3]=u,e[4]=s,e[5]=c}function y(t,n,r,e,i,o){for(var a=e,u=e+i-1,s=o.pos,c=2*o.axis;;){for(;a<=u&&n[6*a+c]<s;)a++;for(;a<=u&&n[6*u+c]>=s;)u--;if(!(a<u))return a;for(var f=0;f<3;f++){var l=t[3*a+f];t[3*a+f]=t[3*u+f],t[3*u+f]=l;var v=n[6*a+2*f+0];n[6*a+2*f+0]=n[6*u+2*f+0],n[6*u+2*f+0]=v;var d=n[6*a+2*f+1];n[6*a+2*f+1]=n[6*u+2*f+1],n[6*u+2*f+1]=d}if(r)for(var h=0;h<3;h++){var p=r[h][a];r[h][a]=r[h][u],r[h][u]=p}a++,u--}}function g(t,n,r,e,i,o,a){var u=-1,f=0;if(0===a)-1!==(u=c(n))&&(f=(n[u]+n[u+3])/2);else if(1===a)-1!==(u=c(t))&&(f=function(t,n,r,e){for(var i=0,o=n,a=n+r;o<a;o++)i+=t[6*o+2*e];return i/r}(r,i,o,u));else if(2===a){for(var l=s(t,d),h=[l.max.x-l.min.x,l.max.y-l.min.y,l.max.z-l.min.z],p=2*(h[0]*h[1]+h[0]*h[2]+h[1]*h[2]),y=[[],[],[]],g=i,m=i+o;g<m;g++)for(var x=0;x<3;x++)y[x].push(e[x][g]);y.forEach((function(t){return t.sort((function(t,n){return t.p-n.p}))}));var w=function(t,n,r,e,i){return 3+1*(n/t*r+e/t*i)};u=-1;for(var b=1*o,P=0;P<3;P++)for(var T=(P+1)%3,A=(P+2)%3,B=l.min[v[P]],F=l.max[v[P]],z=y[P],M=0,Z=o,S=0;S<z.length;S++){var D=z[S];M++,Z--;var k=D.p-B,_=F-D.p,G=h[T],I=h[T],V=h[A],R=h[A],j=w(p,2*(G*V+G*k+V*k),M,2*(I*R+I*_+R*_),Z);j<b&&(u=P,f=D.p,b=j)}}return{axis:u,pos:f}}function m(t,n){function r(n,e,s){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!w&&b>=l&&(w=!0,v&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(this,t))),s<=d||b>=l)return n.offset=e,n.count=s,n;var P=g(n.boundingData,f,o,a,e,s,m);if(-1===P.axis)return n.offset=e,n.count=s,n;var T=y(c,o,a,e,s,P);if(T===e||T===e+s)n.offset=e,n.count=s;else{n.splitAxis=P.axis;var A=new u,B=e,F=T-e;n.left=A,A.boundingData=new Float32Array(6),x?(h(o,B,F,A.boundingData),A.continueGeneration=function(){delete this.continueGeneration,p(o,B,F,i),r(A,B,F,i,b+1)}):(h(o,B,F,A.boundingData,i),r(A,B,F,i,b+1));var z=new u,M=T,Z=s-F;n.right=z,z.boundingData=new Float32Array(6),x?(h(o,M,Z,z.boundingData),z.continueGeneration=function(){delete this.continueGeneration,p(o,M,Z,i),r(z,M,Z,i,b+1)}):(h(o,M,Z,z.boundingData,i),r(z,M,Z,i,b+1))}return n}!function(t){if(!t.index){var n=t.attributes.position.count,r=new(n>65535?Uint32Array:Uint16Array)(n);t.setIndex(new e.TlE(r,1));for(var i=0;i<n;i++)r[i]=i}}(t);var i=new Float32Array(6),o=function(t){for(var n=t.attributes.position.array,r=t.index.array,e=r.length/3,i=new Float32Array(6*e),o=0;o<e;o++)for(var a=3*o,u=6*o,s=3*r[a+0],c=3*r[a+1],f=3*r[a+2],l=0;l<3;l++){var v=n[s+l],d=n[c+l],h=n[f+l],p=v;d<p&&(p=d),h<p&&(p=h);var y=v;d>y&&(y=d),h>y&&(y=h);var g=(y-p)/2,m=2*l;i[u+m+0]=p+g,i[u+m+1]=g}return i}(t),a=2===n.strategy?function(t){for(var n=t.length/6,r=[new Array(n),new Array(n),new Array(n)],e=0;e<n;e++)for(var i=0;i<3;i++)r[i][e]={p:t[6*e+2*i],tri:e};return r}(o):null,c=t.index.array,l=n.maxDepth,v=n.verbose,d=n.maxLeafTris,m=n.strategy,x=n.lazyGeneration,w=!1,b=[],P=function(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];var n,r=[],e=new Set,i=f(t.groups);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.add(o.start),e.add(o.start+o.count)}}catch(l){i.e(l)}finally{i.f()}for(var a=Array.from(e.values()).sort((function(t,n){return t-n})),u=0;u<a.length-1;u++){var s=a[u],c=a[u+1];r.push({offset:s/3,count:(c-s)/3})}return r}(t);if(1===P.length){var T=new u,A=P[0];null!=t.boundingBox?(T.boundingData=function(t){var n=new Float32Array(6);return n[0]=t.min.x,n[1]=t.min.y,n[2]=t.min.z,n[3]=t.max.x,n[4]=t.max.y,n[5]=t.max.z,n}(t.boundingBox),p(o,A.offset,A.count,i)):(T.boundingData=new Float32Array(6),h(o,A.offset,A.count,T.boundingData,i)),r(T,A.offset,A.count,i),b.push(T)}else{var B,F=f(P);try{for(F.s();!(B=F.n()).done;){var z=B.value,M=new u;M.boundingData=new Float32Array(6),h(o,z.offset,z.count,M.boundingData,i),r(M,z.offset,z.count,i),b.push(M)}}catch(_){F.e(_)}finally{F.f()}}if(null==t.boundingBox){var Z=new e.ZzF;t.boundingBox=new e.ZzF;var S,D=f(b);try{for(D.s();!(S=D.n()).done;){var k=S.value;t.boundingBox.union(s(k.boundingData,Z))}}catch(_){D.e(_)}finally{D.f()}}return b}var x=r(42828),w=r(13987),b=r(29569),P=r(89306),T=function(){function t(){(0,o.Z)(this,t),this.min=1/0,this.max=-1/0}return(0,a.Z)(t,[{key:"setFromPointsField",value:function(t,n){for(var r=1/0,e=-1/0,i=0,o=t.length;i<o;i++){var a=t[i][n];r=Math.min(a,r),e=Math.max(a,e)}this.min=r,this.max=e}},{key:"setFromPoints",value:function(t,n){for(var r=1/0,e=-1/0,i=0,o=n.length;i<o;i++){var a=n[i],u=t.dot(a);r=Math.min(u,r),e=Math.max(u,e)}this.min=r,this.max=e}},{key:"isSeparated",value:function(t){return this.min>t.max||t.min>this.max}}]),t}();T.prototype.setFromBox=function(){var t=new e.Pa4;return function(n,r){for(var e=r.min,i=r.max,o=1/0,a=-1/0,u=0;u<=1;u++)for(var s=0;s<=1;s++)for(var c=0;c<=1;c++){t.x=e.x*u+i.x*(1-u),t.y=e.y*s+i.y*(1-s),t.z=e.z*c+i.z*(1-c);var f=n.dot(t);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();!function(){var t=new T}();var A=function(){var t=new e.Pa4,n=new e.Pa4,r=new e.Pa4;return function(e,i,o){var a=e.start,u=t,s=i.start,c=n;r.subVectors(a,s),t.subVectors(e.end,i.start),n.subVectors(i.end,i.start);var f,l,v=r.dot(c),d=c.dot(u),h=c.dot(c),p=r.dot(u),y=u.dot(u)*h-d*d;l=(v+(f=0!==y?(v*d-p*h)/y:0)*d)/h,o.x=f,o.y=l}}(),B=function(){var t=new e.FM8,n=new e.Pa4,r=new e.Pa4;return function(e,i,o,a){A(e,i,t);var u,s,c=t.x,f=t.y;if(c>=0&&c<=1&&f>=0&&f<=1)return e.at(c,o),void i.at(f,a);if(c>=0&&c<=1)return f<0?i.at(0,a):i.at(1,a),void e.closestPointToPoint(a,!0,o);if(f>=0&&f<=1)return c<0?e.at(0,o):e.at(1,o),void i.closestPointToPoint(o,!0,a);u=c<0?e.start:e.end,s=f<0?i.start:i.end;var l=n,v=r;return e.closestPointToPoint(s,!0,n),i.closestPointToPoint(u,!0,r),l.distanceToSquared(s)<=v.distanceToSquared(u)?(o.copy(l),void a.copy(s)):(o.copy(u),void a.copy(v))}}(),F=function(){var t=new e.Pa4,n=new e.Pa4,r=new e.JOQ,i=new e.Zzh;return function(e,o){var a=e.radius,u=e.center,s=o.a,c=o.b,f=o.c;if(i.start=s,i.end=c,i.closestPointToPoint(u,!0,t).distanceTo(u)<=a)return!0;if(i.start=s,i.end=f,i.closestPointToPoint(u,!0,t).distanceTo(u)<=a)return!0;if(i.start=c,i.end=f,i.closestPointToPoint(u,!0,t).distanceTo(u)<=a)return!0;var l=o.getPlane(r);if(Math.abs(l.distanceToPoint(u))<=a){var v=l.projectPoint(u,n);if(o.containsPoint(v))return!0}return!1}}();function z(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,e=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return(0,b.Z)(this,r)}}var M=function(t){(0,w.Z)(r,t);var n=z(r);function r(){var t;(0,o.Z)(this,r);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(t=n.call.apply(n,[this].concat(a))).isSeparatingAxisTriangle=!0,t.satAxes=new Array(4).fill().map((function(){return new e.Pa4})),t.satBounds=new Array(4).fill().map((function(){return new T})),t.points=[t.a,t.b,t.c],t.sphere=new e.aLr,t}return r}(e.CJI);function Z(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,e=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return(0,b.Z)(this,r)}}M.prototype.update=function(){var t=new Array(3);return function(){var n=this.a,r=this.b,e=this.c;t[0]=this.a,t[1]=this.b,t[2]=this.c;var i=this.satAxes,o=this.satBounds,a=i[0],u=o[0];this.getNormal(a),u.setFromPoints(a,t);var s=i[1],c=o[1];s.subVectors(n,r),c.setFromPoints(s,t);var f=i[2],l=o[2];f.subVectors(r,e),l.setFromPoints(f,t);var v=i[3],d=o[3];v.subVectors(e,n),d.setFromPoints(v,t),this.sphere.setFromPoints(this.points)}}(),M.prototype.intersectsTriangle=function(){var t=new M,n=new Array(3),r=new Array(3),i=new T,o=new T,a=new e.Pa4;return function(e){e.isSeparatingAxisTriangle||(t.copy(e),t.update(),e=t);var u=this.satBounds,s=this.satAxes;r[0]=e.a,r[1]=e.b,r[2]=e.c;for(var c=0;c<4;c++){var f=u[c],l=s[c];if(i.setFromPoints(l,r),f.isSeparated(i))return!1}var v=e.satBounds,d=e.satAxes;n[0]=this.a,n[1]=this.b,n[2]=this.c;for(var h=0;h<4;h++){var p=v[h],y=d[h];if(i.setFromPoints(y,n),p.isSeparated(i))return!1}for(var g=0;g<4;g++)for(var m=s[g],x=0;x<4;x++){var w=d[x];if(a.crossVectors(m,w),i.setFromPoints(a,n),o.setFromPoints(a,r),i.isSeparated(o))return!1}return!0}}(),M.prototype.distanceToPoint=function(){var t=new e.Pa4;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}(),M.prototype.distanceToTriangle=function(){var t=new e.Pa4,n=new e.Pa4,r=["a","b","c"],i=new e.Zzh,o=new e.Zzh;return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.intersectsTriangle(e))return(a||u)&&(this.getMidpoint(t),e.closestPointToPoint(t,n),this.closestPointToPoint(n,t),a&&a.copy(t),u&&u.copy(n)),0;for(var s=1/0,c=0;c<3;c++){var f=void 0,l=r[c],v=e[l];this.closestPointToPoint(v,t),(f=v.distanceToSquared(t))<s&&(s=f,a&&a.copy(t),u&&u.copy(v));var d=this[l];e.closestPointToPoint(d,t),(f=d.distanceToSquared(t))<s&&(s=f,a&&a.copy(d),u&&u.copy(t))}for(var h=0;h<3;h++){var p=r[h],y=r[(h+1)%3];i.set(this[p],this[y]);for(var g=0;g<3;g++){var m=r[g],x=r[(g+1)%3];o.set(e[m],e[x]),B(i,o,t,n);var w=t.distanceToSquared(n);w<s&&(s=w,a&&a.copy(t),u&&u.copy(n))}}return Math.sqrt(s)}}();var S=function(t){(0,w.Z)(r,t);var n=Z(r);function r(){var t;(0,o.Z)(this,r);for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];return(t=n.call.apply(n,[this].concat(a))).isOrientedBox=!0,t.matrix=new e.yGw,t.invMatrix=new e.yGw,t.points=new Array(8).fill().map((function(){return new e.Pa4})),t.satAxes=new Array(3).fill().map((function(){return new e.Pa4})),t.satBounds=new Array(3).fill().map((function(){return new T})),t.alignedSatBounds=new Array(3).fill().map((function(){return new T})),t.sphere=new e.aLr,t}return(0,a.Z)(r,[{key:"set",value:function(t,n,e){(0,x.Z)((0,P.Z)(r.prototype),"set",this).call(this,t,n),this.matrix=e}},{key:"copy",value:function(t){(0,x.Z)((0,P.Z)(r.prototype),"copy",this).call(this,t),this.matrix.copy(t.matrix)}}]),r}(e.ZzF);function D(t,n,r,e){var i=t.a,o=t.b,a=t.c,u=r.getX(n);i.x=e.getX(u),i.y=e.getY(u),i.z=e.getZ(u),u=r.getX(n+1),o.x=e.getX(u),o.y=e.getY(u),o.z=e.getZ(u),u=r.getX(n+2),a.x=e.getX(u),a.y=e.getY(u),a.z=e.getZ(u)}S.prototype.update=function(){for(var t=this.matrix,n=this.min,r=this.max,e=this.points,i=0;i<=1;i++)for(var o=0;o<=1;o++)for(var a=0;a<=1;a++){var u=e[1*i|2*o|4*a];u.x=i?r.x:n.x,u.y=o?r.y:n.y,u.z=a?r.z:n.z,u.applyMatrix4(t)}this.sphere.setFromPoints(this.points);for(var s=this.satBounds,c=this.satAxes,f=e[0],l=0;l<3;l++){var v=c[l],d=s[l],h=e[1<<l];v.subVectors(f,h),d.setFromPoints(v,e)}var p=this.alignedSatBounds;p[0].setFromPointsField(e,"x"),p[1].setFromPointsField(e,"y"),p[2].setFromPointsField(e,"z"),this.invMatrix.getInverse(this.matrix)},S.prototype.intersectsBox=function(){var t=new T;return function(n){if(!n.intersectsSphere(this.sphere))return!1;var r=n.min,e=n.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=r.x,t.max=e.x,a[0].isSeparated(t))return!1;if(t.min=r.y,t.max=e.y,a[1].isSeparated(t))return!1;if(t.min=r.z,t.max=e.z,a[2].isSeparated(t))return!1;for(var u=0;u<3;u++){var s=o[u],c=i[u];if(t.setFromBox(s,n),c.isSeparated(t))return!1}return!0}}(),S.prototype.intersectsTriangle=function(){var t=new M,n=new Array(3),r=new T,i=new T,o=new e.Pa4;return function(e){e.isSeparatingAxisTriangle||(t.copy(e),t.update(),e=t);var a=this.satBounds,u=this.satAxes;n[0]=e.a,n[1]=e.b,n[2]=e.c;for(var s=0;s<3;s++){var c=a[s],f=u[s];if(r.setFromPoints(f,n),c.isSeparated(r))return!1}for(var l=e.satBounds,v=e.satAxes,d=this.points,h=0;h<3;h++){var p=l[h],y=v[h];if(r.setFromPoints(y,d),p.isSeparated(r))return!1}for(var g=0;g<3;g++)for(var m=u[g],x=0;x<4;x++){var w=v[x];if(o.crossVectors(m,w),r.setFromPoints(o,n),i.setFromPoints(o,d),r.isSeparated(i))return!1}return!0}}(),S.prototype.closestPointToPoint=function(t,n){return n.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n},S.prototype.distanceToPoint=function(){var t=new e.Pa4;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}(),S.prototype.distanceToBox=function(){var t=["x","y","z"],n=new Array(12).fill().map((function(){return new e.Zzh})),r=new Array(12).fill().map((function(){return new e.Zzh})),i=new e.Pa4,o=new e.Pa4;return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.intersectsBox(e))return(u||s)&&(e.getCenter(o),this.closestPointToPoint(o,i),e.closestPointToPoint(i,o),u&&u.copy(i),s&&s.copy(o)),0;for(var c=a*a,f=e.min,l=e.max,v=this.points,d=1/0,h=0;h<8;h++){var p=v[h];o.copy(p).clamp(f,l);var y=p.distanceToSquared(o);if(y<d&&(d=y,u&&u.copy(p),s&&s.copy(o),y<c))return Math.sqrt(y)}for(var g=0,m=0;m<3;m++)for(var x=0;x<=1;x++)for(var w=0;w<=1;w++){var b=(m+1)%3,P=(m+2)%3,T=x<<b|w<<P,A=1<<m|x<<b|w<<P,F=v[T],z=v[A],M=n[g];M.set(F,z);var Z=t[m],S=t[b],D=t[P],k=r[g],_=k.start,G=k.end;_[Z]=f[Z],_[S]=x?f[S]:l[S],_[D]=w?f[D]:l[S],G[Z]=l[Z],G[S]=x?f[S]:l[S],G[D]=w?f[D]:l[S],g++}for(var I=0;I<=1;I++)for(var V=0;V<=1;V++)for(var R=0;R<=1;R++){o.x=I?l.x:f.x,o.y=V?l.y:f.y,o.z=R?l.z:f.z,this.closestPointToPoint(o,i);var j=o.distanceToSquared(i);if(j<d&&(d=j,u&&u.copy(i),s&&s.copy(o),j<c))return Math.sqrt(j)}for(var q=0;q<12;q++)for(var E=n[q],O=0;O<12;O++){var U=r[O];B(E,U,i,o);var C=i.distanceToSquared(o);if(C<d&&(d=C,u&&u.copy(i),s&&s.copy(o),C<c))return Math.sqrt(C)}return Math.sqrt(d)}}();var k=new e.Pa4,_=new e.Pa4,G=new e.Pa4,I=new e.FM8,V=new e.FM8,R=new e.FM8,j=new e.Pa4,q=new e.Pa4;function E(t,n,r,i,o,a,u,s){k.fromBufferAttribute(i,a),_.fromBufferAttribute(i,u),G.fromBufferAttribute(i,s);var c=function(t,n,r,i,o,a,u,s){if(null===(n.side===e._Li?i.intersectTriangle(u,a,o,!0,s):i.intersectTriangle(o,a,u,n.side!==e.ehD,s)))return null;q.copy(s),q.applyMatrix4(t.matrixWorld);var c=r.ray.origin.distanceTo(q);return c<r.near||c>r.far?null:{distance:c,point:q.clone(),object:t}}(t,t.material,n,r,k,_,G,j);if(c){o&&(I.fromBufferAttribute(o,a),V.fromBufferAttribute(o,u),R.fromBufferAttribute(o,s),c.uv=e.CJI.getUV(j,k,_,G,I,V,R,new e.FM8));var f=new e.Pa4;c.face=new e.G_f(a,u,s,e.CJI.getNormal(k,_,G,f)),c.faceIndex=a}return c}function O(t,n,r,e,i,o){var a=3*i,u=n.index.getX(a),s=n.index.getX(a+1),c=n.index.getX(a+2),f=E(t,r,e,n.attributes.position,n.attributes.uv,u,s,c);return f?(f.faceIndex=i,o&&o.push(f),f):null}function U(t,n,r,e,i,o,a){for(var u=i,s=i+o;u<s;u++)O(t,n,r,e,u,a)}function C(t,n,r,e,i,o){for(var a=1/0,u=null,s=i,c=i+o;s<c;s++){var f=O(t,n,r,e,s);f&&f.distance<a&&(u=f,a=f.distance)}return u}var N=new e.ZzF,X=new e.Pa4,L=["x","y","z"];function H(t,n,r){return s(t.boundingData,N),n.intersectBox(N,r)}function J(t,n,r,e,i){t.continueGeneration&&t.continueGeneration(),!!t.count?U(n,n.geometry,r,e,t.offset,t.count,i):(H(t.left,e,X)&&J(t.left,n,r,e,i),H(t.right,e,X)&&J(t.right,n,r,e,i))}function K(t,n,r,e){if(t.continueGeneration&&t.continueGeneration(),!!t.count)return C(n,n.geometry,r,e,t.offset,t.count);var i,o,a=t.splitAxis,u=L[a];e.direction[u]>=0?(i=t.left,o=t.right):(i=t.right,o=t.left);var s=H(i,e,X)?K(i,n,r,e):null;if(s){var c=e.origin[u],f=c-s.point[u],l=c-o.boundingData[a],v=c-o.boundingData[a+3],d=f*f;if(d<=l*l&&d<=v*v)return s}var h=H(o,e,X)?K(o,n,r,e):null;return s&&h?s.distance<=h.distance?s:h:s||h||null}var Y=function(){var t=new M,n=new e.ZzF,r=new e.ZzF;return function e(i,o,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;i.continueGeneration&&i.continueGeneration();var f=!!i.count;if(f&&u){for(var l=o.geometry,v=l.index,d=l.attributes.position,h=i.offset,p=i.count,y=3*h,g=3*(p+h);y<g;y+=3)if(D(t,y,v,d),t.update(),u(t,y,y+1,y+2))return!0;return!1}var m,x,w,b,P=i.left,T=i.right,A=P,B=T;if(c&&(w=n,b=r,s(A.boundingData,w),s(B.boundingData,b),m=c(w),(x=c(b))<m)){A=T,B=P;var F=m;m=x,x=F;var z=w;w=b,b=z}w||(w=n,s(A.boundingData,w));var M=!!A.count,Z=a(w,M,m)&&e(A,o,a,u,c);if(Z)return!0;b||(b=r,s(B.boundingData,b));var S=!!B.count,k=a(b,S,x)&&e(B,o,a,u,c);return!!k}}(),Q=function(){var t=new M,n=new M,r=new e.Kj0,i=new e.yGw,o=new S,a=new S;return function e(u,c,f,l){var v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;u.continueGeneration&&u.continueGeneration(),null===v&&(f.boundingBox||f.computeBoundingBox(),o.set(f.boundingBox.min,f.boundingBox.max,l),o.update(),v=o);var d=!!u.count;if(!d){var h=u.left,p=u.right;s(h.boundingData,N);var y=v.intersectsBox(N)&&e(h,c,f,l,v);if(y)return!0;s(p.boundingData,N);var g=v.intersectsBox(N)&&e(p,c,f,l,v);return!!g}var m=c.geometry,x=m.index,w=m.attributes.position,b=f.index,P=f.attributes.position,T=u.offset,A=u.count;if(i.getInverse(l),f.boundsTree){s(u.boundingData,a),a.matrix.copy(i),a.update(),r.geometry=f;var B=f.boundsTree.shapecast(r,(function(t){return a.intersectsBox(t)}),(function(t){t.a.applyMatrix4(l),t.b.applyMatrix4(l),t.c.applyMatrix4(l),t.update();for(var r=3*T,e=3*(A+T);r<e;r+=3)if(D(n,r,x,w),n.update(),t.intersectsTriangle(n))return!0;return!1}));return r.geometry=null,B}for(var F=3*T,z=A+3*T;F<z;F+=3){D(t,F,x,w),t.a.applyMatrix4(i),t.b.applyMatrix4(i),t.c.applyMatrix4(i),t.update();for(var M=0,Z=b.count;M<Z;M+=3)if(D(n,M,b,P),n.update(),t.intersectsTriangle(n))return!0}}}(),W=new e.ZzF,$=new e.Pa4,tt=["x","y","z"];function nt(t,n,r,e,i){var o=2*t,a=ut,u=st,s=ct;65535===u[o+15]?U(n,n.geometry,r,e,s[t+6],u[o+14],i):(ot(t+8,a,e,$)&&nt(t+8,n,r,e,i),ot(s[t+6],a,e,$)&&nt(s[t+6],n,r,e,i))}function rt(t,n,r,e){var i=2*t,o=ut,a=st,u=ct;if(65535===a[i+15])return C(n,n.geometry,r,e,u[t+6],a[i+14]);var s,c,f=u[t+7],l=tt[f];e.direction[l]>=0?(s=t+8,c=u[t+6]):(s=u[t+6],c=t+8);var v=ot(s,o,e,$)?rt(s,n,r,e):null;if(v){var d=e.origin[l],h=d-v.point[l],p=d-o[c+f],y=d-o[c+f+3],g=h*h;if(g<=p*p&&g<=y*y)return v}var m=ot(c,o,e,$)?rt(c,n,r,e):null;return v&&m?v.distance<=m.distance?v:m:v||m||null}var et=function(){var t=new M,n=new e.ZzF,r=new e.ZzF;return function e(i,o,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=2*i,f=ut,l=st,v=ct,d=65535===l[c+15];if(d&&u){for(var h=o.geometry,p=h.index,y=h.attributes.position,g=v[i+6],m=l[c+14],x=3*g,w=3*(m+g);x<w;x+=3)if(D(t,x,p,y),t.update(),u(t,x,x+1,x+2))return!0;return!1}var b,P,T,A,B=i+8,F=v[i+6],z=B,M=F;if(s&&(A=r,dt(z,f,T=n),dt(M,f,A),b=s(T),(P=s(A))<b)){z=F,M=B;var Z=b;b=P,P=Z;var S=T;T=A,A=S}T||dt(z,f,T=n);var k=65535===l[z+15],_=a(T,k,b)&&e(z,o,a,u,s);if(_)return!0;A||dt(M,f,A=r);var G=65535===l[M+15],I=a(A,G,P)&&e(M,o,a,u,s);return!!I}}(),it=function(){var t=new M,n=new M,r=new e.Kj0,i=new e.yGw,o=new S,a=new S;return function e(u,s,c,f){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,v=2*u,d=ut,h=st,p=ct;null===l&&(c.boundingBox||c.computeBoundingBox(),o.set(c.boundingBox.min,c.boundingBox.max,f),o.update(),l=o);var y=65535===h[v+15];if(!y){var g=u+8,m=p[u+6];dt(g,d,W);var x=l.intersectsBox(W)&&e(g,s,c,f,l);if(x)return!0;dt(m,d,W);var w=l.intersectsBox(W)&&e(m,s,c,f,l);return!!w}var b=s.geometry,P=b.index,T=b.attributes.position,A=c.index,B=c.attributes.position,F=p[u+6],z=h[v+14];if(i.getInverse(f),c.boundsTree){dt(u,d,a),a.matrix.copy(i),a.update(),r.geometry=c;var M=c.boundsTree.shapecast(r,(function(t){return a.intersectsBox(t)}),(function(t){t.a.applyMatrix4(f),t.b.applyMatrix4(f),t.c.applyMatrix4(f),t.update();for(var r=3*F,e=3*(z+F);r<e;r+=3)if(D(n,r,P,T),n.update(),t.intersectsTriangle(n))return!0;return!1}));return r.geometry=null,M}for(var Z=3*F,S=z+3*F;Z<S;Z+=3){D(t,Z,P,T),t.a.applyMatrix4(i),t.b.applyMatrix4(i),t.c.applyMatrix4(i),t.update();for(var k=0,_=A.count;k<_;k+=3)if(D(n,k,A,B),n.update(),t.intersectsTriangle(n))return!0}}}();function ot(t,n,r,e){return dt(t,n,W),r.intersectBox(W,e)}var at,ut,st,ct,ft=[];function lt(t){at&&ft.push(at),at=t,ut=new Float32Array(t),st=new Uint16Array(t),ct=new Uint32Array(t)}function vt(){at=null,ut=null,st=null,ct=null,ft.length&&lt(ft.pop())}function dt(t,n,r){r.min.x=n[t],r.min.y=n[t+1],r.min.z=n[t+2],r.max.x=n[t+3],r.max.y=n[t+4],r.max.z=n[t+5]}function ht(t,n){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,n){if(!t)return;if("string"===typeof t)return pt(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,n)}(t))||n&&t&&"number"===typeof t.length){r&&(t=r);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function pt(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var yt=32,gt=Symbol("skip tree generation"),mt=new S,xt=new e.Pa4,wt=new M,bt=new e.Pa4,Pt=new e.Pa4,Tt=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.Z)(this,t),!n.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n.attributes.position.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the position attribute.");if(n.index&&n.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");(r=Object.assign((0,i.Z)({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,lazyGeneration:!0,packData:!0},gt,!1),r)).strategy=Math.max(0,Math.min(2,r.strategy)),this._isPacked=!1,this._roots=null,r[gt]||(this._roots=m(n,r),!r.lazyGeneration&&r.packData&&(this._roots=t.serialize(this,n,!1).roots,this._isPacked=!0))}return(0,a.Z)(t,null,[{key:"serialize",value:function(t,n){var r,e,i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];function a(t){t.continueGeneration&&t.continueGeneration(),t.count||(a(t.left),a(t.right))}function u(t){return t.count?1:1+u(t.left)+u(t.right)}function s(t,n){for(var o=t/4,a=t/2,u=!!n.count,c=n.boundingData,f=0;f<6;f++)r[o+f]=c[f];if(u){var l=n.offset,v=n.count;return e[o+6]=l,i[a+14]=v,i[a+15]=65535,t+yt}var d,h=n.left,p=n.right,y=n.splitAxis;return d=s(t+yt,h),e[o+6]=d/4,d=s(d,p),e[o+7]=y,d}var c,f=t._roots;if(t._isPacked)c=f;else{c=[];for(var l=0;l<f.length;l++){var v=f[l];a(v);var d=u(v),h=new ArrayBuffer(yt*d);r=new Float32Array(h),e=new Uint32Array(h),i=new Uint16Array(h),s(0,v),c.push(h)}}var p=n.getIndex(),y={roots:c,index:o?p.array.slice():p.array};return y}},{key:"deserialize",value:function(n,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n.index,u=n.roots,s=new t(r,(0,i.Z)({},gt,!0));if(s._roots=u,s._isPacked=!0,o){var c=r.getIndex();if(null===c){var f=new e.TlE(n.index,1,!1);r.setIndex(f)}else c.array!==a&&(c.array.set(a),c.needsUpdate=!0)}return s}}]),(0,a.Z)(t,[{key:"traverse",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._isPacked){var r=function n(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=2*r,s=o[u+15];if(s){var c=i[r+6],f=o[u+14];t(a,s,new Float32Array(e,4*r,6),c,f)}else{var l=r+8,v=i[r+6],d=i[r+7];t(a,s,new Float32Array(e,4*r,6),d,!1),n(l,a+1),n(v,a+1)}},e=this._roots[n],i=new Uint32Array(e),o=new Uint16Array(e);r(0)}else{var a=function n(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!!r.count;i?t(e,i,r.boundingData,r.offset,r.count):(t(e,i,r.boundingData,r.splitAxis,!!r.continueGeneration),r.left&&n(r.left,e+1),r.right&&n(r.right,e+1))};a(this._roots[n])}}},{key:"raycast",value:function(t,n,r,e){var i,o=this._isPacked,a=ht(this._roots);try{for(a.s();!(i=a.n()).done;){var u=i.value;o?(lt(u),nt(0,t,n,r,e)):J(u,t,n,r,e)}}catch(s){a.e(s)}finally{a.f()}o&&vt()}},{key:"raycastFirst",value:function(t,n,r){var e,i=this._isPacked,o=null,a=ht(this._roots);try{for(a.s();!(e=a.n()).done;){var u=e.value,s=void 0;i?(lt(u),s=rt(0,t,n,r)):s=K(u,t,n,r),null!=s&&(null==o||s.distance<o.distance)&&(o=s)}}catch(c){a.e(c)}finally{a.f()}return i&&vt(),o}},{key:"intersectsGeometry",value:function(t,n,r){var e,i=this._isPacked,o=!1,a=ht(this._roots);try{for(a.s();!(e=a.n()).done;){var u=e.value;if(i?(lt(u),o=it(0,t,n,r)):o=Q(u,t,n,r),o)break}}catch(s){a.e(s)}finally{a.f()}return i&&vt(),o}},{key:"shapecast",value:function(t,n){var r,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this._isPacked,a=!1,u=ht(this._roots);try{for(u.s();!(r=u.n()).done;){var s=r.value;if(o?(lt(s),a=et(0,t,n,e,i)):a=Y(s,t,n,e,i),a)break}}catch(c){u.e(c)}finally{u.f()}return o&&vt(),a}},{key:"intersectsBox",value:function(t,n,r){return mt.set(n.min,n.max,r),mt.update(),this.shapecast(t,(function(t){return mt.intersectsBox(t)}),(function(t){return mt.intersectsTriangle(t)}))}},{key:"intersectsSphere",value:function(t,n){return this.shapecast(t,(function(t){return n.intersectsBox(t)}),(function(t){return F(n,t)}))}},{key:"closestPointToGeometry",value:function(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;n.boundingBox||n.computeBoundingBox(),mt.set(n.boundingBox.min,n.boundingBox.max,r),mt.update();var u=n.attributes.position,s=n.index,c=null,f=null;e&&(c=bt),i&&(f=Pt);var l=1/0;return this.shapecast(t,(function(t,n,r){return r<l&&r<a}),(function(t){for(var n=t.sphere,a=0,v=s.count;a<v;a+=3){D(wt,a,s,u),wt.a.applyMatrix4(r),wt.b.applyMatrix4(r),wt.c.applyMatrix4(r),wt.sphere.setFromPoints(wt.points);var d=wt.sphere;if(!(d.center.distanceTo(n.center)-d.radius-n.radius>l)){wt.update();var h=t.distanceToTriangle(wt,c,f);if(h<l&&(e&&e.copy(c),i&&i.copy(f),l=h),h<o)return!0}}return!1}),(function(t){return mt.distanceToBox(t,Math.min(l,a))})),l}},{key:"distanceToGeometry",value:function(t,n,r,e,i){return this.closestPointToGeometry(t,n,r,null,null,e,i)}},{key:"closestPointToPoint",value:function(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=1/0;return this.shapecast(t,(function(t,n,r){return r<o&&r<i}),(function(t){t.closestPointToPoint(n,xt);var i=n.distanceTo(xt);return i<o&&(r&&r.copy(xt),o=i),i<e}),(function(t){return t.distanceToPoint(n)})),o}},{key:"distanceToPoint",value:function(t,n,r,e){return this.closestPointToPoint(t,n,null,r,e)}}]),t}();function At(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,e=(0,P.Z)(t);if(n){var i=(0,P.Z)(this).constructor;r=Reflect.construct(e,arguments,i)}else r=e.apply(this,arguments);return(0,b.Z)(this,r)}}var Bt=new e.nls({color:65416,transparent:!0,opacity:.3}),Ft=(new e.GQ).geometry,zt=new e.ZzF,Mt=function(t){(0,w.Z)(r,t);var n=At(r);function r(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,o.Z)(this,r),(e=n.call(this,"MeshBVHRootVisualizer")).depth=i,e._oldDepth=-1,e._mesh=t,e._boundsTree=null,e._group=a,e.update(),e}return(0,a.Z)(r,[{key:"update",value:function(){var t=this;this._oldDepth=this.depth,this._boundsTree=this._mesh.geometry.boundsTree;var n=0;for(this._boundsTree&&this._boundsTree.traverse((function(r,i,o,a,u){var c=i||u;if(!(r>=t.depth)&&(r===t.depth-1||c)){var f=n<t.children.length?t.children[n]:null;f||((f=new e.ejS(Ft,Bt)).raycast=function(){return[]},t.add(f)),n++,s(o,zt),zt.getCenter(f.position),f.scale.subVectors(zt.max,zt.min).multiplyScalar(.5),0===f.scale.x&&(f.scale.x=Number.EPSILON),0===f.scale.y&&(f.scale.y=Number.EPSILON),0===f.scale.z&&(f.scale.z=Number.EPSILON)}}));this.children.length>n;)this.remove(this.children.pop())}}]),r}(e.ZAu),Zt=(e.ZAu,new e.zHn),St=new e.yGw,Dt=e.Kj0.prototype.raycast;function kt(t,n){if(this.geometry.boundsTree){if(void 0===this.material)return;if(St.getInverse(this.matrixWorld),Zt.copy(t.ray).applyMatrix4(St),!0===t.firstHitOnly){var r=this.geometry.boundsTree.raycastFirst(this,t,Zt);r&&n.push(r)}else this.geometry.boundsTree.raycast(this,t,Zt,n)}else Dt.call(this,t,n)}function _t(t){return this.boundsTree=new Tt(this,t),this.boundsTree}}}]);