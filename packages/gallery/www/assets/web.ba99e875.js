import{W as t}from"./index.fd7201a9.js";import"./vendor.40ddfb4b.js";import"./_app.e67b0e96.js";import"./index.b0bd5cc1.js";import"./selector.e2ee45bf.js";import"./index.1d867f8f.js";import"./service.0737f8c0.js";import"./upload.8895077e.js";import"./feathers.42c2841d.js";import"./selector.d1cb6f6a.js";import"./service.d8de8161.js";import"./selector.8a0da25a.js";import"./Slide.1e39d9a9.js";import"./Paper.24cff5e5.js";import"./capitalize.f4eb3e2e.js";import"./Typography.9d0f0940.js";import"./Modal.c801ca2c.js";import"./Dialog.c787f71e.js";import"./Backdrop.9ef065d7.js";import"./Button.31285e4e.js";import"./Box.cb35bf4d.js";import"./CardMedia.d28b7db0.js";import"./makeStyles.dc74902c.js";import"./Avatar.073c615c.js";function e(t){const e=t.split("/").filter((t=>"."!==t)),r=[];return e.forEach((t=>{".."===t&&r.length>0&&".."!==r[r.length-1]?r.pop():r.push(t)})),r.join("/")}class r extends t{constructor(){super(...arguments),this.DB_VERSION=1,this.DB_NAME="Disc",this._writeCmds=["add","put","delete"]}async initDb(){if(void 0!==this._db)return this._db;if(!("indexedDB"in window))throw this.unavailable("This browser doesn't support IndexedDB");return new Promise(((t,e)=>{const i=indexedDB.open(this.DB_NAME,this.DB_VERSION);i.onupgradeneeded=r.doUpgrade,i.onsuccess=()=>{this._db=i.result,t(i.result)},i.onerror=()=>e(i.error),i.onblocked=()=>{console.warn("db blocked")}}))}static doUpgrade(t){const e=t.target.result;switch(t.oldVersion){case 0:case 1:default:e.objectStoreNames.contains("FileStorage")&&e.deleteObjectStore("FileStorage");e.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}}async dbRequest(t,e){const r=-1!==this._writeCmds.indexOf(t)?"readwrite":"readonly";return this.initDb().then((i=>new Promise(((o,s)=>{const a=i.transaction(["FileStorage"],r).objectStore("FileStorage")[t](...e);a.onsuccess=()=>o(a.result),a.onerror=()=>s(a.error)}))))}async dbIndexRequest(t,e,r){const i=-1!==this._writeCmds.indexOf(e)?"readwrite":"readonly";return this.initDb().then((o=>new Promise(((s,a)=>{const d=o.transaction(["FileStorage"],i).objectStore("FileStorage").index(t)[e](...r);d.onsuccess=()=>s(d.result),d.onerror=()=>a(d.error)}))))}getPath(t,e){const r=void 0!==e?e.replace(/^[/]+|[/]+$/g,""):"";let i="";return void 0!==t&&(i+="/"+t),""!==e&&(i+="/"+r),i}async clear(){(await this.initDb()).transaction(["FileStorage"],"readwrite").objectStore("FileStorage").clear()}async readFile(t){const e=this.getPath(t.directory,t.path),r=await this.dbRequest("get",[e]);if(void 0===r)throw Error("File does not exist.");return{data:r.content?r.content:""}}async writeFile(t){const e=this.getPath(t.directory,t.path),r=t.data,i=t.recursive,o=await this.dbRequest("get",[e]);if(o&&"directory"===o.type)throw"The supplied path is a directory.";const s=t.encoding,a=e.substr(0,e.lastIndexOf("/"));if(void 0===await this.dbRequest("get",[a])){const e=a.indexOf("/",1);if(-1!==e){const r=a.substr(e);await this.mkdir({path:r,directory:t.directory,recursive:i})}}const d=Date.now(),c={path:e,folder:a,type:"file",size:r.length,ctime:d,mtime:d,content:!s&&r.indexOf(",")>=0?r.split(",")[1]:r};return await this.dbRequest("put",[c]),{uri:c.path}}async appendFile(t){const e=this.getPath(t.directory,t.path);let r=t.data;const i=e.substr(0,e.lastIndexOf("/")),o=Date.now();let s=o;const a=await this.dbRequest("get",[e]);if(a&&"directory"===a.type)throw"The supplied path is a directory.";if(void 0===await this.dbRequest("get",[i])){const e=i.indexOf("/",1);if(-1!==e){const r=i.substr(e);await this.mkdir({path:r,directory:t.directory,recursive:!0})}}void 0!==a&&(r=a.content+r,s=a.ctime);const d={path:e,folder:i,type:"file",size:r.length,ctime:s,mtime:o,content:r};await this.dbRequest("put",[d])}async deleteFile(t){const e=this.getPath(t.directory,t.path);if(void 0===await this.dbRequest("get",[e]))throw Error("File does not exist.");if(0!==(await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])).length)throw Error("Folder is not empty.");await this.dbRequest("delete",[e])}async mkdir(t){const e=this.getPath(t.directory,t.path),r=t.recursive,i=e.substr(0,e.lastIndexOf("/")),o=(e.match(/\//g)||[]).length,s=await this.dbRequest("get",[i]),a=await this.dbRequest("get",[e]);if(1===o)throw Error("Cannot create Root directory");if(void 0!==a)throw Error("Current directory does already exist.");if(!r&&2!==o&&void 0===s)throw Error("Parent directory must exist");if(r&&2!==o&&void 0===s){const e=i.substr(i.indexOf("/",1));await this.mkdir({path:e,directory:t.directory,recursive:r})}const d=Date.now(),c={path:e,folder:i,type:"directory",size:0,ctime:d,mtime:d};await this.dbRequest("put",[c])}async rmdir(t){const{path:e,directory:r,recursive:i}=t,o=this.getPath(r,e),s=await this.dbRequest("get",[o]);if(void 0===s)throw Error("Folder does not exist.");if("directory"!==s.type)throw Error("Requested path is not a directory");const a=await this.readdir({path:e,directory:r});if(0!==a.files.length&&!i)throw Error("Folder is not empty");for(const d of a.files){const t=`${e}/${d}`;"file"===(await this.stat({path:t,directory:r})).type?await this.deleteFile({path:t,directory:r}):await this.rmdir({path:t,directory:r,recursive:i})}await this.dbRequest("delete",[o])}async readdir(t){const e=this.getPath(t.directory,t.path),r=await this.dbRequest("get",[e]);if(""!==t.path&&void 0===r)throw Error("Folder does not exist.");return{files:(await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])).map((t=>t.substring(e.length+1)))}}async getUri(t){const e=this.getPath(t.directory,t.path);let r=await this.dbRequest("get",[e]);return void 0===r&&(r=await this.dbRequest("get",[e+"/"])),{uri:(null==r?void 0:r.path)||e}}async stat(t){const e=this.getPath(t.directory,t.path);let r=await this.dbRequest("get",[e]);if(void 0===r&&(r=await this.dbRequest("get",[e+"/"])),void 0===r)throw Error("Entry does not exist.");return{type:r.type,size:r.size,ctime:r.ctime,mtime:r.mtime,uri:r.path}}async rename(t){return this._copy(t,!0)}async copy(t){return this._copy(t,!1)}async requestPermissions(){return{publicStorage:"granted"}}async checkPermissions(){return{publicStorage:"granted"}}async _copy(t,r=!1){let{toDirectory:i}=t;const{to:o,from:s,directory:a}=t;if(!o||!s)throw Error("Both to and from must be provided");i||(i=a);const d=this.getPath(a,s),c=this.getPath(i,o);if(d===c)return;if(function(t,r){t=e(t),r=e(r);const i=t.split("/"),o=r.split("/");return t!==r&&i.every(((t,e)=>t===o[e]))}(d,c))throw Error("To path cannot contain the from path");let n;try{n=await this.stat({path:o,directory:i})}catch(y){const t=o.split("/");t.pop();const e=t.join("/");if(t.length>0){if("directory"!==(await this.stat({path:e,directory:i})).type)throw new Error("Parent directory of the to path is a file")}}if(n&&"directory"===n.type)throw new Error("Cannot overwrite a directory with a file");const h=await this.stat({path:s,directory:a}),p=async(t,e,r)=>{const o=this.getPath(i,t),s=await this.dbRequest("get",[o]);s.ctime=e,s.mtime=r,await this.dbRequest("put",[s])},l=h.ctime?h.ctime:Date.now();switch(h.type){case"file":{const t=await this.readFile({path:s,directory:a});return r&&await this.deleteFile({path:s,directory:a}),await this.writeFile({path:o,directory:i,data:t.data}),void(r&&await p(o,l,h.mtime))}case"directory":{if(n)throw Error("Cannot move a directory over an existing object");try{await this.mkdir({path:o,directory:i,recursive:!1}),r&&await p(o,l,h.mtime)}catch(y){}const t=(await this.readdir({path:s,directory:a})).files;for(const e of t)await this._copy({from:`${s}/${e}`,to:`${o}/${e}`,directory:a,toDirectory:i},r);r&&await this.rmdir({path:s,directory:a})}}}}r._debug=!0;export{r as FilesystemWeb};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLmJhOTllODc1LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci9maWxlc3lzdGVtL2Rpc3QvZXNtL3dlYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXZWJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuZnVuY3Rpb24gcmVzb2x2ZShwYXRoKSB7XG4gICAgY29uc3QgcG9zaXggPSBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gJy4nKTtcbiAgICBjb25zdCBuZXdQb3NpeCA9IFtdO1xuICAgIHBvc2l4LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtID09PSAnLi4nICYmXG4gICAgICAgICAgICBuZXdQb3NpeC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICBuZXdQb3NpeFtuZXdQb3NpeC5sZW5ndGggLSAxXSAhPT0gJy4uJykge1xuICAgICAgICAgICAgbmV3UG9zaXgucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdQb3NpeC5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld1Bvc2l4LmpvaW4oJy8nKTtcbn1cbmZ1bmN0aW9uIGlzUGF0aFBhcmVudChwYXJlbnQsIGNoaWxkcmVuKSB7XG4gICAgcGFyZW50ID0gcmVzb2x2ZShwYXJlbnQpO1xuICAgIGNoaWxkcmVuID0gcmVzb2x2ZShjaGlsZHJlbik7XG4gICAgY29uc3QgcGF0aHNBID0gcGFyZW50LnNwbGl0KCcvJyk7XG4gICAgY29uc3QgcGF0aHNCID0gY2hpbGRyZW4uc3BsaXQoJy8nKTtcbiAgICByZXR1cm4gKHBhcmVudCAhPT0gY2hpbGRyZW4gJiZcbiAgICAgICAgcGF0aHNBLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBwYXRoc0JbaW5kZXhdKSk7XG59XG5leHBvcnQgY2xhc3MgRmlsZXN5c3RlbVdlYiBleHRlbmRzIFdlYlBsdWdpbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuREJfVkVSU0lPTiA9IDE7XG4gICAgICAgIHRoaXMuREJfTkFNRSA9ICdEaXNjJztcbiAgICAgICAgdGhpcy5fd3JpdGVDbWRzID0gWydhZGQnLCAncHV0JywgJ2RlbGV0ZSddO1xuICAgIH1cbiAgICBhc3luYyBpbml0RGIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoJ2luZGV4ZWREQicgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy51bmF2YWlsYWJsZShcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgSW5kZXhlZERCXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4odGhpcy5EQl9OQU1FLCB0aGlzLkRCX1ZFUlNJT04pO1xuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBGaWxlc3lzdGVtV2ViLmRvVXBncmFkZTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RiID0gcmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgcmVxdWVzdC5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdkYiBibG9ja2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGRvVXBncmFkZShldmVudCkge1xuICAgICAgICBjb25zdCBldmVudFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgZGIgPSBldmVudFRhcmdldC5yZXN1bHQ7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQub2xkVmVyc2lvbikge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmIChkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCdGaWxlU3RvcmFnZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScsIHsga2V5UGF0aDogJ3BhdGgnIH0pO1xuICAgICAgICAgICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KCdieV9mb2xkZXInLCAnZm9sZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZGJSZXF1ZXN0KGNtZCwgYXJncykge1xuICAgICAgICBjb25zdCByZWFkRmxhZyA9IHRoaXMuX3dyaXRlQ21kcy5pbmRleE9mKGNtZCkgIT09IC0xID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0RGIoKS50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR4ID0gY29ubi50cmFuc2FjdGlvbihbJ0ZpbGVTdG9yYWdlJ10sIHJlYWRGbGFnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IHN0b3JlW2NtZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZGJJbmRleFJlcXVlc3QoaW5kZXhOYW1lLCBjbWQsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcmVhZEZsYWcgPSB0aGlzLl93cml0ZUNtZHMuaW5kZXhPZihjbWQpICE9PSAtMSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdERiKCkudGhlbigoY29ubikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCByZWFkRmxhZyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmluZGV4KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxID0gaW5kZXhbY21kXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9ICgpID0+IHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRQYXRoKGRpcmVjdG9yeSwgdXJpUGF0aCkge1xuICAgICAgICBjb25zdCBjbGVhbmVkVXJpUGF0aCA9IHVyaVBhdGggIT09IHVuZGVmaW5lZCA/IHVyaVBhdGgucmVwbGFjZSgvXlsvXSt8Wy9dKyQvZywgJycpIDogJyc7XG4gICAgICAgIGxldCBmc1BhdGggPSAnJztcbiAgICAgICAgaWYgKGRpcmVjdG9yeSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZnNQYXRoICs9ICcvJyArIGRpcmVjdG9yeTtcbiAgICAgICAgaWYgKHVyaVBhdGggIT09ICcnKVxuICAgICAgICAgICAgZnNQYXRoICs9ICcvJyArIGNsZWFuZWRVcmlQYXRoO1xuICAgICAgICByZXR1cm4gZnNQYXRoO1xuICAgIH1cbiAgICBhc3luYyBjbGVhcigpIHtcbiAgICAgICAgY29uc3QgY29ubiA9IGF3YWl0IHRoaXMuaW5pdERiKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gY29ubi50cmFuc2FjdGlvbihbJ0ZpbGVTdG9yYWdlJ10sICdyZWFkd3JpdGUnKTtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgc3RvcmUuY2xlYXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZCBhIGZpbGUgZnJvbSBkaXNrXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIGZpbGUgcmVhZFxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVhZCBmaWxlIGRhdGEgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgcmVhZEZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICAvLyBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRmlsZSBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogZW50cnkuY29udGVudCA/IGVudHJ5LmNvbnRlbnQgOiAnJyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZSBhIGZpbGUgdG8gZGlzayBpbiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9uIGRldmljZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIHdyaXRlXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBmaWxlIHdyaXRlIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHdyaXRlRmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIGNvbnN0IGRvUmVjdXJzaXZlID0gb3B0aW9ucy5yZWN1cnNpdmU7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAmJiBvY2N1cGllZEVudHJ5LnR5cGUgPT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgJ1RoZSBzdXBwbGllZCBwYXRoIGlzIGEgZGlyZWN0b3J5Lic7XG4gICAgICAgIGNvbnN0IGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IHBhcmVudEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGFyZW50UGF0aF0pKTtcbiAgICAgICAgaWYgKHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YkRpckluZGV4ID0gcGFyZW50UGF0aC5pbmRleE9mKCcvJywgMSk7XG4gICAgICAgICAgICBpZiAoc3ViRGlySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHN1YkRpckluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGFyZW50QXJnUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBkb1JlY3Vyc2l2ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBwYXRoT2JqID0ge1xuICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgIGZvbGRlcjogcGFyZW50UGF0aCxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgIHNpemU6IGRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgY3RpbWU6IG5vdyxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgICAgICBjb250ZW50OiAhZW5jb2RpbmcgJiYgZGF0YS5pbmRleE9mKCcsJykgPj0gMCA/IGRhdGEuc3BsaXQoJywnKVsxXSA6IGRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdwdXQnLCBbcGF0aE9ial0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXJpOiBwYXRoT2JqLnBhdGgsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0byBhIGZpbGUgb24gZGlzayBpbiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9uIGRldmljZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIGFwcGVuZFxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSB3cml0ZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBhcHBlbmRGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIC8vIGNvbnN0IGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBjdGltZSA9IG5vdztcbiAgICAgICAgY29uc3Qgb2NjdXBpZWRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChvY2N1cGllZEVudHJ5ICYmIG9jY3VwaWVkRW50cnkudHlwZSA9PT0gJ2RpcmVjdG9yeScpXG4gICAgICAgICAgICB0aHJvdyAnVGhlIHN1cHBsaWVkIHBhdGggaXMgYSBkaXJlY3RvcnkuJztcbiAgICAgICAgY29uc3QgcGFyZW50RW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXJlbnRQYXRoXSkpO1xuICAgICAgICBpZiAocGFyZW50RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgc3ViRGlySW5kZXggPSBwYXJlbnRQYXRoLmluZGV4T2YoJy8nLCAxKTtcbiAgICAgICAgICAgIGlmIChzdWJEaXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRBcmdQYXRoID0gcGFyZW50UGF0aC5zdWJzdHIoc3ViRGlySW5kZXgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXJlbnRBcmdQYXRoLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IG9wdGlvbnMuZGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IG9jY3VwaWVkRW50cnkuY29udGVudCArIGRhdGE7XG4gICAgICAgICAgICBjdGltZSA9IG9jY3VwaWVkRW50cnkuY3RpbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICBzaXplOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgICAgIGN0aW1lOiBjdGltZSxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgICAgICBjb250ZW50OiBkYXRhLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW3BhdGhPYmpdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgZmlsZSBmcm9tIGRpc2tcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSBkZWxldGVcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRlbGV0ZWQgZmlsZSBkYXRhIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZUZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZpbGUgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCB0aGlzLmRiSW5kZXhSZXF1ZXN0KCdieV9mb2xkZXInLCAnZ2V0QWxsS2V5cycsIFtcbiAgICAgICAgICAgIElEQktleVJhbmdlLm9ubHkocGF0aCksXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggIT09IDApXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGlzIG5vdCBlbXB0eS4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2RlbGV0ZScsIFtwYXRoXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRpcmVjdG9yeS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgbWtkaXJcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIG1rZGlyIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIG1rZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZG9SZWN1cnNpdmUgPSBvcHRpb25zLnJlY3Vyc2l2ZTtcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gKHBhdGgubWF0Y2goL1xcLy9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICBjb25zdCBwYXJlbnRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhcmVudFBhdGhdKSk7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZGVwdGggPT09IDEpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQ2Fubm90IGNyZWF0ZSBSb290IGRpcmVjdG9yeScpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0N1cnJlbnQgZGlyZWN0b3J5IGRvZXMgYWxyZWFkeSBleGlzdC4nKTtcbiAgICAgICAgaWYgKCFkb1JlY3Vyc2l2ZSAmJiBkZXB0aCAhPT0gMiAmJiBwYXJlbnRFbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1BhcmVudCBkaXJlY3RvcnkgbXVzdCBleGlzdCcpO1xuICAgICAgICBpZiAoZG9SZWN1cnNpdmUgJiYgZGVwdGggIT09IDIgJiYgcGFyZW50RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHBhcmVudFBhdGguaW5kZXhPZignLycsIDEpKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgIHBhdGg6IHBhcmVudEFyZ1BhdGgsXG4gICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICByZWN1cnNpdmU6IGRvUmVjdXJzaXZlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZGlyZWN0b3J5JyxcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBjdGltZTogbm93LFxuICAgICAgICAgICAgbXRpbWU6IG5vdyxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtwYXRoT2JqXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgZGlyZWN0b3J5IHJlbW92ZVxuICAgICAqL1xuICAgIGFzeW5jIHJtZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBwYXRoLCBkaXJlY3RvcnksIHJlY3Vyc2l2ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSB0aGlzLmdldFBhdGgoZGlyZWN0b3J5LCBwYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtmdWxsUGF0aF0pKTtcbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ2RpcmVjdG9yeScpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignUmVxdWVzdGVkIHBhdGggaXMgbm90IGEgZGlyZWN0b3J5Jyk7XG4gICAgICAgIGNvbnN0IHJlYWREaXJSZXN1bHQgPSBhd2FpdCB0aGlzLnJlYWRkaXIoeyBwYXRoLCBkaXJlY3RvcnkgfSk7XG4gICAgICAgIGlmIChyZWFkRGlyUmVzdWx0LmZpbGVzLmxlbmd0aCAhPT0gMCAmJiAhcmVjdXJzaXZlKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBpcyBub3QgZW1wdHknKTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZWFkRGlyUmVzdWx0LmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeVBhdGggPSBgJHtwYXRofS8ke2VudHJ5fWA7XG4gICAgICAgICAgICBjb25zdCBlbnRyeU9iaiA9IGF3YWl0IHRoaXMuc3RhdCh7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICAgICAgaWYgKGVudHJ5T2JqLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZSh7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ybWRpcih7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5LCByZWN1cnNpdmUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2RlbGV0ZScsIFtmdWxsUGF0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGZpbGVzIGZyb20gdGhlIGRpcmVjdG9yeSAobm90IHJlY3Vyc2l2ZSlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlYWRkaXIgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZWFkZGlyIGRpcmVjdG9yeSBsaXN0aW5nIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHJlYWRkaXIob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChvcHRpb25zLnBhdGggIT09ICcnICYmIGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5kYkluZGV4UmVxdWVzdCgnYnlfZm9sZGVyJywgJ2dldEFsbEtleXMnLCBbSURCS2V5UmFuZ2Uub25seShwYXRoKV0pO1xuICAgICAgICBjb25zdCBuYW1lcyA9IGVudHJpZXMubWFwKGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGUuc3Vic3RyaW5nKHBhdGgubGVuZ3RoICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBmaWxlczogbmFtZXMgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGZ1bGwgRmlsZSBVUkkgZm9yIGEgcGF0aCBhbmQgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBzdGF0IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSBzdGF0IHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIGdldFVyaShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGggKyAnLyddKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVyaTogKGVudHJ5ID09PSBudWxsIHx8IGVudHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbnRyeS5wYXRoKSB8fCBwYXRoLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gZGF0YSBhYm91dCBhIGZpbGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHN0YXQgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBmaWxlIHN0YXQgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgc3RhdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGggKyAnLyddKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRW50cnkgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBlbnRyeS50eXBlLFxuICAgICAgICAgICAgc2l6ZTogZW50cnkuc2l6ZSxcbiAgICAgICAgICAgIGN0aW1lOiBlbnRyeS5jdGltZSxcbiAgICAgICAgICAgIG10aW1lOiBlbnRyeS5tdGltZSxcbiAgICAgICAgICAgIHVyaTogZW50cnkucGF0aCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuYW1lIGEgZmlsZSBvciBkaXJlY3RvcnlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlbmFtZSBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlbmFtZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyByZW5hbWUob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29weShvcHRpb25zLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSBhIGZpbGUgb3IgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBjb3B5IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgY29weSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBjb3B5KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvcHkob3B0aW9ucywgZmFsc2UpO1xuICAgIH1cbiAgICBhc3luYyByZXF1ZXN0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiB7IHB1YmxpY1N0b3JhZ2U6ICdncmFudGVkJyB9O1xuICAgIH1cbiAgICBhc3luYyBjaGVja1Blcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4geyBwdWJsaWNTdG9yYWdlOiAnZ3JhbnRlZCcgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCBjYW4gcGVyZm9ybSBhIGNvcHkgb3IgYSByZW5hbWVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlbmFtZSBvcGVyYXRpb25cbiAgICAgKiBAcGFyYW0gZG9SZW5hbWUgd2hldGhlciB0byBwZXJmb3JtIGEgcmVuYW1lIG9yIGNvcHkgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBfY29weShvcHRpb25zLCBkb1JlbmFtZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCB7IHRvRGlyZWN0b3J5IH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IHRvLCBmcm9tLCBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnkgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghdG8gfHwgIWZyb20pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdCb3RoIHRvIGFuZCBmcm9tIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyBcInRvXCIgZGlyZWN0b3J5IGlzIHByb3ZpZGVkLCB1c2UgdGhlIFwiZnJvbVwiIGRpcmVjdG9yeVxuICAgICAgICBpZiAoIXRvRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICB0b0RpcmVjdG9yeSA9IGZyb21EaXJlY3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnJvbVBhdGggPSB0aGlzLmdldFBhdGgoZnJvbURpcmVjdG9yeSwgZnJvbSk7XG4gICAgICAgIGNvbnN0IHRvUGF0aCA9IHRoaXMuZ2V0UGF0aCh0b0RpcmVjdG9yeSwgdG8pO1xuICAgICAgICAvLyBUZXN0IHRoYXQgdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgbG9jYXRpb25zIGFyZSBkaWZmZXJlbnRcbiAgICAgICAgaWYgKGZyb21QYXRoID09PSB0b1BhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQYXRoUGFyZW50KGZyb21QYXRoLCB0b1BhdGgpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gcGF0aCBjYW5ub3QgY29udGFpbiB0aGUgZnJvbSBwYXRoJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgdGhlIHN0YXRlIG9mIHRoZSBcInRvXCIgbG9jYXRpb25cbiAgICAgICAgbGV0IHRvT2JqO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdG9PYmogPSBhd2FpdCB0aGlzLnN0YXQoe1xuICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gVG8gbG9jYXRpb24gZG9lcyBub3QgZXhpc3QsIGVuc3VyZSB0aGUgZGlyZWN0b3J5IGNvbnRhaW5pbmcgXCJ0b1wiIGxvY2F0aW9uIGV4aXN0cyBhbmQgaXMgYSBkaXJlY3RvcnlcbiAgICAgICAgICAgIGNvbnN0IHRvUGF0aENvbXBvbmVudHMgPSB0by5zcGxpdCgnLycpO1xuICAgICAgICAgICAgdG9QYXRoQ29tcG9uZW50cy5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IHRvUGF0aCA9IHRvUGF0aENvbXBvbmVudHMuam9pbignLycpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGNvbnRhaW5pbmcgZGlyZWN0b3J5IG9mIHRoZSBcInRvXCIgbG9jYXRpb24gZXhpc3RzXG4gICAgICAgICAgICBpZiAodG9QYXRoQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9QYXJlbnREaXJlY3RvcnkgPSBhd2FpdCB0aGlzLnN0YXQoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiB0b1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRvUGFyZW50RGlyZWN0b3J5LnR5cGUgIT09ICdkaXJlY3RvcnknKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFyZW50IGRpcmVjdG9yeSBvZiB0aGUgdG8gcGF0aCBpcyBhIGZpbGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2Fubm90IG92ZXJ3cml0ZSBhIGRpcmVjdG9yeVxuICAgICAgICBpZiAodG9PYmogJiYgdG9PYmoudHlwZSA9PT0gJ2RpcmVjdG9yeScpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IG92ZXJ3cml0ZSBhIGRpcmVjdG9yeSB3aXRoIGEgZmlsZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgXCJmcm9tXCIgb2JqZWN0IGV4aXN0c1xuICAgICAgICBjb25zdCBmcm9tT2JqID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXQgdGhlIG10aW1lL2N0aW1lIG9mIHRoZSBzdXBwbGllZCBwYXRoXG4gICAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSBhc3luYyAocGF0aCwgY3RpbWUsIG10aW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHRoaXMuZ2V0UGF0aCh0b0RpcmVjdG9yeSwgcGF0aCk7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW2Z1bGxQYXRoXSkpO1xuICAgICAgICAgICAgZW50cnkuY3RpbWUgPSBjdGltZTtcbiAgICAgICAgICAgIGVudHJ5Lm10aW1lID0gbXRpbWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW2VudHJ5XSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN0aW1lID0gZnJvbU9iai5jdGltZSA/IGZyb21PYmouY3RpbWUgOiBEYXRlLm5vdygpO1xuICAgICAgICBzd2l0Y2ggKGZyb21PYmoudHlwZSkge1xuICAgICAgICAgICAgLy8gVGhlIFwiZnJvbVwiIG9iamVjdCBpcyBhIGZpbGVcbiAgICAgICAgICAgIGNhc2UgJ2ZpbGUnOiB7XG4gICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgZmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgaWYgKGRvUmVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbGUgdG8gdGhlIG5ldyBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdG8sXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZpbGUuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBtdGltZS9jdGltZSBvZiBhIHJlbmFtZWQgZmlsZVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVUaW1lKHRvLCBjdGltZSwgZnJvbU9iai5tdGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgcHJvbWlzZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2RpcmVjdG9yeSc6IHtcbiAgICAgICAgICAgICAgICBpZiAodG9PYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBtb3ZlIGEgZGlyZWN0b3J5IG92ZXIgYW4gZXhpc3Rpbmcgb2JqZWN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgdG8gZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogdG8sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIG10aW1lL2N0aW1lIG9mIGEgcmVuYW1lZCBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvUmVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVUaW1lKHRvLCBjdGltZSwgZnJvbU9iai5tdGltZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgY29udGVudHMgb2YgdGhlIGZyb20gbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IChhd2FpdCB0aGlzLnJlYWRkaXIoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgfSkpLmZpbGVzO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZW5hbWUgb2YgY29udGVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSBpdGVtIGZyb20gdGhlIGZyb20gZGlyZWN0b3J5IHRvIHRoZSB0byBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY29weSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBgJHtmcm9tfS8ke2ZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogYCR7dG99LyR7ZmlsZW5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9LCBkb1JlbmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSBvcmlnaW5hbCBmcm9tIGRpcmVjdG9yeVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJtZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbkZpbGVzeXN0ZW1XZWIuX2RlYnVnID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYi5qcy5tYXAiXSwibmFtZXMiOlsicGF0aCIsInBvc2l4Iiwic3BsaXQiLCJmaWx0ZXIiLCJpdGVtIiwibmV3UG9zaXgiLCJmb3JFYWNoIiwibGVuZ3RoIiwicG9wIiwicHVzaCIsImpvaW4iLCJXZWJQbHVnaW4iLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIkRCX1ZFUlNJT04iLCJEQl9OQU1FIiwiX3dyaXRlQ21kcyIsInRoaXMiLCJfZGIiLCJ3aW5kb3ciLCJ1bmF2YWlsYWJsZSIsIlByb21pc2UiLCJyZXNvbHZlMiIsInJlamVjdCIsInJlcXVlc3QiLCJpbmRleGVkREIiLCJvcGVuIiwib251cGdyYWRlbmVlZGVkIiwiRmlsZXN5c3RlbVdlYiIsImRvVXBncmFkZSIsIm9uc3VjY2VzcyIsInJlc3VsdCIsIm9uZXJyb3IiLCJlcnJvciIsIm9uYmxvY2tlZCIsIndhcm4iLCJldmVudCIsImRiIiwidGFyZ2V0Iiwib2xkVmVyc2lvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJjb250YWlucyIsImRlbGV0ZU9iamVjdFN0b3JlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiY3JlYXRlSW5kZXgiLCJjbWQiLCJhcmdzIiwicmVhZEZsYWciLCJpbmRleE9mIiwiaW5pdERiIiwidGhlbiIsImNvbm4iLCJyZXEiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiaW5kZXhOYW1lIiwiaW5kZXgiLCJnZXRQYXRoIiwiZGlyZWN0b3J5IiwidXJpUGF0aCIsImNsZWFuZWRVcmlQYXRoIiwicmVwbGFjZSIsImZzUGF0aCIsImNsZWFyIiwib3B0aW9ucyIsImVudHJ5IiwiZGJSZXF1ZXN0IiwiRXJyb3IiLCJkYXRhIiwiY29udGVudCIsImRvUmVjdXJzaXZlIiwicmVjdXJzaXZlIiwib2NjdXBpZWRFbnRyeSIsInR5cGUiLCJlbmNvZGluZyIsInBhcmVudFBhdGgiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInN1YkRpckluZGV4IiwicGFyZW50QXJnUGF0aCIsIm1rZGlyIiwibm93IiwiRGF0ZSIsInBhdGhPYmoiLCJmb2xkZXIiLCJzaXplIiwiY3RpbWUiLCJtdGltZSIsInVyaSIsImRiSW5kZXhSZXF1ZXN0IiwiSURCS2V5UmFuZ2UiLCJvbmx5IiwiZGVwdGgiLCJtYXRjaCIsInBhcmVudEVudHJ5IiwiZnVsbFBhdGgiLCJyZWFkRGlyUmVzdWx0IiwicmVhZGRpciIsImZpbGVzIiwiZW50cnkyIiwiZW50cnlQYXRoIiwic3RhdCIsImRlbGV0ZUZpbGUiLCJybWRpciIsIm1hcCIsImUiLCJzdWJzdHJpbmciLCJfY29weSIsInB1YmxpY1N0b3JhZ2UiLCJkb1JlbmFtZSIsInRvRGlyZWN0b3J5IiwidG8iLCJmcm9tIiwiZnJvbURpcmVjdG9yeSIsImZyb21QYXRoIiwidG9QYXRoIiwicGFyZW50IiwiY2hpbGRyZW4iLCJyZXNvbHZlIiwicGF0aHNBIiwicGF0aHNCIiwiZXZlcnkiLCJ2YWx1ZSIsImlzUGF0aFBhcmVudCIsInRvT2JqIiwidG9QYXRoQ29tcG9uZW50cyIsInRvUGF0aDIiLCJmcm9tT2JqIiwidXBkYXRlVGltZSIsImFzeW5jIiwiY3RpbWUyIiwiZmlsZSIsInJlYWRGaWxlIiwid3JpdGVGaWxlIiwiY29udGVudHMiLCJmaWxlbmFtZSIsIl9kZWJ1ZyJdLCJtYXBwaW5ncyI6Im90QkFDQSxXQUFpQkEsU0FDUEMsRUFBUUQsRUFBS0UsTUFBTSxLQUFLQyxXQUF3QixNQUFUQyxJQUN2Q0MsRUFBVyxZQUNYQyxhQUNXLE9BQVRGLEdBQ0FDLEVBQVNFLE9BQVMsR0FDZ0IsT0FBbENGLEVBQVNBLEVBQVNFLE9BQVMsS0FDbEJDLFFBR0FDLEtBQUtMLE1BR2ZDLEVBQVNLLEtBQUssS0FVbEIsZ0JBQTRCQyxFQUMvQkMsdUJBQ2FDLGdCQUNKQyxXQUFhLE9BQ2JDLFFBQVUsWUFDVkMsV0FBYSxDQUFDLE1BQU8sTUFBTyxpQ0FHaEIsSUFBYkMsS0FBS0MsV0FDRUQsS0FBS0MsdUJBRUtDLGNBQ1hGLEtBQUtHLFlBQVksaURBRXBCLElBQUlDLFNBQVEsQ0FBQ0MsRUFBU0MsV0FDbkJDLEVBQVVDLFVBQVVDLEtBQUtULEtBQUtGLFFBQVNFLEtBQUtILGNBQzFDYSxnQkFBa0JDLEVBQWNDLFlBQ2hDQyxVQUFZLFVBQ1haLElBQU1NLEVBQVFPLFNBQ1hQLEVBQVFPLFdBRVpDLFFBQVUsSUFB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
